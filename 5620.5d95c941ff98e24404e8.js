(self.webpackChunkudonarium_lily=self.webpackChunkudonarium_lily||[]).push([[5620],{5620:function(Ze,Je,Qe){Qe(4656),Opal.modules["i18n/backend/fallbacks"]=function(e){function X(M,i){return"number"==typeof M&&"number"==typeof i?M-i:M["$-"](i)}var i,m,j,w,K,A,Y,L=[],r=e.nil,P=e.$$$,c=e.$$,N=e.module,$=e.truthy,d=e.send,B=e.send2,t=e.hash2;return i=L,Y=[A=N(L[0],"I18n")].concat(i),e.class_variable_set(Y[0],"@@fallbacks",r),m=e.get_singleton_class(A),K=[m].concat(Y),e.def(m,"$fallbacks",j=function(){var q,n,b;return e.class_variable_set(K[1],"@@fallbacks",$(b=null==(q=K[1].$$cvars["@@fallbacks"])?r:q)?b:P(P(c(K,"I18n"),"Locale"),"Fallbacks").$new()),$(n=c(K,"Thread").$current()["$[]"]("i18n_fallbacks"))?n:null==(q=K[1].$$cvars["@@fallbacks"])?r:q},j.$$arity=0),e.def(m,"$fallbacks=",w=function(q){var z,n;return e.class_variable_set(K[1],"@@fallbacks",$(q["$is_a?"](c(K,"Array")))?P(P(c(K,"I18n"),"Locale"),"Fallbacks").$new(q):q),n=["i18n_fallbacks",null==(z=K[1].$$cvars["@@fallbacks"])?r:z],d(c(K,"Thread").$current(),"[]=",e.to_a(n)),n[X(n.length,1)]},w.$$arity=1),void function(m,k){var j=[N(m,"Backend")].concat(k);!function(w,V){var b,n,v,u,q=N(w,"Fallbacks"),z=[q].concat(V);e.def(q,"$translate",b=function(R,h,x){try{var g,E=b.$$p,o=this,_=r,l=r,T=r,f=r,S=r,a=r;for(E&&(b.$$p=null),S=0,a=arguments.length,f=new Array(a);S<a;S++)f[S]=arguments[S];return null==x&&(x=c(z,"EMPTY_HASH")),!$(x.$fetch("fallback",!0))||$(x["$[]"]("fallback_in_progress"))?B(o,e.find_super_dispatcher(o,"translate",b,!1,!0),"translate",f,E):($(x["$[]"]("default"))&&(_=o["$extract_non_symbol_default!"](x)),l=x.$merge(t(["fallback_in_progress"],{fallback_in_progress:!0})),d(c(z,"I18n").$fallbacks()["$[]"](R),"each",[],((g=function(G){var Q,Z=null==g.$$s?this:g.$$s;null==G&&(G=r);try{return d(Z,"catch",["exception"],((Q=function(){var ue=null==Q.$$s?this:Q.$$s,ye=r;if(ye=B(ue,e.find_iter_super_dispatcher(ue,"translate",Q.$$def||g.$$def||b,!1,!1),"translate",[G,h,l],null),$(ye["$nil?"]()))return r;$(R.$to_s()["$!="](G.$to_s()))&&ue.$on_fallback(R,G,h,x),e.ret(ye)}).$$s=Z,Q.$$arity=0,Q))}catch(ae){if(!e.rescue(ae,[P(c(z,"I18n"),"InvalidLocale")]))throw ae;try{return r}finally{e.pop_exception()}}}).$$s=o,g.$$arity=1,g)),$($(T=x["$key?"]("default"))?x["$[]"]("default")["$nil?"]():T)?r:$(_)?B(o,e.find_super_dispatcher(o,"translate",b,!1,!0),"translate",[R,r,x.$merge(t(["default"],{default:_}))],null):o.$throw("exception",P(c(z,"I18n"),"MissingTranslation").$new(R,h,x)))}catch(p){if(p===e.returner)return p.$v;throw p}},b.$$arity=-3),e.def(q,"$extract_non_symbol_default!",n=function(R){var h,E,g=r,U=r;return g=[R["$[]"]("default")].$flatten(),E=d(g,"detect",[],((h=function(_){return null==_&&(_=r),_["$is_a?"](c(z,"Symbol"))["$!"]()}).$$s=this,h.$$arity=1,h)),$(E)&&(U=["default",g["$[]"](0,g.$index(E))],d(R,"[]=",e.to_a(U)),X(U.length,1)),E},n.$$arity=1),e.def(q,"$exists?",v=function(R,h,x){try{var g,E=v.$$p,o=this,_=r,l=r,T=r;for(E&&(v.$$p=null),l=0,T=arguments.length,_=new Array(T);l<T;l++)_[l]=arguments[l];return null==x&&(x=c(z,"EMPTY_HASH")),$(x.$fetch("fallback",!0))?(d(c(z,"I18n").$fallbacks()["$[]"](R),"each",[],((g=function(S){var a=null==g.$$s?this:g.$$s;null==S&&(S=r);try{if(!$(B(a,e.find_iter_super_dispatcher(a,"exists?",g.$$def||v,!1,!1),"exists?",[S,h],null)))return r;e.ret(!0)}catch(p){if(!e.rescue(p,[P(c(z,"I18n"),"InvalidLocale")]))throw p;try{return r}finally{e.pop_exception()}}}).$$s=o,g.$$arity=1,g)),!1):B(o,e.find_super_dispatcher(o,"exists?",v,!1,!0),"exists?",_,E)}catch(f){if(f===e.returner)return f.$v;throw f}},v.$$arity=-3),q.$private(),e.def(q,"$on_fallback",u=function(R,h,x,g){return r},u.$$arity=4)}(j[0],j)}(Y[0],Y)},Opal.modules["bcdice/randomizer"]=function(e){function X(m,k){return"number"==typeof m&&"number"==typeof k?m>k:m["$>"](k)}function O(m,k){return"number"==typeof m&&"number"==typeof k?m+k:m["$+"](k)}function L(m,k){return"number"==typeof m&&"number"==typeof k?m<=k:m["$<="](k)}function r(m,k){return"number"==typeof m&&"number"==typeof k?m-k:m["$-"](k)}function P(m,k){return"number"==typeof m&&"number"==typeof k?m*k:m["$*"](k)}var k,q,n,v,u,y,R,h,x,g,E,U,o,z,b,j,$=[],d=e.nil,B=e.$$$,t=e.$$,i=e.klass,A=e.truthy,Y=e.send;return k=$,q=j=[(0,e.module)($[0],"BCDice")].concat(k),z=i(j[0],null,"Randomizer"),b=[z].concat(q),z.$$prototype.rand_results=z.$$prototype.detailed_rand_results=d,e.const_set(b[0],"UPPER_LIMIT_DICE_TIMES",200),e.const_set(b[0],"UPPER_LIMIT_DICE_SIDES",1e3),e.const_set(b[0],"UPPER_LIMIT_RANDS",1e4),e.def(z,"$initialize",n=function(){return this.rand_results=[],this.detailed_rand_results=[]},n.$$arity=0),z.$attr_reader("rand_results"),z.$attr_reader("detailed_rand_results"),e.const_set(b[0],"DetailedRandResult",t(b,"Struct").$new("kind","sides","value")),e.def(z,"$roll_barabara",v=function(l,T){var f,a,S=this;return A(X(O(S.rand_results.$size(),l),t(b,"UPPER_LIMIT_RANDS")))&&S.$raise(t(b,"TooManyRandsError")),A(A(a=L(l,0))?a:X(l,t(b,"UPPER_LIMIT_DICE_TIMES")))?[]:Y(t(b,"Array"),"new",[l],((f=function(){return(null==f.$$s?this:f.$$s).$roll_once(T)}).$$s=S,f.$$arity=0,f))},v.$$arity=2),e.def(z,"$roll_sum",u=function(l,T){return this.$roll_barabara(l,T).$sum()},u.$$arity=2),e.def(z,"$roll_once",y=function(l){var f,S=d;return A(A(f=L(l,0))?f:X(l,t(b,"UPPER_LIMIT_DICE_SIDES")))?0:(S=this.$rand_inner(l),this.$push_to_detail("normal",l,S),S)},y.$$arity=1),e.def(z,"$roll_index",R=function(l){return r(this.$roll_once(l),1)},R.$$arity=1),e.def(z,"$roll_tens_d10",h=function(){var f,T=d;return(T=this.$rand_inner(10))["$=="](10)&&(T=0),f=P(T,10),this.$push_to_detail("tens_d10",10,f),f},h.$$arity=0),e.def(z,"$roll_d9",x=function(){var T;return T=r(this.$rand_inner(10),1),this.$push_to_detail("d9",10,T),T},x.$$arity=0),e.def(z,"$roll_d66",g=function(l){var T,a,S=d;return S=Y(t(b,"Array"),"new",[2],((T=function(){return(null==T.$$s?this:T.$$s).$roll_once(6)}).$$s=this,T.$$arity=0,T)),a=l,B(t(b,"D66SortType"),"ASC")["$==="](a)?S["$sort!"]():B(t(b,"D66SortType"),"DESC")["$==="](a)&&S["$sort!"]()["$reverse!"](),O(P(S["$[]"](0),10),S["$[]"](1))},g.$$arity=1),z.$private(),e.def(z,"$rand_inner",E=function(l){var f,T=this;return A(function(m,k){return"number"==typeof m&&"number"==typeof k?m>=k:m["$>="](k)}(T.rand_results.$size(),t(b,"UPPER_LIMIT_RANDS")))&&T.$raise(t(b,"TooManyRandsError")),f=T.$random(l),T.rand_results["$<<"]([f,l]),f},E.$$arity=1),e.def(z,"$random",U=function(l){return O(t(b,"Kernel").$rand(l),1)},U.$$arity=1),e.def(z,"$push_to_detail",o=function(l,T,f){var a;return a=t(b,"DetailedRandResult").$new(l,T,f),this.detailed_rand_results.$push(a)},o.$$arity=3),void function(w,V,q){[i(w,V,"TooManyRandsError")].concat(q)}(j[0],t(j,"StandardError"),j)},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var B,A,j,q,z,b,n,w,V,m,M,O=[],L=e.nil,P=e.$$,c=e.module,N=e.klass,$=e.truthy;return B=O,A=M=[c(O[0],"BCDice")].concat(B),j=m=[c(M[0],"DiceTable")].concat(A),w=N(m[0],null,"RollResult"),V=[w].concat(j),w.$$prototype.table_name=w.$$prototype.value=w.$$prototype.body=L,e.def(w,"$initialize",q=function(u,y,R){var h=this;return h.table_name=u,h.value=y,h.body=R},q.$$arity=3),w.$attr_reader("table_name"),w.$attr_reader("value"),w.$attr_reader("body"),e.def(w,"$to_s",z=function(){var u=this;return u.table_name+"("+u.value+") \uff1e "+u.body},z.$$arity=0),e.def(w,"$last_body",b=function(){var u=this;return $(u.body["$is_a?"](P(V,"RollResult")))?u.body.$last_body():u.body},b.$$arity=0),void e.def(w,"$empty?",n=function(){return!1},n.$$arity=0)},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var t,Y,w,z,b,V,q,k,i,L=[],r=e.nil,c=e.$$,N=e.module,$=e.klass,d=e.truthy;return t=L,Y=i=[N(L[0],"BCDice")].concat(t),w=k=[N(i[0],"DiceTable")].concat(Y),V=$(k[0],null,"ChainTable"),q=[V].concat(w),V.$$prototype.times=V.$$prototype.sides=V.$$prototype.items=V.$$prototype.name=r,e.def(V,"$initialize",z=function(v,u,y){var R=this,h=r;return R.name=v,R.items=y.$freeze(),h=/(\d+)D(\d+)/i.$match(u),d(h)||R.$raise(c(q,"ArgumentError"),"Unexpected table type: "+u),R.times=h["$[]"](1).$to_i(),R.sides=h["$[]"](2).$to_i()},z.$$arity=3),void e.def(V,"$roll",b=function(v){var y,R,u=this,h=r;return R=function(B,t){return"number"==typeof B&&"number"==typeof t?B-t:B["$-"](t)}(y=v.$roll_sum(u.times,u.sides),u.times),h=u.items["$[]"](R),d(h["$respond_to?"]("roll"))&&(h=h.$roll(v)),c(q,"RollResult").$new(u.name,y,h)},b.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function L(M,i){return"number"==typeof M&&"number"==typeof i?M-i:M["$-"](i)}var i,k,q,n,v,u,z,b,j,Y,P=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.hash2;return i=P,k=Y=[d(P[0],"BCDice")].concat(i),q=j=[d(Y[0],"DiceTable")].concat(k),z=B(j[0],null,"D66GridTable"),b=[z].concat(q),z.$$prototype.name=z.$$prototype.items=c,e.defs(z,"$from_i18n",n=function(R,h){var g=c;return g=$(b,"I18n").$t(R,t(["locale","raise"],{locale:h,raise:!0})),this.$new(g["$[]"]("name"),g["$[]"]("items"))},n.$$arity=2),e.def(z,"$initialize",v=function(R,h){return this.name=R,this.items=h.$freeze()},v.$$arity=2),void e.def(z,"$roll",u=function(R){var x,g,E,U,o,M;return x=R.$roll_once(6),g=R.$roll_once(6),E=function(M,i){return"number"==typeof M&&"number"==typeof i?M+i:M["$+"](i)}("number"==typeof(M=x)?10*M:M["$*"](10),g),U=L(x,1),o=L(g,1),$(b,"RollResult").$new(this.name,E,this.items["$[]"](U)["$[]"](o))},u.$$arity=1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var B,A,j,q,z,w,V,m,M,O=[],L=e.nil,P=e.$$,c=e.module,N=e.klass,$=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),B=O,A=M=[c(O[0],"BCDice")].concat(B),j=m=[c(M[0],"DiceTable")].concat(A),w=N(m[0],P(m,"D66GridTable"),"D66HalfGridTable"),V=[w].concat(j),e.defs(w,"$from_i18n",q=function(n,v){var y=L;return y=P(V,"I18n").$t(n,$(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2_3"),y["$[]"]("items_4_5_6"))},q.$$arity=2),void e.def(w,"$initialize",z=function(n,v,u){return this.name=n,this.items=[v,v,v,u,u,u].$freeze()},z.$$arity=3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var B,A,j,q,z,w,V,m,M,O=[],L=e.nil,P=e.$$,c=e.module,N=e.klass,$=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),B=O,A=M=[c(O[0],"BCDice")].concat(B),j=m=[c(M[0],"DiceTable")].concat(A),w=N(m[0],P(m,"D66GridTable"),"D66OneThirdTable"),V=[w].concat(j),e.defs(w,"$from_i18n",q=function(n,v){var y=L;return y=P(V,"I18n").$t(n,$(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2"),y["$[]"]("items_3_4"),y["$[]"]("items_5_6"))},q.$$arity=2),void e.def(w,"$initialize",z=function(n,v,u,y){return this.name=n,this.items=[v,v,u,u,y,y].$freeze()},z.$$arity=4)},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var i,k,q,n,v,u,y,z,b,j,Y,r=[],P=e.nil,c=e.$$$,N=e.$$,$=e.module,d=e.klass,B=e.hash2,t=e.truthy;return i=r,k=Y=[$(r[0],"BCDice")].concat(i),q=j=[$(Y[0],"DiceTable")].concat(k),z=d(j[0],null,"D66Table"),b=[z].concat(q),z.$$prototype.sort_type=z.$$prototype.items=z.$$prototype.name=P,e.defs(z,"$from_i18n",n=function(h,x){var U,E=P;return E=N(b,"I18n").$t(h,B(["locale"],{locale:x})),U=N(b,"D66SortType").$const_get(E["$[]"]("d66_sort_type")),this.$new(E["$[]"]("name"),U,E["$[]"]("items"))},n.$$arity=2),e.def(z,"$initialize",v=function(h,x,g){var E=this;return E.name=h,E.sort_type=x,E.items=g.$freeze()},v.$$arity=3),e.def(z,"$roll",u=function(h){var E,_,M,x=this,g=P,U=P,o=P;return g=h.$roll_barabara(2,6),E=x.sort_type,c(N(b,"D66SortType"),"ASC")["$==="](E)?g["$sort!"]():c(N(b,"D66SortType"),"DESC")["$==="](E)&&g["$sort!"]()["$reverse!"](),U=function(M,i){return"number"==typeof M&&"number"==typeof i?M+i:M["$+"](i)}("number"==typeof(M=g["$[]"](0))?10*M:M["$*"](10),g["$[]"](1)),o=t(_=x.items["$[]"](U))?_:x.items["$[]"](U.$to_s()),t(o["$respond_to?"]("roll"))&&(o=o.$roll(h)),N(b,"RollResult").$new(x.name,U,o)},u.$$arity=1),void e.def(z,"$choice",y=function(h){return N(b,"RollResult").$new(this.name,h,this.items["$[]"](h))},y.$$arity=1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){function X(A,Y){return"number"==typeof A&&"number"==typeof Y?A+Y:A["$+"](Y)}var Y,b,u,n,j,V,k,P=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.hash2,M=e.send,i=e.send2;return e.top.$require("bcdice/dice_table/d66_table"),Y=P,j=k=[d(P[0],"BCDice")].concat(Y),b=V=[d(k[0],"DiceTable")].concat(j),[n=B(V[0],$(V,"D66Table"),"D66LeftRangeTable")].concat(b),void e.def(n,"$initialize",u=function(R,h,x){var g,_,o=this;return u.$$p&&(u.$$p=null),_=t([],{}),M(x,"each",[],((g=function(l){function T(f){return l.apply(this,arguments)}return T.toString=function(){return l.toString()},T}(function(l){var f,a,G,T=null==g.$$s?this:g.$$s;return null==l&&(l=c),f=e.to_ary(l),G=null==f[1]?c:f[1],M(null==f[0]?c:f[0],"each",[],((a=function(Q){var ue;return null==Q&&(Q=c),M(G,"each_with_index",[],((ue=function(De,Pe){var Be,me,A;return null==De&&(De=c),null==Pe&&(Pe=c),Be=X("number"==typeof(A=Q)?10*A:A["$*"](10),X(Pe,1)),M(_,"[]=",e.to_a(me=[Be,De])),me[function(A,Y){return"number"==typeof A?A-1:A["$-"](1)}(me.length)]}).$$s=null==a.$$s?this:a.$$s,ue.$$arity=2,ue))}).$$s=T,a.$$arity=1,a))})).$$s=o,g.$$arity=1,g)),i(o,e.find_super_dispatcher(o,"initialize",u,!1,!0),"initialize",[R,h,_],null)},u.$$arity=3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var i,k,q,n,v,z,b,j,Y,P=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.truthy;return i=P,k=Y=[d(P[0],"BCDice")].concat(i),q=j=[d(Y[0],"DiceTable")].concat(k),z=B(j[0],null,"D66ParityTable"),b=[z].concat(q),z.$$prototype.odd=z.$$prototype.even=z.$$prototype.name=c,e.def(z,"$initialize",n=function(y,R,h){var x=this;return x.name=y,x.odd=R.$freeze(),x.even=h.$freeze()},n.$$arity=3),void e.def(z,"$roll",v=function(y){var x,E,U,M,R=this,h=c;return h=y.$roll_once(6),x=y.$roll_once(6),E=(t(h["$odd?"]())?R.odd:R.even)["$[]"]("number"==typeof(M=x)?M-1:M["$-"](1)),U=function(M,i){return"number"==typeof M&&"number"==typeof i?M+i:M["$+"](i)}(function(M,i){return"number"==typeof M?10*M:M["$*"](10)}(h),x),$(b,"RollResult").$new(R.name,U,E)},v.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var M,m,V,b,n,q,z,K,A,r=[],P=e.nil,N=e.$$,$=e.module,d=e.klass,B=e.send;return M=r,m=A=[$(r[0],"BCDice")].concat(M),V=K=[$(A[0],"DiceTable")].concat(m),q=d(K[0],null,"D66RangeTable"),z=[q].concat(V),q.$$prototype.items=q.$$prototype.name=P,e.def(q,"$initialize",b=function(u,y){return this.name=u,this.items=y.$freeze()},b.$$arity=2),void e.def(q,"$roll",n=function(u){var y,h,x,g,t,R=this,E=P;return h=u.$roll_once(6),x=u.$roll_once(6),g=function(t,M){return"number"==typeof t&&"number"==typeof M?t+M:t["$+"](M)}("number"==typeof(t=h)?10*t:t["$*"](10),x),E=B(R.items,"find",[],((y=function(o){return null==o&&(o=P),o["$[]"](0)["$include?"](g)}).$$s=R,y.$$arity=1,y)),N(z,"RollResult").$new(R.name,g,E["$[]"](1))},n.$$arity=1)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var A,K,z,v,u,y,R,h,x,g,E,U,b,n,w,m,P=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.send,M=e.truthy;return A=P,K=m=[d(P[0],"BCDice")].concat(A),z=w=[d(m[0],"DiceTable")].concat(K),b=B(w[0],null,"RangeTable"),n=[b].concat(z),b.$$prototype.name=b.$$prototype.items=b.$$prototype.num_of_dice=b.$$prototype.num_of_sides=b.$$prototype.formatter=c,e.const_set(n[0],"RollResult",t($(n,"Struct"),"new",["sum","values","content","formatted"],((v=function(){return(null==v.$$s?this:v.$$s).$alias_method("to_s","formatted")}).$$s=b,v.$$arity=0,v))),e.const_set(n[0],"Item",$(n,"Struct").$new("range","content")),e.const_set(n[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(n[0],"DEFAULT_FORMATTER",t(b,"lambda",[],($$2=function(o){function _(l,T){return o.apply(this,arguments)}return _.toString=function(){return o.toString()},_}(function(o,_){return null==$$2.$$s||$$2,null==o&&(o=c),null==_&&(_=c),o.$name()+"("+_.$sum()+") \uff1e "+_.$content()}),$$2.$$s=b,$$2.$$arity=2,$$2))),b.$attr_reader("name"),b.$attr_reader("num_of_dice"),b.$attr_reader("num_of_sides"),e.def(b,"$initialize",u=function(_,l,T){var p,f=u.$$p,S=f||c,a=this,G=c;return f&&(u.$$p=null),f&&(u.$$p=null),a.name=_.$freeze(),a.formatter=M(p=S)?p:$(n,"DEFAULT_FORMATTER"),G=$(n,"DICE_ROLL_METHOD_RE").$match(l),M(G)||a.$raise($(n,"ArgumentError"),a.name+": invalid dice roll method: "+l),a.num_of_dice=G["$[]"](1).$to_i(),a.num_of_sides=G["$[]"](2).$to_i(),a.$store(T)},u.$$arity=3),e.def(b,"$fetch",y=function(_){var l,f,T=this;return f=t(T.items,"find",[],((l=function(a){return null==a&&(a=c),a.$range()["$include?"](_)}).$$s=T,l.$$arity=1,l)),M(f)||T.$raise($(n,"RangeError"),T.name+": value is out of range: "+_),f},y.$$arity=1),e.def(b,"$roll",R=function(_){var f,S,a,i,l=this,T=c;return f=(T=_.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),S=$(n,"RollResult").$new(f,T,l.$fetch(f).$content()),a=[l.formatter["$[]"](l,S)],t(S,"formatted=",e.to_a(a)),"number"==typeof(i=a.length)||i["$-"](1),S},R.$$arity=1),b.$private(),e.def(b,"$store",h=function(_){var l,T,f,a,p,S=this;return a=t(_,"map",[],((l=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),[(null==l.$$s?this:l.$$s).$coerce_to_int_range(Z),Q]}).$$s=S,l.$$arity=2,l)),p=t(a,"sort_by",[],((T=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),Z.$min()}).$$s=S,T.$$arity=2,T)),S.$assert_min_sum_is_covered(p),S.$assert_max_sum_is_covered(p),S.$assert_no_gap_or_overlap_in_ranges(p),S.items=t(p,"map",[],(f=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),$(n,"Item").$new(Z,Q.$freeze()).$freeze()},f.$$s=S,f.$$arity=2,f)).$freeze(),S},h.$$arity=1),e.def(b,"$coerce_to_int_range",x=function(_){var T,f=c;return T=_,$(n,"Integer")["$==="](T)?$(n,"Range").$new(_,_):$(n,"Range")["$==="](T)&&M(M(f=_.$begin()["$is_a?"]($(n,"Integer")))?_.$end()["$is_a?"]($(n,"Integer")):f)?_:this.$raise($(n,"TypeError"),this.name+": "+_+" ("+_.$class()+") must be an Integer or a Range with Integers ")},x.$$arity=1),e.def(b,"$assert_min_sum_is_covered",g=function(_){var T,l=this,f=c;return T=l.num_of_dice,f=_.$first()["$[]"](0),M(f["$include?"](T))||l.$raise($(n,"RangeError"),l.name+": min value ("+T+") is not covered: "+f),l},g.$$arity=1),e.def(b,"$assert_max_sum_is_covered",E=function(_){var T,l=this,f=c;return T=function(i,A){return"number"==typeof i&&"number"==typeof A?i*A:i["$*"](A)}(l.num_of_dice,l.num_of_sides),f=_.$last()["$[]"](0),M(f["$include?"](T))||l.$raise($(n,"RangeError"),l.name+": max value ("+T+") is not covered: "+f),l},E.$$arity=1),void e.def(b,"$assert_no_gap_or_overlap_in_ranges",U=function(_){var l;return t(_,"each_cons",[2],((l=function(S,a){var Q,ae,i,p=null==l.$$s?this:l.$$s,G=c,Z=c;return null==p.name&&(p.name=c),null==S&&(S=c),null==a&&(a=c),G=S["$[]"](0),Z=a["$[]"](0),ae="number"==typeof(i=Q=G.$max())?i+1:i["$+"](1),M(Z["$include?"](Q))&&p.$raise($(n,"RangeError"),p.name+": Range overlap: "+G+" and "+Z),M(Z["$include?"](ae))?c:p.$raise($(n,"RangeError"),p.name+": Range gap: "+G+" and "+Z)}).$$s=this,l.$$arity=2,l)),this},U.$$arity=1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var t,Y,w,n,y,R,h,v,u,q,k,i,L=[],r=e.nil,P=e.$$$,c=e.$$,N=e.module,$=e.klass,d=e.send;return t=L,Y=i=[N(L[0],"BCDice")].concat(t),w=k=[N(i[0],"DiceTable")].concat(Y),n=q=[$(k[0],null,"SaiFicSkillTable")].concat(w),v=$(q[0],null,"Category"),u=[v].concat(n),v.$$prototype.name=r,e.def(v,"$initialize",y=function(g,E,U,o){var _,l=this;return l.name=g,l.skills=d(E.$map(),"with_index",[2],((_=function(T){function f(S,a){return T.apply(this,arguments)}return f.toString=function(){return T.toString()},f}(function(T,f){return null==T&&(T=r),null==f&&(f=r),P(c(u,"SaiFicSkillTable"),"Skill").$new(g,T,U,f,o)})).$$s=l,_.$$arity=2,_)),l.dice=U},y.$$arity=4),e.def(v,"$roll",R=function(g){return this.$skills()["$[]"]("number"==typeof(B=g.$roll_sum(2,6))?B-2:B["$-"](2));var B},R.$$arity=1),e.def(v,"$to_s",h=function(){return this.name},h.$$arity=0),void v.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var B,A,b,u,y,n,j,V,m,M,O=[],L=e.nil,c=e.module,N=e.klass,$=e.hash2;return B=O,A=M=[c(O[0],"BCDice")].concat(B),j=m=[c(M[0],"DiceTable")].concat(A),b=V=[N(m[0],null,"SaiFicSkillTable")].concat(j),[n=N(V[0],null,"Skill")].concat(b),n.$$prototype.s_format=n.$$prototype.category_dice=n.$$prototype.row_dice=n.$$prototype.category_name=n.$$prototype.name=L,e.def(n,"$initialize",u=function(h,x,g,E,U){var o=this;return o.category_name=h,o.name=x,o.category_dice=g,o.row_dice=E,o.s_format=U},u.$$arity=5),e.def(n,"$to_s",y=function(){var h=this;return h.$format(h.s_format,$(["category_dice","row_dice","category_name","skill_name"],{category_dice:h.category_dice,row_dice:h.row_dice,category_name:h.category_name,skill_name:h.name}))},y.$$arity=0),void n.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var Y,j,b,u,y,R,h,x,g,E,n,v,V,k,L=e.top,r=[],P=e.nil,c=e.$$$,N=e.$$,$=e.module,d=e.klass,B=e.hash2,t=e.send,i=e.truthy;return L.$require("bcdice/dice_table/sai_fic_skill_table/category"),L.$require("bcdice/dice_table/sai_fic_skill_table/skill"),Y=r,j=k=[$(r[0],"BCDice")].concat(Y),b=V=[$(k[0],"DiceTable")].concat(j),n=d(V[0],null,"SaiFicSkillTable"),v=[n].concat(b),n.$$prototype.rtt=n.$$prototype.rtt_format=n.$$prototype.rct=n.$$prototype.rct_format=n.$$prototype.rttn=n.$$prototype.rttn_format=n.$$prototype.categories=P,e.defs(n,"$from_i18n",u=function(o,_,l){var T,f,S,a,Q,Z=P;if(null==l)l=B([],{});else if(!l.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(T=l.$$smap.rtt)&&(T=P),null==(f=l.$$smap.rct)&&(f=P),null==(S=l.$$smap.rttn)&&(S=P),Q=(Z=N(v,"I18n").$t("RTT",B(["locale","raise","default"],{locale:_,raise:!1,default:B([],{})})).$merge(N(v,"I18n").$t(o,B(["locale","raise"],{locale:_,raise:!0}))))["$[]"]("items"),Z=t(Z,"select",[],((a=function(ae){function ue(ye,De){return ae.apply(this,arguments)}return ue.toString=function(){return ae.toString()},ue}(function(ae,ue){return null==ae&&(ae=P),null==ue&&(ue=P),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](ae)})).$$s=this,a.$$arity=2,a)),this.$new(Q,e.to_hash(Z).$merge(B(["rtt","rct","rttn"],{rtt:T,rct:f,rttn:S})))},u.$$arity=-3),e.const_set(v[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),e.const_set(v[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),e.const_set(v[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),e.const_set(v[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),e.def(n,"$initialize",y=function(o,_){var l,T,f,S,a,p,G,Z,Q=this;if(null==_)_=B([],{});else if(!_.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(l=_.$$smap.rtt)&&(l=P),null==(T=_.$$smap.rct)&&(T=P),null==(f=_.$$smap.rttn)&&(f=P),null==(S=_.$$smap.rtt_format)&&(S=N(v,"DEFAULT_RTT")),null==(a=_.$$smap.rct_format)&&(a=N(v,"DEFAULT_RCT")),null==(p=_.$$smap.rttn_format)&&(p=N(v,"DEFAULT_RTTN")),null==(G=_.$$smap.s_format)&&(G=N(v,"DEFAULT_S")),Q.categories=t(o.$map(),"with_index",[1],((Z=function(ue,ye){var Pe,Be,me;return null==ue&&(ue=P),null==ye&&(ye=P),Be=null==(Pe=e.to_ary(ue))[0]?P:Pe[0],me=null==Pe[1]?P:Pe[1],c(N(v,"SaiFicSkillTable"),"Category").$new(Be,me,ye,G)}).$$s=Q,Z.$$arity=2,Z.$$has_top_level_mlhs_arg=!0,Z)),Q.rtt=l,Q.rct=T,Q.rttn=f.$to_a(),Q.rtt_format=S,Q.rct_format=a,Q.rttn_format=p},y.$$arity=-2),e.const_set(v[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),n.$attr_reader("categories"),e.def(n,"$roll_command",R=function(o,_){var T,l=this,f=P,S=P,a=P;return i(["RTT",l.rtt]["$include?"](T=_))?l.$format_skill(l.rtt_format,l.$roll_skill(o)):i(["RCT",l.rct]["$include?"](T))?(f=l.$roll_category(o),l.$format(l.rct_format,B(["category_dice","category_name"],{category_dice:f.$dice(),category_name:f.$name()}))):i(i(S=a=N(v,"RTTN").$index(T))?S:a=l.rttn.$index(T))?l.$format_skill(l.rttn_format,l.categories["$[]"](a).$roll(o)):P},R.$$arity=2),e.def(n,"$roll_category",h=function(o){return this.categories["$[]"]("number"==typeof(A=o.$roll_once(6))?A-1:A["$-"](1));var A},h.$$arity=1),e.def(n,"$roll_skill",x=function(o){return this.$roll_category(o).$roll(o)},x.$$arity=1),e.def(n,"$prefixes",g=function(){var o=this;return function(A,Y){return"number"==typeof A&&"number"==typeof Y?A+Y:A["$+"](Y)}(["RTT[1-6]?","RCT",o.rtt,o.rct],o.rttn).$compact()},g.$$arity=0),n.$private(),void e.def(n,"$format_skill",E=function(o,_){return this.$format(o,B(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:_.$category_dice(),row_dice:_.$row_dice(),category_name:_.$category_name(),skill_name:_.$name(),text:_.$to_s()}))},E.$$arity=2)},Opal.modules["bcdice/dice_table/table"]=function(e){var M,m,V,b,n,v,u,q,z,K,A,L=[],r=e.nil,c=e.$$,N=e.module,$=e.klass,d=e.hash2,B=e.truthy;return M=L,m=A=[N(L[0],"BCDice")].concat(M),V=K=[N(A[0],"DiceTable")].concat(m),q=$(K[0],null,"Table"),z=[q].concat(V),q.$$prototype.times=q.$$prototype.sides=q.$$prototype.name=q.$$prototype.items=r,e.defs(q,"$from_i18n",b=function(R,h){var g=r;return g=c(z,"I18n").$t(R,d(["locale"],{locale:h})),this.$new(g["$[]"]("name"),g["$[]"]("type"),g["$[]"]("items"))},b.$$arity=2),e.def(q,"$initialize",n=function(R,h,x){var g=this,E=r;return g.name=R,g.items=x.$freeze(),E=/(\d+)D(\d+)/i.$match(h),B(E)||g.$raise(c(z,"ArgumentError"),"Unexpected table type: "+h),g.times=E["$[]"](1).$to_i(),g.sides=E["$[]"](2).$to_i()},n.$$arity=3),e.def(q,"$roll",v=function(R){var x,h=this;return x=R.$roll_sum(h.times,h.sides),h.$choice(x)},v.$$arity=1),void e.def(q,"$choice",u=function(R){var x,h=this;return x=function(t,M){return"number"==typeof t&&"number"==typeof M?t-M:t["$-"](M)}(R,h.times),c(z,"RollResult").$new(h.name,R,h.items["$[]"](x))},u.$$arity=1)},Opal.modules["bcdice/dice_table"]=function(e){var X=e.top;return X.$require("bcdice/dice_table/roll_result"),X.$require("bcdice/dice_table/chain_table"),X.$require("bcdice/dice_table/d66_grid_table"),X.$require("bcdice/dice_table/d66_half_grid_table"),X.$require("bcdice/dice_table/d66_one_third_table"),X.$require("bcdice/dice_table/d66_left_range_table"),X.$require("bcdice/dice_table/d66_parity_table"),X.$require("bcdice/dice_table/d66_range_table"),X.$require("bcdice/dice_table/d66_table"),X.$require("bcdice/dice_table/range_table"),X.$require("bcdice/dice_table/sai_fic_skill_table"),X.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var $,M,A,B,O=[],c=e.module;return $=O,M=B=[c(O[0],"BCDice")].concat($),A=[c(B[0],"D66SortType")].concat(M),e.const_set(A[0],"NO_SORT","no_sort"),e.const_set(A[0],"ASC","asc"),e.const_set(A[0],"DESC","desc"),void function(t,M){var A=[c(t,"RoundType")].concat(M);e.const_set(A[0],"CEIL","ceil"),e.const_set(A[0],"FLOOR","floor"),e.const_set(A[0],"ROUND","round")}(B[0],B)},Opal.modules["bcdice/translate"]=function(e){var B,A,k,Y,m,M,O=[],L=e.nil,P=e.$$,c=e.module,N=e.hash2;return B=O,A=M=[c(O[0],"BCDice")].concat(B),Y=c(M[0],"Translate"),m=[Y].concat(A),void e.def(Y,"$translate",k=function(j,w){var V,q=this;if(null==q.locale&&(q.locale=L),null==w)w=N([],{});else if(!w.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return V=e.kwrestargs(w,{}),P(m,"I18n").$translate(j,N(["locale","raise"],{locale:q.locale,raise:!0}).$merge(e.to_hash(V)))},k.$$arity=-2)},Opal.modules["bcdice/result"]=function(e){function X(B,t){return"number"==typeof B&&"number"==typeof t?B-t:B["$-"](t)}var t,v,R,h,x,g,E,m,j,w,V,q,z,b,n,k,K,i,L=[],r=e.nil,$=e.klass,d=e.send;return t=L,m=i=[(0,e.module)(L[0],"BCDice")].concat(t),K=[k=$(i[0],null,"Result")].concat(m),k.$$prototype.secret=k.$$prototype.success=k.$$prototype.failure=k.$$prototype.critical=k.$$prototype.fumble=r,[v=e.get_singleton_class(k)].concat(K),e.def(v,"$success",R=function(o){var _;return d(this.$new(),"tap",[],((_=function(T){function f(S){return T.apply(this,arguments)}return f.toString=function(){return T.toString()},f}(function(T){var S=r;return null==T&&(T=r),d(T,"text=",e.to_a(S=[o])),X(S.length,1),d(T,"success=",e.to_a(S=[!0])),S[X(S.length,1)]})).$$s=this,_.$$arity=1,_))},R.$$arity=1),e.def(v,"$failure",h=function(o){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[o])),X(a.length,1),d(f,"failure=",e.to_a(a=[!0])),a[X(a.length,1)]}).$$s=this,_.$$arity=1,_))},h.$$arity=1),e.def(v,"$critical",x=function(o){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[o])),X(a.length,1),d(f,"critical=",e.to_a(a=[!0])),X(a.length,1),d(f,"success=",e.to_a(a=[!0])),a[X(a.length,1)]}).$$s=this,_.$$arity=1,_))},x.$$arity=1),e.def(v,"$fumble",g=function(o){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[o])),X(a.length,1),d(f,"fumble=",e.to_a(a=[!0])),X(a.length,1),d(f,"failure=",e.to_a(a=[!0])),a[X(a.length,1)]}).$$s=this,_.$$arity=1,_))},g.$$arity=1),e.def(v,"$nothing",E=function(){return"nothing"},E.$$arity=0),e.def(k,"$initialize",j=function(u){var y=this;return null==u&&(u=r),y.text=u,y.rands=r,y.detailed_rands=r,y.secret=!1,y.success=!1,y.failure=!1,y.critical=!1,y.fumble=!1},j.$$arity=-1),k.$attr_accessor("text","rands","detailed_rands"),k.$attr_writer("secret","success","failure","critical","fumble"),e.def(k,"$secret?",w=function(){return this.secret},w.$$arity=0),e.def(k,"$success?",V=function(){return this.success},V.$$arity=0),e.def(k,"$failure?",q=function(){return this.failure},q.$$arity=0),e.def(k,"$critical?",z=function(){return this.critical},z.$$arity=0),e.def(k,"$fumble?",b=function(){return this.fumble},b.$$arity=0),void e.def(k,"$condition=",n=function(u){return this.success=u,this.failure=u["$!"]()},n.$$arity=1)},Opal.modules["racc/parser"]=function(e){function X(j,w){return"number"==typeof j&&"number"==typeof w?j<w:j["$<"](w)}function O(j,w){return"number"==typeof j&&"number"==typeof w?j-w:j["$-"](w)}function L(j,w){return"number"==typeof j&&"number"==typeof w?j+w:j["$+"](w)}function r(j,w){return"number"==typeof j&&"number"==typeof w?j>=w:j["$>="](w)}function P(j,w){return"number"==typeof j&&"number"==typeof w?j>w:j["$>"](w)}function c(j,w){return"number"==typeof j&&"number"==typeof w?j<=w:j["$<="](w)}var z,b,n,w,q,B=[],t=e.nil,M=e.$$$,i=e.$$,A=e.module,Y=e.klass,m=e.truthy,k=e.gvars,K=e.send;return w=B,z=(q=[A(B[0],"Racc")].concat(w))[0],b=i(q,"StandardError"),n=q,[Y(z,b,"ParseError")].concat(n),m(M("::","ParseError","skip_raise")?"constant":t)||e.const_set(B[0],"ParseError",M(i(B,"Racc"),"ParseError")),function(j,w){var v,R,h,x,g,E,U,o,_,l,T,f,S,a,p,G,Z,Q,ae,ue,ye,De,Pe,ze,Be,u,y,q=[A(j,"Racc")].concat(w);m(i(q,"Racc_No_Extensions","skip_raise")?"constant":t)||e.const_set(q[0],"Racc_No_Extensions",!1),v=q,u=Y(q[0],null,"Parser"),y=[u].concat(v),u.$$prototype.yydebug=u.$$prototype.racc_debug_out=u.$$prototype.racc_error_status=u.$$prototype.racc_t=u.$$prototype.racc_vstack=u.$$prototype.racc_val=u.$$prototype.racc_state=u.$$prototype.racc_tstack=t,e.const_set(y[0],"Racc_Runtime_Version","1.4.6"),e.const_set(y[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),e.const_set(y[0],"Racc_Runtime_Core_Version_R","1.4.6"),e.const_set(y[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),e.const_set(y[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),e.const_set(y[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),e.const_set(y[0],"Racc_Runtime_Core_Version",i(y,"Racc_Runtime_Core_Version_R")),e.const_set(y[0],"Racc_Runtime_Core_Revision",i(y,"Racc_Runtime_Core_Revision_R")),e.const_set(y[0],"Racc_Runtime_Type","ruby"),e.defs(i(y,"Parser"),"$racc_runtime_type",R=function(){return i(y,"Racc_Runtime_Type")},R.$$arity=0),e.def(u,"$_racc_setup",h=function(){var re,ee,s=this,I=t,C=t,D=t;return null==k.stderr&&(k.stderr=t),m(M(s.$class(),"Racc_debug_parser"))||(s.yydebug=!1),m(null!=(re=s.yydebug)&&re!==t?"instance-variable":t)||(s.yydebug=!1),m(s.yydebug)&&(m(null!=(ee=s.racc_debug_out)&&ee!==t?"instance-variable":t)||(s.racc_debug_out=k.stderr),s.racc_debug_out=m(I=s.racc_debug_out)?I:k.stderr),C=M(s.$class(),"Racc_arg"),m(X(C.$size(),14))&&(K(C,"[]=",e.to_a(D=[13,!0])),O(D.length,1)),C},h.$$arity=0),e.def(u,"$_racc_init_sysvars",x=function(){var re=this;return re.racc_state=[0],re.racc_tstack=[],re.racc_vstack=[],re.racc_t=t,re.racc_val=t,re.racc_read_next=!0,re.racc_user_yyerror=!1,re.racc_error_status=0},x.$$arity=0),e.def(u,"$do_parse",g=function(){return this.$__send__(i(y,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},g.$$arity=0),e.def(u,"$next_token",E=function(){return this.$raise(i(y,"NotImplementedError"),this.$class()+"#next_token is not defined")},E.$$arity=0),e.def(u,"$_racc_do_parse_rb",U=function(re,ee){var s,C,D=this,J=t,te=t,$e=t,be=t,ie=t,ve=t,ge=t,de=t;return s=e.to_ary(re),J=null==s[0]?t:s[0],te=null==s[1]?t:s[1],$e=null==s[2]?t:s[2],be=null==s[3]?t:s[3],ie=null==s[10]?t:s[10],D.$_racc_init_sysvars(),ve=ge=de=t,K(D,"catch",["racc_end_parse"],((C=function(){var Ce,Ae,se=null==C.$$s?this:C.$$s,Re=t,Ie=t,Me=t;for(null==se.racc_state&&(se.racc_state=t),null==se.racc_read_next&&(se.racc_read_next=t),null==se.racc_t&&(se.racc_t=t),null==se.yydebug&&(se.yydebug=t),null==se.racc_val&&(se.racc_val=t);m(!0);)for(m(de=be["$[]"](se.racc_state["$[]"](-1)))?(m(se.racc_read_next)&&m(se.racc_t["$!="](0))&&(Ae=se.$next_token(),Ce=e.to_ary(Ae),ve=null==Ce[0]?t:Ce[0],se.racc_val=null==Ce[1]?t:Ce[1],se.racc_t=m(ve)?m(Re=ie["$[]"](ve))?Re:1:0,m(se.yydebug)&&se.$racc_read_token(se.racc_t,ve,se.racc_val),se.racc_read_next=!1),de=L(de,se.racc_t),m(m(Ie=m(Me=r(de,0))?ge=J["$[]"](de):Me)?te["$[]"](de)["$=="](se.racc_state["$[]"](-1)):Ie)||(ge=$e["$[]"](se.racc_state["$[]"](-1)))):ge=$e["$[]"](se.racc_state["$[]"](-1));m(ge=se.$_racc_evalact(ge,re)););}).$$s=D,C.$$arity=0,C))},U.$$arity=2),e.def(u,"$yyparse",o=function(re,ee){return this.$__send__(i(y,"Racc_YY_Parse_Method"),re,ee,this.$_racc_setup(),!0)},o.$$arity=2),e.def(u,"$_racc_yyparse_rb",_=function(re,ee,s,I){var C,J,$e=t,be=t,ne=t,ie=t,ge=t,de=t,Te=t;return C=e.to_ary(s),$e=null==C[0]?t:C[0],be=null==C[1]?t:C[1],ne=null==C[2]?t:C[2],ie=null==C[3]?t:C[3],ge=null==C[10]?t:C[10],this.$_racc_init_sysvars(),de=t,Te=t,K(this,"catch",["racc_end_parse"],((J=function(){var Re,xe=null==J.$$s?this:J.$$s;for(null==xe.racc_state&&(xe.racc_state=t);!m(Te=ie["$[]"](xe.racc_state["$[]"](-1)));)for(;m(de=xe.$_racc_evalact(ne["$[]"](xe.racc_state["$[]"](-1)),s)););return K(re,"__send__",[ee],((Re=function(Me,we){var We,Ue,Se=null==Re.$$s?this:Re.$$s,qe=t,Ge=t,je=t,He=t,ce=t,W=t,le=t;for(null==Se.racc_t&&(Se.racc_t=t),null==Se.racc_state&&(Se.racc_state=t),null==Se.racc_read_next&&(Se.racc_read_next=t),null==Me&&(Me=t),null==we&&(we=t),Se.racc_t=m(Me)?m(qe=ge["$[]"](Me))?qe:1:0,Se.racc_val=we,Se.racc_read_next=!1,Te=L(Te,Se.racc_t),m(m(We=m(Ue=r(Te,0))?de=$e["$[]"](Te):Ue)?be["$[]"](Te)["$=="](Se.racc_state["$[]"](-1)):We)||(de=ne["$[]"](Se.racc_state["$[]"](-1)));m(de=Se.$_racc_evalact(de,s)););for(;m(m(Ge=m(je=(Te=ie["$[]"](Se.racc_state["$[]"](-1)))["$!"]())?je:Se.racc_read_next["$!"]())?Ge:Se.racc_t["$=="](0));)for(m(m(He=m(ce=m(W=m(le=Te)?Te=L(Te,Se.racc_t):le)?r(Te,0):W)?de=$e["$[]"](Te):ce)?be["$[]"](Te)["$=="](Se.racc_state["$[]"](-1)):He)||(de=ne["$[]"](Se.racc_state["$[]"](-1)));m(de=Se.$_racc_evalact(de,s)););}).$$s=xe,Re.$$arity=2,Re))}).$$s=this,J.$$arity=0,J))},_.$$arity=4),e.def(u,"$_racc_evalact",l=function(re,ee){var s,C,ne,ve,D=this,J=t,te=t,be=t,ie=t,ge=t,de=t,Te=t,se=t,xe=t,Ce=t;if(J=null==(s=e.to_ary(ee))[0]?t:s[0],te=null==s[1]?t:s[1],be=null==s[3]?t:s[3],ne=null==s[11]?t:s[11],ie=null==s[12]?t:s[12],m(m(ve=P(re,0))?X(re,ne):ve))m(P(D.racc_error_status,0))&&(D.racc_t["$=="](1)||(D.racc_error_status=O(D.racc_error_status,1))),D.racc_vstack.$push(D.racc_val),D.racc_state.$push(re),D.racc_read_next=!0,m(D.yydebug)&&(D.racc_tstack.$push(D.racc_t),D.$racc_shift(D.racc_t,D.racc_tstack,D.racc_vstack));else if(m(m(ge=X(re,0))?P(re,ie["$-@"]()):ge)){if(de=K(D,"catch",["racc_jump"],((C=function(){var Re=null==C.$$s?this:C.$$s;return null==Re.racc_state&&(Re.racc_state=t),Re.racc_state.$push(Re.$_racc_do_reduce(ee,re)),!1}).$$s=D,C.$$arity=0,C)),m(de)){if(1["$==="](Te=de))return D.racc_user_yyerror=!0,ie["$-@"]();if(2["$==="](Te))return ne;D.$raise("[Racc Bug] unknown jump code")}}else if(re["$=="](ne))m(D.yydebug)&&D.$racc_accept(),D.$throw("racc_end_parse",D.racc_vstack["$[]"](0));else{if(re["$=="](ie["$-@"]())){for((0)["$==="](Te=D.racc_error_status)?m(ee["$[]"](21))||D.$on_error(D.racc_t,D.racc_val,D.racc_vstack):3["$==="](Te)&&(D.racc_t["$=="](0)&&D.$throw("racc_end_parse",t),D.racc_read_next=!0),D.racc_user_yyerror=!1,D.racc_error_status=3;m(!0)&&(!m(se=be["$[]"](D.racc_state["$[]"](-1)))||(se=L(se,1),!m(m(xe=m(Ce=r(se,0))?re=J["$[]"](se):Ce)?te["$[]"](se)["$=="](D.racc_state["$[]"](-1)):xe)));)m(c(D.racc_state.$size(),1))&&D.$throw("racc_end_parse",t),D.racc_state.$pop(),D.racc_vstack.$pop(),m(D.yydebug)&&(D.racc_tstack.$pop(),D.$racc_e_pop(D.racc_state,D.racc_tstack,D.racc_vstack));return re}D.$raise("[Racc Bug] unknown action "+re.$inspect())}return m(D.yydebug)&&D.$racc_next_state(D.racc_state["$[]"](-1),D.racc_state),t},l.$$arity=2),e.def(u,"$_racc_do_reduce",T=function(re,ee){var s,ne,ve,Ce,Ae,Re,Se,C=this,J=t,te=t,$e=t,be=t,ie=t,ge=t,de=t,Te=t,se=t,xe=t,Ie=t,Me=t,we=t,Ne=t,Fe=t,qe=t;return J=null==(s=e.to_ary(re))[4]?t:s[4],te=null==s[5]?t:s[5],$e=null==s[6]?t:s[6],be=null==s[7]?t:s[7],ne=null==s[8]?t:s[8],ie=null==s[9]?t:s[9],ve=null==s[13]?t:s[13],ge=C.racc_state,de=C.racc_vstack,Te=C.racc_tstack,se=function(j,w){return"number"==typeof j?-3*j:j["$*"](-3)}(ee),xe=ie["$[]"](se),Ce=ie["$[]"](L(se,1)),Ae=ie["$[]"](L(se,2)),Re=[],m(C.yydebug)&&(Ie=Te["$[]"](xe["$-@"](),xe)),Me=de["$[]"](xe["$-@"](),xe),m(C.yydebug)&&(we=[xe["$-@"](),xe,Re],K(Te,"[]=",e.to_a(we)),O(we.length,1)),we=[xe["$-@"](),xe,Re],K(de,"[]=",e.to_a(we)),O(we.length,1),we=[xe["$-@"](),xe,Re],K(ge,"[]=",e.to_a(we)),O(we.length,1),m(ve)?de.$push(C.$__send__(Ae,Me,de,Me["$[]"](0))):de.$push(C.$__send__(Ae,Me,de)),Te.$push(Ce),m(C.yydebug)&&C.$racc_reduce(Ie,Ce,Te,de),Se=O(Ce,ne),m(se=be["$[]"](Se))&&(se=L(se,ge["$[]"](-1)),m(m(Ne=m(Fe=r(se,0))?qe=J["$[]"](se):Fe)?te["$[]"](se)["$=="](Se):Ne))?qe:$e["$[]"](Se)},T.$$arity=2),e.def(u,"$on_error",f=function(re,ee,s){var C,I=this;return I.$raise(i(y,"ParseError"),I.$sprintf("\nparse error on value %s (%s)",ee.$inspect(),m(C=I.$token_to_str(re))?C:"?"))},f.$$arity=3),e.def(u,"$yyerror",S=function(){return this.$throw("racc_jump",1)},S.$$arity=0),e.def(u,"$yyaccept",a=function(){return this.$throw("racc_jump",2)},a.$$arity=0),e.def(u,"$yyerrok",p=function(){return this.racc_error_status=0},p.$$arity=0),e.def(u,"$racc_read_token",G=function(re,ee,s){var I=this;return I.racc_debug_out.$print("read    "),I.racc_debug_out.$print(ee.$inspect(),"(",I.$racc_token2str(re),") "),I.racc_debug_out.$puts(s.$inspect()),I.racc_debug_out.$puts()},G.$$arity=3),e.def(u,"$racc_shift",Z=function(re,ee,s){var I=this;return I.racc_debug_out.$puts("shift   "+I.$racc_token2str(re)),I.$racc_print_stacks(ee,s),I.racc_debug_out.$puts()},Z.$$arity=3),e.def(u,"$racc_reduce",Q=function(re,ee,s,I){var C,D=this,J=t;return(J=D.racc_debug_out).$print("reduce "),m(re["$empty?"]())?J.$print(" <none>"):K(re,"each",[],((C=function($e){return null==$e&&($e=t),J.$print(" ",(null==C.$$s?this:C.$$s).$racc_token2str($e))}).$$s=D,C.$$arity=1,C)),J.$puts(" --\x3e "+D.$racc_token2str(ee)),D.$racc_print_stacks(s,I),D.racc_debug_out.$puts()},Q.$$arity=4),e.def(u,"$racc_accept",ae=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},ae.$$arity=0),e.def(u,"$racc_e_pop",ue=function(re,ee,s){var I=this;return I.racc_debug_out.$puts("error recovering mode: pop token"),I.$racc_print_states(re),I.$racc_print_stacks(ee,s),I.racc_debug_out.$puts()},ue.$$arity=3),e.def(u,"$racc_next_state",ye=function(re,ee){var s=this;return s.racc_debug_out.$puts("goto    "+re),s.$racc_print_states(ee),s.racc_debug_out.$puts()},ye.$$arity=2),e.def(u,"$racc_print_stacks",De=function(re,ee){var s,C=t;return(C=this.racc_debug_out).$print("        ["),K(re,"each_index",[],((s=function(J){return null==J&&(J=t),C.$print(" (",(null==s.$$s?this:s.$$s).$racc_token2str(re["$[]"](J))," ",ee["$[]"](J).$inspect(),")")}).$$s=this,s.$$arity=1,s)),C.$puts(" ]")},De.$$arity=2),e.def(u,"$racc_print_states",Pe=function(re){var ee,I=t;return(I=this.racc_debug_out).$print("        ["),K(re,"each",[],((ee=function(D){return null==D&&(D=t),I.$print(" ",D)}).$$s=this,ee.$$arity=1,ee)),I.$puts(" ]")},Pe.$$arity=1),e.def(u,"$racc_token2str",ze=function(re){var s;return m(s=M(this.$class(),"Racc_token_to_s_table")["$[]"](re))?s:this.$raise("[Racc Bug] can't convert token "+re+" to string")},ze.$$arity=1),e.def(u,"$token_to_str",Be=function(re){return M(this.$class(),"Racc_token_to_s_table")["$[]"](re)},Be.$$arity=1)}(B[0],B)},Opal.modules["bcdice/arithmetic/node"]=function(e){function X(B,t){return"number"==typeof B&&"number"==typeof t?B/t:B["$/"](t)}var t,Y,j,q,z,b,u,y,R,h,x,g,n,v,V,k,i,L=[],r=e.nil,P=e.$$$,c=e.$$,N=e.module,$=e.klass,d=e.send2;return t=L,Y=i=[N(L[0],"BCDice")].concat(t),j=k=[N(i[0],"Arithmetic")].concat(Y),function(q,z,b){var u,y,R,h,x,n=$(q,null,"BinaryOp");[n].concat(b),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",u=function(E,U,o){var _=this;return _.lhs=E,_.op=U,_.rhs=o},u.$$arity=3),e.def(n,"$eval",y=function(E){var _,U=this,o=r;return o=U.lhs.$eval(E),_=U.rhs.$eval(E),o.$send(U.op,_)},y.$$arity=1),e.def(n,"$output",R=function(){var E=this;return""+E.lhs.$output()+E.op+E.rhs.$output()},R.$$arity=0),e.def(n,"$s_exp",h=function(){var E=this;return"("+E.$op_for_s_exp()+" "+E.lhs.$s_exp()+" "+E.rhs.$s_exp()+")"},h.$$arity=0),e.def(n,"$op_for_s_exp",x=function(){return this.op},x.$$arity=0)}((V=[N(k[0],"Node")].concat(j))[0],0,V),q=V[0],z=c(V,"BinaryOp"),b=V,n=$(q,z,"DivideBase"),v=[n].concat(b),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",u=function(U,o){return u.$$p&&(u.$$p=null),d(this,e.find_super_dispatcher(this,"initialize",u,!1,!0),"initialize",[U,"/",o],null)},u.$$arity=2),e.def(n,"$eval",y=function(U){var _,o=this,l=r;return _=o.lhs.$eval(U),(l=o.rhs.$eval(U))["$=="](0)&&o.$raise(c(v,"ZeroDivisionError")),o.$divide_and_round(_,l,U)},y.$$arity=1),e.def(n,"$output",R=function(){var U=R.$$p,_=this,l=r,T=r,f=r;for(U&&(R.$$p=null),T=0,f=arguments.length,l=new Array(f);T<f;T++)l[T]=arguments[T];return""+d(_,e.find_super_dispatcher(_,"output",R,!1,!0),"output",l,U)+_.$rounding_method()},R.$$arity=0),n.$private(),e.def(n,"$rounding_method",h=function(){return P(this.$class(),"ROUNDING_METHOD")},h.$$arity=0),e.def(n,"$op_for_s_exp",x=function(){return""+this.op+this.$rounding_method()},x.$$arity=0),e.def(n,"$divide_and_round",g=function(U,o,_){return this.$raise(c(v,"NotImplementedError"))},g.$$arity=3),function(q,z,b){var u,n=$(q,z,"DivideWithGameSystemDefault"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD",""),n.$private(),e.def(n,"$divide_and_round",u=function(R,h,x){var E;return E=x,P(c(v,"RoundType"),"CEIL")["$==="](E)?X(R.$to_f(),h).$ceil():P(c(v,"RoundType"),"ROUND")["$==="](E)?X(R.$to_f(),h).$round():X(R,h).$to_i()},u.$$arity=3)}(V[0],c(V,"DivideBase"),V),function(q,z,b){var u,n=$(q,z,"DivideWithCeil"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","C"),n.$private(),e.def(n,"$divide_and_round",u=function(R,h,x){return X(R.$to_f(),h).$ceil()},u.$$arity=3)}(V[0],c(V,"DivideBase"),V),function(q,z,b){var u,n=$(q,z,"DivideWithRound"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","R"),n.$private(),e.def(n,"$divide_and_round",u=function(R,h,x){return X(R.$to_f(),h).$round()},u.$$arity=3)}(V[0],c(V,"DivideBase"),V),function(q,z,b){var u,n=$(q,z,"DivideWithFloor"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","F"),n.$private(),e.def(n,"$divide_and_round",u=function(R,h,x){return X(R,h).$to_i()},u.$$arity=3)}(V[0],c(V,"DivideBase"),V),function(q,z,b){var u,y,R,h,n=$(q,null,"Negative");[n].concat(b),n.$$prototype.body=r,e.def(n,"$initialize",u=function(g){return this.body=g},u.$$arity=1),e.def(n,"$eval",y=function(g){return this.body.$eval(g)["$-@"]()},y.$$arity=1),e.def(n,"$output",R=function(){return"-"+this.body.$output()},R.$$arity=0),e.def(n,"$s_exp",h=function(){return"(- "+this.body.$s_exp()+")"},h.$$arity=0)}(V[0],0,V),function(q,z,b){var u,y,R,h,n=$(q,null,"Parenthesis");[n].concat(b),n.$$prototype.expr=r,e.def(n,"$initialize",u=function(g){return this.expr=g},u.$$arity=1),e.def(n,"$eval",y=function(g){return this.expr.$eval(g)},y.$$arity=1),e.def(n,"$output",R=function(){return"("+this.expr.$output()+")"},R.$$arity=0),e.def(n,"$s_exp",h=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},h.$$arity=0)}(V[0],0,V),void function(q,z,b){var u,y,R,n=$(q,null,"Number");[n].concat(b),n.$$prototype.value=r,e.def(n,"$initialize",u=function(x){return this.value=x},u.$$arity=1),e.def(n,"$eval",y=function(x){return this.value},y.$$arity=1),e.def(n,"$output",R=function(){return this.value.$to_s()},R.$$arity=0),e.alias(n,"s_exp","output")}(V[0],0,V)},Opal.modules.strscan=function(e){var M,Y,m,k,K,j,w,V,q,z,b,n,v,u,y,R,h,x,g,E,U,o,_,l,T,f,i,A,L=[],r=e.nil,c=e.$$,$=e.truthy,d=e.send;return M=L,i=(0,e.klass)(L[0],null,"StringScanner"),A=[i].concat(M),i.$$prototype.pos=i.$$prototype.string=i.$$prototype.working=i.$$prototype.matched=i.$$prototype.prev_pos=i.$$prototype.match=r,i.$attr_reader("pos"),i.$attr_reader("matched"),e.def(i,"$initialize",Y=function(a){var p=this;return p.string=a,p.pos=0,p.matched=r,p.working=a,p.match=[]},Y.$$arity=1),i.$attr_reader("string"),e.def(i,"$beginning_of_line?",m=function(){var a=this;return 0===a.pos||"\n"===a.string.charAt(a.pos-1)},m.$$arity=0),e.alias(i,"bol?","beginning_of_line?"),e.def(i,"$scan",k=function(a){var p=this,G=(a=p.$anchor(a)).exec(p.working);return null==G?p.matched=r:"object"==typeof G?(p.prev_pos=p.pos,p.pos+=G[0].length,p.working=p.working.substring(G[0].length),p.matched=G[0],p.match=G,G[0]):"string"==typeof G?(p.pos+=G.length,p.working=p.working.substring(G.length),G):r},k.$$arity=1),e.def(i,"$scan_until",K=function(a){var p=this;a=p.$anchor(a);for(var Q,G=p.pos,Z=p.working;;){if(Q=a.exec(Z),G+=1,Z=Z.substr(1),null!=Q)return p.matched=p.string.substr(p.pos,G-p.pos-1+Q[0].length),p.match=Q,p.prev_pos=G-1,p.pos=G,p.working=Z.substr(Q[0].length),p.matched;if(0===Z.length)return p.match=[],p.matched=r}},K.$$arity=1),e.def(i,"$[]",j=function(a){var G;if($(this.match["$empty?"]()))return r;G=a,c(A,"Symbol")["$==="](G)?a=a.$to_s():c(A,"String")["$==="](G)||(a=c(A,"Opal")["$coerce_to!"](a,c(A,"Integer"),"to_int"));var Z=this.match;return a<0&&(a+=Z.length),a<0||a>=Z.length||null==Z[a]?r:Z[a]},j.$$arity=1),e.def(i,"$check",w=function(a){var p=this,G=(a=p.$anchor(a)).exec(p.working);return p.matched=null==G?r:G[0]},w.$$arity=1),e.def(i,"$check_until",V=function(a){var p=this,G=p.prev_pos,Z=p.pos,Q=p.$scan_until(a);return Q!==r&&(p.matched=Q.substr(-1),p.working=p.string.substr(Z)),p.prev_pos=G,p.pos=Z,Q},V.$$arity=1),e.def(i,"$peek",q=function(a){return this.working.substring(0,a)},q.$$arity=1),e.def(i,"$eos?",z=function(){return 0===this.working.length},z.$$arity=0),e.def(i,"$exist?",b=function(a){var G=a.exec(this.working);return null==G?r:0==G.index?0:G.index+1},b.$$arity=1),e.def(i,"$skip",n=function(a){var p=this,G=(a=p.$anchor(a)).exec(p.working);if(null==G)return p.match=[],p.matched=r;var Z=G[0],Q=Z.length;return p.matched=Z,p.match=G,p.prev_pos=p.pos,p.pos+=Q,p.working=p.working.substring(Q),Q},n.$$arity=1),e.def(i,"$skip_until",v=function(a){var G=this.$scan_until(a);return G===r?r:(this.matched=G.substr(-1),G.length)},v.$$arity=1),e.def(i,"$get_byte",u=function(){var a=this,p=r;return a.pos<a.string.length?(a.prev_pos=a.pos,a.pos+=1,p=a.matched=a.working.substring(0,1),a.working=a.working.substring(1)):a.matched=r,p},u.$$arity=0),e.alias(i,"getch","get_byte"),e.def(i,"$match?",y=function(a){var p=this,G=(a=p.$anchor(a)).exec(p.working);return null==G?r:(p.prev_pos=p.pos,G[0].length)},y.$$arity=1),e.def(i,"$pos=",R=function(a){var p=this;return a<0&&(a+=p.string.$length()),p.pos=a,p.working=p.string.slice(a)},R.$$arity=1),e.def(i,"$matched_size",h=function(){return this.matched===r?r:this.matched.length},h.$$arity=0),e.def(i,"$post_match",x=function(){var a=this;return a.matched===r?r:a.string.substr(a.pos)},x.$$arity=0),e.def(i,"$pre_match",g=function(){var a=this;return a.matched===r?r:a.string.substr(0,a.prev_pos)},g.$$arity=0),e.def(i,"$reset",E=function(){var a=this;return a.working=a.string,a.matched=r,a.pos=0},E.$$arity=0),e.def(i,"$rest",U=function(){return this.working},U.$$arity=0),e.def(i,"$rest?",o=function(){return 0!==this.working.length},o.$$arity=0),e.def(i,"$rest_size",_=function(){return this.$rest().$size()},_.$$arity=0),e.def(i,"$terminate",l=function(){var p,B,a=this;return a.match=r,p=[a.string.$length()],d(a,"pos=",e.to_a(p)),p[(B=p.length,"number"==typeof B?B-1:B["$-"](1))]},l.$$arity=0),e.def(i,"$unscan",T=function(){var a=this;return a.pos=a.prev_pos,a.prev_pos=r,a.match=r,a},T.$$arity=0),i.$private(),e.def(i,"$anchor",f=function(a){var G=a.toString().match(/\/([^\/]+)$/);return G=G?G[1]:void 0,new RegExp("^(?:"+a.source+")",G)},f.$$arity=1),r&&"anchor"},Opal.modules["bcdice/normalize"]=function(e){var M,Y,m,i,$,B,O=[],L=e.nil,c=e.module;return $=O,M=B=[c(O[0],"BCDice")].concat($),[i=c(B[0],"Normalize")].concat(M),i.$module_function(),e.def(i,"$comparison_operator",Y=function(K){var w;return/<=|=</["$==="](w=K)?"<=":/>=|=>/["$==="](w)?">=":/<>|!=|=!/["$==="](w)?"!=":/</["$==="](w)?"<":/>/["$==="](w)?">":/=/["$==="](w)?"==":L},Y.$$arity=1),void e.def(i,"$target_number",m=function(K){return K["$=="]("?")?K:K.$to_i()},m.$$arity=1)},Opal.modules["bcdice/command/lexer"]=function(e){var M,m,V,b,n,v,q,z,K,A,X=e.top,O=[],L=e.nil,P=e.$$,c=e.module,N=e.klass,$=e.hash2,d=e.truthy,B=e.send;return X.$require("strscan"),X.$require("bcdice/normalize"),M=O,m=A=[c(O[0],"BCDice")].concat(M),V=K=[c(A[0],"Command")].concat(m),q=N(K[0],null,"Lexer"),z=[q].concat(V),q.$$prototype.scanner=q.$$prototype.notations=L,e.const_set(z[0],"SYMBOLS",$(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(q,"$initialize",b=function(y,R){var h,x,g,U,E=this;return y=d(U=(x=(h=y)===L||null==h?L:B(h,"split",[" ",2]))===L||null==x?L:B(x,"first",[]))?U:"",E.scanner=P(z,"StringScanner").$new(y),E.notations=B(R,"map",[],((g=function(o){function _(l){return o.apply(this,arguments)}return _.toString=function(){return o.toString()},_}(function(o){return null==o&&(o=L),d(o["$is_a?"](P(z,"String")))?P(z,"Regexp").$new(o):o})).$$s=E,g.$$arity=1,g))},b.$$arity=2),e.def(q,"$next_token",n=function(){try{var y,R=this,h=L,x=L,E=L,U=L;return d(R.scanner["$eos?"]())?[!1,"$"]:(B(R.notations,"each",[],((y=function(_){var T,l=null==y.$$s?this:y.$$s;if(null==l.scanner&&(l.scanner=L),null==_&&(_=L),T=l.scanner.$scan(_),!d(T))return L;e.ret(["NOTATION",T])}).$$s=R,y.$$arity=1,y)),d(h=R.scanner.$scan(/\d+/))?["NUMBER",h.$to_i()]:d(x=R.scanner.$scan(/[<>!=]+/))?(x=P(z,"Normalize").$comparison_operator(x),[d(x)?"CMP_OP":"ILLEGAL",x]):(E=R.scanner.$getch().$upcase(),[d(U=P(z,"SYMBOLS")["$[]"](E))?U:E.$to_sym(),E]))}catch(o){if(o===e.returner)return o.$v;throw o}},n.$$arity=0),void e.def(q,"$source",v=function(){return this.scanner.$string()},v.$$arity=0)},Opal.modules["bcdice/command/parsed"]=function(e){var B,A,j,q,z,b,w,V,m,M,O=[],L=e.nil,P=e.$$,c=e.module,N=e.klass,$=e.truthy;return B=O,A=M=[c(O[0],"BCDice")].concat(B),j=m=[c(M[0],"Command")].concat(A),w=N(m[0],null,"Parsed"),V=[w].concat(j),w.$$prototype.question_target=w.$$prototype.critical=w.$$prototype.fumble=w.$$prototype.dollar=w.$$prototype.modify_number=w.$$prototype.target_number=w.$$prototype.prefix_number=w.$$prototype.command=w.$$prototype.suffix_number=w.$$prototype.cmp_op=L,w.$attr_accessor("command"),w.$attr_accessor("prefix_number"),w.$attr_accessor("suffix_number"),w.$attr_accessor("critical"),w.$attr_accessor("fumble"),w.$attr_accessor("dollar"),w.$attr_accessor("modify_number"),w.$attr_accessor("cmp_op"),w.$attr_accessor("target_number"),w.$attr_writer("question_target"),e.def(w,"$initialize",q=function(){var v=this;return v.prefix_number=L,v.suffix_number=L,v.critical=L,v.fumble=L,v.dollar=L,v.cmp_op=L,v.target_number=L,v.question_target=!1},q.$$arity=0),e.def(w,"$question_target?",z=function(){return this.question_target},z.$$arity=0),void e.def(w,"$to_s",b=function(v){var E,u=this,y=L,R=L,h=L,x=L,g=L;return null==v&&(v="after_command"),y=$(u.critical)?"@"+u.critical:L,R=$(u.fumble)?"#"+u.fumble:L,h=$(u.dollar)?"$"+u.dollar:L,x=P(V,"Format").$modifier(u.modify_number),g=$(u.question_target)?"?":u.target_number,"after_command"["$==="](E=v)?[u.prefix_number,u.command,u.suffix_number,y,R,h,x,u.cmp_op,g].$join():"after_modify_number"["$==="](E)?[u.prefix_number,u.command,u.suffix_number,x,y,R,h,u.cmp_op,g].$join():"after_target_number"["$==="](E)?[u.prefix_number,u.command,u.suffix_number,x,u.cmp_op,g,y,R,h].$join():L},b.$$arity=-1)},Opal.modules["bcdice/command/parser"]=function(e){function X(A,Y){return"number"==typeof A&&"number"==typeof Y?A-Y:A["$-"](Y)}var Y,j,q,z,b,u,y,R,h,x,g,E,U,o,_,l,T,f,S,a,p,G,Z,Q,ae,ue,ye,De,Pe,ze,Be,me,re,ee,s,I,C,D,J,te,$e,be,ne,ie,ve,ge,de,Te,se,xe,Ce,Ae,Re,Ie,Me,we,Se,Ne,Fe,qe,Ge,n,v,V,k,O=e.top,L=[],r=e.nil,P=e.$$$,c=e.$$,N=e.klass,$=e.module,d=e.hash2,B=e.send2,t=e.send,M=e.hash,i=e.truthy;return O.$require("racc/parser.rb"),O.$require("bcdice/arithmetic/node"),O.$require("bcdice/command/lexer"),O.$require("bcdice/command/parsed"),function(A,Y,m){[N(A,Y,"Parser")].concat(m)}(P(c(L,"BCDice"),"Command"),P(c(L,"Racc"),"Parser"),L),Y=L,j=k=[$(L[0],"BCDice")].concat(Y),q=(V=[$(k[0],"Command")].concat(j))[0],z=P(c(V,"Racc"),"Parser"),b=V,n=N(q,z,"Parser"),v=[n].concat(b),n.$$prototype.notations=n.$$prototype.lexer=n.$$prototype.modifier=n.$$prototype.prefix_number=n.$$prototype.suffix_number=n.$$prototype.need_suffix_number=n.$$prototype.need_prefix_number=n.$$prototype.critical=n.$$prototype.fumble=n.$$prototype.dollar=n.$$prototype.allowed_cmp_op=n.$$prototype.question_target=r,e.def(n,"$initialize",u=function(W,le){var H,F,_e,ke,pe=u.$$p,fe=this;if(pe&&(u.$$p=null),H=e.slice.call(arguments,0,arguments.length),null==(F=e.extract_kwargs(H)))F=d([],{});else if(!F.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(_e=H,!e.hasOwnProperty.call(F.$$smap,"round_type"))throw e.ArgumentError.$new("missing keyword: round_type");return ke=F.$$smap.round_type,B(fe,e.find_super_dispatcher(fe,"initialize",u,!1,!0),"initialize",[],null),fe.notations=_e,fe.round_type=ke,fe.prefix_number=!1,fe.suffix_number=!1,fe.need_prefix_number=!1,fe.need_suffix_number=!1,fe.modifier=!0,fe.critical=!1,fe.fumble=!1,fe.dollar=!1,fe.allowed_cmp_op=[r,">=",">","<=","<","==","!="],fe.question_target=!1},u.$$arity=-2),e.def(n,"$disable_modifier",y=function(){return this.modifier=!1,this},y.$$arity=0),e.def(n,"$enable_prefix_number",R=function(){return this.prefix_number=!0,this},R.$$arity=0),e.def(n,"$enable_suffix_number",h=function(){return this.suffix_number=!0,this},h.$$arity=0),e.def(n,"$has_prefix_number",x=function(){var W=this;return W.prefix_number=!0,W.need_prefix_number=!0,W},x.$$arity=0),e.def(n,"$has_suffix_number",g=function(){var W=this;return W.suffix_number=!0,W.need_suffix_number=!0,W},g.$$arity=0),e.def(n,"$enable_critical",E=function(){return this.critical=!0,this},E.$$arity=0),e.def(n,"$enable_fumble",U=function(){return this.fumble=!0,this},U.$$arity=0),e.def(n,"$enable_dollar",o=function(){return this.dollar=!0,this},o.$$arity=0),e.def(n,"$restrict_cmp_op_to",_=function(W){var le,F=this;return le=e.slice.call(arguments,0,arguments.length),F.allowed_cmp_op=le,F},_.$$arity=-1),e.def(n,"$enable_question_target",l=function(){return this.question_target=!0,this},l.$$arity=0),e.def(n,"$parse",T=function(W){try{return this.lexer=c(v,"Lexer").$new(W,this.notations),this.$do_parse()}catch(H){if(!e.rescue(H,[c(v,"ParseError"),c(v,"ZeroDivisionError")]))throw H;try{return r}finally{e.pop_exception()}}},T.$$arity=1),n.$private(),e.def(n,"$parsed",f=function(W,le,H,F){var _e;return t(c(v,"Parsed").$new(),"tap",[],((_e=function(he){var Ee,Le,Ke,Xe,Ye,Ve,fe=null==_e.$$s?this:_e.$$s,oe=r;return null==fe.round_type&&(fe.round_type=r),null==he&&(he=r),oe=[W["$[]"]("command")],t(he,"command=",e.to_a(oe)),X(oe.length,1),oe=[(Ee=W["$[]"]("prefix"),Ee===r||null==Ee?r:t(Ee,"eval",[fe.round_type]))],t(he,"prefix_number=",e.to_a(oe)),X(oe.length,1),oe=[(Le=W["$[]"]("suffix"),Le===r||null==Le?r:t(Le,"eval",[fe.round_type]))],t(he,"suffix_number=",e.to_a(oe)),X(oe.length,1),oe=[(Ke=le["$[]"]("critical"),Ke===r||null==Ke?r:t(Ke,"eval",[fe.round_type]))],t(he,"critical=",e.to_a(oe)),X(oe.length,1),oe=[(Xe=le["$[]"]("fumble"),Xe===r||null==Xe?r:t(Xe,"eval",[fe.round_type]))],t(he,"fumble=",e.to_a(oe)),X(oe.length,1),oe=[(Ye=le["$[]"]("dollar"),Ye===r||null==Ye?r:t(Ye,"eval",[fe.round_type]))],t(he,"dollar=",e.to_a(oe)),X(oe.length,1),oe=[H.$eval(fe.round_type)],t(he,"modify_number=",e.to_a(oe)),X(oe.length,1),oe=[F["$[]"]("cmp_op")],t(he,"cmp_op=",e.to_a(oe)),X(oe.length,1),F["$[]"]("target")["$=="]("?")?(t(he,"question_target=",e.to_a(oe=[!0])),X(oe.length,1),t(he,"target_number=",e.to_a(oe=[0])),oe[X(oe.length,1)]):(t(he,"question_target=",e.to_a(oe=[!1])),X(oe.length,1),oe=[(Ve=F["$[]"]("target"),Ve===r||null==Ve?r:t(Ve,"eval",[fe.round_type]))],t(he,"target_number=",e.to_a(oe)),oe[X(oe.length,1)])}).$$s=this,_e.$$arity=1,_e))},f.$$arity=4),e.def(n,"$next_token",S=function(){return this.lexer.$next_token()},S.$$arity=0),Ae=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,33,34,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,r,r,17,18,6,r,5,r,r,17,18,r,r,5,23,24,25,26,56,54,55,57],Re=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,r,17,15,15,18,18,23,r,18,30,30,23,23,24,r,23,31,31,24,24,25,r,24,44,44,25,25,28,r,25,47,47,28,28,29,r,28,48,48,29,29,33,r,29,49,49,33,33,34,r,33,50,50,34,34,36,r,34,r,r,36,36,37,r,36,r,r,37,37,r,r,37,27,27,27,27,52,52,52,52],Ie=[-2,4,16,-3,-1,11,r,33,13,35,23,30,1,r,28,40,r,37,44,r,r,-2,r,51,58,65,0,106,72,79,47,54,r,86,93,r,100,107,r,r,r,r,r,r,63,r,r,68,75,82,89,r,120,r,r,r,r,r],Me=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],we=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,r,r,21,47,48,40,51,52,49,50,44,46,3,r,r,r,13,r,r,r,r,r,r,r,32],Se=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,r,r,4,8,8,5,7,7,8,8,9,5,6,r,r,r,6,r,r,r,r,r,r,r,6],Ne=[r,6,13,3,9,-1,27,-15,-10,-1,-38],Fe=[r,r,r,r,r,r,19,16,15,r,r],qe=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],Ge=M(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),e.const_set(v[0],"Racc_arg",[Ae,Re,Me,Ie,we,Se,Fe,Ne,19,qe,Ge,58,35,!0]),e.const_set(v[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),e.const_set(v[0],"Racc_debug_parser",!1),e.def(n,"$_reduce_1",a=function(W,le,H){var F;return i(this.modifier)||this.$raise(c(v,"ParseError")),F=e.to_ary(W),this.$parsed(null==F[0]?r:F[0],null==F[1]?r:F[1],null==F[2]?r:F[2],null==F[3]?r:F[3])},a.$$arity=3),e.def(n,"$_reduce_2",p=function(W,le,H){var F;return i(this.modifier)||this.$raise(c(v,"ParseError")),F=e.to_ary(W),this.$parsed(null==F[0]?r:F[0],null==F[2]?r:F[2],null==F[1]?r:F[1],null==F[3]?r:F[3])},p.$$arity=3),e.def(n,"$_reduce_3",G=function(W,le,H){var F,fe;return fe=null==(F=e.to_ary(W))[2]?r:F[2],this.$parsed(null==F[0]?r:F[0],null==F[1]?r:F[1],P(P(c(v,"Arithmetic"),"Node"),"Number").$new(0),fe)},G.$$arity=3),e.def(n,"$_reduce_4",Z=function(W,le,H){var _e,F=this;return i(i(_e=F.prefix_number)?F.suffix_number:_e)||F.$raise(c(v,"ParseError")),d(["command","prefix","suffix"],{command:W["$[]"](1),prefix:W["$[]"](0),suffix:W["$[]"](2)})},Z.$$arity=3),e.def(n,"$_reduce_5",Q=function(W,le,H){var F=this;return i(F.prefix_number)||F.$raise(c(v,"ParseError")),i(F.need_suffix_number)&&F.$raise(c(v,"ParseError")),d(["command","prefix"],{command:W["$[]"](1),prefix:W["$[]"](0)})},Q.$$arity=3),e.def(n,"$_reduce_6",ae=function(W,le,H){var F=this;return i(F.suffix_number)||F.$raise(c(v,"ParseError")),i(F.need_prefix_number)&&F.$raise(c(v,"ParseError")),d(["command","suffix"],{command:W["$[]"](0),suffix:W["$[]"](1)})},ae.$$arity=3),e.def(n,"$_reduce_7",ue=function(W,le,H){var _e,F=this;return i(i(_e=F.need_prefix_number)?_e:F.need_suffix_number)&&F.$raise(c(v,"ParseError")),d(["command"],{command:W["$[]"](0)})},ue.$$arity=3),e.def(n,"$_reduce_8",ye=function(W,le,H){return d([],{})},ye.$$arity=3),e.def(n,"$_reduce_9",De=function(W,le,H){var F,fe,Le,Ee,pe=r;return pe=null==(F=e.to_ary(W))[0]?r:F[0],fe=null==F[2]?r:F[2],i(i(Ee=this.critical)?pe["$[]"]("critical")["$nil?"]():Ee)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Le=["critical",fe])),X(Le.length,1),pe},De.$$arity=3),e.def(n,"$_reduce_10",Pe=function(W,le,H){var F,fe,Le,Ee,pe=r;return pe=null==(F=e.to_ary(W))[0]?r:F[0],fe=null==F[2]?r:F[2],i(i(Ee=this.fumble)?pe["$[]"]("fumble")["$nil?"]():Ee)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Le=["fumble",fe])),X(Le.length,1),pe},Pe.$$arity=3),e.def(n,"$_reduce_11",ze=function(W,le,H){var F,fe,Le,Ee,pe=r;return pe=null==(F=e.to_ary(W))[0]?r:F[0],fe=null==F[2]?r:F[2],i(i(Ee=this.dollar)?pe["$[]"]("dollar")["$nil?"]():Ee)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Le=["dollar",fe])),X(Le.length,1),pe},ze.$$arity=3),e.def(n,"$_reduce_12",Be=function(W,le,H){return W["$[]"](1)},Be.$$arity=3),e.def(n,"$_reduce_13",me=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"Negative").$new(W["$[]"](1))},me.$$arity=3),e.def(n,"$_reduce_14",re=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"+",W["$[]"](2))},re.$$arity=3),e.def(n,"$_reduce_15",ee=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"-",W["$[]"](2))},ee.$$arity=3),e.def(n,"$_reduce_16",s=function(W,le,H){return i(this.allowed_cmp_op["$include?"](r))||this.$raise(c(v,"ParseError")),d([],{})},s.$$arity=3),e.def(n,"$_reduce_17",I=function(W,le,H){var F,pe,he;return he=null==(F=e.to_ary(W))[1]?r:F[1],i(this.allowed_cmp_op["$include?"](pe=null==F[0]?r:F[0]))||this.$raise(c(v,"ParseError")),d(["cmp_op","target"],{cmp_op:pe,target:he})},I.$$arity=3),e.def(n,"$_reduce_18",C=function(W,le,H){var _e,F=this;return _e=W["$[]"](0),i(F.question_target)||F.$raise(c(v,"ParseError")),i(F.allowed_cmp_op["$include?"](_e))||F.$raise(c(v,"ParseError")),d(["cmp_op","target"],{cmp_op:_e,target:"?"})},C.$$arity=3),e.def(n,"$_reduce_19",D=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"+",W["$[]"](2))},D.$$arity=3),e.def(n,"$_reduce_20",J=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"-",W["$[]"](2))},J.$$arity=3),e.def(n,"$_reduce_22",te=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"*",W["$[]"](2))},te.$$arity=3),e.def(n,"$_reduce_23",$e=function(W,le,H){return W["$[]"](3).$new(W["$[]"](0),W["$[]"](2))},$e.$$arity=3),e.def(n,"$_reduce_25",be=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},be.$$arity=3),e.def(n,"$_reduce_26",ne=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithCeil")},ne.$$arity=3),e.def(n,"$_reduce_27",ie=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithCeil")},ie.$$arity=3),e.def(n,"$_reduce_28",ve=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithRound")},ve.$$arity=3),e.def(n,"$_reduce_29",ge=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithFloor")},ge.$$arity=3),e.def(n,"$_reduce_30",de=function(W,le,H){return W["$[]"](1)},de.$$arity=3),e.def(n,"$_reduce_31",Te=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"Negative").$new(W["$[]"](1))},Te.$$arity=3),e.def(n,"$_reduce_33",se=function(W,le,H){return W["$[]"](1)},se.$$arity=3),e.def(n,"$_reduce_34",xe=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"Number").$new(W["$[]"](0))},xe.$$arity=3),void e.def(n,"$_reduce_none",Ce=function(W,le,H){return W["$[]"](0)},Ce.$$arity=3)},Opal.modules["bcdice/deprecated/checker"]=function(e){var B,A,K,V,q,z,b,n,v,j,w,m,M,O=[],L=e.nil,P=e.$$,c=e.module,N=e.send,$=e.truthy;return B=O,A=M=[c(O[0],"BCDice")].concat(B),K=m=[c(M[0],"Deprecated")].concat(A),j=c(m[0],"Checker"),w=[j].concat(K),j.$private(),e.def(j,"$check_result_legacy",V=function(y,R,h,x){var o,T,g=this,E=L,U=L,_=L,l=L,f=L;return E=N(R,"map",[],"sides".$to_proc()),o=(U=N(R,"map",[],"value".$to_proc())).$sum(),_=[100]["$==="](l=E)?g.$check_1D100(y,o,h,x):[20]["$==="](l)?g.$check_1D20(y,o,h,x):[6,6]["$==="](l)?g.$check_2D6(y,o,U,h,x):L,$($(T=_["$nil?"]())?T:_["$empty?"]())&&(l=E.$uniq(),_=[10]["$==="](l)?g.$check_nD10(y,o,U,h,x):[6]["$==="](l)?g.$check_nD6(y,o,U,h,x):L,$($(f=_["$nil?"]())?f:_["$empty?"]()))?L:P(w,"Result").$new(_.$delete_prefix(" \uff1e "))},V.$$arity=4),e.def(j,"$check_1D100",q=function(y,R,h,x){return L},q.$$arity=4),e.def(j,"$check_1D20",z=function(y,R,h,x){return L},z.$$arity=4),e.def(j,"$check_nD10",b=function(y,R,h,x,g){return L},b.$$arity=5),e.def(j,"$check_2D6",n=function(y,R,h,x,g){return L},n.$$arity=5),void e.def(j,"$check_nD6",v=function(y,R,h,x,g){return L},v.$$arity=5)},Opal.modules["bcdice/base"]=function(e){function X(k,K){return"number"==typeof k&&"number"==typeof K?k+K:k["$+"](K)}function O(k,K){return"number"==typeof k&&"number"==typeof K?k-K:k["$-"](K)}var K,z,v,u,y,R,h,x,g,E,U,o,_,l,T,f,S,a,p,G,Z,Q,ae,ue,ye,De,Pe,ze,Be,me,re,ee,C,D,J,te,$e,I,b,n,w,c=e.top,N=[],$=e.nil,d=e.$$$,B=e.$$,t=e.module,M=e.klass,i=e.truthy,A=e.send,Y=e.range,m=$;return c.$require("i18n"),c.$require("i18n/backend/fallbacks"),c.$require("bcdice/randomizer"),c.$require("bcdice/dice_table"),c.$require("bcdice/enum"),c.$require("bcdice/translate"),c.$require("bcdice/result"),c.$require("bcdice/command/parser"),c.$require("bcdice/deprecated/checker"),K=N,z=w=[t(N[0],"BCDice")].concat(K),b=M(w[0],null,"Base"),n=[b].concat(z),b.$$prototype.sort_add_dice=b.$$prototype.sort_barabara_dice=b.$$prototype.enabled_d9=b.$$prototype.raw_input=b.$$prototype.randomizer=b.$$prototype.enabled_upcase_input=b.$$prototype.debug=$,ee=e.get_singleton_class(b),I=[ee].concat(n),ee.$attr_reader("prefixes"),e.def(ee,"$register_prefix",C=function(ne){var ve,ge=this,de=$;return null==ge.prefixes&&(ge.prefixes=$),ve=e.slice.call(arguments,0,arguments.length),ge.prefixes=i(de=ge.prefixes)?de:[],ge.prefixes.$concat(ve.$flatten())},C.$$arity=-1),e.def(ee,"$register_prefix_from_super_class",D=function(){return this.$register_prefix(this.$superclass().$prefixes())},D.$$arity=0),e.def(ee,"$prefixes_pattern",J=function(){var ie,ne=this,ve=$;return null==ne.prefixes_pattern&&(ne.prefixes_pattern=$),null==ne.prefixes&&(ne.prefixes=$),ne.prefixes_pattern=i(ie=ne.prefixes_pattern)?ie:$,i(ne.prefixes_pattern)?ne.prefixes_pattern:(ne.prefixes=i(ve=ne.prefixes)?ve:[],ne.prefixes.$freeze(),ne.prefixes_pattern=(i(ne.prefixes["$empty?"]())?/(?!)/:e.regexp(["^(S)?(",ne.prefixes.$join("|"),")"],"i")).$freeze())},J.$$arity=0),e.def(ee,"$command_pattern",te=function(){var ne,ve,ie=this,ge=$,de=$;return null==ie.command_pattern&&(ie.command_pattern=$),null==ie.prefixes&&(ie.prefixes=$),ie.command_pattern=i(ve=ie.command_pattern)?ve:$,i(ie.command_pattern)?ie.command_pattern:(ie.prefixes=i(ge=ie.prefixes)?ge:[],ie.prefixes.$freeze(),de=X(A(d(B(I,"CommonCommand"),"COMMANDS"),"map",[],((ne=function(se){return null==se&&(se=$),d(se,"PREFIX_PATTERN").$source()}).$$s=ie,ne.$$arity=1,ne)),ie.prefixes),ie.command_pattern=e.regexp(["^S?(",de.$join("|"),")"],"i").$freeze())},te.$$arity=0),e.def(ee,"$eval",$e=function(ne){return this.$new(ne).$eval()},$e.$$arity=1),b.$include(B(n,"Translate")),b.$include(d(B(n,"Deprecated"),"Checker")),e.def(b,"$initialize",v=function(s){var I=this;return I.raw_input=s,I.sort_add_dice=!1,I.sort_barabara_dice=!1,I.d66_sort_type=d(B(n,"D66SortType"),"NO_SORT"),I.enabled_d9=!1,I.round_type=d(B(n,"RoundType"),"FLOOR"),I.sides_implicit_d=6,I.upper_dice_reroll_threshold=$,I.reroll_dice_reroll_threshold=$,I.default_cmp_op=$,I.default_target_number=$,I.enabled_upcase_input=!0,I.locale="ja_jp",I.randomizer=d(B(n,"BCDice"),"Randomizer").$new(),I.debug=!1},v.$$arity=1),b.$attr_accessor("randomizer"),b.$attr_reader("d66_sort_type"),b.$attr_reader("round_type"),b.$attr_reader("sides_implicit_d"),b.$attr_reader("upper_dice_reroll_threshold"),b.$attr_reader("reroll_dice_reroll_threshold"),b.$attr_reader("default_cmp_op"),b.$attr_reader("default_target_number"),e.def(b,"$sort_add_dice?",u=function(){return this.sort_add_dice},u.$$arity=0),e.def(b,"$sort_barabara_dice?",y=function(){return this.sort_barabara_dice},y.$$arity=0),e.def(b,"$enabled_d9?",R=function(){return this.enabled_d9},R.$$arity=0),e.def(b,"$enable_debug",h=function(){return this.debug=!0},h.$$arity=0),e.def(b,"$eval",x=function(){var I,C,D,s=this,J=$;return I=d(B(n,"BCDice"),"Preprocessor").$process(s.raw_input,s),C=i(D=s.$dice_command(I))?D:s.$eval_common_command(s.raw_input),i(C)?(J=[s.randomizer.$rand_results()],A(C,"rands=",e.to_a(J)),O(J.length,1),J=[s.randomizer.$detailed_rand_results()],A(C,"detailed_rands=",e.to_a(J)),O(J.length,1),C):$},x.$$arity=0),e.def(b,"$change_text",g=function(s){return s},g.$$arity=1),e.def(b,"$check_result",E=function(s,I,C,D){var J=this,te=$,$e=$,be=$,ne=$,ie=$;return te=J.$check_result_legacy(s,I,C,D),i(te)?te:($e=A(I,"map",[],"sides".$to_proc()),ne=(be=A(I,"map",[],"value".$to_proc())).$sum(),(te=[100]["$==="](ie=$e)?J.$result_1d100(s,ne,C,D):[20]["$==="](ie)?J.$result_1d20(s,ne,C,D):[6,6]["$==="](ie)?J.$result_2d6(s,ne,be,C,D):$)["$=="](B(n,"Result").$nothing())?$:i(te)?te:(ie=$e.$uniq(),(te=[10]["$==="](ie)?J.$result_nd10(s,ne,be,C,D):[6]["$==="](ie)?J.$result_nd6(s,ne,be,C,D):$)["$=="](B(n,"Result").$nothing())?$:i(te)?te:J.$result_ndx(s,C,D)))},E.$$arity=4),e.def(b,"$grich_text",U=function(s,I,C){return $},U.$$arity=3),b.$private(),e.def(b,"$eval_common_command",o=function(s){try{var I;return s=this.$change_text(s),A(d(B(n,"CommonCommand"),"COMMANDS"),"each",[],((I=function(J){var $e,te=null==I.$$s?this:I.$$s;if(null==te.randomizer&&(te.randomizer=$),null==J&&(J=$),$e=J.$eval(s,te,te.randomizer),!i($e))return $;e.ret($e)}).$$s=this,I.$$arity=1,I)),$}catch(D){if(D===e.returner)return D.$v;throw D}},o.$$arity=1),e.def(b,"$dice_command",_=function(s){var I,C=this,D=$,J=$,te=$,$e=$,be=$,ne=$,ie=$;return i(C.enabled_upcase_input)&&(s=s.$upcase()),D=C.$class().$prefixes_pattern().$match(s),i(D)?(J=D["$[]"](1)["$nil?"]()["$!"](),i(J)&&(s=s["$[]"](Y(1,-1,!1))),te=C.$eval_game_system_specific_command(s),i(te["$is_a?"](B(n,"Result")))?($e=[i(be=te["$secret?"]())?be:J],A(te,"secret=",e.to_a($e)),O($e.length,1),te):i(i(ne=i(ie=te["$nil?"]())?ie:te["$empty?"]())?ne:te["$=="]("1"))?$:A(B(n,"Result").$new(),"tap",[],((I=function(ge){return null==ge&&(ge=$),$e=[te.$to_s()],A(ge,"text=",e.to_a($e)),O($e.length,1),A(ge,"secret=",e.to_a($e=[J])),$e[O($e.length,1)]}).$$s=C,I.$$arity=1,I))):$},_.$$arity=1),e.def(b,"$eval_game_system_specific_command",l=function(s){return $},l.$$arity=1),e.def(b,"$result_ndx",T=function(s,I,C){return i(C["$is_a?"](B(n,"String")))?$:i(s.$send(I,C))?B(n,"Result").$success(this.$translate("success")):B(n,"Result").$failure(this.$translate("failure"))},T.$$arity=3),e.def(b,"$result_1d100",f=function(s,I,C,D){return $},f.$$arity=4),e.def(b,"$result_1d20",S=function(s,I,C,D){return $},S.$$arity=4),e.def(b,"$result_nd10",a=function(s,I,C,D,J){return $},a.$$arity=5),e.def(b,"$result_2d6",p=function(s,I,C,D,J){return $},p.$$arity=5),e.def(b,"$result_nd6",G=function(s,I,C,D,J){return $},G.$$arity=5),e.def(b,"$get_table_by_2d6",Z=function(s){return this.$get_table_by_nD6(s,2)},Z.$$arity=1),e.def(b,"$get_table_by_1d6",Q=function(s){return this.$get_table_by_nD6(s,1)},Q.$$arity=1),e.def(b,"$get_table_by_nD6",ae=function(s,I){return this.$get_table_by_nDx(s,I,6)},ae.$$arity=2),e.def(b,"$get_table_by_nDx",ue=function(s,I,C){var J,te=$;return J=this.randomizer.$roll_sum(I,C),te=this.$get_table_value(s["$[]"](O(J,I))),i(te["$nil?"]())?["1",0]:[te,J]},ue.$$arity=3),e.def(b,"$get_table_by_1d3",ye=function(s){var D,J,k,I=this,te=$;return I.$debug("get_table_by_1d3"),D=I.randomizer.$roll_sum(1,6),I.$debug("num",D),J=(k=O(D,1),"number"==typeof k?k/2:k["$/"](2)).$to_i(),I.$debug("index",J),te=s["$[]"](J),i(te["$nil?"]())?["1",0]:[te,D]},ye.$$arity=1),e.def(b,"$get_table_by_d66_swap",De=function(s){var C;return C=this.randomizer.$roll_d66(d(B(n,"D66SortType"),"ASC")),[this.$get_table_by_number(C,s),C]},De.$$arity=1),e.def(b,"$get_table_by_d66",Pe=function(s){var C,D,J,$e,k,te=$;return C=this.randomizer.$roll_once(6),D=this.randomizer.$roll_once(6),J=X("number"==typeof(k=O(C,1))?6*k:k["$*"](6),O(D,1)),te=s["$[]"](J),$e=""+C+D,i(te["$nil?"]())?["1",$e]:[te,$e]},Pe.$$arity=1),e.def(b,"$get_table_by_number",ze=function(s,I,C){try{var D;return null==C&&(C="1"),A(I,"each",[],((D=function($e){var ne,be=null==D.$$s?this:D.$$s;if(null==$e&&($e=$),ne=$e["$[]"](0),!i(function(k,K){return"number"==typeof k&&"number"==typeof K?k>=K:k["$>="](K)}(ne,s)))return $;e.ret(be.$get_table_value($e["$[]"](1)))}).$$s=this,D.$$arity=1,D)),this.$get_table_value(C)}catch(te){if(te===e.returner)return te.$v;throw te}},ze.$$arity=-3),e.def(b,"$get_table_value",Be=function(s){return i(s["$is_a?"](B(n,"Proc")))?s.$call():s},Be.$$arity=1),e.def(b,"$roll_tables",me=function(s,I){var D=$;return D=I["$[]"](s),i(D)?D.$roll(this.randomizer).$to_s():$},me.$$arity=2),e.def(b,"$debug",re=function(s,I){var D,J,te=this,$e=$,be=$;return D=e.slice.call(arguments,1,arguments.length),i(te.debug)?($e=i(s["$is_a?"](B(n,"String")))?s:s.$inspect(),i(D["$empty?"]())?te.$warn($e):(be=A(D,"map",[],((J=function(ie){return null==ie&&(ie=$),i(ie["$is_a?"](B(n,"String")))?'"'+ie+'"':ie.$inspect()}).$$s=te,J.$$arity=1,J)),te.$warn($e+": "+be.$join(", ")))):$},re.$$arity=-2),d(d(B(N,"I18n"),"Backend"),"Simple").$include(d(d(B(N,"I18n"),"Backend"),"Fallbacks")),B(N,"I18n").$load_path()["$<<"](B(N,"Dir")["$[]"](B(N,"File").$join(c.$__dir__(),"../../i18n/**/*.yml"))),m=["ja_jp"],A(B(N,"I18n"),"default_locale=",e.to_a(m)),O(m.length,1),m=[["ja_jp"]],A(B(N,"I18n").$fallbacks(),"defaults=",e.to_a(m)),m[O(m.length,1)]},function(e){function X(m,k){return"number"==typeof m&&"number"==typeof k?m<=k:m["$<="](k)}function O(m,k){return"number"==typeof m&&"number"==typeof k?m>=k:m["$>="](k)}function L(m,k){return"number"==typeof m&&"number"==typeof k?m+k:m["$+"](k)}function r(m,k){return"number"==typeof m&&"number"==typeof k?m-k:m["$-"](k)}var k,V,b,n,v,R,h,x,g,o,T,f,S,a,p,_,l,u,y,z,j,c=[],N=e.nil,$=e.$$$,d=e.$$,B=e.module,t=e.klass,M=e.send2,i=e.truthy,A=e.send,Y=e.hash2;e.top.$require("bcdice/base"),k=c,V=j=[B(c[0],"BCDice")].concat(k),b=(z=[B(j[0],"GameSystem")].concat(V))[0],n=d(z,"Base"),v=z,u=t(b,n,"MagicaLogia"),y=[u].concat(v),u.$$prototype.randomizer=N,e.const_set(y[0],"ID","MagicaLogia"),e.const_set(y[0],"NAME","\u30de\u30ae\u30ab\u30ed\u30ae\u30a2"),e.const_set(y[0],"SORT_KEY","\u307e\u304d\u304b\u308d\u304d\u3042"),e.const_set(y[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u30b9\u30da\u30b7\u30e3\u30eb\uff0f\u30d5\u30a1\u30f3\u30d6\u30eb\uff0f\u6210\u529f\uff0f\u5931\u6557\u3092\u5224\u5b9a\n\u30fb\u5404\u7a2e\u8868\n\u7d4c\u6b74\u8868\u3000BGT/\u521d\u671f\u30a2\u30f3\u30ab\u30fc\u8868\u3000DAT/\u904b\u547d\u5c5e\u6027\u8868\u3000FAT\n\u9858\u3044\u8868\u3000WIT/\u30d7\u30e9\u30a4\u30ba\u8868\u3000PT\n\u6642\u306e\u6d41\u308c\u8868\u3000TPT/\u5927\u5224\u6642\u306e\u6d41\u308c\u8868\u3000TPTB\n\u4e8b\u4ef6\u8868\u3000AT\n\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000FT\uff0f\u5909\u8abf\u8868\u3000WT\n\u904b\u547d\u5909\u8ee2\u8868\u3000FCT\n\u3000\u5178\u578b\u7684\u707d\u5384 TCT\uff0f\u7269\u7406\u7684\u707d\u5384 PCT\uff0f\u7cbe\u795e\u7684\u707d\u5384 MCT\uff0f\u72c2\u6c17\u7684\u707d\u5384 ICT\n\u3000\u793e\u4f1a\u7684\u707d\u5384 SCT\uff0f\u8d85\u5e38\u7684\u707d\u5384 XCT\uff0f\u4e0d\u601d\u8b70\u7cfb\u707d\u5384 WCT\uff0f\u30b3\u30df\u30ab\u30eb\u7cfb\u707d\u5384 CCT\n\u3000\u9b54\u6cd5\u4f7f\u3044\u306e\u707d\u5384 MGCT\n\u30b7\u30fc\u30f3\u8868\u3000ST\uff0f\u5927\u5224\u30b7\u30fc\u30f3\u8868\u3000STB\n\u3000\u6975\u9650\u74b0\u5883 XEST\uff0f\u5185\u9762\u4e16\u754c IWST\uff0f\u9b54\u6cd5\u90fd\u5e02 MCST\n\u3000\u6b7b\u5f8c\u4e16\u754c WDST\uff0f\u8ff7\u5bae\u4e16\u754c LWST\n\u3000\u9b54\u6cd5\u66f8\u67b6 MBST\uff0f\u9b54\u6cd5\u5b66\u9662 MAST\uff0f\u30af\u30ec\u30c9\u306e\u5854 TCST\n\u3000\u4e26\u884c\u4e16\u754c PWST\uff0f\u7d42\u672b\u3000\u3000 PAST\uff0f\u7570\u4e16\u754c\u9152\u5834 GBST\n\u3000\u307b\u3057\u304b\u3052 SLST\uff0f\u65e7\u56f3\u66f8\u9928 OLST\n\u4e16\u754c\u6cd5\u5247\u8ffd\u52a0\u8868 WLAT/\u3055\u307e\u3088\u3046\u602a\u7269\u8868 WMT\n\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868\u3000RCT\n\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868\u3000RTT\n\u3000\u661f\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTS, RTT1\n\u3000\u7363\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTB, RTT2\n\u3000\u529b\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTF, RTT3\n\u3000\u6b4c\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTP, RTT4\n\u3000\u5922\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTD, RTT5\n\u3000\u95c7\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTN, RTT6\n\u30d6\u30e9\u30f3\u30af\u79d8\u5bc6\u8868\u3000BST/\n\u3000\u5bbf\u6575\u8868\u3000MIT/\u8b00\u7565\u8868\u3000MOT/\u56e0\u7e01\u8868\u3000MAT\n\u3000\u5947\u4eba\u8868\u3000MUT/\u529b\u5834\u8868\u3000MFT/\u540c\u76df\u8868\u3000MLT\n\u843d\u82b1\u8868\u3000FFT\n\u305d\u306e\u5f8c\u8868 FLT\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),e.def(u,"$initialize",R=function(U){var l=this;return R.$$p&&(R.$$p=null),M(l,e.find_super_dispatcher(l,"initialize",R,!1,!0),"initialize",[U],null),l.sort_add_dice=!0,l.sort_barabara_dice=!0,l.d66_sort_type=$(d(y,"D66SortType"),"ASC")},R.$$arity=1),e.def(u,"$result_2d6",h=function(U,o,_,l,T){var f=this,S=N,a=N;return T["$=="]("?")||!l["$=="](">=")?N:(a=[L((S=i(X(o,2))?d(y,"Result").$fumble(f.$translate("fumble")):i(O(o,12))?d(y,"Result").$critical(f.$translate("MagicaLogia.special")):i(O(U,T))?d(y,"Result").$success(f.$translate("success")):d(y,"Result").$failure(f.$translate("failure"))).$text(),f.$gain_magic_element(_["$[]"](0),_["$[]"](1)))],A(S,"text=",e.to_a(a)),r(a.length,1),S)},h.$$arity=5),e.def(u,"$eval_game_system_specific_command",x=function(U){var _,o=this;return i(_=$(o.$class(),"SKILL_TABLE").$roll_command(o.randomizer,U))?_:o.$roll_tables(U,$(o.$class(),"TABLES"))},x.$$arity=1),u.$private(),e.def(u,"$gain_magic_element",g=function(U,o){var _=this,l=N;return U["$=="](o)?(l=_.$translate("MagicaLogia.elements.items")["$[]"](r(U,1)),L(" \uff1e ",_.$format(_.$translate("MagicaLogia.elements.format"),Y(["text"],{text:l})))):""},g.$$arity=2),o=y,_=t(y[0],null,"SkillExpandTable"),l=[_].concat(o),_.$$prototype.times=_.$$prototype.sides=_.$$prototype.items=_.$$prototype.name=_.$$prototype.skill_table=N,e.defs(_,"$from_i18n",T=function(Z,Q,ae){var ye=N;return ye=d(l,"I18n").$t(Z,Y(["locale","raise"],{locale:Q,raise:!1})),this.$new(ye["$[]"]("name"),ye["$[]"]("type"),ye["$[]"]("items"),ae)},T.$$arity=3),e.def(_,"$initialize",f=function(Z,Q,ae,ue){var ye=this,De=N;return ye.name=Z,ye.items=ae.$freeze(),ye.skill_table=ue,De=/(\d+)D(\d+)/i.$match(Q),i(De)||ye.$raise(d(l,"ArgumentError"),"Unexpected table type: "+Q),ye.times=De["$[]"](1).$to_i(),ye.sides=De["$[]"](2).$to_i()},f.$$arity=4),e.def(_,"$roll",S=function(Z){var ae,ue,Q=this;return ae=Z.$roll_sum(Q.times,Q.sides),ue=Q.$expand(Q.items["$[]"](r(ae,Q.times)),Z),$(d(l,"DiceTable"),"RollResult").$new(Q.name,ae,ue)},S.$$arity=1),_.$private(),e.def(_,"$expand",a=function(Z,Q){var ae;return A(Z,"gsub",[/%{([a-z]+)}/],((ae=function(){var ze,De=null==ae.$$s?this:ae.$$s;return ze=d(l,"Regexp").$last_match()["$[]"](1).$to_sym(),De.$roll_skill(ze,Q)}).$$s=this,ae.$$arity=0,ae))},a.$$arity=2),e.const_set(l[0],"CATEGORIES",["star","beast","force","poem","dream","night"].$freeze()),e.def(_,"$roll_skill",p=function(Z,Q){var ue=N;return Z["$=="]("skill")?this.skill_table.$roll_skill(Q):Z["$=="]("element")?this.skill_table.$roll_category(Q):(ue=d(l,"CATEGORIES").$index(Z),i(ue)||this.$raise(d(l,"ArgumentError")),this.skill_table.$categories()["$[]"](ue).$roll(Q).$name())},p.$$arity=2),function(E,U,o){var T,f,S,_=t(E,null,"FallenAfterTable"),l=[_].concat(o);_.$$prototype.lower=_.$$prototype.higher=_.$$prototype.name=N,e.defs(_,"$from_i18n",T=function(p,G){var Q=N;return Q=d(l,"I18n").$t(p,Y(["locale","raise"],{locale:G,raise:!0})),this.$new(Q["$[]"]("name"),Q["$[]"]("items_lower"),Q["$[]"]("items_higher"))},T.$$arity=2),e.def(_,"$initialize",f=function(p,G,Z){var Q=this;return Q.name=p,Q.lower=G,Q.higher=Z},f.$$arity=3),e.def(_,"$roll",S=function(p){var G,Z,ae,ue,Q=this,ye=N;return Z=p.$roll_barabara(2,6),ue=null==(G=e.to_ary(Z))[1]?N:G[1],ye=i(X(ae=null==G[0]?N:G[0],3))?Q.lower:Q.higher,Q.name+"("+ae+","+ue+") \uff1e "+ye["$[]"](r(ue,1))},S.$$arity=1)}(y[0],0,y),function(E,U){var _,l,o=[E].concat(U);E.$private(),e.def(E,"$translate_skill_table",_=function(f){return $(d(o,"DiceTable"),"SaiFicSkillTable").$from_i18n("MagicaLogia.skill_table",f,Y(["rttn"],{rttn:["RTS","RTB","RTF","RTP","RTD","RTN"]}))},_.$$arity=1),e.def(E,"$translate_tables",l=function(f,S){var p,G,Z,Q,ae,ue;return p=d(o,"SkillExpandTable").$from_i18n("MagicaLogia.inveterate_enemy_table",f,S),G=$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.conspiracy_table",f),Z=$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.fate_table",f),Q=$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.cueball_table",f),ae=$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.force_field_table",f),ue=d(o,"SkillExpandTable").$from_i18n("MagicaLogia.alliance_table",f,S),Y(["TPT","ST","FT","WT","FCT","AT","BGT","DAT","FAT","WIT","TCT","PCT","MCT","ICT","SCT","XCT","WCT","CCT","MIT","MOT","MAT","MUT","MFT","MLT","BST","PT","XEST","IWST","MCST","WDST","LWST","STB","MGCT","MBST","MAST","TCST","PWST","PAST","GBST","SLST","WLAT","WMT","FFT","OLST","TPTB","FLT"],{TPT:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TPT",f,S),ST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.ST",f,S),FT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FT",f),WT:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WT",f,S),FCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FCT",f),AT:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.AT",f,S),BGT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.BGT",f),DAT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.DAT",f),FAT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FAT",f),WIT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WIT",f),TCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.TCT",f),PCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.PCT",f),MCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.MCT",f),ICT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.ICT",f),SCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.SCT",f),XCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.XCT",f),WCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WCT",f),CCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.CCT",f),MIT:p,MOT:G,MAT:Z,MUT:Q,MFT:ae,MLT:ue,BST:$(d(o,"DiceTable"),"ChainTable").$new(d(o,"I18n").$translate("MagicaLogia.tables.BST.name",Y(["raise","locale"],{raise:!0,locale:f})),"1D6",[p,G,Z,Q,ae,ue]),PT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.PT",f),XEST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.XEST",f,S),IWST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.IWST",f,S),MCST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MCST",f,S),WDST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WDST",f,S),LWST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.LWST",f,S),STB:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.STB",f,S),MGCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.MGCT",f),MBST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MBST",f,S),MAST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MAST",f,S),TCST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TCST",f,S),PWST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.PWST",f,S),PAST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.PAST",f,S),GBST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.GBST",f,S),SLST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.SLST",f,S),WLAT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WLAT",f),WMT:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WMT",f,S),FFT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FFT",f),OLST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.OLST",f,S),TPTB:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TPTB",f,S),FLT:d(o,"FallenAfterTable").$from_i18n("MagicaLogia.tables.FLT",f)})},l.$$arity=2)}(e.get_singleton_class(u),y),e.const_set(y[0],"SKILL_TABLE",u.$translate_skill_table("ja_jp")),e.const_set(y[0],"TABLES",u.$translate_tables("ja_jp",d(y,"SKILL_TABLE"))),u.$register_prefix(d(y,"SKILL_TABLE").$prefixes()),u.$register_prefix(d(y,"TABLES").$keys())}(Opal)}}]);