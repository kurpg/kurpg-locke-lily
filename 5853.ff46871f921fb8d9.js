(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5853],{5853:(de,ve,fe)=>{fe(9993),Opal.modules["racc/parser"]=function(n){var Z,H,w,l=[],q=n.$r(l),e=n.nil,x=n.$$$,B=n.module,te=n.klass,_=n.truthy,re=n.const_set,$e=n.defs,v=n.gvars,z=n.rb_lt,j=n.send,M=n.to_a,y=n.rb_minus,W=n.def,ie=n.to_ary,G=n.neqeq,k=n.rb_plus,$=n.eqeq,u=n.rb_ge,d=n.rb_gt,Q=n.eqeqeq,U=n.rb_le,J=n.rb_times;return Z=l,H=[B(l[0],"Racc")].concat(Z),w=n.$r(H),te(H[0],w("StandardError"),"ParseError"),_(x("::","ParseError","skip_raise")?"constant":e)||re(l[0],"ParseError",x(q("Racc"),"ParseError")),function(X,Z){var h,g,P,A,ue,w=[B(X,"Racc")].concat(Z),N=n.$r(w);return _(N("Racc_No_Extensions","skip_raise")?"constant":e)||re(w[0],"Racc_No_Extensions",!1),h=w,P=[g=te(w[0],null,"Parser")].concat(h),A=n.$r(P),(ue=g.$$prototype).yydebug=ue.racc_debug_out=ue.racc_error_status=ue.racc_t=ue.racc_vstack=ue.racc_val=ue.racc_state=ue.racc_tstack=e,re(P[0],"Racc_Runtime_Version","1.4.6"),re(P[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),re(P[0],"Racc_Runtime_Core_Version_R","1.4.6"),re(P[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),re(P[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),re(P[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),re(P[0],"Racc_Runtime_Core_Version",A("Racc_Runtime_Core_Version_R")),re(P[0],"Racc_Runtime_Core_Revision",A("Racc_Runtime_Core_Revision_R")),re(P[0],"Racc_Runtime_Type","ruby"),$e(A("Parser"),"$racc_runtime_type",function(){return A("Racc_Runtime_Type")},0),W(g,"$_racc_setup",function(){var f,L,r=this,E=e,a=e,I=e;return null==v.stderr&&(v.stderr=e),_(x(r.$class(),"Racc_debug_parser"))||(r.yydebug=!1),_(null!=(f=r.yydebug)&&f!==e?"instance-variable":e)||(r.yydebug=!1),_(r.yydebug)&&(_(null!=(L=r.racc_debug_out)&&L!==e?"instance-variable":e)||(r.racc_debug_out=v.stderr),r.racc_debug_out=_(E=r.racc_debug_out)?E:v.stderr),a=x(r.$class(),"Racc_arg"),_(z(a.$size(),14))&&(j(a,"[]=",M(I=[13,!0])),y(I.length,1)),a},0),W(g,"$_racc_init_sysvars",function(){var f=this;return f.racc_state=[0],f.racc_tstack=[],f.racc_vstack=[],f.racc_t=e,f.racc_val=e,f.racc_read_next=!0,f.racc_user_yyerror=!1,f.racc_error_status=0},0),W(g,"$do_parse",function(){return this.$__send__(A("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},0),W(g,"$next_token",function(){return this.$raise(A("NotImplementedError"),this.$class()+"#next_token is not defined")},0),W(g,"$_racc_do_parse_rb",function(f,L){var r,a=this,I=e,ce=e,ee=e,ae=e,p=e,c=e,b=e,t=e;return r=ie(f),I=null==r[0]?e:r[0],ce=null==r[1]?e:r[1],ee=null==r[2]?e:r[2],ae=null==r[3]?e:r[3],p=null==r[10]?e:r[10],a.$_racc_init_sysvars(),c=b=t=e,j(a,"catch",["racc_end_parse"],function i(){var D,m,s=null==i.$$s?this:i.$$s,O=e;for(null==s.racc_state&&(s.racc_state=e),null==s.racc_read_next&&(s.racc_read_next=e),null==s.racc_t&&(s.racc_t=e),null==s.yydebug&&(s.yydebug=e),null==s.racc_val&&(s.racc_val=e);_(!0);)for(_(t=ae["$[]"](s.racc_state["$[]"](-1)))?(_(s.racc_read_next)&&G(s.racc_t,0)&&(m=s.$next_token(),D=ie(m),c=null==D[0]?e:D[0],s.racc_val=null==D[1]?e:D[1],s.racc_t=_(c)?_(O=p["$[]"](c))?O:1:0,_(s.yydebug)&&s.$racc_read_token(s.racc_t,c,s.racc_val),s.racc_read_next=!1),t=k(t,s.racc_t),_(u(t,0))&&_(b=I["$[]"](t))&&$(ce["$[]"](t),s.racc_state["$[]"](-1))||(b=ee["$[]"](s.racc_state["$[]"](-1)))):b=ee["$[]"](s.racc_state["$[]"](-1));_(b=s.$_racc_evalact(b,f)););},{$$arity:0,$$s:a})},2),W(g,"$yyparse",function(f,L){return this.$__send__(A("Racc_YY_Parse_Method"),f,L,this.$_racc_setup(),!0)},2),W(g,"$_racc_yyparse_rb",function(f,L,r,E){var a,ee=e,ae=e,F=e,p=e,b=e,t=e,i=e;return a=ie(r),ee=null==a[0]?e:a[0],ae=null==a[1]?e:a[1],F=null==a[2]?e:a[2],p=null==a[3]?e:a[3],b=null==a[10]?e:a[10],this.$_racc_init_sysvars(),t=e,i=e,j(this,"catch",["racc_end_parse"],function S(){var s=null==S.$$s?this:S.$$s;for(null==s.racc_state&&(s.racc_state=e);!_(i=p["$[]"](s.racc_state["$[]"](-1)));)for(;_(t=s.$_racc_evalact(F["$[]"](s.racc_state["$[]"](-1)),r)););return j(f,"__send__",[L],function O(V,_e){var Y=null==O.$$s?this:O.$$s,T=e,le=e;for(null==Y.racc_t&&(Y.racc_t=e),null==Y.racc_state&&(Y.racc_state=e),null==Y.racc_read_next&&(Y.racc_read_next=e),null==V&&(V=e),null==_e&&(_e=e),Y.racc_t=_(V)?_(T=b["$[]"](V))?T:1:0,Y.racc_val=_e,Y.racc_read_next=!1,i=k(i,Y.racc_t),_(u(i,0))&&_(t=ee["$[]"](i))&&$(ae["$[]"](i),Y.racc_state["$[]"](-1))||(t=F["$[]"](Y.racc_state["$[]"](-1)));_(t=Y.$_racc_evalact(t,r)););for(;_(_(T=_(le=(i=p["$[]"](Y.racc_state["$[]"](-1)))["$!"]())?le:Y.racc_read_next["$!"]())?T:Y.racc_t["$=="](0));)for(_(i)&&_(i=k(i,Y.racc_t))&&_(u(i,0))&&_(t=ee["$[]"](i))&&$(ae["$[]"](i),Y.racc_state["$[]"](-1))||(t=F["$[]"](Y.racc_state["$[]"](-1)));_(t=Y.$_racc_evalact(t,r)););},{$$arity:2,$$s:s})},{$$arity:0,$$s:this})},4),W(g,"$_racc_evalact",function(f,L){var r,F,a=this,I=e,ce=e,ae=e,p=e,c=e,b=e,t=e;if(I=null==(r=ie(L))[0]?e:r[0],ce=null==r[1]?e:r[1],ae=null==r[3]?e:r[3],F=null==r[11]?e:r[11],p=null==r[12]?e:r[12],_(d(f,0))&&_(z(f,F)))_(d(a.racc_error_status,0))&&($(a.racc_t,1)||(a.racc_error_status=y(a.racc_error_status,1))),a.racc_vstack.$push(a.racc_val),a.racc_state.$push(f),a.racc_read_next=!0,_(a.yydebug)&&(a.racc_tstack.$push(a.racc_t),a.$racc_shift(a.racc_t,a.racc_tstack,a.racc_vstack));else if(_(z(f,0))&&_(d(f,p["$-@"]()))){if(c=j(a,"catch",["racc_jump"],function i(){var S=null==i.$$s?this:i.$$s;return null==S.racc_state&&(S.racc_state=e),S.racc_state.$push(S.$_racc_do_reduce(L,f)),!1},{$$arity:0,$$s:a}),_(c)){if(Q(1,b=c))return a.racc_user_yyerror=!0,p["$-@"]();if(Q(2,b))return F;a.$raise("[Racc Bug] unknown jump code")}}else if($(f,F))_(a.yydebug)&&a.$racc_accept(),a.$throw("racc_end_parse",a.racc_vstack["$[]"](0));else{if($(f,p["$-@"]())){for(Q(0,b=a.racc_error_status)?_(L["$[]"](21))||a.$on_error(a.racc_t,a.racc_val,a.racc_vstack):Q(3,b)&&($(a.racc_t,0)&&a.$throw("racc_end_parse",e),a.racc_read_next=!0),a.racc_user_yyerror=!1,a.racc_error_status=3;_(!0)&&!(_(t=ae["$[]"](a.racc_state["$[]"](-1)))&&(t=k(t,1),_(u(t,0))&&_(f=I["$[]"](t))&&$(ce["$[]"](t),a.racc_state["$[]"](-1))));)_(U(a.racc_state.$size(),1))&&a.$throw("racc_end_parse",e),a.racc_state.$pop(),a.racc_vstack.$pop(),_(a.yydebug)&&(a.racc_tstack.$pop(),a.$racc_e_pop(a.racc_state,a.racc_tstack,a.racc_vstack));return f}a.$raise("[Racc Bug] unknown action "+f.$inspect())}return _(a.yydebug)&&a.$racc_next_state(a.racc_state["$[]"](-1),a.racc_state),e},2),W(g,"$_racc_do_reduce",function(f,L){var r,p,b,s,O,V,Y,a=this,ce=e,ee=e,ae=e,F=e,c=e,t=e,i=e,S=e,D=e,m=e,_e=e,oe=e,se=e,T=e;return ce=null==(r=ie(f))[4]?e:r[4],ee=null==r[5]?e:r[5],ae=null==r[6]?e:r[6],F=null==r[7]?e:r[7],p=null==r[8]?e:r[8],c=null==r[9]?e:r[9],b=null==r[13]?e:r[13],t=a.racc_state,i=a.racc_vstack,S=a.racc_tstack,D=J(L,-3),m=c["$[]"](D),s=c["$[]"](k(D,1)),O=c["$[]"](k(D,2)),V=[],_(a.yydebug)&&(_e=S["$[]"](m["$-@"](),m)),oe=i["$[]"](m["$-@"](),m),_(a.yydebug)&&(se=[m["$-@"](),m,V],j(S,"[]=",M(se)),y(se.length,1)),se=[m["$-@"](),m,V],j(i,"[]=",M(se)),y(se.length,1),se=[m["$-@"](),m,V],j(t,"[]=",M(se)),y(se.length,1),_(b)?i.$push(a.$__send__(O,oe,i,oe["$[]"](0))):i.$push(a.$__send__(O,oe,i)),S.$push(s),_(a.yydebug)&&a.$racc_reduce(_e,s,S,i),Y=y(s,p),_(D=F["$[]"](Y))&&(D=k(D,t["$[]"](-1)),_(u(D,0))&&_(T=ce["$[]"](D))&&$(ee["$[]"](D),Y))?T:ae["$[]"](Y)},2),W(g,"$on_error",function(f,L,r){var a,E=this;return E.$raise(A("ParseError"),E.$sprintf("\nparse error on value %s (%s)",L.$inspect(),_(a=E.$token_to_str(f))?a:"?"))},3),W(g,"$yyerror",function(){return this.$throw("racc_jump",1)},0),W(g,"$yyaccept",function(){return this.$throw("racc_jump",2)},0),W(g,"$yyerrok",function(){return this.racc_error_status=0},0),W(g,"$racc_read_token",function(f,L,r){var E=this;return E.racc_debug_out.$print("read    "),E.racc_debug_out.$print(L.$inspect(),"(",E.$racc_token2str(f),") "),E.racc_debug_out.$puts(r.$inspect()),E.racc_debug_out.$puts()},3),W(g,"$racc_shift",function(f,L,r){var E=this;return E.racc_debug_out.$puts("shift   "+E.$racc_token2str(f)),E.$racc_print_stacks(L,r),E.racc_debug_out.$puts()},3),W(g,"$racc_reduce",function(f,L,r,E){var a=this,I=e;return(I=a.racc_debug_out).$print("reduce "),_(f["$empty?"]())?I.$print(" <none>"):j(f,"each",[],function ce(ee){return null==ee&&(ee=e),I.$print(" ",(null==ce.$$s?this:ce.$$s).$racc_token2str(ee))},{$$arity:1,$$s:a}),I.$puts(" --\x3e "+a.$racc_token2str(L)),a.$racc_print_stacks(r,E),a.racc_debug_out.$puts()},4),W(g,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},0),W(g,"$racc_e_pop",function(f,L,r){var E=this;return E.racc_debug_out.$puts("error recovering mode: pop token"),E.$racc_print_states(f),E.$racc_print_stacks(L,r),E.racc_debug_out.$puts()},3),W(g,"$racc_next_state",function(f,L){var r=this;return r.racc_debug_out.$puts("goto    "+f),r.$racc_print_states(L),r.racc_debug_out.$puts()},2),W(g,"$racc_print_stacks",function(f,L){var E=e;return(E=this.racc_debug_out).$print("        ["),j(f,"each_index",[],function a(I){return null==I&&(I=e),E.$print(" (",(null==a.$$s?this:a.$$s).$racc_token2str(f["$[]"](I))," ",L["$[]"](I).$inspect(),")")},{$$arity:1,$$s:this}),E.$puts(" ]")},2),W(g,"$racc_print_states",function(f){var r=e;return(r=this.racc_debug_out).$print("        ["),j(f,"each",[],function(a){return null==a&&(a=e),r.$print(" ",a)},1),r.$puts(" ]")},1),W(g,"$racc_token2str",function(f){var r;return _(r=x(this.$class(),"Racc_token_to_s_table")["$[]"](f))?r:this.$raise("[Racc Bug] can't convert token "+f+" to string")},1),W(g,"$token_to_str",function(f){return x(this.$class(),"Racc_token_to_s_table")["$[]"](f)},1)}(l[0],l)},Opal.modules["bcdice/arithmetic/node"]=function(n){var W,$,U,w,N,X,Z,d,G,ne=[],l=n.nil,q=n.$$$,e=n.module,x=n.klass,B=n.def,te=n.send2,_=n.find_super,re=n.eqeq,$e=n.const_set,v=n.eqeqeq,z=n.rb_divide,j=n.truthy,M=n.alias;return W=ne,$=G=[e(ne[0],"BCDice")].concat(W),U=d=[e(G[0],"Arithmetic")].concat($),X=[e(d[0],"Node")].concat(U),Z=n.$r(X),(N=(w=x(X[0],null,"BinaryOp")).$$prototype).lhs=N.rhs=N.op=l,B(w,"$initialize",function(R,h,g){var P=this;return P.lhs=R,P.op=h,P.rhs=g},3),B(w,"$eval",function(R){var P,h=this,g=l;return g=h.lhs.$eval(R),P=h.rhs.$eval(R),g.$send(h.op,P)},1),B(w,"$output",function(){var R=this;return""+R.lhs.$output()+R.op+R.rhs.$output()},0),B(w,"$s_exp",function(){var R=this;return"("+R.$op_for_s_exp()+" "+R.lhs.$s_exp()+" "+R.rhs.$s_exp()+")"},0),B(w,"$op_for_s_exp",function(){return this.op},0),function(K,H,w){var N=x(K,H,"DivideBase"),o=[N].concat(w),R=n.$r(o),h=N.$$prototype;h.lhs=h.rhs=h.op=l,B(N,"$initialize",function g(P,A){return delete g.$$p,te(this,_(this,"initialize",g,!1,!0),"initialize",[P,"/",A],null)},2),B(N,"$eval",function(P){var ue,C,A=this;return ue=A.lhs.$eval(P),C=A.rhs.$eval(P),re(C,0)&&A.$raise(R("ZeroDivisionError")),A.$divide_and_round(ue,C,P)},1),B(N,"$output",function g(){var P=g.$$p||l,A=this;return delete g.$$p,""+te(A,_(A,"output",g,!1,!0),"output",[],P)+A.$rounding_method()},0),N.$private(),B(N,"$rounding_method",function(){return q(this.$class(),"ROUNDING_METHOD")},0),B(N,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()},0),B(N,"$divide_and_round",function(P,A,ue){return this.$raise(R("NotImplementedError"))},3)}(X[0],Z("BinaryOp"),X),function(K,H,w){var N=x(K,H,"DivideWithGameSystemDefault"),o=[N].concat(w),R=n.$r(o);$e(o[0],"ROUNDING_METHOD",""),N.$private(),B(N,"$divide_and_round",function(g,P,A){var ue,C=l;return v(q(R("RoundType"),"CEIL"),ue=A)?z(g.$to_f(),P).$ceil():v(q(R("RoundType"),"ROUND"),ue)?(C=z(g.$to_f(),P),j(C["$negative?"]())?C.$abs().$round()["$-@"]():C.$round()):z(g,P).$floor()},3)}(X[0],Z("DivideBase"),X),function(K,H,w){var N=x(K,H,"DivideWithCeil"),o=[N].concat(w);$e(o[0],"ROUNDING_METHOD","C"),N.$private(),B(N,"$divide_and_round",function(h,g,P){return z(h.$to_f(),g).$ceil()},3)}(X[0],Z("DivideBase"),X),function(K,H,w){var N=x(K,H,"DivideWithRound"),o=[N].concat(w);$e(o[0],"ROUNDING_METHOD","R"),N.$private(),B(N,"$divide_and_round",function(h,g,P){var A=l;return A=z(h.$to_f(),g),j(A["$negative?"]())?A.$abs().$round()["$-@"]():A.$round()},3)}(X[0],Z("DivideBase"),X),function(K,H,w){var N=x(K,H,"DivideWithFloor"),o=[N].concat(w);$e(o[0],"ROUNDING_METHOD","F"),N.$private(),B(N,"$divide_and_round",function(h,g,P){return z(h,g).$floor()},3)}(X[0],Z("DivideBase"),X),function(K,H){var w=x(K,null,"Negative");w.$$prototype.body=l,B(w,"$initialize",function(R){return this.body=R},1),B(w,"$eval",function(R){return this.body.$eval(R)["$-@"]()},1),B(w,"$output",function(){return"-"+this.body.$output()},0),B(w,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"},0)}(X[0]),function(K,H){var w=x(K,null,"Parenthesis");w.$$prototype.expr=l,B(w,"$initialize",function(R){return this.expr=R},1),B(w,"$eval",function(R){return this.expr.$eval(R)},1),B(w,"$output",function(){return"("+this.expr.$output()+")"},0),B(w,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"},0)}(X[0]),function(K,H){var w=x(K,null,"Number");return w.$$prototype.value=l,B(w,"$initialize",function(R){return this.value=R},1),B(w,"$eval",function(R){return this.value},1),B(w,"$output",function(){return this.value.$to_s()},0),M(w,"s_exp","output")}(X[0])},Opal.modules.strscan=function(n){var M,y,W,ie,G,ne=[],l=n.nil,e=n.def,x=n.truthy,B=n.eqeqeq,te=n.Opal,_=n.send,re=n.to_a,$e=n.rb_minus,v=n.alias;return M=ne,W=[y=(0,n.klass)(ne[0],null,"StringScanner")].concat(M),ie=n.$r(W),(G=y.$$prototype).pos=G.string=G.working=G.matched=G.prev_pos=G.match=l,y.$attr_reader("pos","matched"),e(y,"$initialize",function($){var u=this;return u.string=$,u.pos=0,u.matched=l,u.working=$,u.match=[]},1),y.$attr_reader("string"),e(y,"$beginning_of_line?",function(){var $=this;return 0===$.pos||"\n"===$.string.charAt($.pos-1)},0),e(y,"$scan",function($){var u=this,d=($=u.$anchor($)).exec(u.working);return null==d?u.matched=l:"object"==typeof d?(u.prev_pos=u.pos,u.pos+=d[0].length,u.working=u.working.substring(d[0].length),u.matched=d[0],u.match=d,d[0]):"string"==typeof d?(u.pos+=d.length,u.working=u.working.substring(d.length),d):l},1),e(y,"$scan_until",function($){var u=this;$=u.$anchor($);for(var U,d=u.pos,Q=u.working;;){if(U=$.exec(Q),d+=1,Q=Q.substr(1),null!=U)return u.matched=u.string.substr(u.pos,d-u.pos-1+U[0].length),u.match=U,u.prev_pos=d-1,u.pos=d,u.working=Q.substr(U[0].length),u.matched;if(0===Q.length)return u.match=[],u.matched=l}},1),e(y,"$[]",function($){var d;if(x(this.match["$empty?"]()))return l;B(ie("Symbol"),d=$)?$=$.$to_s():B(ie("String"),d)||($=te["$coerce_to!"]($,ie("Integer"),"to_int"));var Q=this.match;return $<0&&($+=Q.length),$<0||$>=Q.length||null==Q[$]?l:Q[$]},1),e(y,"$check",function($){var u=this,d=($=u.$anchor($)).exec(u.working);return u.matched=null==d?l:d[0]},1),e(y,"$check_until",function($){var u=this,d=u.prev_pos,Q=u.pos,U=u.$scan_until($);return U!==l&&(u.matched=U.substr(-1),u.working=u.string.substr(Q)),u.prev_pos=d,u.pos=Q,U},1),e(y,"$peek",function($){return this.working.substring(0,$)},1),e(y,"$eos?",function(){return 0===this.working.length},0),e(y,"$exist?",function($){var d=$.exec(this.working);return null==d?l:0==d.index?0:d.index+1},1),e(y,"$skip",function($){var u=this,d=($=u.$anchor($)).exec(u.working);if(null==d)return u.match=[],u.matched=l;var Q=d[0],U=Q.length;return u.matched=Q,u.match=d,u.prev_pos=u.pos,u.pos+=U,u.working=u.working.substring(U),U},1),e(y,"$skip_until",function($){var d=this.$scan_until($);return d===l?l:(this.matched=d.substr(-1),d.length)},1),e(y,"$get_byte",function(){var $=this,u=l;return $.pos<$.string.length?($.prev_pos=$.pos,$.pos+=1,u=$.matched=$.working.substring(0,1),$.working=$.working.substring(1)):$.matched=l,u},0),e(y,"$match?",function($){var u=this,d=($=u.$anchor($)).exec(u.working);return null==d?l:(u.prev_pos=u.pos,d[0].length)},1),e(y,"$pos=",function($){var u=this;return $<0&&($+=u.string.$length()),u.pos=$,u.working=u.string.slice($)},1),e(y,"$matched_size",function(){return this.matched===l?l:this.matched.length},0),e(y,"$post_match",function(){var $=this;return $.matched===l?l:$.string.substr($.pos)},0),e(y,"$pre_match",function(){var $=this;return $.matched===l?l:$.string.substr(0,$.prev_pos)},0),e(y,"$reset",function(){var $=this;return $.working=$.string,$.matched=l,$.pos=0},0),e(y,"$rest",function(){return this.working},0),e(y,"$rest?",function(){return 0!==this.working.length},0),e(y,"$rest_size",function(){return this.$rest().$size()},0),e(y,"$terminate",function(){var u,$=this;return $.match=l,u=[$.string.$length()],_($,"pos=",re(u)),u[$e(u.length,1)]},0),e(y,"$unscan",function(){var $=this;return $.pos=$.prev_pos,$.prev_pos=l,$.match=l,$},0),v(y,"bol?","beginning_of_line?"),v(y,"getch","get_byte"),y.$private(),e(y,"$anchor",function($){var u=$.toString().match(/\/([^\/]+)$/);return u=u?u[1]:void 0,new RegExp("^(?:"+$.source+")",u)},1)},Opal.modules["bcdice/normalize"]=function(n){var _,z,$e,ne=[],l=n.nil,q=n.module,e=n.eqeqeq,x=n.def,B=n.eqeq;return _=ne,$e=[q(ne[0],"BCDice")].concat(_),(z=q($e[0],"Normalize")).$module_function(),x(z,"$comparison_operator",function(M){var y;return e(/<=|=</,y=M)?"<=":e(/>=|=>/,y)?">=":e(/<>|!=|=!/,y)?"!=":e(/</,y)?"<":e(/>/,y)?">":e(/=/,y)?"==":l},1),x(z,"$target_number",function(M){return B(M,"?")?M:M.$to_i()},1)},Opal.modules["bcdice/command/lexer"]=function(n){var z,W,u,d,Q,U,J,G,M,ne=n.top,l=[],q=n.nil,e=n.module,x=n.klass,B=n.const_set,te=n.hash2,_=n.truthy,re=n.send,$e=n.def;return ne.$require("strscan"),ne.$require("bcdice/normalize"),z=l,W=M=[e(l[0],"BCDice")].concat(z),u=G=[e(M[0],"Command")].concat(W),Q=[d=x(G[0],null,"Lexer")].concat(u),U=n.$r(Q),(J=d.$$prototype).scanner=J.notations=q,B(Q[0],"SYMBOLS",te(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),$e(d,"$initialize",function(Z,K){var H,w,o;return Z=_(o=(w=(H=Z)===q||null==H?q:re(H,"split",[" ",2]))===q||null==w?q:re(w,"first",[]))?o:"",this.scanner=U("StringScanner").$new(Z),this.notations=re(K,"map",[],function(h){return null==h&&(h=q),_(h["$is_a?"](U("String")))?U("Regexp").$new(h):h},1)},2),$e(d,"$next_token",function(){try{var Z=this,K=q,H=q,N=q,o=q;return _(Z.scanner["$eos?"]())?[!1,"$"]:(re(Z.notations,"each",[],function R(h){var P,g=null==R.$$s?this:R.$$s;if(null==g.scanner&&(g.scanner=q),null==h&&(h=q),P=g.scanner.$scan(h),!_(P))return q;n.ret(["NOTATION",P])},{$$arity:1,$$s:Z}),_(K=Z.scanner.$scan(/\d+/))?["NUMBER",K.$to_i()]:_(H=Z.scanner.$scan(/[<>!=]+/))?(H=U("Normalize").$comparison_operator(H),[_(H)?"CMP_OP":"ILLEGAL",H]):(N=Z.scanner.$getch().$upcase(),[_(o=U("SYMBOLS")["$[]"](N))?o:N.$to_sym(),N]))}catch(R){if(R===n.returner)return R.$v;throw R}},0),$e(d,"$source",function(){return this.scanner.$string()},0)},Opal.modules["bcdice/command/parsed"]=function(n){var re,j,G,k,$,u,d,y,v,ne=[],l=n.nil,q=n.module,e=n.klass,x=n.def,B=n.truthy,te=n.eqeqeq;return re=ne,j=v=[q(ne[0],"BCDice")].concat(re),G=y=[q(v[0],"Command")].concat(j),$=[k=e(y[0],null,"Parsed")].concat(G),u=n.$r($),(d=k.$$prototype).question_target=d.critical=d.fumble=d.dollar=d.modify_number=d.target_number=d.prefix_number=d.command=d.suffix_number=d.cmp_op=l,k.$attr_accessor("command"),k.$attr_accessor("prefix_number"),k.$attr_accessor("suffix_number"),k.$attr_accessor("critical"),k.$attr_accessor("fumble"),k.$attr_accessor("dollar"),k.$attr_accessor("modify_number"),k.$attr_accessor("cmp_op"),k.$attr_accessor("target_number"),k.$attr_writer("question_target"),x(k,"$initialize",function(){var U=this;return U.prefix_number=l,U.suffix_number=l,U.critical=l,U.fumble=l,U.dollar=l,U.cmp_op=l,U.target_number=l,U.question_target=!1},0),x(k,"$question_target?",function(){return this.question_target},0),x(k,"$to_s",function(U){var N,J=this,X=l,Z=l,K=l,H=l,w=l;return null==U&&(U="after_command"),X=B(J.critical)?"@"+J.critical:l,Z=B(J.fumble)?"#"+J.fumble:l,K=B(J.dollar)?"$"+J.dollar:l,H=u("Format").$modifier(J.modify_number),w=B(J.question_target)?"?":J.target_number,te("after_command",N=U)?[J.prefix_number,J.command,J.suffix_number,X,Z,K,H,J.cmp_op,w].$join():te("after_modify_number",N)?[J.prefix_number,J.command,J.suffix_number,H,X,Z,K,J.cmp_op,w].$join():te("after_target_number",N)?[J.prefix_number,J.command,J.suffix_number,H,J.cmp_op,w,X,Z,K].$join():l},-1)},Opal.modules["bcdice/command/parser"]=function(n){var u,J,N,g,P,A,ue,C,f,L,r,E,ce,o,R,h,F,Z,K,Q,ne=n.top,l=[],q=n.$r(l),e=n.nil,x=n.$$$,B=n.klass,te=n.module,_=n.hash2,re=n.send2,$e=n.find_super,v=n.def,z=n.send,j=n.to_a,M=n.rb_minus,y=n.eqeq,W=n.hash,ie=n.const_set,G=n.truthy,k=n.to_ary;return ne.$require("racc/parser.rb"),ne.$require("bcdice/arithmetic/node"),ne.$require("bcdice/command/lexer"),ne.$require("bcdice/command/parsed"),B(x(q("BCDice"),"Command"),x(q("Racc"),"Parser"),"Parser"),u=l,J=Q=[te(l[0],"BCDice")].concat(u),Z=[te(Q[0],"Command")].concat(J),K=n.$r(Z),N=Z,R=[o=B(Z[0],x(K("Racc"),"Parser"),"Parser")].concat(N),h=n.$r(R),(F=o.$$prototype).notations=F.lexer=F.modifier=F.suffix_number=F.prefix_number=F.need_suffix_number=F.need_prefix_number=F.critical=F.fumble=F.dollar=F.allowed_cmp_op=F.question_target=e,v(o,"$initialize",function p(c,b){var t,i,S,D,s=this;if(delete p.$$p,t=n.slice.call(arguments),null==(i=n.extract_kwargs(t)))i=_([],{});else if(!i.$$is_hash)throw n.ArgumentError.$new("expected kwargs");if(S=t,!n.hasOwnProperty.call(i.$$smap,"round_type"))throw n.ArgumentError.$new("missing keyword: round_type");return D=i.$$smap.round_type,re(s,$e(s,"initialize",p,!1,!0),"initialize",[],null),s.notations=S,s.round_type=D,s.prefix_number=!1,s.suffix_number=!1,s.need_prefix_number=!1,s.need_suffix_number=!1,s.modifier=!0,s.critical=!1,s.fumble=!1,s.dollar=!1,s.allowed_cmp_op=[e,">=",">","<=","<","==","!="],s.question_target=!1},-2),v(o,"$disable_modifier",function(){return this.modifier=!1,this},0),v(o,"$enable_prefix_number",function(){return this.prefix_number=!0,this},0),v(o,"$enable_suffix_number",function(){return this.suffix_number=!0,this},0),v(o,"$has_prefix_number",function(){var c=this;return c.prefix_number=!0,c.need_prefix_number=!0,c},0),v(o,"$has_suffix_number",function(){var c=this;return c.suffix_number=!0,c.need_suffix_number=!0,c},0),v(o,"$enable_critical",function(){return this.critical=!0,this},0),v(o,"$enable_fumble",function(){return this.fumble=!0,this},0),v(o,"$enable_dollar",function(){return this.dollar=!0,this},0),v(o,"$restrict_cmp_op_to",function(c){var b,i=this;return b=n.slice.call(arguments),i.allowed_cmp_op=b,i},-1),v(o,"$enable_question_target",function(){return this.question_target=!0,this},0),v(o,"$parse",function(c){var b=this;try{return b.lexer=h("Lexer").$new(c,b.notations),b.$do_parse()}catch(t){if(!n.rescue(t,[h("ParseError"),h("ZeroDivisionError")]))throw t;try{return e}finally{n.pop_exception()}}},1),o.$private(),v(o,"$parsed",function(c,b,t,i){return z(h("Parsed").$new(),"tap",[],function D(m){var s,O,V,_e,oe,se,Y=null==D.$$s?this:D.$$s,T=e;return null==Y.round_type&&(Y.round_type=e),null==m&&(m=e),T=[c["$[]"]("command")],z(m,"command=",j(T)),M(T.length,1),T=[(s=c["$[]"]("prefix"),s===e||null==s?e:z(s,"eval",[Y.round_type]))],z(m,"prefix_number=",j(T)),M(T.length,1),T=[(O=c["$[]"]("suffix"),O===e||null==O?e:z(O,"eval",[Y.round_type]))],z(m,"suffix_number=",j(T)),M(T.length,1),T=[(V=b["$[]"]("critical"),V===e||null==V?e:z(V,"eval",[Y.round_type]))],z(m,"critical=",j(T)),M(T.length,1),T=[(_e=b["$[]"]("fumble"),_e===e||null==_e?e:z(_e,"eval",[Y.round_type]))],z(m,"fumble=",j(T)),M(T.length,1),T=[(oe=b["$[]"]("dollar"),oe===e||null==oe?e:z(oe,"eval",[Y.round_type]))],z(m,"dollar=",j(T)),M(T.length,1),T=[t.$eval(Y.round_type)],z(m,"modify_number=",j(T)),M(T.length,1),T=[i["$[]"]("cmp_op")],z(m,"cmp_op=",j(T)),M(T.length,1),y(i["$[]"]("target"),"?")?(z(m,"question_target=",j(T=[!0])),M(T.length,1),z(m,"target_number=",j(T=[0])),T[M(T.length,1)]):(z(m,"question_target=",j(T=[!1])),M(T.length,1),T=[(se=i["$[]"]("target"),se===e||null==se?e:z(se,"eval",[Y.round_type]))],z(m,"target_number=",j(T)),T[M(T.length,1)])},{$$arity:1,$$s:this})},4),v(o,"$next_token",function(){return this.lexer.$next_token()},0),g=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,33,34,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,e,e,17,18,6,e,5,e,e,17,18,e,e,5,23,24,25,26,56,54,55,57],P=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,e,17,15,15,18,18,23,e,18,30,30,23,23,24,e,23,31,31,24,24,25,e,24,44,44,25,25,28,e,25,47,47,28,28,29,e,28,48,48,29,29,33,e,29,49,49,33,33,34,e,33,50,50,34,34,36,e,34,e,e,36,36,37,e,36,e,e,37,37,e,e,37,27,27,27,27,52,52,52,52],A=[-2,4,16,-3,-1,11,e,33,13,35,23,30,1,e,28,40,e,37,44,e,e,-2,e,51,58,65,0,106,72,79,47,54,e,86,93,e,100,107,e,e,e,e,e,e,63,e,e,68,75,82,89,e,120,e,e,e,e,e],ue=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],C=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,e,e,21,47,48,40,51,52,49,50,44,46,3,e,e,e,13,e,e,e,e,e,e,e,32],f=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,e,e,4,8,8,5,7,7,8,8,9,5,6,e,e,e,6,e,e,e,e,e,e,e,6],L=[e,6,13,3,9,-1,27,-15,-10,-1,-38],r=[e,e,e,e,e,e,19,16,15,e,e],E=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],ce=W(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),ie(R[0],"Racc_arg",[g,P,ue,A,C,f,r,L,19,E,ce,58,35,!0]),ie(R[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),ie(R[0],"Racc_debug_parser",!1),v(o,"$_reduce_1",function(c,b,t){var i,D=this;return G(D.modifier)||D.$raise(h("ParseError")),i=k(c),D.$parsed(null==i[0]?e:i[0],null==i[1]?e:i[1],null==i[2]?e:i[2],null==i[3]?e:i[3])},3),v(o,"$_reduce_2",function(c,b,t){var i,D=this;return G(D.modifier)||D.$raise(h("ParseError")),i=k(c),D.$parsed(null==i[0]?e:i[0],null==i[2]?e:i[2],null==i[1]?e:i[1],null==i[3]?e:i[3])},3),v(o,"$_reduce_3",function(c,b,t){var i,O;return O=null==(i=k(c))[2]?e:i[2],this.$parsed(null==i[0]?e:i[0],null==i[1]?e:i[1],x(x(h("Arithmetic"),"Node"),"Number").$new(0),O)},3),v(o,"$_reduce_4",function(c,b,t){var i=this;return G(i.prefix_number)&&G(i.suffix_number)||i.$raise(h("ParseError")),_(["command","prefix","suffix"],{command:c["$[]"](1),prefix:c["$[]"](0),suffix:c["$[]"](2)})},3),v(o,"$_reduce_5",function(c,b,t){var i=this;return G(i.prefix_number)||i.$raise(h("ParseError")),G(i.need_suffix_number)&&i.$raise(h("ParseError")),_(["command","prefix"],{command:c["$[]"](1),prefix:c["$[]"](0)})},3),v(o,"$_reduce_6",function(c,b,t){var i=this;return G(i.suffix_number)||i.$raise(h("ParseError")),G(i.need_prefix_number)&&i.$raise(h("ParseError")),_(["command","suffix"],{command:c["$[]"](0),suffix:c["$[]"](1)})},3),v(o,"$_reduce_7",function(c,b,t){var i=this;return(G(i.need_prefix_number)||G(i.need_suffix_number))&&i.$raise(h("ParseError")),_(["command"],{command:c["$[]"](0)})},3),v(o,"$_reduce_8",function(c,b,t){return _([],{})},3),v(o,"$_reduce_9",function(c,b,t){var i,O,V,m=e;return m=null==(i=k(c))[0]?e:i[0],O=null==i[2]?e:i[2],G(this.critical)&&G(m["$[]"]("critical")["$nil?"]())||this.$raise(h("ParseError")),z(m,"[]=",j(V=["critical",O])),M(V.length,1),m},3),v(o,"$_reduce_10",function(c,b,t){var i,O,V,m=e;return m=null==(i=k(c))[0]?e:i[0],O=null==i[2]?e:i[2],G(this.fumble)&&G(m["$[]"]("fumble")["$nil?"]())||this.$raise(h("ParseError")),z(m,"[]=",j(V=["fumble",O])),M(V.length,1),m},3),v(o,"$_reduce_11",function(c,b,t){var i,O,V,m=e;return m=null==(i=k(c))[0]?e:i[0],O=null==i[2]?e:i[2],G(this.dollar)&&G(m["$[]"]("dollar")["$nil?"]())||this.$raise(h("ParseError")),z(m,"[]=",j(V=["dollar",O])),M(V.length,1),m},3),v(o,"$_reduce_12",function(c,b,t){return c["$[]"](1)},3),v(o,"$_reduce_13",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"Negative").$new(c["$[]"](1))},3),v(o,"$_reduce_14",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"BinaryOp").$new(c["$[]"](0),"+",c["$[]"](2))},3),v(o,"$_reduce_15",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"BinaryOp").$new(c["$[]"](0),"-",c["$[]"](2))},3),v(o,"$_reduce_16",function(c,b,t){return G(this.allowed_cmp_op["$include?"](e))||this.$raise(h("ParseError")),_([],{})},3),v(o,"$_reduce_17",function(c,b,t){var i,m,s;return s=null==(i=k(c))[1]?e:i[1],G(this.allowed_cmp_op["$include?"](m=null==i[0]?e:i[0]))||this.$raise(h("ParseError")),_(["cmp_op","target"],{cmp_op:m,target:s})},3),v(o,"$_reduce_18",function(c,b,t){var S,i=this;return S=c["$[]"](0),G(i.question_target)||i.$raise(h("ParseError")),G(i.allowed_cmp_op["$include?"](S))||i.$raise(h("ParseError")),_(["cmp_op","target"],{cmp_op:S,target:"?"})},3),v(o,"$_reduce_19",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"BinaryOp").$new(c["$[]"](0),"+",c["$[]"](2))},3),v(o,"$_reduce_20",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"BinaryOp").$new(c["$[]"](0),"-",c["$[]"](2))},3),v(o,"$_reduce_22",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"BinaryOp").$new(c["$[]"](0),"*",c["$[]"](2))},3),v(o,"$_reduce_23",function(c,b,t){return c["$[]"](3).$new(c["$[]"](0),c["$[]"](2))},3),v(o,"$_reduce_25",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"DivideWithGameSystemDefault")},3),v(o,"$_reduce_26",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"DivideWithCeil")},3),v(o,"$_reduce_27",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"DivideWithCeil")},3),v(o,"$_reduce_28",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"DivideWithRound")},3),v(o,"$_reduce_29",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"DivideWithFloor")},3),v(o,"$_reduce_30",function(c,b,t){return c["$[]"](1)},3),v(o,"$_reduce_31",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"Negative").$new(c["$[]"](1))},3),v(o,"$_reduce_33",function(c,b,t){return c["$[]"](1)},3),v(o,"$_reduce_34",function(c,b,t){return x(x(h("Arithmetic"),"Node"),"Number").$new(c["$[]"](0))},3),v(o,"$_reduce_none",function(c,b,t){return c["$[]"](0)},3)},Opal.queue(function(n){var U,K,h,g,P,A,w,N,X,l=[],q=n.nil,e=n.$$$,x=n.module,B=n.klass,te=n.const_set,_=n.send2,re=n.find_super,$e=n.def,v=n.truthy,z=n.hash2,j=n.rb_lt,M=n.rb_minus,y=n.send,W=n.rb_ge,ie=n.rb_plus,G=n.rb_times,k=n.rb_gt,$=n.to_a,u=n.hash,d=n.range;return n.top.$require("bcdice/command/parser"),U=l,K=X=[x(l[0],"BCDice")].concat(U),w=[x(X[0],"GameSystem")].concat(K),N=n.$r(w),h=w,P=[g=B(w[0],N("Base"),"Ayabito")].concat(h),A=n.$r(P),g.$$prototype.randomizer=q,te(P[0],"ID","Ayabito"),te(P[0],"NAME","\u3042\u3084\u3073\u3068"),te(P[0],"SORT_KEY","\u3042\u3084\u3072\u3068"),te(P[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(xAB\xb1y@c>=z)\n  x\uff1a\u30b5\u30a4\u30b3\u30ed\u306e\u6570(10\u4ee5\u4e0a\u306e\u5834\u54089\u500b\u632f\u308a\u3001\u305d\u308c\u4ee5\u964d\u3092\u6210\u529f\u65702\u3068\u3057\u3066\u52a0\u7b97\u3059\u308b)\n  \xb1y\uff1a\u6210\u529f\u6570\u3078\u306e\u88dc\u6b63(\u7701\u7565\u53ef)\n  c\uff1a\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024(@\u3054\u3068\u7701\u7565\u53ef\u3002\u7701\u7565\u6642\u306f6)\n  z\uff1a\u76ee\u6a19\u5024(\u59a8\u5bb3\u5024\u306a\u3069\u3002>=\u3054\u3068\u7701\u7565\u53ef)\n  (\u4f8b) 4AB\n       11AB>=5\n       5AB+1\n       6AB@5>=3\n\n\u30fb\u5404\u7a2e\u8868\n  \u611f\u60c5\u8868 ET\n  \u5e1d\u90fd\u6771\u4eac\u30b7\u30fc\u30f3\u8868 TST / \u5834\u9762\u6f14\u51fa\u30b7\u30fc\u30f3\u8868 BST\n  \u4ea4\u6d41\u8868 CET\n  \u30d5\u30a1\u30f3\u30d6\u30eb\u8868 FT\n  \u5c01\u5370\u671f\u9593\u8868 LT\n"),$e(g,"$initialize",function C(f){var r=this;return delete C.$$p,_(r,re(r,"initialize",C,!1,!0),"initialize",[f],null),r.sort_barabara_dice=!0,r.round_type=e(A("RoundType"),"CEIL")},1),$e(g,"$eval_game_system_specific_command",function(f){var r;return v(r=this.$check_action(f))?r:this.$roll_tables(f,A("TABLES"))},1),$e(g,"$check_action",function(f){var E=q,a=q,I=q,ce=q,ee=q,ae=q,F=q,p=q,c=q,b=q,t=q,i=q,S=q;return E=e(A("Command"),"Parser").$new("AB",z(["round_type"],{round_type:e(A("RoundType"),"CEIL")})).$has_prefix_number().$enable_critical().$restrict_cmp_op_to(q,">=").$parse(f),v(E["$nil?"]())?q:(v(j(E.$prefix_number(),10))?(a=E.$prefix_number(),I=0):(a=9,I=M(E.$prefix_number(),9)),ce=E.$modify_number(),ee=v(ae=E.$critical())?ae:6,F=E.$target_number(),p=this.randomizer.$roll_barabara(a,6).$sort(),c=p.$join(","),b=y(p,"any?",[],function(m){return null==m&&(m=q),W(m,ee)},1),t=ie(ie(y(p,"count",[],function(m){return null==m&&(m=q),W(m,4)},1),p.$count(6)),G(I,2)),i=v(ae=t["$=="](0))?p["$include?"](1):ae,t=v(i)?0:ie(t,ce),S=v(F["$nil?"]())?W(t,1):k(t,F),y(A("Result").$new(),"tap",[],function(m){var s=q;return null==m&&(m=q),s=["("+a+"B6>=4)"+(v(k(I,0))?"+"+G(I,2):"")+" \uff1e ["+c+"]"+(v(k(I,0))?"+"+G(I,2):"")+" \uff1e \u6210\u529f\u6570"+t+" \uff1e "+(v(S)?"\u6210\u529f":"\u5931\u6557")+(v(b)?"(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb)":"")+(v(i)?"(\u30d5\u30a1\u30f3\u30d6\u30eb)":"")],y(m,"text=",$(s)),M(s.length,1),y(m,"critical=",$(s=[b])),M(s.length,1),y(m,"fumble=",$(s=[i])),M(s.length,1),y(m,"success=",$(s=[S])),M(s.length,1),s=[S["$!"]()],y(m,"failure=",$(s)),s[M(s.length,1)]},1))},1),te(P[0],"TABLES",z(["ET","TST","BST","CET","FT","LT"],{ET:e(A("DiceTable"),"D66Table").$new("\u611f\u60c5\u8868",e(A("D66SortType"),"NO_SORT"),u(11,"\u4fe1\u983c/\u4e0d\u4fe1\u611f",12,"\u597d\u5947\u5fc3/\u7121\u95a2\u5fc3",13,"\u512a\u8d8a\u611f/\u52a3\u7b49\u611f",14,"\u597d\u610f/\u6575\u610f",15,"\u5b89\u5fc3\u611f/\u4e0d\u5b89\u611f",16,"\u611b\u60c5/\u504f\u611b",21,"\u540c\u60c5/\u6190\u61ab",22,"\u89aa\u8fd1\u611f/\u758e\u5916\u611f",23,"\u9023\u5e2f\u611f/\u9694\u610f",24,"\u5c3d\u529b/\u9762\u5012",25,"\u8cb8\u3057/\u501f\u308a",26,"\u5e87\u8b77\u6b32/\u98df\u50b7",31,"\u671f\u5f85/\u53cd\u767a",32,"\u71b1\u72c2/\u5fc3\u9154",33,"\u5e78\u798f\u611f/\u4e0d\u5feb\u611f",34,"\u5c0a\u656c/\u8efd\u8511",35,"\u61a7\u61ac/\u5ac9\u59ac",36,"\u5fe0\u8aa0/\u670d\u5f93",41,"\u53cb\u60c5/\u4fae\u8511",42,"\u7af6\u4e89\u5fc3/\u8b66\u6212",43,"\u611f\u8b1d/\u5f8c\u6094",44,"\u611f\u670d/\u6050\u6016",45,"\u8208\u5473/\u5c48\u8fb1",46,"\u8aa0\u610f/\u618e\u60aa",51,"\u7fa8\u671b/\u5acc\u60aa",52,"\u5171\u611f/\u61f8\u5ff5",53,"\u50be\u5012/\u53ad\u6c17",54,"\u8d66\u3057/\u6012\u308a",55,"\u6709\u70ba/\u82e6\u624b",56,"\u6069\u7fa9/\u4e0d\u6e80",61,"\u4e88\u611f/\u56f0\u60d1",62,"\u61d0\u65e7/\u5fd8\u5374",63,"\u6155\u60c5/\u57f7\u7740",64,"\u5922\u4e2d/\u9000\u5c48",65,"\u8d16\u7f6a/\u7f6a\u60aa\u611f",66,"\u6148\u611b/\u6bba\u610f")),TST:e(A("DiceTable"),"D66LeftRangeTable").$new("\u5e1d\u90fd\u6771\u4eac\u30b7\u30fc\u30f3\u8868",e(A("D66SortType"),"NO_SORT"),[[d(1,1,!1),A("Array").$new(6,"\u5b50\uff5e\u5df3\u307e\u3067\u306e\u4efb\u610f\u306e\u5341\u4e8c\u652f\u3092\u9078\u629e\u3059\u308b\u3002")],[d(2,3,!1),["\uff3b\u5b50\uff3d\u5e1d\u56fd\u5927\u5b66\u306e\u8d64\u9580\u3001\u5b66\u751f\u305f\u3061\u304c\u4eca\u65e5\u3082\u52c9\u5b66\u306b\u52b1\u3093\u3067\u3044\u308b\u3002","\uff3b\u4e11\uff3d\u5409\u539f\u306e\u6b53\u697d\u8857\u3002\u663c\u9593\u306f\u9759\u304b\u3060\u304c\u3001\u591c\u306f\u6d3b\u6c17\u3092\u898b\u305b\u3066\u304f\u308c\u308b\u3002","\uff3b\u5bc5\uff3d\u4e0a\u91ce\u516c\u5712\u3002\u685c\u306b\u65b0\u7dd1\u3001\u7d05\u8449\u306a\u3069\u3001\u5b63\u7bc0\u306e\u9854\u3092\u898b\u305b\u3066\u304f\u308c\u308b\u3002","\uff3b\u536f\uff3d\u6d45\u8349\u516d\u533a\u306f\u4eca\u65e5\u3082\u8cd1\u3084\u304b\u3002\u6d45\u8349\u5bfa\u3084\u4ef2\u898b\u4e16\u306b\u306f\u3001\u591a\u304f\u306e\u4eba\u3005\u304c\u884c\u304d\u4ea4\u3046\u3002","\uff3b\u8fb0\uff3d\u51cc\u96f2\u95a3\u3002\u6d45\u8349\u5341\u4e8c\u968e\u3068\u3057\u3066\u89aa\u3057\u307e\u308c\u308b\u5854\u306b\u6607\u308a\u3001\u5468\u56f2\u3092\u4e00\u671b\u3059\u308b\u3002","\uff3b\u5df3\uff3d\u4e38\u306e\u5185\u306e\u6771\u4eac\u99c5\u3002\u69cb\u5185\u306e\u55a7\u9a12\u3068\u306f\u88cf\u8179\u306b\u3001\u971e\u30f6\u95a2\u306f\u9759\u304b\u306b\u6642\u304c\u6d41\u308c\u308b\u3002"]],[d(4,5,!1),["\uff3b\u5348\uff3d\u9280\u5ea7\u3092\u3076\u3089\u3076\u3089\u3068\u6b69\u304f\u3002\u767e\u8ca8\u5e97\u304c\u7acb\u3061\u4e26\u3076\u3053\u306e\u8857\u3067\u306f\u3001\u4f55\u3067\u3082\u8cb7\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3089\u3057\u3044\u3002","\uff3b\u672a\uff3d\u65e5\u6bd4\u8c37\u306e\u5e1d\u56fd\u5287\u5834\u3002\u6f14\u76ee\u306f\u3001\u8a71\u984c\u306e\u30c8\u30c3\u30d7\u30b9\u30bf\u30a2\u306b\u3088\u308b\u83ef\u3084\u304b\u306a\u308b\u6b4c\u5287\u306e\u3088\u3046\u3060\u3002","\uff3b\u7533\uff3d\u7687\u5c45\u306e\u307b\u3068\u308a\u3002\u6c34\u9762\u306b\u3046\u304b\u3076\u84ee\u306e\u8449\u304c\u3001\u3057\u305a\u304b\u306b\u63fa\u308c\u3066\u3044\u308b\u3002","\uff3b\u9149\uff3d\u660e\u6cbb\u795e\u5bae\u306e\u5883\u5185\u3002\u795e\u8056\u306a\u308b\u96f0\u56f2\u6c17\u3092\u5473\u308f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002","\uff3b\u620c\uff3d\u65b0\u305f\u306a\u6771\u4eac\u306e\u540d\u6240\u3067\u3042\u308b\u65b0\u5bbf\u3002\u4eca\u3067\u306f\u6771\u897f\u3092\u4e8c\u5206\u3059\u308b\u8857\u3067\u3042\u308b\u3002","\uff3b\u4ea5\uff3d\u65e5\u672c\u5e1d\u56fd\u8ecd\u99d0\u5c6f\u5730\u3002\u5996\u602a\u4eba\u9593\u5171\u540c\u5b9f\u50cd\u90e8\u968a\u306e\u672c\u90e8\u3082\u6577\u5730\u5185\u306b\u3042\u308b\u3002"]],[d(6,6,!1),A("Array").$new(6,"\u5348\uff5e\u4ea5\u307e\u3067\u4efb\u610f\u306e\u5341\u4e8c\u652f\u3092\u9078\u629e\u3059\u308b\u3002")]]),BST:e(A("DiceTable"),"D66LeftRangeTable").$new("\u5834\u9762\u6f14\u51fa\u30b7\u30fc\u30f3\u8868",e(A("D66SortType"),"NO_SORT"),[[d(1,1,!1),A("Array").$new(6,"\u5b50\uff5e\u5df3\u307e\u3067\u306e\u4efb\u610f\u306e\u5341\u4e8c\u652f\u3092\u9078\u629e\u3059\u308b\u3002")],[d(2,3,!1),["\uff3b\u5b50\uff3d\u4eba\u3005\u304c\u5bdd\u9759\u307e\u308b\u5e1d\u90fd\u306e\u591c\u3002\u6708\u306b\u96f2\u304c\u304b\u304b\u308b\u3068\u3068\u3082\u306b\u3001\u9b54\u306e\u9999\u308a\u304c\u6f02\u3063\u3066\u3044\u308b\u3002","\uff3b\u4e11\uff3d\u8349\u6728\u3082\u7720\u308b\u9759\u3051\u3055\u306e\u4e2d\u3001\u72ac\u306e\u9060\u5420\u3048\u3060\u3051\u304c\u805e\u3053\u3048\u3066\u304f\u308b\u3002","\uff3b\u5bc5\uff3d\u4e00\u9663\u306e\u98a8\u304c\u5439\u304d\u629c\u3051\u308b\u3002\u98a8\u306b\u4e57\u3063\u305f\u5302\u3044\u304c\u3001\u5999\u306b\u9f3b\u3092\u304f\u3059\u3050\u3063\u3066\u304d\u305f\u3002","\uff3b\u536f\uff3d\u9727\u3084\u671d\u3082\u3084\u306b\u5305\u307e\u308c\u308b\u3002\u5411\u3053\u3046\u306b\u898b\u3048\u308b\u59ff\u306f\u8ab0\u3060\u308d\u3046\u304b\u2026\u2026","\uff3b\u8fb0\uff3d\u5e1d\u90fd\u306b\u671d\u65e5\u304c\u5c04\u3059\u3002\u4eba\u3005\u306f\u8d77\u304d\u51fa\u3057\u3001\u65e5\u3005\u306e\u55b6\u307f\u3092\u59cb\u3081\u308b\u3002","\uff3b\u5df3\uff3d\u6e05\u5ec9\u306a\u96f0\u56f2\u6c17\u306e\u98a8\u666f\u3002\u9ce5\u3084\u866b\u306e\u58f0\u3001\u98a8\u306b\u305d\u3088\u3050\u6728\u3005\u306e\u97f3\u304c\u805e\u3053\u3048\u3066\u304f\u308b\u3002"]],[d(4,5,!1),["\uff3b\u5348\uff3d\u6642\u8a08\u306e\u91dd\u304c\u3042\u308b\u6642\u9593\u3092\u6307\u3057\u793a\u3059\u3002\u523b\u3092\u544a\u3052\u308b\u30c1\u30e3\u30a4\u30e0\u3084\u9418\u304c\u97ff\u304d\u6e21\u308b\u3002","\uff3b\u672a\uff3d\u663c\u9593\u306e\u5927\u901a\u308a\u3002\u81ea\u52d5\u8eca\u3084\u8def\u9762\u96fb\u8eca\u304c\u8d70\u308a\u3001\u884c\u304d\u4ea4\u3046\u4eba\u3005\u306e\u96d1\u8e0f\u304c\u81f3\u308b\u3068\u3053\u308d\u3067\u898b\u3089\u308c\u308b\u3002","\uff3b\u7533\uff3d\u5915\u523b\u3001\u3069\u3053\u304b\u3089\u3068\u3082\u306a\u304f\u3001\u5b9a\u304b\u3067\u306f\u306a\u3044\u58f0\u3084\u7269\u97f3\u304c\u6f0f\u308c\u3066\u304f\u308b\u3002","\uff3b\u9149\uff3d\u74e6\u65af\u706f\uff08\u304c\u3059\u3068\u3046\uff09\u304c\u901a\u308a\u3092\u9bae\u3084\u304b\u306b\u7167\u3089\u3059\u3002\u591c\u304c\u8857\u306e\u3082\u3046\u3072\u3068\u3064\u306e\u9854\u3092\u51fa\u3057\u59cb\u3081\u308b\u3002","\uff3b\u620c\uff3d\u661f\u7a7a\u306e\u4e0b\u3001\u6708\u660e\u304b\u308a\u304c\u5fae\u304b\u306b\u591c\u9053\u3092\u7167\u3089\u3057\u3066\u3044\u308b\u3002","\uff3b\u4ea5\uff3d\u5149\u3072\u3068\u3064\u306a\u3044\u6697\u95c7\u306e\u4e2d\u3002\u4f55\u8005\u304b\u306e\u6c17\u914d\u304c\u8822\u3044\u3066\u3044\u308b\u2026\u2026"]],[d(6,6,!1),A("Array").$new(6,"\u5348\uff5e\u4ea5\u307e\u3067\u4efb\u610f\u306e\u5341\u4e8c\u652f\u3092\u9078\u629e\u3059\u308b\u3002")]]),CET:e(A("DiceTable"),"D66LeftRangeTable").$new("\u4ea4\u6d41\u8868",e(A("D66SortType"),"NO_SORT"),[[d(1,1,!1),A("Array").$new(6,"\u611f\u60c5\uff5e\u6027\u683c\u307e\u3067\u306e\u4efb\u610f\u306e\u30c6\u30fc\u30de\u3092\u9078\u629e\u3059\u308b\u3002")],[d(2,3,!1),["\uff3b\u611f\u60c5\uff3d\u76f8\u624b\u306b\u62b1\u3044\u3066\u3044\u308b\u611f\u60c5\u3001\u4f1d\u3048\u308b\u3079\u304d\u304b\u4f1d\u3048\u306a\u3044\u3079\u304d\u304b\u3002","\uff3b\u4eba\u9593\uff3d\u76f8\u624b\u306b\u4eba\u9593\u3068\u3044\u3046\u5b58\u5728\u3092\u3069\u3046\u601d\u3046\u304b\u3001\u805e\u3044\u3066\u307f\u308b\u3068\u3057\u3088\u3046\u3002","\uff3b\u53cb\u9054\uff3d\u76f8\u624b\u306b\u53cb\u4eba\u3084\u4ef2\u9593\u306b\u3064\u3044\u3066\u8a9e\u308d\u3046\u3002\u8a71\u3059\u3053\u3068\u3067\u5206\u304b\u308b\u60f3\u3044\u3082\u3042\u308b\u3060\u308d\u3046\u3002","\uff3b\u544a\u767d\uff3d\u76f8\u624b\u306b\u8a71\u3057\u3066\u3044\u3044\u304b\u5206\u304b\u3089\u306a\u3044\u304c\u3001\u81ea\u5206\u306e\u79d8\u3081\u305f\u308b\u60f3\u3044\u3092\u8a9e\u308d\u3046\u3002","\uff3b\u601d\u3044\u51fa\uff3d\u76f8\u624b\u306b\u3001\u904e\u53bb\u306e\u601d\u3044\u51fa\u3092\u8a71\u3057\u3066\u307f\u3088\u3046\u3002\u76f8\u624b\u304b\u3089\u6614\u8a71\u3092\u304d\u3051\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\uff3b\u6027\u683c\uff3d\u76f8\u624b\u306b\u81ea\u8eab\u306e\u6027\u683c\u3092\u8a9e\u308d\u3046\u3002\u8868\u5411\u304d\u306e\u307f\u8a71\u3059\u304b\u3001\u5965\u5e95\u307e\u3067\u8a71\u3057\u3066\u3057\u307e\u3046\u304b\u306f\u3001\u4e8b\u3068\u6b21\u7b2c\u306b\u3088\u308b\u3002"]],[d(4,5,!1),["\uff3b\u95a2\u4fc2\u6027\uff3d\u76f8\u624b\u3068\u306f\u3001\u3044\u3064\u304b\u3089\u3053\u3046\u3057\u305f\u95a2\u4fc2\u3060\u3063\u305f\u306e\u304b\u3002\u76f8\u624b\u3068\u95a2\u4fc2\u6027\u306b\u3064\u3044\u3066\u8a71\u305d\u3046\u3002","\uff3b\u5996\u602a\uff3d\u76f8\u624b\u306b\u5996\u602a\u3068\u3044\u3046\u5b58\u5728\u3092\u3069\u3046\u601d\u3046\u304b\u3001\u805e\u3044\u3066\u307f\u308b\u3068\u3057\u3088\u3046\u3002","\uff3b\u3042\u3084\u3073\u3068\uff3d\u76f8\u624b\u306b\u3001\u81ea\u5206\u304c\u3042\u3084\u3073\u3068\u3067\u3042\u308b\u610f\u5473\u3084\u610f\u7fa9\u3092\u8a9e\u3063\u3066\u307f\u3088\u3046\u3002","\uff3b\u60f3\u3044\uff3d\u76f8\u624b\u304c\u4eca\u3001\u4f55\u304b\u3057\u3089\u60f3\u3046\u4eba\u3084\u7269\u4e8b\u306b\u3064\u3044\u3066\u805e\u3044\u3066\u307f\u3088\u3046\u3002","\uff3b\u5922\uff3d\u76f8\u624b\u306b\u81ea\u5206\u306e\u5922\u3092\u8a9e\u308d\u3046\u3002\u672a\u6765\u306e\u5922\u3001\u304b\u3064\u3066\u6368\u3066\u305f\u5922\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\uff3b\u534a\u751f\uff3d\u76f8\u624b\u306b\u81ea\u8eab\u306e\u534a\u751f\u3092\u8a9e\u308d\u3046\u3002\u534a\u751f\u3053\u305d\u304c\u3001\u4eca\u306e\u81ea\u5206\u3068\u306a\u308b\u304d\u3063\u304b\u3051\u306a\u306e\u3060\u304b\u3089\u2026\u2026"]],[d(6,6,!1),A("Array").$new(6,"\u95a2\u4fc2\u6027\uff5e\u534a\u751f\u307e\u3067\u306e\u4efb\u610f\u306e\u30c6\u30fc\u30de\u3092\u9078\u629e\u3059\u308b\u3002")]]),FT:e(A("DiceTable"),"Table").$new("\u30d5\u30a1\u30f3\u30d6\u30eb\u8868","1D6",["PC\u306e\u3010\u8010\u4e45\u5024\u3011\u3092-5\u3059\u308b(\u6700\u4f4e1)\u3002","PC\u306e\u3010\u6d3b\u529b\u5024\u3011\u3092-5\u3059\u308b(\u6700\u4f4e1)","PC\u306f\u6226\u95d8\u306a\u3044\u3057\u30d5\u30a7\u30a4\u30ba\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u300a\u30a2\u30d3\u30ea\u30c6\u30a3\u300b\u3092\u4f7f\u7528\u3067\u304d\u306a\u3044\u3002","PC\u306f\u6226\u95d8\u306a\u3044\u3057\u30d5\u30a7\u30a4\u30ba\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067[\u7d46]\u3092\u4f7f\u7528\u3067\u304d\u306a\u3044\u3002","\u30bb\u30c3\u30b7\u30e7\u30f3\u7d42\u4e86\u6642\u307e\u3067\u3001\u767b\u5834\u3059\u308b\u30a8\u30cd\u30df\u30fc\u3059\u3079\u3066\u306e\u3010\u8010\u4e45\u5024\u3011\u3092+3\u3059\u308b","\u30bb\u30c3\u30b7\u30e7\u30f3\u7d42\u4e86\u6642\u307e\u3067\u3001\u767b\u5834\u3059\u308b\u30a8\u30cd\u30df\u30fc\u3059\u3079\u3066\u306e\u30c0\u30e1\u30fc\u30b8\u3092+2\u3059\u308b\u3002"]),LT:e(A("DiceTable"),"Table").$new("\u5c01\u5370\u671f\u9593\u8868","1D6",["1\u9031\u9593","1\u30f6\u6708","1\u5e74","10\u5e74","50\u5e74","100\u5e74"])}).$freeze()),g.$register_prefix("\\d*AB",A("TABLES").$keys())})}}]);