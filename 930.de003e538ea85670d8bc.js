(self.webpackChunkudonarium_lily=self.webpackChunkudonarium_lily||[]).push([[930],{930:function(Xe,Je,Qe){var e,n,H,E,N,g,X,a,p,J,z,u,ne,c;Qe(4656),Opal.modules["i18n/backend/fallbacks"]=function(e){function K(p,s){return"number"==typeof p&&"number"==typeof s?p-s:p["$-"](s)}var s,a,E,g,W,H,O,C=[],r=e.nil,z=e.$$$,u=e.$$,ne=e.module,c=e.truthy,F=e.send,n=e.send2,t=e.hash2;return s=C,O=[H=ne(C[0],"I18n")].concat(s),e.class_variable_set(O[0],"@@fallbacks",r),a=e.get_singleton_class(H),W=[a].concat(O),e.def(a,"$fallbacks",E=function(){var N,i,f;return e.class_variable_set(W[1],"@@fallbacks",c(f=null==(N=W[1].$$cvars["@@fallbacks"])?r:N)?f:z(z(u(W,"I18n"),"Locale"),"Fallbacks").$new()),c(i=u(W,"Thread").$current()["$[]"]("i18n_fallbacks"))?i:null==(N=W[1].$$cvars["@@fallbacks"])?r:N},E.$$arity=0),e.def(a,"$fallbacks=",g=function(N){var A,i;return e.class_variable_set(W[1],"@@fallbacks",c(N["$is_a?"](u(W,"Array")))?z(z(u(W,"I18n"),"Locale"),"Fallbacks").$new(N):N),i=["i18n_fallbacks",null==(A=W[1].$$cvars["@@fallbacks"])?r:A],F(u(W,"Thread").$current(),"[]=",e.to_a(i)),i[K(i.length,1)]},g.$$arity=1),void function(a,D){var E=[ne(a,"Backend")].concat(D);!function(g,X){var f,i,b,_,N=ne(g,"Fallbacks"),A=[N].concat(X);e.def(N,"$translate",f=function(L,m,l){try{var R,q=f.$$p,I=this,T=r,h=r,P=r,B=r,j=r,o=r;for(q&&(f.$$p=null),j=0,o=arguments.length,B=new Array(o);j<o;j++)B[j]=arguments[j];return null==l&&(l=u(A,"EMPTY_HASH")),!c(l.$fetch("fallback",!0))||c(l["$[]"]("fallback_in_progress"))?n(I,e.find_super_dispatcher(I,"translate",f,!1,!0),"translate",B,q):(c(l["$[]"]("default"))&&(T=I["$extract_non_symbol_default!"](l)),h=l.$merge(t(["fallback_in_progress"],{fallback_in_progress:!0})),F(u(A,"I18n").$fallbacks()["$[]"](L),"each",[],((R=function(te){var ue,se=null==R.$$s?this:R.$$s;null==te&&(te=r);try{return F(se,"catch",["exception"],((ue=function(){var Re=null==ue.$$s?this:ue.$$s,De=r;if(De=n(Re,e.find_iter_super_dispatcher(Re,"translate",ue.$$def||R.$$def||f,!1,!1),"translate",[te,m,h],null),c(De["$nil?"]()))return r;c(L.$to_s()["$!="](te.$to_s()))&&Re.$on_fallback(L,te,m,l),e.ret(De)}).$$s=se,ue.$$arity=0,ue))}catch(Te){if(!e.rescue(Te,[z(u(A,"I18n"),"InvalidLocale")]))throw Te;try{return r}finally{e.pop_exception()}}}).$$s=I,R.$$arity=1,R)),c(c(P=l["$key?"]("default"))?l["$[]"]("default")["$nil?"]():P)?r:c(T)?n(I,e.find_super_dispatcher(I,"translate",f,!1,!0),"translate",[L,r,l.$merge(t(["default"],{default:T}))],null):I.$throw("exception",z(u(A,"I18n"),"MissingTranslation").$new(L,m,l)))}catch(w){if(w===e.returner)return w.$v;throw w}},f.$$arity=-3),e.def(N,"$extract_non_symbol_default!",i=function(L){var m,q,R=r,re=r;return R=[L["$[]"]("default")].$flatten(),q=F(R,"detect",[],((m=function(T){return null==T&&(T=r),T["$is_a?"](u(A,"Symbol"))["$!"]()}).$$s=this,m.$$arity=1,m)),c(q)&&(re=["default",R["$[]"](0,R.$index(q))],F(L,"[]=",e.to_a(re)),K(re.length,1)),q},i.$$arity=1),e.def(N,"$exists?",b=function(L,m,l){try{var R,q=b.$$p,I=this,T=r,h=r,P=r;for(q&&(b.$$p=null),h=0,P=arguments.length,T=new Array(P);h<P;h++)T[h]=arguments[h];return null==l&&(l=u(A,"EMPTY_HASH")),c(l.$fetch("fallback",!0))?(F(u(A,"I18n").$fallbacks()["$[]"](L),"each",[],((R=function(j){var o=null==R.$$s?this:R.$$s;null==j&&(j=r);try{if(!c(n(o,e.find_iter_super_dispatcher(o,"exists?",R.$$def||b,!1,!1),"exists?",[j,m],null)))return r;e.ret(!0)}catch(w){if(!e.rescue(w,[z(u(A,"I18n"),"InvalidLocale")]))throw w;try{return r}finally{e.pop_exception()}}}).$$s=I,R.$$arity=1,R)),!1):n(I,e.find_super_dispatcher(I,"exists?",b,!1,!0),"exists?",T,q)}catch(B){if(B===e.returner)return B.$v;throw B}},b.$$arity=-3),N.$private(),e.def(N,"$on_fallback",_=function(L,m,l,R){return r},_.$$arity=4)}(E[0],E)}(O[0],O)},Opal.modules["bcdice/randomizer"]=function(e){function K(a,D){return"number"==typeof a&&"number"==typeof D?a>D:a["$>"](D)}function J(a,D){return"number"==typeof a&&"number"==typeof D?a+D:a["$+"](D)}function C(a,D){return"number"==typeof a&&"number"==typeof D?a<=D:a["$<="](D)}function r(a,D){return"number"==typeof a&&"number"==typeof D?a-D:a["$-"](D)}function z(a,D){return"number"==typeof a&&"number"==typeof D?a*D:a["$*"](D)}var D,N,i,b,_,x,L,m,l,R,q,re,I,A,f,E,c=[],F=e.nil,n=e.$$$,t=e.$$,s=e.klass,H=e.truthy,O=e.send;return D=c,N=E=[(0,e.module)(c[0],"BCDice")].concat(D),A=s(E[0],null,"Randomizer"),f=[A].concat(N),A.$$prototype.rand_results=A.$$prototype.detailed_rand_results=F,e.const_set(f[0],"UPPER_LIMIT_DICE_TIMES",200),e.const_set(f[0],"UPPER_LIMIT_DICE_SIDES",1e3),e.const_set(f[0],"UPPER_LIMIT_RANDS",1e4),e.def(A,"$initialize",i=function(){return this.rand_results=[],this.detailed_rand_results=[]},i.$$arity=0),A.$attr_reader("rand_results"),A.$attr_reader("detailed_rand_results"),e.const_set(f[0],"DetailedRandResult",t(f,"Struct").$new("kind","sides","value")),e.def(A,"$roll_barabara",b=function(h,P){var B,o,j=this;return H(K(J(j.rand_results.$size(),h),t(f,"UPPER_LIMIT_RANDS")))&&j.$raise(t(f,"TooManyRandsError")),H(H(o=C(h,0))?o:K(h,t(f,"UPPER_LIMIT_DICE_TIMES")))?[]:O(t(f,"Array"),"new",[h],((B=function(){return(null==B.$$s?this:B.$$s).$roll_once(P)}).$$s=j,B.$$arity=0,B))},b.$$arity=2),e.def(A,"$roll_sum",_=function(h,P){return this.$roll_barabara(h,P).$sum()},_.$$arity=2),e.def(A,"$roll_once",x=function(h){var B,j=F;return H(H(B=C(h,0))?B:K(h,t(f,"UPPER_LIMIT_DICE_SIDES")))?0:(j=this.$rand_inner(h),this.$push_to_detail("normal",h,j),j)},x.$$arity=1),e.def(A,"$roll_index",L=function(h){return r(this.$roll_once(h),1)},L.$$arity=1),e.def(A,"$roll_tens_d10",m=function(){var B,P=F;return(P=this.$rand_inner(10))["$=="](10)&&(P=0),B=z(P,10),this.$push_to_detail("tens_d10",10,B),B},m.$$arity=0),e.def(A,"$roll_d9",l=function(){var P;return P=r(this.$rand_inner(10),1),this.$push_to_detail("d9",10,P),P},l.$$arity=0),e.def(A,"$roll_d66",R=function(h){var P,o,j=F;return j=O(t(f,"Array"),"new",[2],((P=function(){return(null==P.$$s?this:P.$$s).$roll_once(6)}).$$s=this,P.$$arity=0,P)),o=h,n(t(f,"D66SortType"),"ASC")["$==="](o)?j["$sort!"]():n(t(f,"D66SortType"),"DESC")["$==="](o)&&j["$sort!"]()["$reverse!"](),J(z(j["$[]"](0),10),j["$[]"](1))},R.$$arity=1),A.$private(),e.def(A,"$rand_inner",q=function(h){var B,P=this;return H(function(a,D){return"number"==typeof a&&"number"==typeof D?a>=D:a["$>="](D)}(P.rand_results.$size(),t(f,"UPPER_LIMIT_RANDS")))&&P.$raise(t(f,"TooManyRandsError")),B=P.$random(h),P.rand_results["$<<"]([B,h]),B},q.$$arity=1),e.def(A,"$random",re=function(h){return J(t(f,"Kernel").$rand(h),1)},re.$$arity=1),e.def(A,"$push_to_detail",I=function(h,P,B){var o;return o=t(f,"DetailedRandResult").$new(h,P,B),this.detailed_rand_results.$push(o)},I.$$arity=3),void function(g,X,N){[s(g,X,"TooManyRandsError")].concat(N)}(E[0],t(E,"StandardError"),E)},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var n,H,E,N,A,f,i,g,X,a,p,J=[],C=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.truthy;return n=J,H=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"DiceTable")].concat(H),g=ne(a[0],null,"RollResult"),X=[g].concat(E),g.$$prototype.table_name=g.$$prototype.value=g.$$prototype.body=C,e.def(g,"$initialize",N=function(_,x,L){var m=this;return m.table_name=_,m.value=x,m.body=L},N.$$arity=3),g.$attr_reader("table_name"),g.$attr_reader("value"),g.$attr_reader("body"),e.def(g,"$to_s",A=function(){var _=this;return _.table_name+"("+_.value+") \uff1e "+_.body},A.$$arity=0),e.def(g,"$last_body",f=function(){var _=this;return c(_.body["$is_a?"](z(X,"RollResult")))?_.body.$last_body():_.body},f.$$arity=0),void e.def(g,"$empty?",i=function(){return!1},i.$$arity=0)},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var t,O,g,A,f,X,N,D,s,C=[],r=e.nil,u=e.$$,ne=e.module,c=e.klass,F=e.truthy;return t=C,O=s=[ne(C[0],"BCDice")].concat(t),g=D=[ne(s[0],"DiceTable")].concat(O),X=c(D[0],null,"ChainTable"),N=[X].concat(g),X.$$prototype.times=X.$$prototype.sides=X.$$prototype.items=X.$$prototype.name=r,e.def(X,"$initialize",A=function(b,_,x){var L=this,m=r;return L.name=b,L.items=x.$freeze(),m=/(\d+)D(\d+)/i.$match(_),F(m)||L.$raise(u(N,"ArgumentError"),"Unexpected table type: "+_),L.times=m["$[]"](1).$to_i(),L.sides=m["$[]"](2).$to_i()},A.$$arity=3),void e.def(X,"$roll",f=function(b){var x,L,_=this,m=r;return L=function(n,t){return"number"==typeof n&&"number"==typeof t?n-t:n["$-"](t)}(x=b.$roll_sum(_.times,_.sides),_.times),m=_.items["$[]"](L),F(m["$respond_to?"]("roll"))&&(m=m.$roll(b)),u(N,"RollResult").$new(_.name,x,m)},f.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function C(p,s){return"number"==typeof p&&"number"==typeof s?p-s:p["$-"](s)}var s,D,N,i,b,_,A,f,E,O,z=[],u=e.nil,c=e.$$,F=e.module,n=e.klass,t=e.hash2;return s=z,D=O=[F(z[0],"BCDice")].concat(s),N=E=[F(O[0],"DiceTable")].concat(D),A=n(E[0],null,"D66GridTable"),f=[A].concat(N),A.$$prototype.name=A.$$prototype.items=u,e.defs(A,"$from_i18n",i=function(L,m){var R=u;return R=c(f,"I18n").$t(L,t(["locale","raise"],{locale:m,raise:!0})),this.$new(R["$[]"]("name"),R["$[]"]("items"))},i.$$arity=2),e.def(A,"$initialize",b=function(L,m){return this.name=L,this.items=m.$freeze()},b.$$arity=2),void e.def(A,"$roll",_=function(L){var l,R,q,re,I;return l=L.$roll_once(6),R=L.$roll_once(6),q=function(p,s){return"number"==typeof p&&"number"==typeof s?p+s:p["$+"](s)}(function(p,s){return"number"==typeof p?10*p:p["$*"](10)}(l),R),re=C(l,1),I=C(R,1),c(f,"RollResult").$new(this.name,q,this.items["$[]"](re)["$[]"](I))},_.$$arity=1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var n,H,E,N,A,g,X,a,p,J=[],C=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),n=J,H=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"DiceTable")].concat(H),g=ne(a[0],z(a,"D66GridTable"),"D66HalfGridTable"),X=[g].concat(E),e.defs(g,"$from_i18n",N=function(i,b){var x=C;return x=z(X,"I18n").$t(i,c(["locale","raise"],{locale:b,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2_3"),x["$[]"]("items_4_5_6"))},N.$$arity=2),void e.def(g,"$initialize",A=function(i,b,_){return this.name=i,this.items=[b,b,b,_,_,_].$freeze()},A.$$arity=3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var n,H,E,N,A,g,X,a,p,J=[],C=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),n=J,H=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"DiceTable")].concat(H),g=ne(a[0],z(a,"D66GridTable"),"D66OneThirdTable"),X=[g].concat(E),e.defs(g,"$from_i18n",N=function(i,b){var x=C;return x=z(X,"I18n").$t(i,c(["locale","raise"],{locale:b,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2"),x["$[]"]("items_3_4"),x["$[]"]("items_5_6"))},N.$$arity=2),void e.def(g,"$initialize",A=function(i,b,_,x){return this.name=i,this.items=[b,b,_,_,x,x].$freeze()},A.$$arity=4)},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var s,D,N,i,b,_,x,A,f,E,O,r=[],z=e.nil,u=e.$$$,ne=e.$$,c=e.module,F=e.klass,n=e.hash2,t=e.truthy;return s=r,D=O=[c(r[0],"BCDice")].concat(s),N=E=[c(O[0],"DiceTable")].concat(D),A=F(E[0],null,"D66Table"),f=[A].concat(N),A.$$prototype.sort_type=A.$$prototype.items=A.$$prototype.name=z,e.defs(A,"$from_i18n",i=function(m,l){var re,q=z;return q=ne(f,"I18n").$t(m,n(["locale"],{locale:l})),re=ne(f,"D66SortType").$const_get(q["$[]"]("d66_sort_type")),this.$new(q["$[]"]("name"),re,q["$[]"]("items"))},i.$$arity=2),e.def(A,"$initialize",b=function(m,l,R){var q=this;return q.name=m,q.sort_type=l,q.items=R.$freeze()},b.$$arity=3),e.def(A,"$roll",_=function(m){var q,T,l=this,R=z,re=z,I=z;return R=m.$roll_barabara(2,6),q=l.sort_type,u(ne(f,"D66SortType"),"ASC")["$==="](q)?R["$sort!"]():u(ne(f,"D66SortType"),"DESC")["$==="](q)&&R["$sort!"]()["$reverse!"](),re=function(p,s){return"number"==typeof p&&"number"==typeof s?p+s:p["$+"](s)}(function(p,s){return"number"==typeof p?10*p:p["$*"](10)}(R["$[]"](0)),R["$[]"](1)),I=t(T=l.items["$[]"](re))?T:l.items["$[]"](re.$to_s()),t(I["$respond_to?"]("roll"))&&(I=I.$roll(m)),ne(f,"RollResult").$new(l.name,re,I)},_.$$arity=1),void e.def(A,"$choice",x=function(m){return ne(f,"RollResult").$new(this.name,m,this.items["$[]"](m))},x.$$arity=1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){function K(H,O){return"number"==typeof H&&"number"==typeof O?H+O:H["$+"](O)}var O,f,_,i,E,X,D,z=[],u=e.nil,c=e.$$,F=e.module,n=e.klass,t=e.hash2,p=e.send,s=e.send2;return e.top.$require("bcdice/dice_table/d66_table"),O=z,E=D=[F(z[0],"BCDice")].concat(O),f=X=[F(D[0],"DiceTable")].concat(E),[i=n(X[0],c(X,"D66Table"),"D66LeftRangeTable")].concat(f),void e.def(i,"$initialize",_=function(L,m,l){var R,T,I=this;return _.$$p&&(_.$$p=null),T=t([],{}),p(l,"each",[],((R=function(h){function P(B){return h.apply(this,arguments)}return P.toString=function(){return h.toString()},P}(function(h){var B,o,te,P=null==R.$$s?this:R.$$s;return null==h&&(h=u),B=e.to_ary(h),te=null==B[1]?u:B[1],p(null==B[0]?u:B[0],"each",[],((o=function(ue){var Re;return null==ue&&(ue=u),p(te,"each_with_index",[],((Re=function(Ee,fe){var V,G;return null==Ee&&(Ee=u),null==fe&&(fe=u),V=K(function(H,O){return"number"==typeof H?10*H:H["$*"](10)}(ue),K(fe,1)),p(T,"[]=",e.to_a(G=[V,Ee])),G[function(H,O){return"number"==typeof H?H-1:H["$-"](1)}(G.length)]}).$$s=null==o.$$s?this:o.$$s,Re.$$arity=2,Re))}).$$s=P,o.$$arity=1,o))})).$$s=I,R.$$arity=1,R)),s(I,e.find_super_dispatcher(I,"initialize",_,!1,!0),"initialize",[L,m,T],null)},_.$$arity=3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var s,D,N,i,b,A,f,E,O,z=[],u=e.nil,c=e.$$,F=e.module,n=e.klass,t=e.truthy;return s=z,D=O=[F(z[0],"BCDice")].concat(s),N=E=[F(O[0],"DiceTable")].concat(D),A=n(E[0],null,"D66ParityTable"),f=[A].concat(N),A.$$prototype.odd=A.$$prototype.even=A.$$prototype.name=u,e.def(A,"$initialize",i=function(x,L,m){var l=this;return l.name=x,l.odd=L.$freeze(),l.even=m.$freeze()},i.$$arity=3),void e.def(A,"$roll",b=function(x){var l,q,re,L=this,m=u;return m=x.$roll_once(6),l=x.$roll_once(6),q=(t(m["$odd?"]())?L.odd:L.even)["$[]"](function(p,s){return"number"==typeof p?p-1:p["$-"](1)}(l)),re=function(p,s){return"number"==typeof p&&"number"==typeof s?p+s:p["$+"](s)}(function(p,s){return"number"==typeof p?10*p:p["$*"](10)}(m),l),c(f,"RollResult").$new(L.name,re,q)},b.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var p,a,X,f,i,N,A,W,H,r=[],z=e.nil,ne=e.$$,c=e.module,F=e.klass,n=e.send;return p=r,a=H=[c(r[0],"BCDice")].concat(p),X=W=[c(H[0],"DiceTable")].concat(a),N=F(W[0],null,"D66RangeTable"),A=[N].concat(X),N.$$prototype.items=N.$$prototype.name=z,e.def(N,"$initialize",f=function(_,x){return this.name=_,this.items=x.$freeze()},f.$$arity=2),void e.def(N,"$roll",i=function(_){var x,m,l,R,t,L=this,q=z;return m=_.$roll_once(6),l=_.$roll_once(6),R=function(t,p){return"number"==typeof t&&"number"==typeof p?t+p:t["$+"](p)}("number"==typeof(t=m)?10*t:t["$*"](10),l),q=n(L.items,"find",[],((x=function(I){return null==I&&(I=z),I["$[]"](0)["$include?"](R)}).$$s=L,x.$$arity=1,x)),ne(A,"RollResult").$new(L.name,R,q["$[]"](1))},i.$$arity=1)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var H,W,A,b,_,x,L,m,l,R,q,re,f,i,g,a,z=[],u=e.nil,c=e.$$,F=e.module,n=e.klass,t=e.send,p=e.truthy;return H=z,W=a=[F(z[0],"BCDice")].concat(H),A=g=[F(a[0],"DiceTable")].concat(W),f=n(g[0],null,"RangeTable"),i=[f].concat(A),f.$$prototype.name=f.$$prototype.items=f.$$prototype.num_of_dice=f.$$prototype.num_of_sides=f.$$prototype.formatter=u,e.const_set(i[0],"RollResult",t(c(i,"Struct"),"new",["sum","values","content","formatted"],((b=function(){return(null==b.$$s?this:b.$$s).$alias_method("to_s","formatted")}).$$s=f,b.$$arity=0,b))),e.const_set(i[0],"Item",c(i,"Struct").$new("range","content")),e.const_set(i[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(i[0],"DEFAULT_FORMATTER",t(f,"lambda",[],($$2=function(I){function T(h,P){return I.apply(this,arguments)}return T.toString=function(){return I.toString()},T}(function(I,T){return null==$$2.$$s||$$2,null==I&&(I=u),null==T&&(T=u),I.$name()+"("+T.$sum()+") \uff1e "+T.$content()}),$$2.$$s=f,$$2.$$arity=2,$$2))),f.$attr_reader("name"),f.$attr_reader("num_of_dice"),f.$attr_reader("num_of_sides"),e.def(f,"$initialize",_=function(T,h,P){var w,B=_.$$p,j=B||u,o=this,te=u;return B&&(_.$$p=null),B&&(_.$$p=null),o.name=T.$freeze(),o.formatter=p(w=j)?w:c(i,"DEFAULT_FORMATTER"),te=c(i,"DICE_ROLL_METHOD_RE").$match(h),p(te)||o.$raise(c(i,"ArgumentError"),o.name+": invalid dice roll method: "+h),o.num_of_dice=te["$[]"](1).$to_i(),o.num_of_sides=te["$[]"](2).$to_i(),o.$store(P)},_.$$arity=3),e.def(f,"$fetch",x=function(T){var h,B,P=this;return B=t(P.items,"find",[],((h=function(o){return null==o&&(o=u),o.$range()["$include?"](T)}).$$s=P,h.$$arity=1,h)),p(B)||P.$raise(c(i,"RangeError"),P.name+": value is out of range: "+T),B},x.$$arity=1),e.def(f,"$roll",L=function(T){var B,j,o,s,h=this,P=u;return B=(P=T.$roll_barabara(h.num_of_dice,h.num_of_sides)).$sum(),j=c(i,"RollResult").$new(B,P,h.$fetch(B).$content()),o=[h.formatter["$[]"](h,j)],t(j,"formatted=",e.to_a(o)),"number"==typeof(s=o.length)||s["$-"](1),j},L.$$arity=1),f.$private(),e.def(f,"$store",m=function(T){var h,P,B,o,w,j=this;return o=t(T,"map",[],((h=function(se,ue){return null==se&&(se=u),null==ue&&(ue=u),[(null==h.$$s?this:h.$$s).$coerce_to_int_range(se),ue]}).$$s=j,h.$$arity=2,h)),w=t(o,"sort_by",[],((P=function(se,ue){return null==se&&(se=u),null==ue&&(ue=u),se.$min()}).$$s=j,P.$$arity=2,P)),j.$assert_min_sum_is_covered(w),j.$assert_max_sum_is_covered(w),j.$assert_no_gap_or_overlap_in_ranges(w),j.items=t(w,"map",[],(B=function(se,ue){return null==se&&(se=u),null==ue&&(ue=u),c(i,"Item").$new(se,ue.$freeze()).$freeze()},B.$$s=j,B.$$arity=2,B)).$freeze(),j},m.$$arity=1),e.def(f,"$coerce_to_int_range",l=function(T){var P,B=u;return P=T,c(i,"Integer")["$==="](P)?c(i,"Range").$new(T,T):c(i,"Range")["$==="](P)&&p(p(B=T.$begin()["$is_a?"](c(i,"Integer")))?T.$end()["$is_a?"](c(i,"Integer")):B)?T:this.$raise(c(i,"TypeError"),this.name+": "+T+" ("+T.$class()+") must be an Integer or a Range with Integers ")},l.$$arity=1),e.def(f,"$assert_min_sum_is_covered",R=function(T){var P,h=this,B=u;return P=h.num_of_dice,B=T.$first()["$[]"](0),p(B["$include?"](P))||h.$raise(c(i,"RangeError"),h.name+": min value ("+P+") is not covered: "+B),h},R.$$arity=1),e.def(f,"$assert_max_sum_is_covered",q=function(T){var P,h=this,B=u;return P=function(s,H){return"number"==typeof s&&"number"==typeof H?s*H:s["$*"](H)}(h.num_of_dice,h.num_of_sides),B=T.$last()["$[]"](0),p(B["$include?"](P))||h.$raise(c(i,"RangeError"),h.name+": max value ("+P+") is not covered: "+B),h},q.$$arity=1),void e.def(f,"$assert_no_gap_or_overlap_in_ranges",re=function(T){var h;return t(T,"each_cons",[2],((h=function(j,o){var ue,Te,s,w=null==h.$$s?this:h.$$s,te=u,se=u;return null==w.name&&(w.name=u),null==j&&(j=u),null==o&&(o=u),te=j["$[]"](0),se=o["$[]"](0),Te="number"==typeof(s=ue=te.$max())?s+1:s["$+"](1),p(se["$include?"](ue))&&w.$raise(c(i,"RangeError"),w.name+": Range overlap: "+te+" and "+se),p(se["$include?"](Te))?u:w.$raise(c(i,"RangeError"),w.name+": Range gap: "+te+" and "+se)}).$$s=this,h.$$arity=2,h)),this},re.$$arity=1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var t,O,g,i,x,L,m,b,_,N,D,s,C=[],r=e.nil,z=e.$$$,u=e.$$,ne=e.module,c=e.klass,F=e.send;return t=C,O=s=[ne(C[0],"BCDice")].concat(t),g=D=[ne(s[0],"DiceTable")].concat(O),i=N=[c(D[0],null,"SaiFicSkillTable")].concat(g),b=c(N[0],null,"Category"),_=[b].concat(i),b.$$prototype.name=r,e.def(b,"$initialize",x=function(R,q,re,I){var T,h=this;return h.name=R,h.skills=F(q.$map(),"with_index",[2],((T=function(P){function B(j,o){return P.apply(this,arguments)}return B.toString=function(){return P.toString()},B}(function(P,B){return null==P&&(P=r),null==B&&(B=r),z(u(_,"SaiFicSkillTable"),"Skill").$new(R,P,re,B,I)})).$$s=h,T.$$arity=2,T)),h.dice=re},x.$$arity=4),e.def(b,"$roll",L=function(R){return this.$skills()["$[]"](function(n,t){return"number"==typeof n?n-2:n["$-"](2)}(R.$roll_sum(2,6)))},L.$$arity=1),e.def(b,"$to_s",m=function(){return this.name},m.$$arity=0),void b.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var n,H,f,_,x,i,E,X,a,p,J=[],C=e.nil,u=e.module,ne=e.klass,c=e.hash2;return n=J,H=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"DiceTable")].concat(H),f=X=[ne(a[0],null,"SaiFicSkillTable")].concat(E),[i=ne(X[0],null,"Skill")].concat(f),i.$$prototype.s_format=i.$$prototype.category_dice=i.$$prototype.row_dice=i.$$prototype.category_name=i.$$prototype.name=C,e.def(i,"$initialize",_=function(m,l,R,q,re){var I=this;return I.category_name=m,I.name=l,I.category_dice=R,I.row_dice=q,I.s_format=re},_.$$arity=5),e.def(i,"$to_s",x=function(){var m=this;return m.$format(m.s_format,c(["category_dice","row_dice","category_name","skill_name"],{category_dice:m.category_dice,row_dice:m.row_dice,category_name:m.category_name,skill_name:m.name}))},x.$$arity=0),void i.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var O,E,f,_,x,L,m,l,R,q,i,b,X,D,C=e.top,r=[],z=e.nil,u=e.$$$,ne=e.$$,c=e.module,F=e.klass,n=e.hash2,t=e.send,s=e.truthy;return C.$require("bcdice/dice_table/sai_fic_skill_table/category"),C.$require("bcdice/dice_table/sai_fic_skill_table/skill"),O=r,E=D=[c(r[0],"BCDice")].concat(O),f=X=[c(D[0],"DiceTable")].concat(E),i=F(X[0],null,"SaiFicSkillTable"),b=[i].concat(f),i.$$prototype.rtt=i.$$prototype.rtt_format=i.$$prototype.rct=i.$$prototype.rct_format=i.$$prototype.rttn=i.$$prototype.rttn_format=i.$$prototype.categories=z,e.defs(i,"$from_i18n",_=function(I,T,h){var P,B,j,o,ue,se=z;if(null==h)h=n([],{});else if(!h.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(P=h.$$smap.rtt)&&(P=z),null==(B=h.$$smap.rct)&&(B=z),null==(j=h.$$smap.rttn)&&(j=z),ue=(se=ne(b,"I18n").$t("RTT",n(["locale","raise","default"],{locale:T,raise:!1,default:n([],{})})).$merge(ne(b,"I18n").$t(I,n(["locale","raise"],{locale:T,raise:!0}))))["$[]"]("items"),se=t(se,"select",[],((o=function(Te){function Re(De,Ee){return Te.apply(this,arguments)}return Re.toString=function(){return Te.toString()},Re}(function(Te,Re){return null==Te&&(Te=z),null==Re&&(Re=z),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](Te)})).$$s=this,o.$$arity=2,o)),this.$new(ue,e.to_hash(se).$merge(n(["rtt","rct","rttn"],{rtt:P,rct:B,rttn:j})))},_.$$arity=-3),e.const_set(b[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),e.const_set(b[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),e.const_set(b[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),e.const_set(b[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),e.def(i,"$initialize",x=function(I,T){var h,P,B,j,o,w,te,se,ue=this;if(null==T)T=n([],{});else if(!T.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(h=T.$$smap.rtt)&&(h=z),null==(P=T.$$smap.rct)&&(P=z),null==(B=T.$$smap.rttn)&&(B=z),null==(j=T.$$smap.rtt_format)&&(j=ne(b,"DEFAULT_RTT")),null==(o=T.$$smap.rct_format)&&(o=ne(b,"DEFAULT_RCT")),null==(w=T.$$smap.rttn_format)&&(w=ne(b,"DEFAULT_RTTN")),null==(te=T.$$smap.s_format)&&(te=ne(b,"DEFAULT_S")),ue.categories=t(I.$map(),"with_index",[1],((se=function(Re,De){var fe,V,G;return null==Re&&(Re=z),null==De&&(De=z),V=null==(fe=e.to_ary(Re))[0]?z:fe[0],G=null==fe[1]?z:fe[1],u(ne(b,"SaiFicSkillTable"),"Category").$new(V,G,De,te)}).$$s=ue,se.$$arity=2,se.$$has_top_level_mlhs_arg=!0,se)),ue.rtt=h,ue.rct=P,ue.rttn=B.$to_a(),ue.rtt_format=j,ue.rct_format=o,ue.rttn_format=w},x.$$arity=-2),e.const_set(b[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),i.$attr_reader("categories"),e.def(i,"$roll_command",L=function(I,T){var P,h=this,B=z,j=z,o=z;return s(["RTT",h.rtt]["$include?"](P=T))?h.$format_skill(h.rtt_format,h.$roll_skill(I)):s(["RCT",h.rct]["$include?"](P))?(B=h.$roll_category(I),h.$format(h.rct_format,n(["category_dice","category_name"],{category_dice:B.$dice(),category_name:B.$name()}))):s(s(j=o=ne(b,"RTTN").$index(P))?j:o=h.rttn.$index(P))?h.$format_skill(h.rttn_format,h.categories["$[]"](o).$roll(I)):z},L.$$arity=2),e.def(i,"$roll_category",m=function(I){return this.categories["$[]"](function(H,O){return"number"==typeof H?H-1:H["$-"](1)}(I.$roll_once(6)))},m.$$arity=1),e.def(i,"$roll_skill",l=function(I){return this.$roll_category(I).$roll(I)},l.$$arity=1),e.def(i,"$prefixes",R=function(){var I=this;return function(H,O){return"number"==typeof H&&"number"==typeof O?H+O:H["$+"](O)}(["RTT[1-6]?","RCT",I.rtt,I.rct],I.rttn).$compact()},R.$$arity=0),i.$private(),void e.def(i,"$format_skill",q=function(I,T){return this.$format(I,n(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:T.$category_dice(),row_dice:T.$row_dice(),category_name:T.$category_name(),skill_name:T.$name(),text:T.$to_s()}))},q.$$arity=2)},Opal.modules["bcdice/dice_table/table"]=function(e){var p,a,X,f,i,b,_,N,A,W,H,C=[],r=e.nil,u=e.$$,ne=e.module,c=e.klass,F=e.hash2,n=e.truthy;return p=C,a=H=[ne(C[0],"BCDice")].concat(p),X=W=[ne(H[0],"DiceTable")].concat(a),N=c(W[0],null,"Table"),A=[N].concat(X),N.$$prototype.times=N.$$prototype.sides=N.$$prototype.name=N.$$prototype.items=r,e.defs(N,"$from_i18n",f=function(L,m){var R=r;return R=u(A,"I18n").$t(L,F(["locale"],{locale:m})),this.$new(R["$[]"]("name"),R["$[]"]("type"),R["$[]"]("items"))},f.$$arity=2),e.def(N,"$initialize",i=function(L,m,l){var R=this,q=r;return R.name=L,R.items=l.$freeze(),q=/(\d+)D(\d+)/i.$match(m),n(q)||R.$raise(u(A,"ArgumentError"),"Unexpected table type: "+m),R.times=q["$[]"](1).$to_i(),R.sides=q["$[]"](2).$to_i()},i.$$arity=3),e.def(N,"$roll",b=function(L){var l,m=this;return l=L.$roll_sum(m.times,m.sides),m.$choice(l)},b.$$arity=1),void e.def(N,"$choice",_=function(L){var l,m=this;return l=function(t,p){return"number"==typeof t&&"number"==typeof p?t-p:t["$-"](p)}(L,m.times),u(A,"RollResult").$new(m.name,L,m.items["$[]"](l))},_.$$arity=1)},Opal.modules["bcdice/dice_table"]=function(e){var K=e.top;return K.$require("bcdice/dice_table/roll_result"),K.$require("bcdice/dice_table/chain_table"),K.$require("bcdice/dice_table/d66_grid_table"),K.$require("bcdice/dice_table/d66_half_grid_table"),K.$require("bcdice/dice_table/d66_one_third_table"),K.$require("bcdice/dice_table/d66_left_range_table"),K.$require("bcdice/dice_table/d66_parity_table"),K.$require("bcdice/dice_table/d66_range_table"),K.$require("bcdice/dice_table/d66_table"),K.$require("bcdice/dice_table/range_table"),K.$require("bcdice/dice_table/sai_fic_skill_table"),K.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var c,p,H,n,J=[],u=e.module;return c=J,p=n=[u(J[0],"BCDice")].concat(c),H=[u(n[0],"D66SortType")].concat(p),e.const_set(H[0],"NO_SORT","no_sort"),e.const_set(H[0],"ASC","asc"),e.const_set(H[0],"DESC","desc"),void function(t,p){var H=[u(t,"RoundType")].concat(p);e.const_set(H[0],"CEIL","ceil"),e.const_set(H[0],"FLOOR","floor"),e.const_set(H[0],"ROUND","round")}(n[0],n)},Opal.modules["bcdice/translate"]=function(e){var n,H,D,O,a,p,J=[],C=e.nil,z=e.$$,u=e.module,ne=e.hash2;return n=J,H=p=[u(J[0],"BCDice")].concat(n),O=u(p[0],"Translate"),a=[O].concat(H),void e.def(O,"$translate",D=function(E,g){var X,N=this;if(null==N.locale&&(N.locale=C),null==g)g=ne([],{});else if(!g.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return X=e.kwrestargs(g,{}),z(a,"I18n").$translate(E,ne(["locale","raise"],{locale:N.locale,raise:!0}).$merge(e.to_hash(X)))},D.$$arity=-2)},Opal.modules["bcdice/result"]=function(e){function K(n,t){return"number"==typeof n&&"number"==typeof t?n-t:n["$-"](t)}var t,b,L,m,l,R,q,a,E,g,X,N,A,f,i,D,W,s,C=[],r=e.nil,c=e.klass,F=e.send;return t=C,a=s=[(0,e.module)(C[0],"BCDice")].concat(t),W=[D=c(s[0],null,"Result")].concat(a),D.$$prototype.secret=D.$$prototype.success=D.$$prototype.failure=D.$$prototype.critical=D.$$prototype.fumble=r,[b=e.get_singleton_class(D)].concat(W),e.def(b,"$success",L=function(I){var T;return F(this.$new(),"tap",[],((T=function(P){function B(j){return P.apply(this,arguments)}return B.toString=function(){return P.toString()},B}(function(P){var j=r;return null==P&&(P=r),F(P,"text=",e.to_a(j=[I])),K(j.length,1),F(P,"success=",e.to_a(j=[!0])),j[K(j.length,1)]})).$$s=this,T.$$arity=1,T))},L.$$arity=1),e.def(b,"$failure",m=function(I){var T;return F(this.$new(),"tap",[],((T=function(B){var o=r;return null==B&&(B=r),F(B,"text=",e.to_a(o=[I])),K(o.length,1),F(B,"failure=",e.to_a(o=[!0])),o[K(o.length,1)]}).$$s=this,T.$$arity=1,T))},m.$$arity=1),e.def(b,"$critical",l=function(I){var T;return F(this.$new(),"tap",[],((T=function(B){var o=r;return null==B&&(B=r),F(B,"text=",e.to_a(o=[I])),K(o.length,1),F(B,"critical=",e.to_a(o=[!0])),K(o.length,1),F(B,"success=",e.to_a(o=[!0])),o[K(o.length,1)]}).$$s=this,T.$$arity=1,T))},l.$$arity=1),e.def(b,"$fumble",R=function(I){var T;return F(this.$new(),"tap",[],((T=function(B){var o=r;return null==B&&(B=r),F(B,"text=",e.to_a(o=[I])),K(o.length,1),F(B,"fumble=",e.to_a(o=[!0])),K(o.length,1),F(B,"failure=",e.to_a(o=[!0])),o[K(o.length,1)]}).$$s=this,T.$$arity=1,T))},R.$$arity=1),e.def(b,"$nothing",q=function(){return"nothing"},q.$$arity=0),e.def(D,"$initialize",E=function(_){var x=this;return null==_&&(_=r),x.text=_,x.rands=r,x.detailed_rands=r,x.secret=!1,x.success=!1,x.failure=!1,x.critical=!1,x.fumble=!1},E.$$arity=-1),D.$attr_accessor("text","rands","detailed_rands"),D.$attr_writer("secret","success","failure","critical","fumble"),e.def(D,"$secret?",g=function(){return this.secret},g.$$arity=0),e.def(D,"$success?",X=function(){return this.success},X.$$arity=0),e.def(D,"$failure?",N=function(){return this.failure},N.$$arity=0),e.def(D,"$critical?",A=function(){return this.critical},A.$$arity=0),e.def(D,"$fumble?",f=function(){return this.fumble},f.$$arity=0),void e.def(D,"$condition=",i=function(_){return this.success=_,this.failure=_["$!"]()},i.$$arity=1)},Opal.modules["racc/parser"]=function(e){function K(E,g){return"number"==typeof E&&"number"==typeof g?E<g:E["$<"](g)}function J(E,g){return"number"==typeof E&&"number"==typeof g?E-g:E["$-"](g)}function C(E,g){return"number"==typeof E&&"number"==typeof g?E+g:E["$+"](g)}function r(E,g){return"number"==typeof E&&"number"==typeof g?E>=g:E["$>="](g)}function z(E,g){return"number"==typeof E&&"number"==typeof g?E>g:E["$>"](g)}function u(E,g){return"number"==typeof E&&"number"==typeof g?E<=g:E["$<="](g)}var A,f,i,g,N,n=[],t=e.nil,p=e.$$$,s=e.$$,H=e.module,O=e.klass,a=e.truthy,D=e.gvars,W=e.send;return g=n,A=(N=[H(n[0],"Racc")].concat(g))[0],f=s(N,"StandardError"),i=N,[O(A,f,"ParseError")].concat(i),a(p("::","ParseError","skip_raise")?"constant":t)||e.const_set(n[0],"ParseError",p(s(n,"Racc"),"ParseError")),function(E,g){var b,L,m,l,R,q,re,I,T,h,P,B,j,o,w,te,se,ue,Te,Re,De,Ee,fe,ae,V,_,x,N=[H(E,"Racc")].concat(g);a(s(N,"Racc_No_Extensions","skip_raise")?"constant":t)||e.const_set(N[0],"Racc_No_Extensions",!1),b=N,_=O(N[0],null,"Parser"),x=[_].concat(b),_.$$prototype.yydebug=_.$$prototype.racc_debug_out=_.$$prototype.racc_error_status=_.$$prototype.racc_t=_.$$prototype.racc_vstack=_.$$prototype.racc_val=_.$$prototype.racc_state=_.$$prototype.racc_tstack=t,e.const_set(x[0],"Racc_Runtime_Version","1.4.6"),e.const_set(x[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),e.const_set(x[0],"Racc_Runtime_Core_Version_R","1.4.6"),e.const_set(x[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),e.const_set(x[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),e.const_set(x[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),e.const_set(x[0],"Racc_Runtime_Core_Version",s(x,"Racc_Runtime_Core_Version_R")),e.const_set(x[0],"Racc_Runtime_Core_Revision",s(x,"Racc_Runtime_Core_Revision_R")),e.const_set(x[0],"Racc_Runtime_Type","ruby"),e.defs(s(x,"Parser"),"$racc_runtime_type",L=function(){return s(x,"Racc_Runtime_Type")},L.$$arity=0),e.def(_,"$_racc_setup",m=function(){var k,S,$=this,v=t,d=t,y=t;return null==D.stderr&&(D.stderr=t),a(p($.$class(),"Racc_debug_parser"))||($.yydebug=!1),a(null!=(k=$.yydebug)&&k!==t?"instance-variable":t)||($.yydebug=!1),a($.yydebug)&&(a(null!=(S=$.racc_debug_out)&&S!==t?"instance-variable":t)||($.racc_debug_out=D.stderr),$.racc_debug_out=a(v=$.racc_debug_out)?v:D.stderr),d=p($.$class(),"Racc_arg"),a(K(d.$size(),14))&&(W(d,"[]=",e.to_a(y=[13,!0])),J(y.length,1)),d},m.$$arity=0),e.def(_,"$_racc_init_sysvars",l=function(){var k=this;return k.racc_state=[0],k.racc_tstack=[],k.racc_vstack=[],k.racc_t=t,k.racc_val=t,k.racc_read_next=!0,k.racc_user_yyerror=!1,k.racc_error_status=0},l.$$arity=0),e.def(_,"$do_parse",R=function(){return this.$__send__(s(x,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},R.$$arity=0),e.def(_,"$next_token",q=function(){return this.$raise(s(x,"NotImplementedError"),this.$class()+"#next_token is not defined")},q.$$arity=0),e.def(_,"$_racc_do_parse_rb",re=function(k,S){var $,d,y=this,M=t,Y=t,ee=t,oe=t,ie=t,ce=t,ve=t,be=t;return $=e.to_ary(k),M=null==$[0]?t:$[0],Y=null==$[1]?t:$[1],ee=null==$[2]?t:$[2],oe=null==$[3]?t:$[3],ie=null==$[10]?t:$[10],y.$_racc_init_sysvars(),ce=ve=be=t,W(y,"catch",["racc_end_parse"],((d=function(){var Ae,Be,_e=null==d.$$s?this:d.$$s,Ce=t,He=t,Ie=t;for(null==_e.racc_state&&(_e.racc_state=t),null==_e.racc_read_next&&(_e.racc_read_next=t),null==_e.racc_t&&(_e.racc_t=t),null==_e.yydebug&&(_e.yydebug=t),null==_e.racc_val&&(_e.racc_val=t);a(!0);)for(a(be=oe["$[]"](_e.racc_state["$[]"](-1)))?(a(_e.racc_read_next)&&a(_e.racc_t["$!="](0))&&(Be=_e.$next_token(),Ae=e.to_ary(Be),ce=null==Ae[0]?t:Ae[0],_e.racc_val=null==Ae[1]?t:Ae[1],_e.racc_t=a(ce)?a(Ce=ie["$[]"](ce))?Ce:1:0,a(_e.yydebug)&&_e.$racc_read_token(_e.racc_t,ce,_e.racc_val),_e.racc_read_next=!1),be=C(be,_e.racc_t),a(a(He=a(Ie=r(be,0))?ve=M["$[]"](be):Ie)?Y["$[]"](be)["$=="](_e.racc_state["$[]"](-1)):He)||(ve=ee["$[]"](_e.racc_state["$[]"](-1)))):ve=ee["$[]"](_e.racc_state["$[]"](-1));a(ve=_e.$_racc_evalact(ve,k)););}).$$s=y,d.$$arity=0,d))},re.$$arity=2),e.def(_,"$yyparse",I=function(k,S){return this.$__send__(s(x,"Racc_YY_Parse_Method"),k,S,this.$_racc_setup(),!0)},I.$$arity=2),e.def(_,"$_racc_yyparse_rb",T=function(k,S,$,v){var d,M,Y=this,ee=t,oe=t,$e=t,ie=t,ve=t,be=t,he=t;return d=e.to_ary($),ee=null==d[0]?t:d[0],oe=null==d[1]?t:d[1],$e=null==d[2]?t:d[2],ie=null==d[3]?t:d[3],ve=null==d[10]?t:d[10],Y.$_racc_init_sysvars(),be=t,he=t,W(Y,"catch",["racc_end_parse"],((M=function(){var Ce,Se=null==M.$$s?this:M.$$s;for(null==Se.racc_state&&(Se.racc_state=t);!a(he=ie["$[]"](Se.racc_state["$[]"](-1)));)for(;a(be=Se.$_racc_evalact($e["$[]"](Se.racc_state["$[]"](-1)),$)););return W(k,"__send__",[S],((Ce=function(Ie,Pe){var Ge,Fe,ke=null==Ce.$$s?this:Ce.$$s,qe=t,Ue=t,je=t,Ke=t,de=t,Z=t,ye=t;for(null==ke.racc_t&&(ke.racc_t=t),null==ke.racc_state&&(ke.racc_state=t),null==ke.racc_read_next&&(ke.racc_read_next=t),null==Ie&&(Ie=t),null==Pe&&(Pe=t),ke.racc_t=a(Ie)?a(qe=ve["$[]"](Ie))?qe:1:0,ke.racc_val=Pe,ke.racc_read_next=!1,he=C(he,ke.racc_t),a(a(Ge=a(Fe=r(he,0))?be=ee["$[]"](he):Fe)?oe["$[]"](he)["$=="](ke.racc_state["$[]"](-1)):Ge)||(be=$e["$[]"](ke.racc_state["$[]"](-1)));a(be=ke.$_racc_evalact(be,$)););for(;a(a(Ue=a(je=(he=ie["$[]"](ke.racc_state["$[]"](-1)))["$!"]())?je:ke.racc_read_next["$!"]())?Ue:ke.racc_t["$=="](0));)for(a(a(Ke=a(de=a(Z=a(ye=he)?he=C(he,ke.racc_t):ye)?r(he,0):Z)?be=ee["$[]"](he):de)?oe["$[]"](he)["$=="](ke.racc_state["$[]"](-1)):Ke)||(be=$e["$[]"](ke.racc_state["$[]"](-1)));a(be=ke.$_racc_evalact(be,$)););}).$$s=Se,Ce.$$arity=2,Ce))}).$$s=Y,M.$$arity=0,M))},T.$$arity=4),e.def(_,"$_racc_evalact",h=function(k,S){var $,d,$e,ce,y=this,M=t,Y=t,oe=t,ie=t,ve=t,be=t,he=t,_e=t,Se=t,Ae=t;if(M=null==($=e.to_ary(S))[0]?t:$[0],Y=null==$[1]?t:$[1],oe=null==$[3]?t:$[3],$e=null==$[11]?t:$[11],ie=null==$[12]?t:$[12],a(a(ce=z(k,0))?K(k,$e):ce))a(z(y.racc_error_status,0))&&(y.racc_t["$=="](1)||(y.racc_error_status=J(y.racc_error_status,1))),y.racc_vstack.$push(y.racc_val),y.racc_state.$push(k),y.racc_read_next=!0,a(y.yydebug)&&(y.racc_tstack.$push(y.racc_t),y.$racc_shift(y.racc_t,y.racc_tstack,y.racc_vstack));else if(a(a(ve=K(k,0))?z(k,ie["$-@"]()):ve)){if(be=W(y,"catch",["racc_jump"],((d=function(){var Ce=null==d.$$s?this:d.$$s;return null==Ce.racc_state&&(Ce.racc_state=t),Ce.racc_state.$push(Ce.$_racc_do_reduce(S,k)),!1}).$$s=y,d.$$arity=0,d)),a(be)){if(1["$==="](he=be))return y.racc_user_yyerror=!0,ie["$-@"]();if(2["$==="](he))return $e;y.$raise("[Racc Bug] unknown jump code")}}else if(k["$=="]($e))a(y.yydebug)&&y.$racc_accept(),y.$throw("racc_end_parse",y.racc_vstack["$[]"](0));else{if(k["$=="](ie["$-@"]())){for((0)["$==="](he=y.racc_error_status)?a(S["$[]"](21))||y.$on_error(y.racc_t,y.racc_val,y.racc_vstack):3["$==="](he)&&(y.racc_t["$=="](0)&&y.$throw("racc_end_parse",t),y.racc_read_next=!0),y.racc_user_yyerror=!1,y.racc_error_status=3;a(!0)&&(!a(_e=oe["$[]"](y.racc_state["$[]"](-1)))||(_e=C(_e,1),!a(a(Se=a(Ae=r(_e,0))?k=M["$[]"](_e):Ae)?Y["$[]"](_e)["$=="](y.racc_state["$[]"](-1)):Se)));)a(u(y.racc_state.$size(),1))&&y.$throw("racc_end_parse",t),y.racc_state.$pop(),y.racc_vstack.$pop(),a(y.yydebug)&&(y.racc_tstack.$pop(),y.$racc_e_pop(y.racc_state,y.racc_tstack,y.racc_vstack));return k}y.$raise("[Racc Bug] unknown action "+k.$inspect())}return a(y.yydebug)&&y.$racc_next_state(y.racc_state["$[]"](-1),y.racc_state),t},h.$$arity=2),e.def(_,"$_racc_do_reduce",P=function(k,S){var $,$e,ce,Ae,Be,Ce,ke,d=this,M=t,Y=t,ee=t,oe=t,ie=t,ve=t,be=t,he=t,_e=t,Se=t,He=t,Ie=t,Pe=t,Ne=t,Me=t,qe=t;return M=null==($=e.to_ary(k))[4]?t:$[4],Y=null==$[5]?t:$[5],ee=null==$[6]?t:$[6],oe=null==$[7]?t:$[7],$e=null==$[8]?t:$[8],ie=null==$[9]?t:$[9],ce=null==$[13]?t:$[13],ve=d.racc_state,be=d.racc_vstack,he=d.racc_tstack,_e=function(E,g){return"number"==typeof E?-3*E:E["$*"](-3)}(S),Se=ie["$[]"](_e),Ae=ie["$[]"](C(_e,1)),Be=ie["$[]"](C(_e,2)),Ce=[],a(d.yydebug)&&(He=he["$[]"](Se["$-@"](),Se)),Ie=be["$[]"](Se["$-@"](),Se),a(d.yydebug)&&(Pe=[Se["$-@"](),Se,Ce],W(he,"[]=",e.to_a(Pe)),J(Pe.length,1)),Pe=[Se["$-@"](),Se,Ce],W(be,"[]=",e.to_a(Pe)),J(Pe.length,1),Pe=[Se["$-@"](),Se,Ce],W(ve,"[]=",e.to_a(Pe)),J(Pe.length,1),a(ce)?be.$push(d.$__send__(Be,Ie,be,Ie["$[]"](0))):be.$push(d.$__send__(Be,Ie,be)),he.$push(Ae),a(d.yydebug)&&d.$racc_reduce(He,Ae,he,be),ke=J(Ae,$e),a(_e=oe["$[]"](ke))&&(_e=C(_e,ve["$[]"](-1)),a(a(Ne=a(Me=r(_e,0))?qe=M["$[]"](_e):Me)?Y["$[]"](_e)["$=="](ke):Ne))?qe:ee["$[]"](ke)},P.$$arity=2),e.def(_,"$on_error",B=function(k,S,$){var d,v=this;return v.$raise(s(x,"ParseError"),v.$sprintf("\nparse error on value %s (%s)",S.$inspect(),a(d=v.$token_to_str(k))?d:"?"))},B.$$arity=3),e.def(_,"$yyerror",j=function(){return this.$throw("racc_jump",1)},j.$$arity=0),e.def(_,"$yyaccept",o=function(){return this.$throw("racc_jump",2)},o.$$arity=0),e.def(_,"$yyerrok",w=function(){return this.racc_error_status=0},w.$$arity=0),e.def(_,"$racc_read_token",te=function(k,S,$){var v=this;return v.racc_debug_out.$print("read    "),v.racc_debug_out.$print(S.$inspect(),"(",v.$racc_token2str(k),") "),v.racc_debug_out.$puts($.$inspect()),v.racc_debug_out.$puts()},te.$$arity=3),e.def(_,"$racc_shift",se=function(k,S,$){var v=this;return v.racc_debug_out.$puts("shift   "+v.$racc_token2str(k)),v.$racc_print_stacks(S,$),v.racc_debug_out.$puts()},se.$$arity=3),e.def(_,"$racc_reduce",ue=function(k,S,$,v){var d,y=this,M=t;return(M=y.racc_debug_out).$print("reduce "),a(k["$empty?"]())?M.$print(" <none>"):W(k,"each",[],((d=function(ee){return null==ee&&(ee=t),M.$print(" ",(null==d.$$s?this:d.$$s).$racc_token2str(ee))}).$$s=y,d.$$arity=1,d)),M.$puts(" --\x3e "+y.$racc_token2str(S)),y.$racc_print_stacks($,v),y.racc_debug_out.$puts()},ue.$$arity=4),e.def(_,"$racc_accept",Te=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},Te.$$arity=0),e.def(_,"$racc_e_pop",Re=function(k,S,$){var v=this;return v.racc_debug_out.$puts("error recovering mode: pop token"),v.$racc_print_states(k),v.$racc_print_stacks(S,$),v.racc_debug_out.$puts()},Re.$$arity=3),e.def(_,"$racc_next_state",De=function(k,S){var $=this;return $.racc_debug_out.$puts("goto    "+k),$.$racc_print_states(S),$.racc_debug_out.$puts()},De.$$arity=2),e.def(_,"$racc_print_stacks",Ee=function(k,S){var $,d=t;return(d=this.racc_debug_out).$print("        ["),W(k,"each_index",[],(($=function(M){return null==M&&(M=t),d.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(k["$[]"](M))," ",S["$[]"](M).$inspect(),")")}).$$s=this,$.$$arity=1,$)),d.$puts(" ]")},Ee.$$arity=2),e.def(_,"$racc_print_states",fe=function(k){var S,v=t;return(v=this.racc_debug_out).$print("        ["),W(k,"each",[],((S=function(y){return null==y&&(y=t),v.$print(" ",y)}).$$s=this,S.$$arity=1,S)),v.$puts(" ]")},fe.$$arity=1),e.def(_,"$racc_token2str",ae=function(k){var $;return a($=p(this.$class(),"Racc_token_to_s_table")["$[]"](k))?$:this.$raise("[Racc Bug] can't convert token "+k+" to string")},ae.$$arity=1),e.def(_,"$token_to_str",V=function(k){return p(this.$class(),"Racc_token_to_s_table")["$[]"](k)},V.$$arity=1)}(n[0],n)},Opal.modules["bcdice/arithmetic/node"]=function(e){function K(n,t){return"number"==typeof n&&"number"==typeof t?n/t:n["$/"](t)}var t,O,E,N,A,f,_,x,L,m,l,R,i,b,X,D,s,C=[],r=e.nil,z=e.$$$,u=e.$$,ne=e.module,c=e.klass,F=e.send2;return t=C,O=s=[ne(C[0],"BCDice")].concat(t),E=D=[ne(s[0],"Arithmetic")].concat(O),function(N,A,f){var _,x,L,m,l,i=c(N,null,"BinaryOp");[i].concat(f),i.$$prototype.lhs=i.$$prototype.rhs=i.$$prototype.op=r,e.def(i,"$initialize",_=function(q,re,I){var T=this;return T.lhs=q,T.op=re,T.rhs=I},_.$$arity=3),e.def(i,"$eval",x=function(q){var T,I=r;return I=this.lhs.$eval(q),T=this.rhs.$eval(q),I.$send(this.op,T)},x.$$arity=1),e.def(i,"$output",L=function(){var q=this;return""+q.lhs.$output()+q.op+q.rhs.$output()},L.$$arity=0),e.def(i,"$s_exp",m=function(){var q=this;return"("+q.$op_for_s_exp()+" "+q.lhs.$s_exp()+" "+q.rhs.$s_exp()+")"},m.$$arity=0),e.def(i,"$op_for_s_exp",l=function(){return this.op},l.$$arity=0)}((X=[ne(D[0],"Node")].concat(E))[0],0,X),N=X[0],A=u(X,"BinaryOp"),f=X,i=c(N,A,"DivideBase"),b=[i].concat(f),i.$$prototype.lhs=i.$$prototype.rhs=i.$$prototype.op=r,e.def(i,"$initialize",_=function(re,I){return _.$$p&&(_.$$p=null),F(this,e.find_super_dispatcher(this,"initialize",_,!1,!0),"initialize",[re,"/",I],null)},_.$$arity=2),e.def(i,"$eval",x=function(re){var T,I=this,h=r;return T=I.lhs.$eval(re),(h=I.rhs.$eval(re))["$=="](0)&&I.$raise(u(b,"ZeroDivisionError")),I.$divide_and_round(T,h,re)},x.$$arity=1),e.def(i,"$output",L=function(){var re=L.$$p,T=this,h=r,P=r,B=r;for(re&&(L.$$p=null),P=0,B=arguments.length,h=new Array(B);P<B;P++)h[P]=arguments[P];return""+F(T,e.find_super_dispatcher(T,"output",L,!1,!0),"output",h,re)+T.$rounding_method()},L.$$arity=0),i.$private(),e.def(i,"$rounding_method",m=function(){return z(this.$class(),"ROUNDING_METHOD")},m.$$arity=0),e.def(i,"$op_for_s_exp",l=function(){return""+this.op+this.$rounding_method()},l.$$arity=0),e.def(i,"$divide_and_round",R=function(re,I,T){return this.$raise(u(b,"NotImplementedError"))},R.$$arity=3),function(N,A,f){var _,i=c(N,A,"DivideWithGameSystemDefault"),b=[i].concat(f);e.const_set(b[0],"ROUNDING_METHOD",""),i.$private(),e.def(i,"$divide_and_round",_=function(L,m,l){var q;return q=l,z(u(b,"RoundType"),"CEIL")["$==="](q)?K(L.$to_f(),m).$ceil():z(u(b,"RoundType"),"ROUND")["$==="](q)?K(L.$to_f(),m).$round():K(L,m).$to_i()},_.$$arity=3)}(X[0],u(X,"DivideBase"),X),function(N,A,f){var _,i=c(N,A,"DivideWithCeil"),b=[i].concat(f);e.const_set(b[0],"ROUNDING_METHOD","C"),i.$private(),e.def(i,"$divide_and_round",_=function(L,m,l){return K(L.$to_f(),m).$ceil()},_.$$arity=3)}(X[0],u(X,"DivideBase"),X),function(N,A,f){var _,i=c(N,A,"DivideWithRound"),b=[i].concat(f);e.const_set(b[0],"ROUNDING_METHOD","R"),i.$private(),e.def(i,"$divide_and_round",_=function(L,m,l){return K(L.$to_f(),m).$round()},_.$$arity=3)}(X[0],u(X,"DivideBase"),X),function(N,A,f){var _,i=c(N,A,"DivideWithFloor"),b=[i].concat(f);e.const_set(b[0],"ROUNDING_METHOD","F"),i.$private(),e.def(i,"$divide_and_round",_=function(L,m,l){return K(L,m).$to_i()},_.$$arity=3)}(X[0],u(X,"DivideBase"),X),function(N,A,f){var _,x,L,m,i=c(N,null,"Negative");[i].concat(f),i.$$prototype.body=r,e.def(i,"$initialize",_=function(R){return this.body=R},_.$$arity=1),e.def(i,"$eval",x=function(R){return this.body.$eval(R)["$-@"]()},x.$$arity=1),e.def(i,"$output",L=function(){return"-"+this.body.$output()},L.$$arity=0),e.def(i,"$s_exp",m=function(){return"(- "+this.body.$s_exp()+")"},m.$$arity=0)}(X[0],0,X),function(N,A,f){var _,x,L,m,i=c(N,null,"Parenthesis");[i].concat(f),i.$$prototype.expr=r,e.def(i,"$initialize",_=function(R){return this.expr=R},_.$$arity=1),e.def(i,"$eval",x=function(R){return this.expr.$eval(R)},x.$$arity=1),e.def(i,"$output",L=function(){return"("+this.expr.$output()+")"},L.$$arity=0),e.def(i,"$s_exp",m=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},m.$$arity=0)}(X[0],0,X),void function(N,A,f){var _,x,L,i=c(N,null,"Number");[i].concat(f),i.$$prototype.value=r,e.def(i,"$initialize",_=function(l){return this.value=l},_.$$arity=1),e.def(i,"$eval",x=function(l){return this.value},x.$$arity=1),e.def(i,"$output",L=function(){return this.value.$to_s()},L.$$arity=0),e.alias(i,"s_exp","output")}(X[0],0,X)},Opal.modules.strscan=function(e){var p,O,a,D,W,E,g,X,N,A,f,i,b,_,x,L,m,l,R,q,re,I,T,h,P,B,s,H,C=[],r=e.nil,u=e.$$,c=e.truthy,F=e.send;return p=C,s=(0,e.klass)(C[0],null,"StringScanner"),H=[s].concat(p),s.$$prototype.pos=s.$$prototype.string=s.$$prototype.working=s.$$prototype.matched=s.$$prototype.prev_pos=s.$$prototype.match=r,s.$attr_reader("pos"),s.$attr_reader("matched"),e.def(s,"$initialize",O=function(o){var w=this;return w.string=o,w.pos=0,w.matched=r,w.working=o,w.match=[]},O.$$arity=1),s.$attr_reader("string"),e.def(s,"$beginning_of_line?",a=function(){var o=this;return 0===o.pos||"\n"===o.string.charAt(o.pos-1)},a.$$arity=0),e.alias(s,"bol?","beginning_of_line?"),e.def(s,"$scan",D=function(o){var w=this,te=(o=w.$anchor(o)).exec(w.working);return null==te?w.matched=r:"object"==typeof te?(w.prev_pos=w.pos,w.pos+=te[0].length,w.working=w.working.substring(te[0].length),w.matched=te[0],w.match=te,te[0]):"string"==typeof te?(w.pos+=te.length,w.working=w.working.substring(te.length),te):r},D.$$arity=1),e.def(s,"$scan_until",W=function(o){var w=this;o=w.$anchor(o);for(var ue,te=w.pos,se=w.working;;){if(ue=o.exec(se),te+=1,se=se.substr(1),null!=ue)return w.matched=w.string.substr(w.pos,te-w.pos-1+ue[0].length),w.match=ue,w.prev_pos=te-1,w.pos=te,w.working=se.substr(ue[0].length),w.matched;if(0===se.length)return w.match=[],w.matched=r}},W.$$arity=1),e.def(s,"$[]",E=function(o){var te;if(c(this.match["$empty?"]()))return r;te=o,u(H,"Symbol")["$==="](te)?o=o.$to_s():u(H,"String")["$==="](te)||(o=u(H,"Opal")["$coerce_to!"](o,u(H,"Integer"),"to_int"));var se=this.match;return o<0&&(o+=se.length),o<0||o>=se.length||null==se[o]?r:se[o]},E.$$arity=1),e.def(s,"$check",g=function(o){var w=this,te=(o=w.$anchor(o)).exec(w.working);return w.matched=null==te?r:te[0]},g.$$arity=1),e.def(s,"$check_until",X=function(o){var w=this,te=w.prev_pos,se=w.pos,ue=w.$scan_until(o);return ue!==r&&(w.matched=ue.substr(-1),w.working=w.string.substr(se)),w.prev_pos=te,w.pos=se,ue},X.$$arity=1),e.def(s,"$peek",N=function(o){return this.working.substring(0,o)},N.$$arity=1),e.def(s,"$eos?",A=function(){return 0===this.working.length},A.$$arity=0),e.def(s,"$exist?",f=function(o){var te=o.exec(this.working);return null==te?r:0==te.index?0:te.index+1},f.$$arity=1),e.def(s,"$skip",i=function(o){var w=this,te=(o=w.$anchor(o)).exec(w.working);if(null==te)return w.match=[],w.matched=r;var se=te[0],ue=se.length;return w.matched=se,w.match=te,w.prev_pos=w.pos,w.pos+=ue,w.working=w.working.substring(ue),ue},i.$$arity=1),e.def(s,"$skip_until",b=function(o){var te=this.$scan_until(o);return te===r?r:(this.matched=te.substr(-1),te.length)},b.$$arity=1),e.def(s,"$get_byte",_=function(){var o=this,w=r;return o.pos<o.string.length?(o.prev_pos=o.pos,o.pos+=1,w=o.matched=o.working.substring(0,1),o.working=o.working.substring(1)):o.matched=r,w},_.$$arity=0),e.alias(s,"getch","get_byte"),e.def(s,"$match?",x=function(o){var w=this,te=(o=w.$anchor(o)).exec(w.working);return null==te?r:(w.prev_pos=w.pos,te[0].length)},x.$$arity=1),e.def(s,"$pos=",L=function(o){var w=this;return o<0&&(o+=w.string.$length()),w.pos=o,w.working=w.string.slice(o)},L.$$arity=1),e.def(s,"$matched_size",m=function(){return this.matched===r?r:this.matched.length},m.$$arity=0),e.def(s,"$post_match",l=function(){var o=this;return o.matched===r?r:o.string.substr(o.pos)},l.$$arity=0),e.def(s,"$pre_match",R=function(){var o=this;return o.matched===r?r:o.string.substr(0,o.prev_pos)},R.$$arity=0),e.def(s,"$reset",q=function(){var o=this;return o.working=o.string,o.matched=r,o.pos=0},q.$$arity=0),e.def(s,"$rest",re=function(){return this.working},re.$$arity=0),e.def(s,"$rest?",I=function(){return 0!==this.working.length},I.$$arity=0),e.def(s,"$rest_size",T=function(){return this.$rest().$size()},T.$$arity=0),e.def(s,"$terminate",h=function(){var w,o=this;return o.match=r,w=[o.string.$length()],F(o,"pos=",e.to_a(w)),w[function(n,t){return"number"==typeof n?n-1:n["$-"](1)}(w.length)]},h.$$arity=0),e.def(s,"$unscan",P=function(){var o=this;return o.pos=o.prev_pos,o.prev_pos=r,o.match=r,o},P.$$arity=0),s.$private(),e.def(s,"$anchor",B=function(o){var te=o.toString().match(/\/([^\/]+)$/);return te=te?te[1]:void 0,new RegExp("^(?:"+o.source+")",te)},B.$$arity=1),r&&"anchor"},Opal.modules["bcdice/normalize"]=function(e){var p,O,a,s,c,n,J=[],C=e.nil,u=e.module;return c=J,p=n=[u(J[0],"BCDice")].concat(c),[s=u(n[0],"Normalize")].concat(p),s.$module_function(),e.def(s,"$comparison_operator",O=function(W){var g;return/<=|=</["$==="](g=W)?"<=":/>=|=>/["$==="](g)?">=":/<>|!=|=!/["$==="](g)?"!=":/</["$==="](g)?"<":/>/["$==="](g)?">":/=/["$==="](g)?"==":C},O.$$arity=1),void e.def(s,"$target_number",a=function(W){return W["$=="]("?")?W:W.$to_i()},a.$$arity=1)},Opal.modules["bcdice/command/lexer"]=function(e){var p,a,X,f,i,b,N,A,W,H,K=e.top,J=[],C=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.hash2,F=e.truthy,n=e.send;return K.$require("strscan"),K.$require("bcdice/normalize"),p=J,a=H=[u(J[0],"BCDice")].concat(p),X=W=[u(H[0],"Command")].concat(a),N=ne(W[0],null,"Lexer"),A=[N].concat(X),N.$$prototype.scanner=N.$$prototype.notations=C,e.const_set(A[0],"SYMBOLS",c(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(N,"$initialize",f=function(x,L){var m,l,R,re,q=this;return x=F(re=(l=(m=x)===C||null==m?C:n(m,"split",[" ",2]))===C||null==l?C:n(l,"first",[]))?re:"",q.scanner=z(A,"StringScanner").$new(x),q.notations=n(L,"map",[],((R=function(I){function T(h){return I.apply(this,arguments)}return T.toString=function(){return I.toString()},T}(function(I){return null==I&&(I=C),F(I["$is_a?"](z(A,"String")))?z(A,"Regexp").$new(I):I})).$$s=q,R.$$arity=1,R))},f.$$arity=2),e.def(N,"$next_token",i=function(){try{var x,L=this,m=C,l=C,q=C,re=C;return F(L.scanner["$eos?"]())?[!1,"$"]:(n(L.notations,"each",[],((x=function(T){var P,h=null==x.$$s?this:x.$$s;if(null==h.scanner&&(h.scanner=C),null==T&&(T=C),P=h.scanner.$scan(T),!F(P))return C;e.ret(["NOTATION",P])}).$$s=L,x.$$arity=1,x)),F(m=L.scanner.$scan(/\d+/))?["NUMBER",m.$to_i()]:F(l=L.scanner.$scan(/[<>!=]+/))?(l=z(A,"Normalize").$comparison_operator(l),[F(l)?"CMP_OP":"ILLEGAL",l]):(q=L.scanner.$getch().$upcase(),[F(re=z(A,"SYMBOLS")["$[]"](q))?re:q.$to_sym(),q]))}catch(I){if(I===e.returner)return I.$v;throw I}},i.$$arity=0),void e.def(N,"$source",b=function(){return this.scanner.$string()},b.$$arity=0)},Opal.modules["bcdice/command/parsed"]=function(e){var n,H,E,N,A,f,g,X,a,p,J=[],C=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.truthy;return n=J,H=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"Command")].concat(H),g=ne(a[0],null,"Parsed"),X=[g].concat(E),g.$$prototype.question_target=g.$$prototype.critical=g.$$prototype.fumble=g.$$prototype.dollar=g.$$prototype.modify_number=g.$$prototype.target_number=g.$$prototype.prefix_number=g.$$prototype.command=g.$$prototype.suffix_number=g.$$prototype.cmp_op=C,g.$attr_accessor("command"),g.$attr_accessor("prefix_number"),g.$attr_accessor("suffix_number"),g.$attr_accessor("critical"),g.$attr_accessor("fumble"),g.$attr_accessor("dollar"),g.$attr_accessor("modify_number"),g.$attr_accessor("cmp_op"),g.$attr_accessor("target_number"),g.$attr_writer("question_target"),e.def(g,"$initialize",N=function(){var b=this;return b.prefix_number=C,b.suffix_number=C,b.critical=C,b.fumble=C,b.dollar=C,b.cmp_op=C,b.target_number=C,b.question_target=!1},N.$$arity=0),e.def(g,"$question_target?",A=function(){return this.question_target},A.$$arity=0),void e.def(g,"$to_s",f=function(b){var q,_=this,x=C,L=C,m=C,l=C,R=C;return null==b&&(b="after_command"),x=c(_.critical)?"@"+_.critical:C,L=c(_.fumble)?"#"+_.fumble:C,m=c(_.dollar)?"$"+_.dollar:C,l=z(X,"Format").$modifier(_.modify_number),R=c(_.question_target)?"?":_.target_number,"after_command"["$==="](q=b)?[_.prefix_number,_.command,_.suffix_number,x,L,m,l,_.cmp_op,R].$join():"after_modify_number"["$==="](q)?[_.prefix_number,_.command,_.suffix_number,l,x,L,m,_.cmp_op,R].$join():"after_target_number"["$==="](q)?[_.prefix_number,_.command,_.suffix_number,l,_.cmp_op,R,x,L,m].$join():C},f.$$arity=-1)},Opal.modules["bcdice/command/parser"]=function(e){function K(H,O){return"number"==typeof H&&"number"==typeof O?H-O:H["$-"](O)}var O,E,N,A,f,_,x,L,m,l,R,q,re,I,T,h,P,B,j,o,w,te,se,ue,Te,Re,De,Ee,fe,ae,V,G,k,S,$,v,d,y,M,Y,ee,oe,$e,ie,ce,ve,be,he,_e,Se,Ae,Be,Ce,He,Ie,Pe,ke,Ne,Me,qe,Ue,i,b,X,D,J=e.top,C=[],r=e.nil,z=e.$$$,u=e.$$,ne=e.klass,c=e.module,F=e.hash2,n=e.send2,t=e.send,p=e.hash,s=e.truthy;return J.$require("racc/parser.rb"),J.$require("bcdice/arithmetic/node"),J.$require("bcdice/command/lexer"),J.$require("bcdice/command/parsed"),function(H,O,a){[ne(H,O,"Parser")].concat(a)}(z(u(C,"BCDice"),"Command"),z(u(C,"Racc"),"Parser"),C),O=C,E=D=[c(C[0],"BCDice")].concat(O),N=(X=[c(D[0],"Command")].concat(E))[0],A=z(u(X,"Racc"),"Parser"),f=X,i=ne(N,A,"Parser"),b=[i].concat(f),i.$$prototype.notations=i.$$prototype.lexer=i.$$prototype.modifier=i.$$prototype.prefix_number=i.$$prototype.suffix_number=i.$$prototype.need_suffix_number=i.$$prototype.need_prefix_number=i.$$prototype.critical=i.$$prototype.fumble=i.$$prototype.dollar=i.$$prototype.allowed_cmp_op=i.$$prototype.question_target=r,e.def(i,"$initialize",_=function(Z,ye){var Q,U,le,ze,xe=_.$$p,ge=this;if(xe&&(_.$$p=null),Q=e.slice.call(arguments,0,arguments.length),null==(U=e.extract_kwargs(Q)))U=F([],{});else if(!U.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(le=Q,!e.hasOwnProperty.call(U.$$smap,"round_type"))throw e.ArgumentError.$new("missing keyword: round_type");return ze=U.$$smap.round_type,n(ge,e.find_super_dispatcher(ge,"initialize",_,!1,!0),"initialize",[],null),ge.notations=le,ge.round_type=ze,ge.prefix_number=!1,ge.suffix_number=!1,ge.need_prefix_number=!1,ge.need_suffix_number=!1,ge.modifier=!0,ge.critical=!1,ge.fumble=!1,ge.dollar=!1,ge.allowed_cmp_op=[r,">=",">","<=","<","==","!="],ge.question_target=!1},_.$$arity=-2),e.def(i,"$disable_modifier",x=function(){return this.modifier=!1,this},x.$$arity=0),e.def(i,"$enable_prefix_number",L=function(){return this.prefix_number=!0,this},L.$$arity=0),e.def(i,"$enable_suffix_number",m=function(){return this.suffix_number=!0,this},m.$$arity=0),e.def(i,"$has_prefix_number",l=function(){var Z=this;return Z.prefix_number=!0,Z.need_prefix_number=!0,Z},l.$$arity=0),e.def(i,"$has_suffix_number",R=function(){var Z=this;return Z.suffix_number=!0,Z.need_suffix_number=!0,Z},R.$$arity=0),e.def(i,"$enable_critical",q=function(){return this.critical=!0,this},q.$$arity=0),e.def(i,"$enable_fumble",re=function(){return this.fumble=!0,this},re.$$arity=0),e.def(i,"$enable_dollar",I=function(){return this.dollar=!0,this},I.$$arity=0),e.def(i,"$restrict_cmp_op_to",T=function(Z){var ye,U=this;return ye=e.slice.call(arguments,0,arguments.length),U.allowed_cmp_op=ye,U},T.$$arity=-1),e.def(i,"$enable_question_target",h=function(){return this.question_target=!0,this},h.$$arity=0),e.def(i,"$parse",P=function(Z){try{return this.lexer=u(b,"Lexer").$new(Z,this.notations),this.$do_parse()}catch(Q){if(!e.rescue(Q,[u(b,"ParseError"),u(b,"ZeroDivisionError")]))throw Q;try{return r}finally{e.pop_exception()}}},P.$$arity=1),i.$private(),e.def(i,"$parsed",B=function(Z,ye,Q,U){var le;return t(u(b,"Parsed").$new(),"tap",[],((le=function(pe){var Le,we,Ye,We,Ve,Ze,ge=null==le.$$s?this:le.$$s,me=r;return null==ge.round_type&&(ge.round_type=r),null==pe&&(pe=r),me=[Z["$[]"]("command")],t(pe,"command=",e.to_a(me)),K(me.length,1),me=[(Le=Z["$[]"]("prefix"),Le===r||null==Le?r:t(Le,"eval",[ge.round_type]))],t(pe,"prefix_number=",e.to_a(me)),K(me.length,1),me=[(we=Z["$[]"]("suffix"),we===r||null==we?r:t(we,"eval",[ge.round_type]))],t(pe,"suffix_number=",e.to_a(me)),K(me.length,1),me=[(Ye=ye["$[]"]("critical"),Ye===r||null==Ye?r:t(Ye,"eval",[ge.round_type]))],t(pe,"critical=",e.to_a(me)),K(me.length,1),me=[(We=ye["$[]"]("fumble"),We===r||null==We?r:t(We,"eval",[ge.round_type]))],t(pe,"fumble=",e.to_a(me)),K(me.length,1),me=[(Ve=ye["$[]"]("dollar"),Ve===r||null==Ve?r:t(Ve,"eval",[ge.round_type]))],t(pe,"dollar=",e.to_a(me)),K(me.length,1),me=[Q.$eval(ge.round_type)],t(pe,"modify_number=",e.to_a(me)),K(me.length,1),me=[U["$[]"]("cmp_op")],t(pe,"cmp_op=",e.to_a(me)),K(me.length,1),U["$[]"]("target")["$=="]("?")?(t(pe,"question_target=",e.to_a(me=[!0])),K(me.length,1),t(pe,"target_number=",e.to_a(me=[0])),me[K(me.length,1)]):(t(pe,"question_target=",e.to_a(me=[!1])),K(me.length,1),me=[(Ze=U["$[]"]("target"),Ze===r||null==Ze?r:t(Ze,"eval",[ge.round_type]))],t(pe,"target_number=",e.to_a(me)),me[K(me.length,1)])}).$$s=this,le.$$arity=1,le))},B.$$arity=4),e.def(i,"$next_token",j=function(){return this.lexer.$next_token()},j.$$arity=0),Be=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,33,34,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,r,r,17,18,6,r,5,r,r,17,18,r,r,5,23,24,25,26,56,54,55,57],Ce=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,r,17,15,15,18,18,23,r,18,30,30,23,23,24,r,23,31,31,24,24,25,r,24,44,44,25,25,28,r,25,47,47,28,28,29,r,28,48,48,29,29,33,r,29,49,49,33,33,34,r,33,50,50,34,34,36,r,34,r,r,36,36,37,r,36,r,r,37,37,r,r,37,27,27,27,27,52,52,52,52],He=[-2,4,16,-3,-1,11,r,33,13,35,23,30,1,r,28,40,r,37,44,r,r,-2,r,51,58,65,0,106,72,79,47,54,r,86,93,r,100,107,r,r,r,r,r,r,63,r,r,68,75,82,89,r,120,r,r,r,r,r],Ie=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],Pe=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,r,r,21,47,48,40,51,52,49,50,44,46,3,r,r,r,13,r,r,r,r,r,r,r,32],ke=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,r,r,4,8,8,5,7,7,8,8,9,5,6,r,r,r,6,r,r,r,r,r,r,r,6],Ne=[r,6,13,3,9,-1,27,-15,-10,-1,-38],Me=[r,r,r,r,r,r,19,16,15,r,r],qe=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],Ue=p(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),e.const_set(b[0],"Racc_arg",[Be,Ce,Ie,He,Pe,ke,Me,Ne,19,qe,Ue,58,35,!0]),e.const_set(b[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),e.const_set(b[0],"Racc_debug_parser",!1),e.def(i,"$_reduce_1",o=function(Z,ye,Q){var U;return s(this.modifier)||this.$raise(u(b,"ParseError")),U=e.to_ary(Z),this.$parsed(null==U[0]?r:U[0],null==U[1]?r:U[1],null==U[2]?r:U[2],null==U[3]?r:U[3])},o.$$arity=3),e.def(i,"$_reduce_2",w=function(Z,ye,Q){var U;return s(this.modifier)||this.$raise(u(b,"ParseError")),U=e.to_ary(Z),this.$parsed(null==U[0]?r:U[0],null==U[2]?r:U[2],null==U[1]?r:U[1],null==U[3]?r:U[3])},w.$$arity=3),e.def(i,"$_reduce_3",te=function(Z,ye,Q){var U,ge;return ge=null==(U=e.to_ary(Z))[2]?r:U[2],this.$parsed(null==U[0]?r:U[0],null==U[1]?r:U[1],z(z(u(b,"Arithmetic"),"Node"),"Number").$new(0),ge)},te.$$arity=3),e.def(i,"$_reduce_4",se=function(Z,ye,Q){var le,U=this;return s(s(le=U.prefix_number)?U.suffix_number:le)||U.$raise(u(b,"ParseError")),F(["command","prefix","suffix"],{command:Z["$[]"](1),prefix:Z["$[]"](0),suffix:Z["$[]"](2)})},se.$$arity=3),e.def(i,"$_reduce_5",ue=function(Z,ye,Q){var U=this;return s(U.prefix_number)||U.$raise(u(b,"ParseError")),s(U.need_suffix_number)&&U.$raise(u(b,"ParseError")),F(["command","prefix"],{command:Z["$[]"](1),prefix:Z["$[]"](0)})},ue.$$arity=3),e.def(i,"$_reduce_6",Te=function(Z,ye,Q){var U=this;return s(U.suffix_number)||U.$raise(u(b,"ParseError")),s(U.need_prefix_number)&&U.$raise(u(b,"ParseError")),F(["command","suffix"],{command:Z["$[]"](0),suffix:Z["$[]"](1)})},Te.$$arity=3),e.def(i,"$_reduce_7",Re=function(Z,ye,Q){var le,U=this;return s(s(le=U.need_prefix_number)?le:U.need_suffix_number)&&U.$raise(u(b,"ParseError")),F(["command"],{command:Z["$[]"](0)})},Re.$$arity=3),e.def(i,"$_reduce_8",De=function(Z,ye,Q){return F([],{})},De.$$arity=3),e.def(i,"$_reduce_9",Ee=function(Z,ye,Q){var U,ge,we,Le,xe=r;return xe=null==(U=e.to_ary(Z))[0]?r:U[0],ge=null==U[2]?r:U[2],s(s(Le=this.critical)?xe["$[]"]("critical")["$nil?"]():Le)||this.$raise(u(b,"ParseError")),t(xe,"[]=",e.to_a(we=["critical",ge])),K(we.length,1),xe},Ee.$$arity=3),e.def(i,"$_reduce_10",fe=function(Z,ye,Q){var U,ge,we,Le,xe=r;return xe=null==(U=e.to_ary(Z))[0]?r:U[0],ge=null==U[2]?r:U[2],s(s(Le=this.fumble)?xe["$[]"]("fumble")["$nil?"]():Le)||this.$raise(u(b,"ParseError")),t(xe,"[]=",e.to_a(we=["fumble",ge])),K(we.length,1),xe},fe.$$arity=3),e.def(i,"$_reduce_11",ae=function(Z,ye,Q){var U,ge,we,Le,xe=r;return xe=null==(U=e.to_ary(Z))[0]?r:U[0],ge=null==U[2]?r:U[2],s(s(Le=this.dollar)?xe["$[]"]("dollar")["$nil?"]():Le)||this.$raise(u(b,"ParseError")),t(xe,"[]=",e.to_a(we=["dollar",ge])),K(we.length,1),xe},ae.$$arity=3),e.def(i,"$_reduce_12",V=function(Z,ye,Q){return Z["$[]"](1)},V.$$arity=3),e.def(i,"$_reduce_13",G=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"Negative").$new(Z["$[]"](1))},G.$$arity=3),e.def(i,"$_reduce_14",k=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"+",Z["$[]"](2))},k.$$arity=3),e.def(i,"$_reduce_15",S=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"-",Z["$[]"](2))},S.$$arity=3),e.def(i,"$_reduce_16",$=function(Z,ye,Q){return s(this.allowed_cmp_op["$include?"](r))||this.$raise(u(b,"ParseError")),F([],{})},$.$$arity=3),e.def(i,"$_reduce_17",v=function(Z,ye,Q){var U,xe,pe;return pe=null==(U=e.to_ary(Z))[1]?r:U[1],s(this.allowed_cmp_op["$include?"](xe=null==U[0]?r:U[0]))||this.$raise(u(b,"ParseError")),F(["cmp_op","target"],{cmp_op:xe,target:pe})},v.$$arity=3),e.def(i,"$_reduce_18",d=function(Z,ye,Q){var le,U=this;return le=Z["$[]"](0),s(U.question_target)||U.$raise(u(b,"ParseError")),s(U.allowed_cmp_op["$include?"](le))||U.$raise(u(b,"ParseError")),F(["cmp_op","target"],{cmp_op:le,target:"?"})},d.$$arity=3),e.def(i,"$_reduce_19",y=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"+",Z["$[]"](2))},y.$$arity=3),e.def(i,"$_reduce_20",M=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"-",Z["$[]"](2))},M.$$arity=3),e.def(i,"$_reduce_22",Y=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"*",Z["$[]"](2))},Y.$$arity=3),e.def(i,"$_reduce_23",ee=function(Z,ye,Q){return Z["$[]"](3).$new(Z["$[]"](0),Z["$[]"](2))},ee.$$arity=3),e.def(i,"$_reduce_25",oe=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},oe.$$arity=3),e.def(i,"$_reduce_26",$e=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"DivideWithCeil")},$e.$$arity=3),e.def(i,"$_reduce_27",ie=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"DivideWithCeil")},ie.$$arity=3),e.def(i,"$_reduce_28",ce=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"DivideWithRound")},ce.$$arity=3),e.def(i,"$_reduce_29",ve=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"DivideWithFloor")},ve.$$arity=3),e.def(i,"$_reduce_30",be=function(Z,ye,Q){return Z["$[]"](1)},be.$$arity=3),e.def(i,"$_reduce_31",he=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"Negative").$new(Z["$[]"](1))},he.$$arity=3),e.def(i,"$_reduce_33",_e=function(Z,ye,Q){return Z["$[]"](1)},_e.$$arity=3),e.def(i,"$_reduce_34",Se=function(Z,ye,Q){return z(z(u(b,"Arithmetic"),"Node"),"Number").$new(Z["$[]"](0))},Se.$$arity=3),void e.def(i,"$_reduce_none",Ae=function(Z,ye,Q){return Z["$[]"](0)},Ae.$$arity=3)},Opal.modules["bcdice/deprecated/checker"]=function(e){var n,H,W,X,N,A,f,i,b,E,g,a,p,J=[],C=e.nil,z=e.$$,u=e.module,ne=e.send,c=e.truthy;return n=J,H=p=[u(J[0],"BCDice")].concat(n),W=a=[u(p[0],"Deprecated")].concat(H),E=u(a[0],"Checker"),g=[E].concat(W),E.$private(),e.def(E,"$check_result_legacy",X=function(x,L,m,l){var I,P,R=this,q=C,re=C,T=C,h=C,B=C;return q=ne(L,"map",[],"sides".$to_proc()),I=(re=ne(L,"map",[],"value".$to_proc())).$sum(),T=[100]["$==="](h=q)?R.$check_1D100(x,I,m,l):[20]["$==="](h)?R.$check_1D20(x,I,m,l):[6,6]["$==="](h)?R.$check_2D6(x,I,re,m,l):C,c(c(P=T["$nil?"]())?P:T["$empty?"]())&&(h=q.$uniq(),T=[10]["$==="](h)?R.$check_nD10(x,I,re,m,l):[6]["$==="](h)?R.$check_nD6(x,I,re,m,l):C,c(c(B=T["$nil?"]())?B:T["$empty?"]()))?C:z(g,"Result").$new(T.$delete_prefix(" \uff1e "))},X.$$arity=4),e.def(E,"$check_1D100",N=function(x,L,m,l){return C},N.$$arity=4),e.def(E,"$check_1D20",A=function(x,L,m,l){return C},A.$$arity=4),e.def(E,"$check_nD10",f=function(x,L,m,l,R){return C},f.$$arity=5),e.def(E,"$check_2D6",i=function(x,L,m,l,R){return C},i.$$arity=5),void e.def(E,"$check_nD6",b=function(x,L,m,l,R){return C},b.$$arity=5)},Opal.modules["bcdice/base"]=function(e){function K(D,W){return"number"==typeof D&&"number"==typeof W?D+W:D["$+"](W)}function J(D,W){return"number"==typeof D&&"number"==typeof W?D-W:D["$-"](W)}var W,A,b,_,x,L,m,l,R,q,re,I,T,h,P,B,j,o,w,te,se,ue,Te,Re,De,Ee,fe,ae,V,G,k,S,d,y,M,Y,ee,v,f,i,g,u=e.top,ne=[],c=e.nil,F=e.$$$,n=e.$$,t=e.module,p=e.klass,s=e.truthy,H=e.send,O=e.range,a=c;return u.$require("i18n"),u.$require("i18n/backend/fallbacks"),u.$require("bcdice/randomizer"),u.$require("bcdice/dice_table"),u.$require("bcdice/enum"),u.$require("bcdice/translate"),u.$require("bcdice/result"),u.$require("bcdice/command/parser"),u.$require("bcdice/deprecated/checker"),W=ne,A=g=[t(ne[0],"BCDice")].concat(W),f=p(g[0],null,"Base"),i=[f].concat(A),f.$$prototype.sort_add_dice=f.$$prototype.sort_barabara_dice=f.$$prototype.enabled_d9=f.$$prototype.raw_input=f.$$prototype.randomizer=f.$$prototype.enabled_upcase_input=f.$$prototype.debug=c,S=e.get_singleton_class(f),v=[S].concat(i),S.$attr_reader("prefixes"),e.def(S,"$register_prefix",d=function($e){var ce,ve=this,be=c;return null==ve.prefixes&&(ve.prefixes=c),ce=e.slice.call(arguments,0,arguments.length),ve.prefixes=s(be=ve.prefixes)?be:[],ve.prefixes.$concat(ce.$flatten())},d.$$arity=-1),e.def(S,"$register_prefix_from_super_class",y=function(){return this.$register_prefix(this.$superclass().$prefixes())},y.$$arity=0),e.def(S,"$prefixes_pattern",M=function(){var ie,$e=this,ce=c;return null==$e.prefixes_pattern&&($e.prefixes_pattern=c),null==$e.prefixes&&($e.prefixes=c),$e.prefixes_pattern=s(ie=$e.prefixes_pattern)?ie:c,s($e.prefixes_pattern)?$e.prefixes_pattern:($e.prefixes=s(ce=$e.prefixes)?ce:[],$e.prefixes.$freeze(),$e.prefixes_pattern=(s($e.prefixes["$empty?"]())?/(?!)/:e.regexp(["^(S)?(",$e.prefixes.$join("|"),")"],"i")).$freeze())},M.$$arity=0),e.def(S,"$command_pattern",Y=function(){var $e,ce,ie=this,ve=c,be=c;return null==ie.command_pattern&&(ie.command_pattern=c),null==ie.prefixes&&(ie.prefixes=c),ie.command_pattern=s(ce=ie.command_pattern)?ce:c,s(ie.command_pattern)?ie.command_pattern:(ie.prefixes=s(ve=ie.prefixes)?ve:[],ie.prefixes.$freeze(),be=K(H(F(n(v,"CommonCommand"),"COMMANDS"),"map",[],(($e=function(_e){return null==_e&&(_e=c),F(_e,"PREFIX_PATTERN").$source()}).$$s=ie,$e.$$arity=1,$e)),ie.prefixes),ie.command_pattern=e.regexp(["^S?(",be.$join("|"),")"],"i").$freeze())},Y.$$arity=0),e.def(S,"$eval",ee=function($e){return this.$new($e).$eval()},ee.$$arity=1),f.$include(n(i,"Translate")),f.$include(F(n(i,"Deprecated"),"Checker")),e.def(f,"$initialize",b=function($){var v=this;return v.raw_input=$,v.sort_add_dice=!1,v.sort_barabara_dice=!1,v.d66_sort_type=F(n(i,"D66SortType"),"NO_SORT"),v.enabled_d9=!1,v.round_type=F(n(i,"RoundType"),"FLOOR"),v.sides_implicit_d=6,v.upper_dice_reroll_threshold=c,v.reroll_dice_reroll_threshold=c,v.default_cmp_op=c,v.default_target_number=c,v.enabled_upcase_input=!0,v.locale="ja_jp",v.randomizer=F(n(i,"BCDice"),"Randomizer").$new(),v.debug=!1},b.$$arity=1),f.$attr_accessor("randomizer"),f.$attr_reader("d66_sort_type"),f.$attr_reader("round_type"),f.$attr_reader("sides_implicit_d"),f.$attr_reader("upper_dice_reroll_threshold"),f.$attr_reader("reroll_dice_reroll_threshold"),f.$attr_reader("default_cmp_op"),f.$attr_reader("default_target_number"),e.def(f,"$sort_add_dice?",_=function(){return this.sort_add_dice},_.$$arity=0),e.def(f,"$sort_barabara_dice?",x=function(){return this.sort_barabara_dice},x.$$arity=0),e.def(f,"$enabled_d9?",L=function(){return this.enabled_d9},L.$$arity=0),e.def(f,"$enable_debug",m=function(){return this.debug=!0},m.$$arity=0),e.def(f,"$eval",l=function(){var v,d,y,$=this,M=c;return v=F(n(i,"BCDice"),"Preprocessor").$process($.raw_input,$),d=s(y=$.$dice_command(v))?y:$.$eval_common_command($.raw_input),s(d)?(M=[$.randomizer.$rand_results()],H(d,"rands=",e.to_a(M)),J(M.length,1),M=[$.randomizer.$detailed_rand_results()],H(d,"detailed_rands=",e.to_a(M)),J(M.length,1),d):c},l.$$arity=0),e.def(f,"$change_text",R=function($){return $},R.$$arity=1),e.def(f,"$check_result",q=function($,v,d,y){var M=this,Y=c,ee=c,oe=c,$e=c,ie=c;return Y=M.$check_result_legacy($,v,d,y),s(Y)?Y:(ee=H(v,"map",[],"sides".$to_proc()),$e=(oe=H(v,"map",[],"value".$to_proc())).$sum(),(Y=[100]["$==="](ie=ee)?M.$result_1d100($,$e,d,y):[20]["$==="](ie)?M.$result_1d20($,$e,d,y):[6,6]["$==="](ie)?M.$result_2d6($,$e,oe,d,y):c)["$=="](n(i,"Result").$nothing())?c:s(Y)?Y:(ie=ee.$uniq(),(Y=[10]["$==="](ie)?M.$result_nd10($,$e,oe,d,y):[6]["$==="](ie)?M.$result_nd6($,$e,oe,d,y):c)["$=="](n(i,"Result").$nothing())?c:s(Y)?Y:M.$result_ndx($,d,y)))},q.$$arity=4),e.def(f,"$grich_text",re=function($,v,d){return c},re.$$arity=3),f.$private(),e.def(f,"$eval_common_command",I=function($){try{var v;return $=this.$change_text($),H(F(n(i,"CommonCommand"),"COMMANDS"),"each",[],((v=function(M){var ee,Y=null==v.$$s?this:v.$$s;if(null==Y.randomizer&&(Y.randomizer=c),null==M&&(M=c),ee=M.$eval($,Y,Y.randomizer),!s(ee))return c;e.ret(ee)}).$$s=this,v.$$arity=1,v)),c}catch(y){if(y===e.returner)return y.$v;throw y}},I.$$arity=1),e.def(f,"$dice_command",T=function($){var v,d=this,y=c,M=c,Y=c,ee=c,oe=c,$e=c,ie=c;return s(d.enabled_upcase_input)&&($=$.$upcase()),y=d.$class().$prefixes_pattern().$match($),s(y)?(M=y["$[]"](1)["$nil?"]()["$!"](),s(M)&&($=$["$[]"](O(1,-1,!1))),Y=d.$eval_game_system_specific_command($),s(Y["$is_a?"](n(i,"Result")))?(ee=[s(oe=Y["$secret?"]())?oe:M],H(Y,"secret=",e.to_a(ee)),J(ee.length,1),Y):s(s($e=s(ie=Y["$nil?"]())?ie:Y["$empty?"]())?$e:Y["$=="]("1"))?c:H(n(i,"Result").$new(),"tap",[],((v=function(ve){return null==ve&&(ve=c),ee=[Y.$to_s()],H(ve,"text=",e.to_a(ee)),J(ee.length,1),H(ve,"secret=",e.to_a(ee=[M])),ee[J(ee.length,1)]}).$$s=d,v.$$arity=1,v))):c},T.$$arity=1),e.def(f,"$eval_game_system_specific_command",h=function($){return c},h.$$arity=1),e.def(f,"$result_ndx",P=function($,v,d){return s(d["$is_a?"](n(i,"String")))?c:s($.$send(v,d))?n(i,"Result").$success(this.$translate("success")):n(i,"Result").$failure(this.$translate("failure"))},P.$$arity=3),e.def(f,"$result_1d100",B=function($,v,d,y){return c},B.$$arity=4),e.def(f,"$result_1d20",j=function($,v,d,y){return c},j.$$arity=4),e.def(f,"$result_nd10",o=function($,v,d,y,M){return c},o.$$arity=5),e.def(f,"$result_2d6",w=function($,v,d,y,M){return c},w.$$arity=5),e.def(f,"$result_nd6",te=function($,v,d,y,M){return c},te.$$arity=5),e.def(f,"$get_table_by_2d6",se=function($){return this.$get_table_by_nD6($,2)},se.$$arity=1),e.def(f,"$get_table_by_1d6",ue=function($){return this.$get_table_by_nD6($,1)},ue.$$arity=1),e.def(f,"$get_table_by_nD6",Te=function($,v){return this.$get_table_by_nDx($,v,6)},Te.$$arity=2),e.def(f,"$get_table_by_nDx",Re=function($,v,d){var M,Y=c;return M=this.randomizer.$roll_sum(v,d),Y=this.$get_table_value($["$[]"](J(M,v))),s(Y["$nil?"]())?["1",0]:[Y,M]},Re.$$arity=3),e.def(f,"$get_table_by_1d3",De=function($){var y,M,v=this,Y=c;return v.$debug("get_table_by_1d3"),y=v.randomizer.$roll_sum(1,6),v.$debug("num",y),M=function(D,W){return"number"==typeof D?D/2:D["$/"](2)}(J(y,1)).$to_i(),v.$debug("index",M),Y=$["$[]"](M),s(Y["$nil?"]())?["1",0]:[Y,y]},De.$$arity=1),e.def(f,"$get_table_by_d66_swap",Ee=function($){var d;return d=this.randomizer.$roll_d66(F(n(i,"D66SortType"),"ASC")),[this.$get_table_by_number(d,$),d]},Ee.$$arity=1),e.def(f,"$get_table_by_d66",fe=function($){var d,y,M,ee,Y=c;return d=this.randomizer.$roll_once(6),y=this.randomizer.$roll_once(6),M=K(function(D,W){return"number"==typeof D?6*D:D["$*"](6)}(J(d,1)),J(y,1)),Y=$["$[]"](M),ee=""+d+y,s(Y["$nil?"]())?["1",ee]:[Y,ee]},fe.$$arity=1),e.def(f,"$get_table_by_number",ae=function($,v,d){try{var y;return null==d&&(d="1"),H(v,"each",[],((y=function(ee){var $e,oe=null==y.$$s?this:y.$$s;if(null==ee&&(ee=c),$e=ee["$[]"](0),!s(function(D,W){return"number"==typeof D&&"number"==typeof W?D>=W:D["$>="](W)}($e,$)))return c;e.ret(oe.$get_table_value(ee["$[]"](1)))}).$$s=this,y.$$arity=1,y)),this.$get_table_value(d)}catch(Y){if(Y===e.returner)return Y.$v;throw Y}},ae.$$arity=-3),e.def(f,"$get_table_value",V=function($){return s($["$is_a?"](n(i,"Proc")))?$.$call():$},V.$$arity=1),e.def(f,"$roll_tables",G=function($,v){var y=c;return y=v["$[]"]($),s(y)?y.$roll(this.randomizer).$to_s():c},G.$$arity=2),e.def(f,"$debug",k=function($,v){var y,M,Y=this,ee=c,oe=c;return y=e.slice.call(arguments,1,arguments.length),s(Y.debug)?(ee=s($["$is_a?"](n(i,"String")))?$:$.$inspect(),s(y["$empty?"]())?Y.$warn(ee):(oe=H(y,"map",[],((M=function(ie){return null==ie&&(ie=c),s(ie["$is_a?"](n(i,"String")))?'"'+ie+'"':ie.$inspect()}).$$s=Y,M.$$arity=1,M)),Y.$warn(ee+": "+oe.$join(", ")))):c},k.$$arity=-2),F(F(n(ne,"I18n"),"Backend"),"Simple").$include(F(F(n(ne,"I18n"),"Backend"),"Fallbacks")),n(ne,"I18n").$load_path()["$<<"](n(ne,"Dir")["$[]"](n(ne,"File").$join(u.$__dir__(),"../../i18n/**/*.yml"))),a=["ja_jp"],H(n(ne,"I18n"),"default_locale=",e.to_a(a)),J(a.length,1),a=[["ja_jp"]],H(n(ne,"I18n").$fallbacks(),"defaults=",e.to_a(a)),a[J(a.length,1)]},Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var n,H,D,g,E,O,a,p,J=[],C=e.nil,r=e.$$$,z=e.$$,u=e.module,ne=e.hash2,c=e.truthy;return n=J,H=p=[u(J[0],"BCDice")].concat(n),a=[O=u(p[0],"ArithmeticEvaluator")].concat(H),D=e.get_singleton_class(O),E=[D].concat(a),void e.def(D,"$eval",g=function(N,A){var f,b=C;if(null==A)A=ne([],{});else if(!A.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(f=A.$$smap.round_type)&&(f=r(z(E,"RoundType"),"FLOOR")),c(N)&&c(b=z(E,"Arithmetic").$eval(N,f))?b:0},g.$$arity=-2)},Opal.modules["bcdice/game_system/LogHorizon"]=function(e){function K(E,g){return"number"==typeof E&&"number"==typeof g?E+g:E["$+"](g)}function J(E,g){return"number"==typeof E&&"number"==typeof g?E-g:E["$-"](g)}function C(E,g){return"number"==typeof E&&"number"==typeof g?E>=g:E["$>="](g)}function z(E,g){return"number"==typeof E&&"number"==typeof g?E*g:E["$*"](g)}function u(E,g){return"number"==typeof E&&"number"==typeof g?E<=g:E["$<="](g)}function ne(E,g){return"number"==typeof E&&"number"==typeof g?E<g:E["$<"](g)}var g,f,_,x,L,R,q,re,I,T,h,P,B,j,o,w,te,se,ue,Te,Re,De,Ee,V,S,$,v,d,y,ee,Y,G,k,m,l,b,N,c=e.top,F=[],n=e.nil,t=e.$$$,p=e.$$,s=e.module,H=e.klass,O=e.send2,a=e.truthy,D=e.hash2,W=e.send;return c.$require("bcdice/base"),c.$require("bcdice/arithmetic_evaluator"),g=F,f=N=[s(F[0],"BCDice")].concat(g),_=(b=[s(N[0],"GameSystem")].concat(f))[0],x=p(b,"Base"),L=b,m=H(_,x,"LogHorizon"),l=[m].concat(L),m.$$prototype.randomizer=m.$$prototype.locale=n,e.const_set(l[0],"ID","LogHorizon"),e.const_set(l[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),e.const_set(l[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),e.const_set(l[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),m.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),e.def(m,"$initialize",R=function(ae){var k=this;return R.$$p&&(R.$$p=null),O(k,e.find_super_dispatcher(k,"initialize",R,!1,!0),"initialize",[ae],null),k.d66_sort_type=t(p(l,"D66SortType"),"NO_SORT")},R.$$arity=1),e.def(m,"$eval_game_system_specific_command",q=function(ae){var G,k,S,$,v,d,y,M,Y,ee,oe,V=this;return a(G=a(k=a(S=a($=a(v=a(d=a(y=a(M=a(Y=a(ee=a(oe=V.$getCheckRollDiceCommandResult(ae))?oe:V.$roll_consumption(ae))?ee:V.$roll_consumption_table(ae))?Y:V.$roll_treasure(ae))?M:V.$roll_treasure_table(ae))?y:V.$roll_treasure_table_b2(ae))?d:V.$getInventionAttributeTextDiceCommandResult(ae))?v:V.$getTroubleInAkibaStreetDiceCommandResult(ae))?$:V.$getAbandonedChildDiceCommandResult(ae))?S:V.$getMusicalInstrumentTypeDiceCommandResult(ae))?k:V.$roll_eastal_exploration_table(ae))?G:V.$roll_tables(ae,t(V.$class(),"TABLES"))},q.$$arity=1),m.$private(),e.def(m,"$getCheckRollDiceCommandResult",re=function(ae){var V=this,k=n,S=n,$=n,v=n,d=n,y=n,Y=n;return k=t(p(l,"Command"),"Parser").$new(/\d+LH/,D(["round_type"],{round_type:V.$round_type()})).$restrict_cmp_op_to(n,">=").$parse(ae),a(k)?(S=k.$command().$to_i(),d=K(v=($=V.randomizer.$roll_barabara(S,6)).$sum(),k.$modify_number()),y=V.$result_text(S,$,d,k),Y=[["("+k+")",v+"["+$.$join(",")+"]"+p(l,"Format").$modifier(k.$modify_number()),d,y.$text()].$compact().$join(" \uff1e ")],W(y,"text=",e.to_a(Y)),J(Y.length,1),y):n},re.$$arity=1),e.def(m,"$result_text",I=function(ae,V,G,k){var S=this;return a(C(V.$count(6),2))?p(l,"Result").$critical(S.$translate("LogHorizon.LH.critical")):a(C(V.$count(1),ae))?p(l,"Result").$fumble(S.$translate("LogHorizon.LH.fumble")):a(k.$cmp_op()["$nil?"]())?p(l,"Result").$new():a(C(G,k.$target_number()))?p(l,"Result").$success(S.$translate("success")):p(l,"Result").$failure(S.$translate("failure"))},I.$$arity=4),e.def(m,"$getValue",T=function(ae,V){var k;return a(a(k=ae["$nil?"]())?k:ae["$empty?"]())?V:p(l,"ArithmeticEvaluator").$eval(ae)},T.$$arity=2),e.def(m,"$roll_consumption",h=function(ae){var G=n,k=n,S=n,$=n,v=n;return G=/^CT\d*([+\-\d]+)?$/.$match(ae),a(G)?(k=p(l,"ArithmeticEvaluator").$eval(G["$[]"](1)),S=p(l,"Format").$modifier(k),$=this.randomizer.$roll_once(6),a(S["$empty?"]())||(v=K($.$to_s(),S)),["(1D6"+S+")",v,K($,k)].$compact().$join(" \uff1e ")):n},h.$$arity=1),e.def(m,"$roll_consumption_table",P=function(ae){var G=n,k=n,S=n,$=n;return G=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(ae),a(G)?(k=this.$construct_consumption_table(G["$[]"](1)),S=G["$[]"](2).$to_i(),$=p(l,"ArithmeticEvaluator").$eval(G["$[]"](3)),a(G["$[]"](4))&&k.$fix_dice_value(G["$[]"](4).$to_i()),k.$roll(S,$,this.randomizer)):n},P.$$arity=1),e.def(m,"$construct_consumption_table",B=function(ae){var k,V=this,G=n;return G="P"["$==="](k=ae)?V.$translate("LogHorizon.CT.PCT"):"E"["$==="](k)?V.$translate("LogHorizon.CT.ECT"):"G"["$==="](k)?V.$translate("LogHorizon.CT.GCT"):"C"["$==="](k)?V.$translate("LogHorizon.CT.CCT"):"ES"["$==="](k)?V.$translate("LogHorizon.CT.ESCT"):"CS"["$==="](k)?V.$translate("LogHorizon.CT.CSCT"):n,p(l,"ConsumptionTable").$new(G["$[]"]("name"),G["$[]"]("items"))},B.$$arity=1),function(fe,ae,V){var S,$,v,G=H(fe,null,"ConsumptionTable");[G].concat(V),G.$$prototype.tables=G.$$prototype.dice_value=G.$$prototype.name=n,e.def(G,"$initialize",S=function(y,M){var Y=this;return Y.name=y,Y.tables=M,Y.dice_value=n},S.$$arity=2),e.def(G,"$fix_dice_value",$=function(y){return this.dice_value=y},$.$$arity=1),e.def(G,"$roll",v=function(y,M,Y){var oe,ve,ie,ee=this,$e=n,ce=n;return oe=function(E,g){return"number"==typeof E?E/5:E["$/"](5)}(J(y,1)).$clamp(0,J(ee.tables.$size(),1)),$e=ee.tables["$[]"](oe),ee.dice_value=a(ie=ee.dice_value)?ie:Y.$roll_once(6),ce=K(ee.dice_value,M),ve=$e["$[]"](ce.$clamp(0,7)),ee.name+"("+ce+"["+ee.dice_value+"]) \uff1e "+ve},v.$$arity=3)}(l[0],0,l),e.def(m,"$roll_treasure",j=function(ae){var G=n,k=n,S=n,$=n,v=n,d=n;return G=/^TRS(\d+)?([+\-\d]+)?$/.$match(ae),a(G)?(k=G["$[]"](1).$to_i(),S=p(l,"ArithmeticEvaluator").$eval(G["$[]"](2)),d=K(K(v=($=this.randomizer.$roll_barabara(2,6)).$sum(),z(k,5)),S),"(2D6+"+k+"*5"+p(l,"Format").$modifier(S)+") \uff1e "+v+"["+$.$join(",")+"]"+p(l,"Format").$modifier(K(z(k,5),S))+" \uff1e "+d):n},j.$$arity=1),e.def(m,"$roll_treasure_table",o=function(ae){var V=this,G=n,k=n,S=n,$=n,v=n,d=n;return G=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(ae),a(G)?(k=G["$[]"](1),S=V.$construct_treasure_table(k),$=G["$[]"](2).$to_i(),v=p(l,"ArithmeticEvaluator").$eval(G["$[]"](3)),a(a(d=$["$=="](0))?v["$=="](0):d)?V.$translate("LogHorizon.TRS.need_cr",D(["command"],{command:ae})):(a(G["$[]"](4))&&S.$fix_dice_value(7),S.$roll($,v,V.randomizer))):n},o.$$arity=1),e.def(m,"$construct_treasure_table",w=function(ae){return ae["$=="]("HTRS")?p(l,"HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):p(l,"TreasureTable").$from_i18n("LogHorizon.TRS."+ae,this.locale)},w.$$arity=1),e.def(m,"$roll_treasure_table_b2",te=function(ae){var V=this,G=n,k=n,S=n,$=n,v=n,d=n;return G=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(ae),a(G)?(k=G["$[]"](1),S=p(l,"ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+k,V.locale),$=G["$[]"](2).$to_i(),v=p(l,"ArithmeticEvaluator").$eval(G["$[]"](3)),a(a(d=$["$=="](0))?v["$=="](0):d)?V.$translate("LogHorizon.TRS.need_cr",D(["command"],{command:ae})):(a(G["$[]"](4))&&S.$fix_dice_value(7),S.$roll($,v,V.randomizer))):n},te.$$arity=1),V=l,k=[G=H(l[0],null,"TreasureTable")].concat(V),G.$$prototype.dice_list=G.$$prototype.name=G.$$prototype.items=n,G.$include(p(k,"Translate")),y=e.get_singleton_class(G),Y=[y].concat(k),e.def(y,"$from_i18n",ee=function($e,ie){var ve=n;return ve=p(Y,"I18n").$translate($e,D(["raise","locale"],{raise:!0,locale:ie})),this.$new(ve["$[]"]("name"),ve["$[]"]("items"),ie)},ee.$$arity=2),e.def(G,"$initialize",S=function(M,Y,ee){return this.name=M,this.items=Y,this.locale=ee,this.dice_list=n},S.$$arity=3),e.def(G,"$fix_dice_value",$=function(M){return this.dice_list=[M]},$.$$arity=1),e.def(G,"$roll",v=function(M,Y,ee){var oe,ie,$e=this,ce=n,ve=n,be=n,he=n,_e=n;return a(a(ie=M["$=="](0))?Y["$=="](0):ie)?n:(ce=a(a(ve=M["$=="](0))?Y["$!="](0):ve)?Y:($e.dice_list=a(be=$e.dice_list)?be:ee.$roll_barabara(2,6),K(K($e.dice_list.$sum(),z(5,M)),Y)),he=$e.$pick_item(ce),a($e.dice_list)&&(_e="["+((oe=$e.dice_list)===n||null==oe?n:W(oe,"join",[","]))+"]"),$e.name+"("+ce+_e+") \uff1e "+he)},v.$$arity=3),G.$private(),e.def(G,"$pick_item",d=function(M){var Y=this;return a(u(M,6))?Y.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):a(u(M,62))?Y.items["$[]"](M.$to_s()):a(u(M,72))?Y.items["$[]"](J(M,10).$to_s())+"&80G":a(u(M,82))?Y.items["$[]"](J(M,20).$to_s())+"&160G":a(u(M,87))?Y.items["$[]"](J(M,30).$to_s())+"&260G":Y.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:88}))},d.$$arity=1),function(fe,ae,V){var S,G=H(fe,ae,"HeroineTreasureTable");[G].concat(V),G.$$prototype.items=n,e.def(G,"$pick_item",S=function(v){var d=this;return a(u(v,6))?d.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):a(u(v,53))?d.items["$[]"](v.$to_s()):d.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:54}))},S.$$arity=1)}(l[0],p(l,"TreasureTable"),l),function(fe,ae,V){var S,G=H(fe,ae,"ExpansionTreasureTable");[G].concat(V),G.$$prototype.items=n,e.def(G,"$pick_item",S=function(v){var d=this;return a(u(v,6))?d.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):a(u(v,162))?d.items["$[]"](v.$to_s()):a(u(v,172))?d.items["$[]"](J(v,10).$to_s())+"&200G":a(u(v,182))?d.items["$[]"](J(v,20).$to_s())+"&400G":a(u(v,187))?d.items["$[]"](J(v,30).$to_s())+"&600G":d.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:188}))},S.$$arity=1)}(l[0],p(l,"TreasureTable"),l),e.def(m,"$getInventionAttributeTextDiceCommandResult",se=function(ae){var V,k=n,S=n,$=n,v=n,d=n,y=n;return a(ae["$=~"](/IAT([ABMDLT]*)/))?(k=this.$translate("LogHorizon.IAT.name"),S=a(a($=p(l,"Regexp").$last_match(1))?p(l,"Regexp").$last_match(1)["$!="](""):$)?p(l,"Regexp").$last_match(1):"MDLT",v=S.$length()["$=="](1),d=[],y=[],W(S.$split(/(?:)/),"each",[],((V=function(Y){var ie,ee=null==V.$$s?this:V.$$s,oe=n,$e=n,ce=n;return null==ee.randomizer&&(ee.randomizer=n),null==Y&&(Y=n),oe=ee.randomizer.$roll_once(6),y["$<<"](oe.$to_s()),ce=($e="A"["$==="](ie=Y)||"M"["$==="](ie)?ee.$translate("LogHorizon.IAT.A"):"B"["$==="](ie)||"D"["$==="](ie)?ee.$translate("LogHorizon.IAT.B"):"L"["$==="](ie)?ee.$translate("LogHorizon.IAT.L"):"T"["$==="](ie)?ee.$translate("LogHorizon.IAT.T"):n)["$[]"]("items")["$[]"](J(oe,1)),a(v)&&(ce=$e["$[]"]("name")+"\uff1a"+ce),d.$push(ce)}).$$s=this,V.$$arity=1,V)),k+"(["+y.$join(",")+"]) \uff1e "+d.$join(" ")):n},se.$$arity=1),e.def(m,"$getTroubleInAkibaStreetDiceCommandResult",ue=function(ae){return ae["$=="]("TIAS")?this.$roll_random_table("LogHorizon.TIAS"):n},ue.$$arity=1),e.def(m,"$getAbandonedChildDiceCommandResult",Te=function(ae){return ae["$=="]("ABDC")?this.$roll_random_table("LogHorizon.ABDC"):n},Te.$$arity=1),e.def(m,"$roll_random_table",Re=function(ae){var V,G=this,k=n,S=n,$=n,v=n;return k=G.$translate(ae),S=k["$[]"]("tables"),$=G.randomizer.$roll_barabara(S.$size(),6),v=W($.$map(),"with_index",[],((V=function(y,M){return null==y&&(y=n),null==M&&(M=n),S["$[]"](M)["$[]"](J(y,1))}).$$s=G,V.$$arity=2,V)),k["$[]"]("name")+"(["+$.$join(",")+"]) \uff1e "+v.$join(" ")},Re.$$arity=1),e.def(m,"$getMusicalInstrumentTypeDiceCommandResult",De=function(ae){var V=this,G=n,k=n,S=n,$=n,v=n,d=n,y=n,M=n;return!a(ae["$=~"](/MII(\d?)/))||(G=(a(k=p(l,"Regexp").$last_match(1))?p(l,"Regexp").$last_match(1)["$!="](""):k)["$!"](),S=a(G)?V.randomizer.$roll_once(6):p(l,"Regexp").$last_match(1).$to_i(),a(a($=ne(S,1))?$:ne(6,S)))?n:(v=V.$translate("LogHorizon.MII.name"),d=V.$translate("LogHorizon.MII.type_list")["$[]"](J(S,1)),y=V.randomizer.$roll_once(6),M=V.$translate("LogHorizon.MII.items")["$[]"](J(S,1))["$[]"](J(y,1)),K(K(v.$to_s(),a(G)?"("+S+")":"")," \uff1e "+d+"("+y+") \uff1e "+M))},De.$$arity=1),e.def(m,"$roll_eastal_exploration_table",Ee=function(ae){var V,G=this,k=n,S=n,$=n,v=n,d=n,y=n,M=n,Y=n,ee=n,oe=n,ie=n;return k=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(ae),!a(k)||a(a(S=a($=k["$[]"](1)["$nil?"]())?k["$[]"](2)["$nil?"]():$)?k["$[]"](3)["$nil?"]():S)?n:(v=k["$[]"](1).$to_i(),d=p(l,"ArithmeticEvaluator").$eval(k["$[]"](2)),y=(V=k["$[]"](3))===n||null==V?n:W(V,"to_i",[]),M=a(y)?[y]:v["$=="](0)?[]:G.randomizer.$roll_barabara(2,6),a(M["$empty?"]())||(Y="["+M.$join(",")+"]"),ee=K(K(M.$sum(),z(v,5)),d).$clamp(7,162),oe=G.$translate("LogHorizon.ESTL.name"),ie=G.$translate("LogHorizon.ESTL.items")["$[]"](ee.$to_s()).$chomp(),oe+"("+ee+Y+")\n"+ie)},Ee.$$arity=1),function(fe,ae){var G,V=[fe].concat(ae);fe.$private(),e.def(fe,"$translate_tables",G=function(S){return D(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",S),KOYU:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",S),MGR1:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",S),MGR2:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",S),MGR3:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",S),HLOC:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",S),PCNM:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",S)})},G.$$arity=1)}(e.get_singleton_class(m),l),e.const_set(l[0],"TABLES",m.$translate_tables("ja_jp")),void m.$register_prefix(p(l,"TABLES").$keys())},J=[],z=(e=Opal).$$,u=e.module,ne=e.klass,c=e.send2,e.top.$require("bcdice/game_system/LogHorizon"),n=J,H=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"GameSystem")].concat(H),X=[g=ne(a[0],z(a,"LogHorizon"),"LogHorizon_Korean")].concat(E),e.const_set(X[0],"ID","LogHorizon:Korean"),e.const_set(X[0],"NAME","\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),e.const_set(X[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),e.const_set(X[0],"HELP_MESSAGE","\u25a0 \ud310\uc815(xLH\xb1y>=z)\n\u3000xD6\uc758 \ud310\uc815.\ud06c\ub9ac\ud2f0\uceec, \ud38c\ube14\uc758 \uc790\ub3d9 \ud310\uc815\uc744 \uc2e4\uc2dc\ud569\ub2c8\ub2e4.\n\u3000x\uff1ax\ub85c \uad74\ub9b4 \uc8fc\uc0ac\uc704\uc758 \uc218\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\n\u3000\xb1y\uff1ay\ub85c \uc218\uc815\uce58\ub97c \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n  >=z\uff1az\ub85c \ubaa9\ud45c\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \uc18c\ubaa8\ud45c(tCTx\xb1y$z)\n\u3000PCT \uccb4\ub825\uff0fECT \uae30\ub825\uff0fGCT \ubb3c\ud488\uff0fCCT \uae08\uc804\n\u3000x:CR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\xb1y:\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$z\uff1a$\ub97c \ubd99\uc774\uba74 \uc8fc\uc0ac\uc704 \ub208\uc744 z\uace0\uc815\ud569\ub2c8\ub2e4. \ud45c\uc758 \ud2b9\uc815 \uac12 \ucc38\uc870\uc6a9\uc73c\ub85c \uc0ac\uc6a9\ud558\uba70.\uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc7ac\ubb3c\ud45c(tTRSx\xb1y$)\n\u3000CTRS \uae08\uc804\uff0fMTRS \ub9c8\ubc95\uc18c\uc7ac\uff0fITRS \ud658\uc804 \uc544\uc774\ud15c\uff0f\u203bHTRS \ud788\ub85c\uc778\uff0fGTRS \uace0\ube14\ub9b0 \uc7ac\ubcf4\ud45c\n\u3000x\uff1aCR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc0dd\ub7b5\uc2dc\uc5d0\ub294 \ub2e4\uc774\uce58 0\uace0\uc815\uc73c\ub85c \uc218\uc815\uce58\uc758 \ud45c\ub97c \ucc38\uc870.\u300a\uace8\ub4dc \ud551\uac70\u300b\uc0ac\uc6a9 \uc2dc \ub4f1.\n\u3000\xb1y\uff1a\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$\uff1a\uff04\uc744 \ubd99\uc774\uba74 \uc7ac\ubb3c\ud45c\uc758 \ub2e4\uc774\uc2a4\ub97c 7\ub85c \uace0\uc815\ud569\ub2c8\ub2e4.\uff081\ucc28 \ubd84\ub7c9\uc758 \ud504\ub77c\uc774\uc988 \uc6a9\ub3c4\uff09\uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc774\uc2a4\ud0c8 \ud0d0\uc0c9\ud45c (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \ud504\ub9ac\ud53d\uc2a4\ub4dc \ub9e4\uc9c1\uc544\uc774\ud15c \ud6a8\uacfc \ud45c(MGRx)\n\u3000x\ub294 MG\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\n\u25a0 \uc545\uae30 \uc885\ub958 \ud45c\u2020 (MIIx)\n\u3000x\ub294 \uc545\uae30\uc758 \uc885\ub958\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.(1~6\ub97c \uc9c0\uc815) \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u30001 \ud0c0\uc545\uae301\uff0f2 \uac74\ubc18\uc545\uae30\uff0f3 \ud604\uc545\uae301\uff0f4 \ud604\uc545\uae302\uff0f5 \uad00\uc545\uae301\uff0f6 \uad00\uc545\uae302\n\n\u25a0 \ud2b9\uc218 \uc18c\ubaa8\ud45c\u2606 (tSCTx\xb1y$z)\n\u3000\uc18c\ubaa8\ud45c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4. \ub2e4\ub9cc CR\uc740 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000ESCT \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\ub294 \ud3ed\ubc1c\ud588\ub2e4!\uff0fCSCT \uc54c\ube0c\uc758 \uc800\uc8fc\ub2e4!\n\n\u25a0 \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\uc758 \uc0c8\ub85c\uc6b4 \ubc1c\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (IATt)\n\u3000IATA \ud2b9\uc9d5A(\uc7a5\uc810)\uff0fIATB \ud2b9\uc9d5B(\ub2e8\uc810)\uff0fIATL \uc678\ud615\uff0fIATT \uc885\ub958\n\u3000t\ub97c \uc0dd\ub7b5\ud560 \uacbd\uc6b0 \ubaa8\ub450 \ud45c\uc2dc\ud569\ub2c8\ub2e4. t\uc5d0 A/B/L/T\ub97c \uc784\uc758\uc758 \uc21c\uc11c\ub85c \uc5f0\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \ud45c\n\u3000\u30fb\ud37c\uc2a4\ub110\ub9ac\ud2f0 \ud0dc\uadf8 \ud45c (PTAG)\n\u3000\u30fb\uad50\uc6b0\ud45c (KOYU)\n\u3000\u30fb\uacf5\uaca9 \uba85\uc911 \uc7a5\uc18c \ub79c\ub364 \uacb0\uc815\ud45c\u203b (HLOC)\n\u3000\u30fbPC\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (PCNM)\n\u3000\u30fb\uc544\ud0a4\ubc14 \uac70\ub9ac\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c \ub79c\ub364\uacb0\uc815 \ud45c\u203b (TIAS)\n\u3000\u30fb\ubc84\ub824\uc9c4 \uc544\uc774 \ub79c\ub364 \uacb0\uc815 \ud45c\u203b (ABDC)\n\n\u2020\ud45c\uc2dc\uc640 \u2606\ud45c\uc2dc\ub294\u300c\uc778\ud22c\u30fb\ub354\u30fb\uc140\ub374\uc2dc\uc544 \uc0c8\ub85c\uc6b4 \ube4c\ub4dc\uc758 \ub0a0\uac1c\uc9d3(1)\u300d\uc5d0\uc11c\u3001\n\u2606\ud45c\uc2dc\ub294 \uc140\ub374\uc2dc\uc544\u30fb\uac00\uc81c\ud2b8\u300cD \ub418\uae30\ub294 \ud560\uae4c? 66\u300dVol.1\uc5d0\uc11c\u3001\n\u203b\ud45c\uc2dc\ub294\u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc5d0\uc11c \ucc38\uc870\ud588\uc2b5\ub2c8\ub2e4. \uc774\uc6a9\ubc95\uc740 \ud56d\ubaa9\uc744 \ucc38\uc870\ud574\uc8fc\uc138\uc694.\n\u30fbD66\ub2e4\uc774\uc2a4\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\n\n\u30fb\uc5ed\uc790\uc758 \ub9d0 : \u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc740 \ud55c\uad6d\uc5d0\uc11c \ubc1c\ub9e4\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucc38\uace0\ud574\uc8fc\uc138\uc694.\n\u30fb\uc774\ub2c8\ud2f0\uc6c0\ub2d8, \uad11\ud669\ub2d8, CoC\ubc29 \uc5ec\ub7ec\ubd84 \uac10\uc0ac\ud569\ub2c8\ub2e4. by\ud638\ud761\ub3c4\uc758\uc2dd\ud558\uba74\uadc0\ucc2e\uc544\n"),g.$register_prefix_from_super_class(),e.def(g,"$initialize",N=function(f){var _=this;return N.$$p&&(N.$$p=null),c(_,e.find_super_dispatcher(_,"initialize",N,!1,!0),"initialize",[f],null),_.locale="ko_kr"},N.$$arity=1),e.const_set(X[0],"TABLES",g.$translate_tables("ko_kr"))}}]);