(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6510],{6510:(de,me,fe)=>{fe(9993),Opal.modules["i18n/backend/fallbacks"]=function(r){var U,_,N,L,z,f,M=[],t=r.nil,b=r.$$$,e=r.module,y=r.class_variable_set,C=r.truthy,I=r.class_variable_get,c=r.def,P=r.send,Y=r.to_a,A=r.rb_minus,E=r.send2,F=r.find_super,H=r.hash2,B=r.find_block_super,j=r.neqeq;return U=M,f=[z=e(M[0],"I18n")].concat(U),y(f[0],"@@fallbacks",t),_=r.get_singleton_class(z),N=[_].concat(f),L=r.$r(N),c(_,"$fallbacks",function(){var x=t;return y(N[1],"@@fallbacks",C(null!=N[1].$$cvars["@@fallbacks"]?"class variable":t)&&C(x=I(N[1],"@@fallbacks",!1))?x:b(b(L("I18n"),"Locale"),"Fallbacks").$new()),C(x=L("Thread").$current()["$[]"]("i18n_fallbacks"))?x:I(N[1],"@@fallbacks",!1)},0),c(_,"$fallbacks=",function(m){var x;return y(N[1],"@@fallbacks",C(m["$is_a?"](L("Array")))?b(b(L("I18n"),"Locale"),"Fallbacks").$new(m):m),x=["i18n_fallbacks",I(N[1],"@@fallbacks",!1)],P(L("Thread").$current(),"[]=",Y(x)),x[A(x.length,1)]},1),function(_,T){var m,x,k,l,L=[e(_,"Backend")].concat(T);return m=L,k=[x=e(L[0],"Fallbacks")].concat(m),l=r.$r(k),c(x,"$translate",function u(i,s,$){try{var n=u.$$p||t,a=this,d=t,v=t;return delete u.$$p,null==$&&($=l("EMPTY_HASH")),C($.$fetch("fallback",!0))?C($["$[]"]("fallback_in_progress"))?E(a,F(a,"translate",u,!1,!0),"translate",[i,s,$],n):(C($["$[]"]("default"))&&(d=a["$extract_non_symbol_default!"]($)),v=$.$merge(H(["fallback_in_progress"],{fallback_in_progress:!0})),P(l("I18n").$fallbacks()["$[]"](i),"each",[],function h(g){var q=null==h.$$s?this:h.$$s;null==g&&(g=t);try{return P(q,"catch",["exception"],function G(){var o=null==G.$$s?this:G.$$s,V=t;if(V=E(o,B(o,"translate",G.$$def||h.$$def||u,!1,!1),"translate",[g,s,v],null),C(V["$nil?"]()))return t;j(i.$to_s(),g.$to_s())&&o.$on_fallback(i,g,s,$),r.ret(V)},{$$arity:0,$$s:q})}catch(G){if(!r.rescue(G,[b(l("I18n"),"InvalidLocale")]))throw G;try{return t}finally{r.pop_exception()}}},{$$arity:1,$$s:a}),C($["$key?"]("default"))&&C($["$[]"]("default")["$nil?"]())?t:C(d)?E(a,F(a,"translate",u,!1,!0),"translate",[i,t,$.$merge(H(["default"],{default:d}))],null):a.$throw("exception",b(l("I18n"),"MissingTranslation").$new(i,s,$))):E(a,F(a,"translate",u,!1,!0),"translate",[i,s,$],n)}catch(h){if(h===r.returner)return h.$v;throw h}},-3),c(x,"$extract_non_symbol_default!",function(i){var $,s=t,n=t;return s=[i["$[]"]("default")].$flatten(),$=P(s,"detect",[],function(d){return null==d&&(d=t),d["$is_a?"](l("Symbol"))["$!"]()},1),C($)&&(n=["default",s["$[]"](0,s.$index($))],P(i,"[]=",Y(n)),A(n.length,1)),$},1),c(x,"$exists?",function u(i,s,$){try{var n=u.$$p||t,a=this;return delete u.$$p,null==$&&($=l("EMPTY_HASH")),C($.$fetch("fallback",!0))?(P(l("I18n").$fallbacks()["$[]"](i),"each",[],function d(v){var h=null==d.$$s?this:d.$$s;null==v&&(v=t);try{if(!C(E(h,B(h,"exists?",d.$$def||u,!1,!1),"exists?",[v,s],null)))return t;r.ret(!0)}catch(g){if(!r.rescue(g,[b(l("I18n"),"InvalidLocale")]))throw g;try{return t}finally{r.pop_exception()}}},{$$arity:1,$$s:a}),!1):E(a,F(a,"exists?",u,!1,!0),"exists?",[i,s,$],n)}catch(d){if(d===r.returner)return d.$v;throw d}},-3),x.$private(),c(x,"$on_fallback",function(i,s,$,n){return t},4)}(f[0],f)},Opal.modules["bcdice/randomizer"]=function(r){var z,p,m,x,k,l,_,T,M=[],t=r.nil,b=r.$$$,y=r.klass,C=r.const_set,I=r.def,c=r.truthy,P=r.rb_gt,Y=r.rb_plus,A=r.rb_le,E=r.send,F=r.rb_minus,H=r.eqeq,B=r.rb_times,j=r.eqeqeq,Q=r.rb_ge;return z=M,_=[(0,r.module)(M[0],"BCDice")].concat(z),T=r.$r(_),p=_,x=[m=y(_[0],null,"Randomizer")].concat(p),k=r.$r(x),(l=m.$$prototype).rand_results=l.detailed_rand_results=t,C(x[0],"UPPER_LIMIT_DICE_TIMES",200),C(x[0],"UPPER_LIMIT_DICE_SIDES",1e4),C(x[0],"UPPER_LIMIT_RANDS",1e4),I(m,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]},0),m.$attr_reader("rand_results"),m.$attr_reader("detailed_rand_results"),C(x[0],"DetailedRandResult",k("Struct").$new("kind","sides","value")),I(m,"$roll_barabara",function(i,s){var $=this;return c(P(Y($.rand_results.$size(),i),k("UPPER_LIMIT_RANDS")))&&$.$raise(k("TooManyRandsError")),c(A(i,0))||c(P(i,k("UPPER_LIMIT_DICE_TIMES")))?[]:E(k("Array"),"new",[i],function n(){return(null==n.$$s?this:n.$$s).$roll_once(s)},{$$arity:0,$$s:$})},2),I(m,"$roll_sum",function(i,s){return this.$roll_barabara(i,s).$sum()},2),I(m,"$roll_once",function(i){var $=t;return c(A(i,0))||c(P(i,k("UPPER_LIMIT_DICE_SIDES")))?0:($=this.$rand_inner(i),this.$push_to_detail("normal",i,$),$)},1),I(m,"$roll_index",function(i){return F(this.$roll_once(i),1)},1),I(m,"$roll_tens_d10",function(){var $,s=t;return s=this.$rand_inner(10),H(s,10)&&(s=0),$=B(s,10),this.$push_to_detail("tens_d10",10,$),$},0),I(m,"$roll_d9",function(){var s;return s=F(this.$rand_inner(10),1),this.$push_to_detail("d9",10,s),s},0),I(m,"$roll_d66",function(i){var n,$=t;return $=E(k("Array"),"new",[2],function a(){return(null==a.$$s?this:a.$$s).$roll_once(6)},{$$arity:0,$$s:this}),j(b(k("D66SortType"),"ASC"),n=i)?$["$sort!"]():j(b(k("D66SortType"),"DESC"),n)&&$["$sort!"]()["$reverse!"](),Y(B($["$[]"](0),10),$["$[]"](1))},1),m.$private(),I(m,"$rand_inner",function(i){var $,s=this;return c(Q(s.rand_results.$size(),k("UPPER_LIMIT_RANDS")))&&s.$raise(k("TooManyRandsError")),$=s.$random(i),s.rand_results["$<<"]([$,i]),$},1),I(m,"$random",function(i){return Y(k("Kernel").$rand(i),1)},1),I(m,"$push_to_detail",function(i,s,$){var a;return a=k("DetailedRandResult").$new(i,s,$),this.detailed_rand_results.$push(a)},3),y(_[0],T("StandardError"),"TooManyRandsError"),t},Opal.modules["bcdice/dice_table/roll_result"]=function(r){var c,E,Q,U,z,f,_,H,Y,M=[],t=r.nil,b=r.module,e=r.klass,y=r.def,C=r.truthy;return c=M,E=Y=[b(M[0],"BCDice")].concat(c),Q=H=[b(Y[0],"DiceTable")].concat(E),z=[U=e(H[0],null,"RollResult")].concat(Q),f=r.$r(z),(_=U.$$prototype).table_name=_.value=_.body=t,y(U,"$initialize",function(N,L,p){var m=this;return m.table_name=N,m.value=L,m.body=p},3),U.$attr_reader("table_name"),U.$attr_reader("value"),U.$attr_reader("body"),y(U,"$to_s",function(){var N=this;return N.table_name+"("+N.value+") \uff1e "+N.body},0),y(U,"$last_body",function(){var N=this;return C(N.body["$is_a?"](f("RollResult")))?N.body.$last_body():N.body},0),y(U,"$empty?",function(){return!1},0)},Opal.modules["bcdice/dice_table/chain_table"]=function(r){var P,F,U,z,f,_,T,B,A,M=[],t=r.nil,b=r.module,e=r.klass,y=r.truthy,C=r.def,I=r.rb_minus;return P=M,F=A=[b(M[0],"BCDice")].concat(P),U=B=[b(A[0],"DiceTable")].concat(F),f=[z=e(B[0],null,"ChainTable")].concat(U),_=r.$r(f),(T=z.$$prototype).times=T.sides=T.items=T.name=t,C(z,"$initialize",function(L,p,m){var x=this,k=t;return x.name=L,x.items=m.$freeze(),k=/(\d+)D(\d+)/i.$match(p),y(k)||x.$raise(_("ArgumentError"),"Unexpected table type: "+p),x.times=k["$[]"](1).$to_i(),x.sides=k["$[]"](2).$to_i()},3),C(z,"$roll",function(L){var m,x,p=this,k=t;return m=L.$roll_sum(p.times,p.sides),x=I(m,p.times),k=p.items["$[]"](x),y(k["$respond_to?"]("roll"))&&(k=k.$roll(L)),_("RollResult").$new(p.name,m,k)},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(r){var E,j,_,T,N,L,p,U,H,M=[],t=r.nil,b=r.module,e=r.klass,y=r.hash2,C=r.defs,I=r.def,c=r.rb_plus,P=r.rb_times,Y=r.rb_minus;return E=M,j=H=[b(M[0],"BCDice")].concat(E),_=U=[b(H[0],"DiceTable")].concat(j),N=[T=e(U[0],null,"D66GridTable")].concat(_),L=r.$r(N),(p=T.$$prototype).name=p.items=t,C(T,"$from_i18n",function(x,k){var u=t;return u=L("I18n").$t(x,y(["locale","raise"],{locale:k,raise:!0})),this.$new(u["$[]"]("name"),u["$[]"]("items"))},2),I(T,"$initialize",function(x,k){return this.name=x,this.items=k.$freeze()},2),I(T,"$roll",function(x){var l,u,i,s,$;return l=x.$roll_once(6),u=x.$roll_once(6),i=c(P(l,10),u),s=Y(l,1),$=Y(u,1),L("RollResult").$new(this.name,i,this.items["$[]"](s)["$[]"]($))},1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(r){var Y,H,f,_,T,N,j,Q,E,t=[],b=r.nil,e=r.module,y=r.klass,C=r.hash2,I=r.defs,c=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),Y=t,H=E=[e(t[0],"BCDice")].concat(Y),j=[e(E[0],"DiceTable")].concat(H),Q=r.$r(j),f=j,T=[_=y(j[0],Q("D66GridTable"),"D66HalfGridTable")].concat(f),N=r.$r(T),I(_,"$from_i18n",function(p,m){var k=b;return k=N("I18n").$t(p,C(["locale","raise"],{locale:m,raise:!0})),this.$new(k["$[]"]("name"),k["$[]"]("items_1_2_3"),k["$[]"]("items_4_5_6"))},2),c(_,"$initialize",function(p,m,x){return this.name=p,this.items=[m,m,m,x,x,x].$freeze()},3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(r){var Y,H,f,_,T,N,j,Q,E,t=[],b=r.nil,e=r.module,y=r.klass,C=r.hash2,I=r.defs,c=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),Y=t,H=E=[e(t[0],"BCDice")].concat(Y),j=[e(E[0],"DiceTable")].concat(H),Q=r.$r(j),f=j,T=[_=y(j[0],Q("D66GridTable"),"D66OneThirdTable")].concat(f),N=r.$r(T),I(_,"$from_i18n",function(p,m){var k=b;return k=N("I18n").$t(p,C(["locale","raise"],{locale:m,raise:!0})),this.$new(k["$[]"]("name"),k["$[]"]("items_1_2"),k["$[]"]("items_3_4"),k["$[]"]("items_5_6"))},2),c(_,"$initialize",function(p,m,x,k){return this.name=p,this.items=[m,m,x,x,k,k].$freeze()},4)},Opal.modules["bcdice/dice_table/d66_table"]=function(r){var H,U,N,L,p,m,x,f,j,M=[],t=r.nil,b=r.$$$,e=r.module,y=r.klass,C=r.hash2,I=r.defs,c=r.def,P=r.eqeqeq,Y=r.rb_plus,A=r.rb_times,E=r.truthy;return H=M,U=j=[e(M[0],"BCDice")].concat(H),N=f=[e(j[0],"DiceTable")].concat(U),p=[L=y(f[0],null,"D66Table")].concat(N),m=r.$r(p),(x=L.$$prototype).sort_type=x.items=x.name=t,I(L,"$from_i18n",function(l,u){var $,s=t;return s=m("I18n").$t(l,C(["locale"],{locale:u})),$=m("D66SortType").$const_get(s["$[]"]("d66_sort_type")),this.$new(s["$[]"]("name"),$,s["$[]"]("items"))},2),c(L,"$initialize",function(l,u,i){var s=this;return s.name=l,s.sort_type=u,s.items=i.$freeze()},3),c(L,"$roll",function(l){var u=this,i=t,s=t,$=t,n=t;return i=l.$roll_barabara(2,6),P(b(m("D66SortType"),"ASC"),s=u.sort_type)?i["$sort!"]():P(b(m("D66SortType"),"DESC"),s)&&i["$sort!"]()["$reverse!"](),$=Y(A(i["$[]"](0),10),i["$[]"](1)),n=E(s=u.items["$[]"]($))?s:u.items["$[]"]($.$to_s()),E(n["$respond_to?"]("roll"))&&(n=n.$roll(l)),m("RollResult").$new(u.name,$,n)},1),c(L,"$choice",function(l){return m("RollResult").$new(this.name,l,this.items["$[]"](l))},1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(r){var Q,_,N,L,z,t=[],b=r.nil,e=r.module,y=r.klass,C=r.hash2,I=r.send,c=r.to_ary,P=r.rb_plus,Y=r.rb_times,A=r.to_a,E=r.rb_minus,F=r.send2,H=r.find_super,B=r.def;return r.top.$require("bcdice/dice_table/d66_table"),Q=t,_=z=[e(t[0],"BCDice")].concat(Q),N=[e(z[0],"DiceTable")].concat(_),L=r.$r(N),B(y(N[0],L("D66Table"),"D66LeftRangeTable"),"$initialize",function k(l,u,i){var n;return delete k.$$p,n=C([],{}),I(i,"each",[],function(d){var v,q;return null==d&&(d=b),v=c(d),q=null==v[1]?b:v[1],I(null==v[0]?b:v[0],"each",[],function(o){return null==o&&(o=b),I(q,"each_with_index",[],function(D,ee){var ae,te;return null==D&&(D=b),null==ee&&(ee=b),ae=P(Y(o,10),P(ee,1)),I(n,"[]=",A(te=[ae,D])),te[E(te.length,1)]},2)},1)},1),F(this,H(this,"initialize",k,!1,!0),"initialize",[l,u,n],null)},3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(r){var F,Q,T,N,L,p,m,z,B,M=[],t=r.nil,b=r.module,e=r.klass,y=r.hash2,C=r.defs,I=r.def,c=r.truthy,P=r.rb_minus,Y=r.rb_plus,A=r.rb_times;return F=M,Q=B=[b(M[0],"BCDice")].concat(F),T=z=[b(B[0],"DiceTable")].concat(Q),L=[N=e(z[0],null,"D66ParityTable")].concat(T),p=r.$r(L),(m=N.$$prototype).odd=m.even=m.name=t,C(N,"$from_i18n",function(k,l){var i=t;return i=p("I18n").$t(k,y(["locale","raise"],{locale:l,raise:!0})),this.$new(i["$[]"]("name"),i["$[]"]("odd"),i["$[]"]("even"))},2),I(N,"$initialize",function(k,l,u){var i=this;return i.name=k,i.odd=l.$freeze(),i.even=u.$freeze()},3),I(N,"$roll",function(k){var i,$,n,l=this,u=t;return u=k.$roll_once(6),i=k.$roll_once(6),$=(c(u["$odd?"]())?l.odd:l.even)["$[]"](P(i,1)),n=Y(A(u,10),i),p("RollResult").$new(l.name,n,$)},1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(r){var Y,H,z,f,_,T,N,j,E,M=[],t=r.nil,b=r.module,e=r.klass,y=r.def,C=r.rb_plus,I=r.rb_times,c=r.send;return Y=M,H=E=[b(M[0],"BCDice")].concat(Y),z=j=[b(E[0],"DiceTable")].concat(H),_=[f=e(j[0],null,"D66RangeTable")].concat(z),T=r.$r(_),(N=f.$$prototype).items=N.name=t,y(f,"$initialize",function(p,m){return this.name=p,this.items=m.$freeze()},2),y(f,"$roll",function(p){var x,k,l,u=t;return x=p.$roll_once(6),k=p.$roll_once(6),l=C(I(x,10),k),u=c(this.items,"find",[],function(s){return null==s&&(s=t),s["$[]"](0)["$include?"](l)},1),T("RollResult").$new(this.name,l,u["$[]"](1))},1)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var B,z,L,p,m,x,k,_,Q,M=[],t=r.nil,b=r.module,e=r.klass,y=r.const_set,C=r.send,I=r.truthy,c=r.def,P=r.to_a,Y=r.rb_minus,A=r.eqeqeq,E=r.rb_times,F=r.rb_plus;return B=M,z=Q=[b(M[0],"BCDice")].concat(B),L=_=[b(Q[0],"DiceTable")].concat(z),m=[p=e(_[0],null,"RangeTable")].concat(L),x=r.$r(m),(k=p.$$prototype).name=k.items=k.num_of_dice=k.num_of_sides=k.formatter=t,y(m[0],"RollResult",C(x("Struct"),"new",["sum","values","content","formatted"],function l(){return(null==l.$$s?this:l.$$s).$alias_method("to_s","formatted")},{$$arity:0,$$s:p})),y(m[0],"Item",x("Struct").$new("range","content")),y(m[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),y(m[0],"DEFAULT_FORMATTER",C(p,"lambda",[],function(u,i){return null==u&&(u=t),null==i&&(i=t),u.$name()+"("+i.$sum()+") \uff1e "+i.$content()},2)),p.$attr_reader("name"),p.$attr_reader("num_of_dice"),p.$attr_reader("num_of_sides"),c(p,"$initialize",function l(u,i,s){var a,$=l.$$p||t,n=this,d=t;return delete l.$$p,n.name=u.$freeze(),n.formatter=I(a=$)?a:x("DEFAULT_FORMATTER"),d=x("DICE_ROLL_METHOD_RE").$match(i),I(d)||n.$raise(x("ArgumentError"),n.name+": invalid dice roll method: "+i),n.num_of_dice=d["$[]"](1).$to_i(),n.num_of_sides=d["$[]"](2).$to_i(),n.$store(s)},3),c(p,"$fetch",function(u){var s,i=this;return s=C(i.items,"find",[],function(n){return null==n&&(n=t),n.$range()["$include?"](u)},1),I(s)||i.$raise(x("RangeError"),i.name+": value is out of range: "+u),s},1),c(p,"$roll",function(u){var $,n,a,i=this,s=t;return $=(s=u.$roll_barabara(i.num_of_dice,i.num_of_sides)).$sum(),n=x("RollResult").$new($,s,i.$fetch($).$content()),a=[i.formatter["$[]"](i,n)],C(n,"formatted=",P(a)),Y(a.length,1),n},1),p.$private(),c(p,"$store",function(u){var s,$,i=this;return s=C(u,"map",[],function n(a,d){return null==a&&(a=t),null==d&&(d=t),[(null==n.$$s?this:n.$$s).$coerce_to_int_range(a),d]},{$$arity:2,$$s:i}),$=C(s,"sort_by",[],function(a,d){return null==a&&(a=t),null==d&&(d=t),a.$min()},2),i.$assert_min_sum_is_covered($),i.$assert_max_sum_is_covered($),i.$assert_no_gap_or_overlap_in_ranges($),i.items=C($,"map",[],function(a,d){return null==a&&(a=t),null==d&&(d=t),x("Item").$new(a,d.$freeze()).$freeze()},2).$freeze(),i},1),c(p,"$coerce_to_int_range",function(u){var s;return A(x("Integer"),s=u)?x("Range").$new(u,u):A(x("Range"),s)&&I(u.$begin()["$is_a?"](x("Integer")))&&I(u.$end()["$is_a?"](x("Integer")))?u:this.$raise(x("TypeError"),this.name+": "+u+" ("+u.$class()+") must be an Integer or a Range with Integers ")},1),c(p,"$assert_min_sum_is_covered",function(u){var s,i=this,$=t;return s=i.num_of_dice,$=u.$first()["$[]"](0),I($["$include?"](s))||i.$raise(x("RangeError"),i.name+": min value ("+s+") is not covered: "+$),i},1),c(p,"$assert_max_sum_is_covered",function(u){var s,i=this,$=t;return s=E(i.num_of_dice,i.num_of_sides),$=u.$last()["$[]"](0),I($["$include?"](s))||i.$raise(x("RangeError"),i.name+": max value ("+s+") is not covered: "+$),i},1),c(p,"$assert_no_gap_or_overlap_in_ranges",function(u){return C(u,"each_cons",[2],function s($,n){var h,g,a=null==s.$$s?this:s.$$s,d=t,v=t;return null==a.name&&(a.name=t),null==$&&($=t),null==n&&(n=t),d=$["$[]"](0),v=n["$[]"](0),h=d.$max(),g=F(h,1),I(v["$include?"](h))&&a.$raise(x("RangeError"),a.name+": Range overlap: "+d+" and "+v),I(v["$include?"](g))?t:a.$raise(x("RangeError"),a.name+": Range gap: "+d+" and "+v)},{$$arity:2,$$s:this}),this},1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(r){var Y,H,z,L,p,m,x,_,j,E,M=[],t=r.nil,b=r.$$$,e=r.module,y=r.klass,C=r.send,I=r.def,c=r.rb_minus;return Y=M,H=E=[e(M[0],"BCDice")].concat(Y),z=j=[e(E[0],"DiceTable")].concat(H),L=_=[y(j[0],null,"SaiFicSkillTable")].concat(z),m=[p=y(_[0],null,"Category")].concat(L),x=r.$r(m),p.$$prototype.name=t,I(p,"$initialize",function(u,i,s,$){var n=this;return n.name=u,n.skills=C(i.$map(),"with_index",[2],function(d,v){return null==d&&(d=t),null==v&&(v=t),b(x("SaiFicSkillTable"),"Skill").$new(u,d,s,v,$)},2),n.dice=s},4),I(p,"$roll",function(u){return this.$skills()["$[]"](c(u.$roll_sum(2,6),2))},1),I(p,"$to_s",function(){return this.name},0),p.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(r){var c,E,Q,T,N,z,H,Y,M=[],t=r.nil,b=r.module,e=r.klass,y=r.def,C=r.hash2;return c=M,E=Y=[b(M[0],"BCDice")].concat(c),Q=H=[b(Y[0],"DiceTable")].concat(E),z=[e(H[0],null,"SaiFicSkillTable")].concat(Q),(N=(T=e(z[0],null,"Skill")).$$prototype).s_format=N.category_dice=N.row_dice=N.category_name=N.name=t,y(T,"$initialize",function(p,m,x,k,l){var u=this;return u.category_name=p,u.name=m,u.category_dice=x,u.row_dice=k,u.s_format=l},5),y(T,"$to_s",function(){var p=this;return p.$format(p.s_format,C(["category_dice","row_dice","category_name","skill_name"],{category_dice:p.category_dice,row_dice:p.row_dice,category_name:p.category_name,skill_name:p.name}))},0),T.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(r){var U,T,x,k,l,u,i,L,f,M=r.top,t=[],b=r.nil,e=r.$$$,y=r.module,C=r.klass,I=r.hash2,c=r.send,Y=r.defs,A=r.const_set,E=r.to_ary,F=r.def,H=r.truthy,B=r.rb_minus,j=r.rb_plus;return M.$require("bcdice/dice_table/sai_fic_skill_table/category"),M.$require("bcdice/dice_table/sai_fic_skill_table/skill"),U=t,T=f=[y(t[0],"BCDice")].concat(U),x=L=[y(f[0],"DiceTable")].concat(T),l=[k=C(L[0],null,"SaiFicSkillTable")].concat(x),u=r.$r(l),(i=k.$$prototype).rtt=i.rtt_format=i.rct=i.rct_format=i.rttn=i.rttn_format=i.categories=b,Y(k,"$from_i18n",function($,n,a){var d,v,h,o,G=b;if(null==a)a=I([],{});else if(!a.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(d=a.$$smap.rtt)&&(d=b),null==(v=a.$$smap.rct)&&(v=b),null==(h=a.$$smap.rttn)&&(h=b),o=(G=u("I18n").$t("RTT",I(["locale","raise","default"],{locale:n,raise:!1,default:I([],{})})).$merge(u("I18n").$t($,I(["locale","raise"],{locale:n,raise:!0}))))["$[]"]("items"),G=c(G,"select",[],function(D,ee){return null==D&&(D=b),null==ee&&(ee=b),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](D)},2),this.$new(o,r.to_hash(G).$merge(I(["rtt","rct","rttn"],{rtt:d,rct:v,rttn:h})))},-3),A(l[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),A(l[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),A(l[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),A(l[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),F(k,"$initialize",function($,n){var a,d,v,h,g,q,G,o=this;if(null==n)n=I([],{});else if(!n.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(a=n.$$smap.rtt)&&(a=b),null==(d=n.$$smap.rct)&&(d=b),null==(v=n.$$smap.rttn)&&(v=b),null==(h=n.$$smap.rtt_format)&&(h=u("DEFAULT_RTT")),null==(g=n.$$smap.rct_format)&&(g=u("DEFAULT_RCT")),null==(q=n.$$smap.rttn_format)&&(q=u("DEFAULT_RTTN")),null==(G=n.$$smap.s_format)&&(G=u("DEFAULT_S")),o.categories=c($.$map(),"with_index",[1],function(D,ee){var ae,ce,ne;return null==D&&(D=b),null==ee&&(ee=b),ce=null==(ae=E(D))[0]?b:ae[0],ne=null==ae[1]?b:ae[1],e(u("SaiFicSkillTable"),"Category").$new(ce,ne,ee,G)},{$$arity:2,$$has_top_level_mlhs_arg:!0}),o.rtt=a,o.rct=d,o.rttn=v.$to_a(),o.rtt_format=h,o.rct_format=g,o.rttn_format=q},-2),A(l[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),k.$attr_reader("categories"),F(k,"$roll_command",function($,n){var d,a=this,v=b,h=b;return H(["RTT",a.rtt]["$include?"](d=n))?a.$format_skill(a.rtt_format,a.$roll_skill($)):H(["RCT",a.rct]["$include?"](d))?(v=a.$roll_category($),a.$format(a.rct_format,I(["category_dice","category_name"],{category_dice:v.$dice(),category_name:v.$name()}))):H(h=u("RTTN").$index(d))||H(h=a.rttn.$index(d))?a.$format_skill(a.rttn_format,a.categories["$[]"](h).$roll($)):b},2),F(k,"$roll_category",function($){return this.categories["$[]"](B($.$roll_once(6),1))},1),F(k,"$roll_skill",function($){return this.$roll_category($).$roll($)},1),F(k,"$prefixes",function(){var $=this;return j(["RTT[1-6]?","RCT",$.rtt,$.rct],$.rttn).$compact()},0),k.$private(),F(k,"$format_skill",function($,n){return this.$format($,I(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:n.$category_dice(),row_dice:n.$row_dice(),category_name:n.$category_name(),skill_name:n.$name(),text:n.$to_s()}))},2)},Opal.modules["bcdice/dice_table/table"]=function(r){var A,B,f,_,T,N,L,Q,F,M=[],t=r.nil,b=r.module,e=r.klass,y=r.hash2,C=r.defs,I=r.truthy,c=r.def,P=r.rb_minus;return A=M,B=F=[b(M[0],"BCDice")].concat(A),f=Q=[b(F[0],"DiceTable")].concat(B),T=[_=e(Q[0],null,"Table")].concat(f),N=r.$r(T),(L=_.$$prototype).times=L.sides=L.name=L.items=t,C(_,"$from_i18n",function(m,x){var l=t;return l=N("I18n").$t(m,y(["locale"],{locale:x})),this.$new(l["$[]"]("name"),l["$[]"]("type"),l["$[]"]("items"))},2),c(_,"$initialize",function(m,x,k){var l=this,u=t;return l.name=m,l.items=k.$freeze(),u=/(\d+)D(\d+)/i.$match(x),I(u)||l.$raise(N("ArgumentError"),"Unexpected table type: "+x),l.times=u["$[]"](1).$to_i(),l.sides=u["$[]"](2).$to_i()},3),c(_,"$roll",function(m){var k,x=this;return k=m.$roll_sum(x.times,x.sides),x.$choice(k)},1),c(_,"$choice",function(m){var k,x=this;return k=P(m,x.times),N("RollResult").$new(x.name,m,x.items["$[]"](k))},1)},Opal.modules["bcdice/dice_table"]=function(r){var M=r.top;return M.$require("bcdice/dice_table/roll_result"),M.$require("bcdice/dice_table/chain_table"),M.$require("bcdice/dice_table/d66_grid_table"),M.$require("bcdice/dice_table/d66_half_grid_table"),M.$require("bcdice/dice_table/d66_one_third_table"),M.$require("bcdice/dice_table/d66_left_range_table"),M.$require("bcdice/dice_table/d66_parity_table"),M.$require("bcdice/dice_table/d66_range_table"),M.$require("bcdice/dice_table/d66_table"),M.$require("bcdice/dice_table/range_table"),M.$require("bcdice/dice_table/sai_fic_skill_table"),M.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(r){var C,Y,E,c,M=[],b=r.module,e=r.const_set;return C=M,Y=c=[b(M[0],"BCDice")].concat(C),E=[b(c[0],"D66SortType")].concat(Y),e(E[0],"NO_SORT","no_sort"),e(E[0],"ASC","asc"),e(E[0],"DESC","desc"),function(P,Y){var E=[b(P,"RoundType")].concat(Y);return e(E[0],"CEIL","ceil"),e(E[0],"FLOOR","floor"),e(E[0],"ROUND","round")}(c[0],c)},Opal.modules["bcdice/translate"]=function(r){var c,E,F,H,B,Y,M=[],t=r.nil,b=r.module,e=r.hash2,C=r.def;return c=M,E=Y=[b(M[0],"BCDice")].concat(c),H=[F=b(Y[0],"Translate")].concat(E),B=r.$r(H),C(F,"$translate",function(Q,U){var z,f=this;if(null==f.locale&&(f.locale=t),null==U)U=e([],{});else if(!U.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return z=r.kwrestargs(U,{}),B("I18n").$translate(Q,e(["locale","raise"],{locale:f.locale,raise:!0}).$merge(r.to_hash(z)))},-2)},Opal.modules["bcdice/result"]=function(r){var Y,B,z,j,U,E,M=[],t=r.nil,e=r.klass,y=r.send,C=r.to_a,I=r.rb_minus,c=r.def;return Y=M,B=E=[(0,r.module)(M[0],"BCDice")].concat(Y),[j=e(E[0],null,"Result")].concat(B),(U=j.$$prototype).secret=U.success=U.failure=U.critical=U.fumble=t,c(z=r.get_singleton_class(j),"$success",function(T){return y(this.$new(),"tap",[],function(p){var m=t;return null==p&&(p=t),y(p,"text=",C(m=[T])),I(m.length,1),y(p,"success=",C(m=[!0])),m[I(m.length,1)]},1)},1),c(z,"$failure",function(T){return y(this.$new(),"tap",[],function(p){var m=t;return null==p&&(p=t),y(p,"text=",C(m=[T])),I(m.length,1),y(p,"failure=",C(m=[!0])),m[I(m.length,1)]},1)},1),c(z,"$critical",function(T){return y(this.$new(),"tap",[],function(p){var m=t;return null==p&&(p=t),y(p,"text=",C(m=[T])),I(m.length,1),y(p,"critical=",C(m=[!0])),I(m.length,1),y(p,"success=",C(m=[!0])),m[I(m.length,1)]},1)},1),c(z,"$fumble",function(T){return y(this.$new(),"tap",[],function(p){var m=t;return null==p&&(p=t),y(p,"text=",C(m=[T])),I(m.length,1),y(p,"fumble=",C(m=[!0])),I(m.length,1),y(p,"failure=",C(m=[!0])),m[I(m.length,1)]},1)},1),c(z,"$nothing",function(){return"nothing"},0),c(j,"$initialize",function(f){var _=this;return null==f&&(f=t),_.text=f,_.rands=t,_.detailed_rands=t,_.secret=!1,_.success=!1,_.failure=!1,_.critical=!1,_.fumble=!1},-1),j.$attr_accessor("text","rands","detailed_rands"),j.$attr_writer("secret","success","failure","critical","fumble"),c(j,"$secret?",function(){return this.secret},0),c(j,"$success?",function(){return this.success},0),c(j,"$failure?",function(){return this.failure},0),c(j,"$critical?",function(){return this.critical},0),c(j,"$fumble?",function(){return this.fumble},0),c(j,"$condition=",function(f){return this.success=f,this.failure=f["$!"]()},1)},Opal.modules["racc/parser"]=function(r){var x,l,u,t=[],b=r.$r(t),e=r.nil,y=r.$$$,C=r.module,I=r.klass,c=r.truthy,P=r.const_set,Y=r.defs,A=r.gvars,E=r.rb_lt,F=r.send,H=r.to_a,B=r.rb_minus,j=r.def,Q=r.to_ary,U=r.neqeq,z=r.rb_plus,f=r.eqeq,_=r.rb_ge,T=r.rb_gt,N=r.eqeqeq,L=r.rb_le,p=r.rb_times;return x=t,l=[C(t[0],"Racc")].concat(x),u=r.$r(l),I(l[0],u("StandardError"),"ParseError"),c(y("::","ParseError","skip_raise")?"constant":e)||P(t[0],"ParseError",y(b("Racc"),"ParseError")),function(m,x){var n,a,d,v,h,u=[C(m,"Racc")].concat(x),i=r.$r(u);return c(i("Racc_No_Extensions","skip_raise")?"constant":e)||P(u[0],"Racc_No_Extensions",!1),n=u,d=[a=I(u[0],null,"Parser")].concat(n),v=r.$r(d),(h=a.$$prototype).yydebug=h.racc_debug_out=h.racc_error_status=h.racc_t=h.racc_vstack=h.racc_val=h.racc_state=h.racc_tstack=e,P(d[0],"Racc_Runtime_Version","1.4.6"),P(d[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),P(d[0],"Racc_Runtime_Core_Version_R","1.4.6"),P(d[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),P(d[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),P(d[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),P(d[0],"Racc_Runtime_Core_Version",v("Racc_Runtime_Core_Version_R")),P(d[0],"Racc_Runtime_Core_Revision",v("Racc_Runtime_Core_Revision_R")),P(d[0],"Racc_Runtime_Type","ruby"),Y(v("Parser"),"$racc_runtime_type",function(){return v("Racc_Runtime_Type")},0),j(a,"$_racc_setup",function(){var q,G,o=this,V=e,D=e,ee=e;return null==A.stderr&&(A.stderr=e),c(y(o.$class(),"Racc_debug_parser"))||(o.yydebug=!1),c(null!=(q=o.yydebug)&&q!==e?"instance-variable":e)||(o.yydebug=!1),c(o.yydebug)&&(c(null!=(G=o.racc_debug_out)&&G!==e?"instance-variable":e)||(o.racc_debug_out=A.stderr),o.racc_debug_out=c(V=o.racc_debug_out)?V:A.stderr),D=y(o.$class(),"Racc_arg"),c(E(D.$size(),14))&&(F(D,"[]=",H(ee=[13,!0])),B(ee.length,1)),D},0),j(a,"$_racc_init_sysvars",function(){var q=this;return q.racc_state=[0],q.racc_tstack=[],q.racc_vstack=[],q.racc_t=e,q.racc_val=e,q.racc_read_next=!0,q.racc_user_yyerror=!1,q.racc_error_status=0},0),j(a,"$do_parse",function(){return this.$__send__(v("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},0),j(a,"$next_token",function(){return this.$raise(v("NotImplementedError"),this.$class()+"#next_token is not defined")},0),j(a,"$_racc_do_parse_rb",function(q,G){var o,D=this,ee=e,ae=e,te=e,ce=e,K=e,w=e,Z=e,R=e;return o=Q(q),ee=null==o[0]?e:o[0],ae=null==o[1]?e:o[1],te=null==o[2]?e:o[2],ce=null==o[3]?e:o[3],K=null==o[10]?e:o[10],D.$_racc_init_sysvars(),w=Z=R=e,F(D,"catch",["racc_end_parse"],function S(){var re,X,W=null==S.$$s?this:S.$$s,se=e;for(null==W.racc_state&&(W.racc_state=e),null==W.racc_read_next&&(W.racc_read_next=e),null==W.racc_t&&(W.racc_t=e),null==W.yydebug&&(W.yydebug=e),null==W.racc_val&&(W.racc_val=e);c(!0);)for(c(R=ce["$[]"](W.racc_state["$[]"](-1)))?(c(W.racc_read_next)&&U(W.racc_t,0)&&(X=W.$next_token(),re=Q(X),w=null==re[0]?e:re[0],W.racc_val=null==re[1]?e:re[1],W.racc_t=c(w)?c(se=K["$[]"](w))?se:1:0,c(W.yydebug)&&W.$racc_read_token(W.racc_t,w,W.racc_val),W.racc_read_next=!1),R=z(R,W.racc_t),c(_(R,0))&&c(Z=ee["$[]"](R))&&f(ae["$[]"](R),W.racc_state["$[]"](-1))||(Z=te["$[]"](W.racc_state["$[]"](-1)))):Z=te["$[]"](W.racc_state["$[]"](-1));c(Z=W.$_racc_evalact(Z,q)););},{$$arity:0,$$s:D})},2),j(a,"$yyparse",function(q,G){return this.$__send__(v("Racc_YY_Parse_Method"),q,G,this.$_racc_setup(),!0)},2),j(a,"$_racc_yyparse_rb",function(q,G,o,V){var D,te=e,ce=e,ne=e,K=e,Z=e,R=e,S=e;return D=Q(o),te=null==D[0]?e:D[0],ce=null==D[1]?e:D[1],ne=null==D[2]?e:D[2],K=null==D[3]?e:D[3],Z=null==D[10]?e:D[10],this.$_racc_init_sysvars(),R=e,S=e,F(this,"catch",["racc_end_parse"],function O(){var W=null==O.$$s?this:O.$$s;for(null==W.racc_state&&(W.racc_state=e);!c(S=K["$[]"](W.racc_state["$[]"](-1)));)for(;c(R=W.$_racc_evalact(ne["$[]"](W.racc_state["$[]"](-1)),o)););return F(q,"__send__",[G],function se($e,_e){var ie=null==se.$$s?this:se.$$s,J=e,oe=e;for(null==ie.racc_t&&(ie.racc_t=e),null==ie.racc_state&&(ie.racc_state=e),null==ie.racc_read_next&&(ie.racc_read_next=e),null==$e&&($e=e),null==_e&&(_e=e),ie.racc_t=c($e)?c(J=Z["$[]"]($e))?J:1:0,ie.racc_val=_e,ie.racc_read_next=!1,S=z(S,ie.racc_t),c(_(S,0))&&c(R=te["$[]"](S))&&f(ce["$[]"](S),ie.racc_state["$[]"](-1))||(R=ne["$[]"](ie.racc_state["$[]"](-1)));c(R=ie.$_racc_evalact(R,o)););for(;c(c(J=c(oe=(S=K["$[]"](ie.racc_state["$[]"](-1)))["$!"]())?oe:ie.racc_read_next["$!"]())?J:ie.racc_t["$=="](0));)for(c(S)&&c(S=z(S,ie.racc_t))&&c(_(S,0))&&c(R=te["$[]"](S))&&f(ce["$[]"](S),ie.racc_state["$[]"](-1))||(R=ne["$[]"](ie.racc_state["$[]"](-1)));c(R=ie.$_racc_evalact(R,o)););},{$$arity:2,$$s:W})},{$$arity:0,$$s:this})},4),j(a,"$_racc_evalact",function(q,G){var o,ne,D=this,ee=e,ae=e,ce=e,K=e,w=e,Z=e,R=e;if(ee=null==(o=Q(G))[0]?e:o[0],ae=null==o[1]?e:o[1],ce=null==o[3]?e:o[3],ne=null==o[11]?e:o[11],K=null==o[12]?e:o[12],c(T(q,0))&&c(E(q,ne)))c(T(D.racc_error_status,0))&&(f(D.racc_t,1)||(D.racc_error_status=B(D.racc_error_status,1))),D.racc_vstack.$push(D.racc_val),D.racc_state.$push(q),D.racc_read_next=!0,c(D.yydebug)&&(D.racc_tstack.$push(D.racc_t),D.$racc_shift(D.racc_t,D.racc_tstack,D.racc_vstack));else if(c(E(q,0))&&c(T(q,K["$-@"]()))){if(w=F(D,"catch",["racc_jump"],function S(){var O=null==S.$$s?this:S.$$s;return null==O.racc_state&&(O.racc_state=e),O.racc_state.$push(O.$_racc_do_reduce(G,q)),!1},{$$arity:0,$$s:D}),c(w)){if(N(1,Z=w))return D.racc_user_yyerror=!0,K["$-@"]();if(N(2,Z))return ne;D.$raise("[Racc Bug] unknown jump code")}}else if(f(q,ne))c(D.yydebug)&&D.$racc_accept(),D.$throw("racc_end_parse",D.racc_vstack["$[]"](0));else{if(f(q,K["$-@"]())){for(N(0,Z=D.racc_error_status)?c(G["$[]"](21))||D.$on_error(D.racc_t,D.racc_val,D.racc_vstack):N(3,Z)&&(f(D.racc_t,0)&&D.$throw("racc_end_parse",e),D.racc_read_next=!0),D.racc_user_yyerror=!1,D.racc_error_status=3;c(!0)&&!(c(R=ce["$[]"](D.racc_state["$[]"](-1)))&&(R=z(R,1),c(_(R,0))&&c(q=ee["$[]"](R))&&f(ae["$[]"](R),D.racc_state["$[]"](-1))));)c(L(D.racc_state.$size(),1))&&D.$throw("racc_end_parse",e),D.racc_state.$pop(),D.racc_vstack.$pop(),c(D.yydebug)&&(D.racc_tstack.$pop(),D.$racc_e_pop(D.racc_state,D.racc_tstack,D.racc_vstack));return q}D.$raise("[Racc Bug] unknown action "+q.$inspect())}return c(D.yydebug)&&D.$racc_next_state(D.racc_state["$[]"](-1),D.racc_state),e},2),j(a,"$_racc_do_reduce",function(q,G){var o,K,Z,W,se,$e,ie,D=this,ae=e,te=e,ce=e,ne=e,w=e,R=e,S=e,O=e,re=e,X=e,_e=e,le=e,ue=e,J=e;return ae=null==(o=Q(q))[4]?e:o[4],te=null==o[5]?e:o[5],ce=null==o[6]?e:o[6],ne=null==o[7]?e:o[7],K=null==o[8]?e:o[8],w=null==o[9]?e:o[9],Z=null==o[13]?e:o[13],R=D.racc_state,S=D.racc_vstack,O=D.racc_tstack,re=p(G,-3),X=w["$[]"](re),W=w["$[]"](z(re,1)),se=w["$[]"](z(re,2)),$e=[],c(D.yydebug)&&(_e=O["$[]"](X["$-@"](),X)),le=S["$[]"](X["$-@"](),X),c(D.yydebug)&&(ue=[X["$-@"](),X,$e],F(O,"[]=",H(ue)),B(ue.length,1)),ue=[X["$-@"](),X,$e],F(S,"[]=",H(ue)),B(ue.length,1),ue=[X["$-@"](),X,$e],F(R,"[]=",H(ue)),B(ue.length,1),c(Z)?S.$push(D.$__send__(se,le,S,le["$[]"](0))):S.$push(D.$__send__(se,le,S)),O.$push(W),c(D.yydebug)&&D.$racc_reduce(_e,W,O,S),ie=B(W,K),c(re=ne["$[]"](ie))&&(re=z(re,R["$[]"](-1)),c(_(re,0))&&c(J=ae["$[]"](re))&&f(te["$[]"](re),ie))?J:ce["$[]"](ie)},2),j(a,"$on_error",function(q,G,o){var D,V=this;return V.$raise(v("ParseError"),V.$sprintf("\nparse error on value %s (%s)",G.$inspect(),c(D=V.$token_to_str(q))?D:"?"))},3),j(a,"$yyerror",function(){return this.$throw("racc_jump",1)},0),j(a,"$yyaccept",function(){return this.$throw("racc_jump",2)},0),j(a,"$yyerrok",function(){return this.racc_error_status=0},0),j(a,"$racc_read_token",function(q,G,o){var V=this;return V.racc_debug_out.$print("read    "),V.racc_debug_out.$print(G.$inspect(),"(",V.$racc_token2str(q),") "),V.racc_debug_out.$puts(o.$inspect()),V.racc_debug_out.$puts()},3),j(a,"$racc_shift",function(q,G,o){var V=this;return V.racc_debug_out.$puts("shift   "+V.$racc_token2str(q)),V.$racc_print_stacks(G,o),V.racc_debug_out.$puts()},3),j(a,"$racc_reduce",function(q,G,o,V){var D=this,ee=e;return(ee=D.racc_debug_out).$print("reduce "),c(q["$empty?"]())?ee.$print(" <none>"):F(q,"each",[],function ae(te){return null==te&&(te=e),ee.$print(" ",(null==ae.$$s?this:ae.$$s).$racc_token2str(te))},{$$arity:1,$$s:D}),ee.$puts(" --\x3e "+D.$racc_token2str(G)),D.$racc_print_stacks(o,V),D.racc_debug_out.$puts()},4),j(a,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},0),j(a,"$racc_e_pop",function(q,G,o){var V=this;return V.racc_debug_out.$puts("error recovering mode: pop token"),V.$racc_print_states(q),V.$racc_print_stacks(G,o),V.racc_debug_out.$puts()},3),j(a,"$racc_next_state",function(q,G){var o=this;return o.racc_debug_out.$puts("goto    "+q),o.$racc_print_states(G),o.racc_debug_out.$puts()},2),j(a,"$racc_print_stacks",function(q,G){var V=e;return(V=this.racc_debug_out).$print("        ["),F(q,"each_index",[],function D(ee){return null==ee&&(ee=e),V.$print(" (",(null==D.$$s?this:D.$$s).$racc_token2str(q["$[]"](ee))," ",G["$[]"](ee).$inspect(),")")},{$$arity:1,$$s:this}),V.$puts(" ]")},2),j(a,"$racc_print_states",function(q){var o=e;return(o=this.racc_debug_out).$print("        ["),F(q,"each",[],function(D){return null==D&&(D=e),o.$print(" ",D)},1),o.$puts(" ]")},1),j(a,"$racc_token2str",function(q){var o;return c(o=y(this.$class(),"Racc_token_to_s_table")["$[]"](q))?o:this.$raise("[Racc Bug] can't convert token "+q+" to string")},1),j(a,"$token_to_str",function(q){return y(this.$class(),"Racc_token_to_s_table")["$[]"](q)},1)}(t[0],t)},Opal.modules["bcdice/arithmetic/node"]=function(r){var j,f,L,u,i,m,x,T,U,M=[],t=r.nil,b=r.$$$,e=r.module,y=r.klass,C=r.def,I=r.send2,c=r.find_super,P=r.eqeq,Y=r.const_set,A=r.eqeqeq,E=r.rb_divide,F=r.truthy,H=r.alias;return j=M,f=U=[e(M[0],"BCDice")].concat(j),L=T=[e(U[0],"Arithmetic")].concat(f),m=[e(T[0],"Node")].concat(L),x=r.$r(m),(i=(u=y(m[0],null,"BinaryOp")).$$prototype).lhs=i.rhs=i.op=t,C(u,"$initialize",function($,n,a){var d=this;return d.lhs=$,d.op=n,d.rhs=a},3),C(u,"$eval",function($){var d,n=this,a=t;return a=n.lhs.$eval($),d=n.rhs.$eval($),a.$send(n.op,d)},1),C(u,"$output",function(){var $=this;return""+$.lhs.$output()+$.op+$.rhs.$output()},0),C(u,"$s_exp",function(){var $=this;return"("+$.$op_for_s_exp()+" "+$.lhs.$s_exp()+" "+$.rhs.$s_exp()+")"},0),C(u,"$op_for_s_exp",function(){return this.op},0),function(k,l,u){var i=y(k,l,"DivideBase"),s=[i].concat(u),$=r.$r(s),n=i.$$prototype;n.lhs=n.rhs=n.op=t,C(i,"$initialize",function a(d,v){return delete a.$$p,I(this,c(this,"initialize",a,!1,!0),"initialize",[d,"/",v],null)},2),C(i,"$eval",function(d){var h,g,v=this;return h=v.lhs.$eval(d),g=v.rhs.$eval(d),P(g,0)&&v.$raise($("ZeroDivisionError")),v.$divide_and_round(h,g,d)},1),C(i,"$output",function a(){var d=a.$$p||t,v=this;return delete a.$$p,""+I(v,c(v,"output",a,!1,!0),"output",[],d)+v.$rounding_method()},0),i.$private(),C(i,"$rounding_method",function(){return b(this.$class(),"ROUNDING_METHOD")},0),C(i,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()},0),C(i,"$divide_and_round",function(d,v,h){return this.$raise($("NotImplementedError"))},3)}(m[0],x("BinaryOp"),m),function(k,l,u){var i=y(k,l,"DivideWithGameSystemDefault"),s=[i].concat(u),$=r.$r(s);Y(s[0],"ROUNDING_METHOD",""),i.$private(),C(i,"$divide_and_round",function(a,d,v){var h,g=t;return A(b($("RoundType"),"CEIL"),h=v)?E(a.$to_f(),d).$ceil():A(b($("RoundType"),"ROUND"),h)?(g=E(a.$to_f(),d),F(g["$negative?"]())?g.$abs().$round()["$-@"]():g.$round()):E(a,d).$floor()},3)}(m[0],x("DivideBase"),m),function(k,l,u){var i=y(k,l,"DivideWithCeil"),s=[i].concat(u);Y(s[0],"ROUNDING_METHOD","C"),i.$private(),C(i,"$divide_and_round",function(n,a,d){return E(n.$to_f(),a).$ceil()},3)}(m[0],x("DivideBase"),m),function(k,l,u){var i=y(k,l,"DivideWithRound"),s=[i].concat(u);Y(s[0],"ROUNDING_METHOD","R"),i.$private(),C(i,"$divide_and_round",function(n,a,d){var v=t;return v=E(n.$to_f(),a),F(v["$negative?"]())?v.$abs().$round()["$-@"]():v.$round()},3)}(m[0],x("DivideBase"),m),function(k,l,u){var i=y(k,l,"DivideWithFloor"),s=[i].concat(u);Y(s[0],"ROUNDING_METHOD","F"),i.$private(),C(i,"$divide_and_round",function(n,a,d){return E(n,a).$floor()},3)}(m[0],x("DivideBase"),m),function(k,l){var u=y(k,null,"Negative");u.$$prototype.body=t,C(u,"$initialize",function($){return this.body=$},1),C(u,"$eval",function($){return this.body.$eval($)["$-@"]()},1),C(u,"$output",function(){return"-"+this.body.$output()},0),C(u,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"},0)}(m[0]),function(k,l){var u=y(k,null,"Parenthesis");u.$$prototype.expr=t,C(u,"$initialize",function($){return this.expr=$},1),C(u,"$eval",function($){return this.expr.$eval($)},1),C(u,"$output",function(){return"("+this.expr.$output()+")"},0),C(u,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"},0)}(m[0]),function(k,l){var u=y(k,null,"Number");return u.$$prototype.value=t,C(u,"$initialize",function($){return this.value=$},1),C(u,"$eval",function($){return this.value},1),C(u,"$output",function(){return this.value.$to_s()},0),H(u,"s_exp","output")}(m[0])},Opal.modules.strscan=function(r){var H,B,j,Q,U,M=[],t=r.nil,e=r.def,y=r.truthy,C=r.eqeqeq,I=r.Opal,c=r.send,P=r.to_a,Y=r.rb_minus,A=r.alias;return H=M,j=[B=(0,r.klass)(M[0],null,"StringScanner")].concat(H),Q=r.$r(j),(U=B.$$prototype).pos=U.string=U.working=U.matched=U.prev_pos=U.match=t,B.$attr_reader("pos","matched"),e(B,"$initialize",function(f){var _=this;return _.string=f,_.pos=0,_.matched=t,_.working=f,_.match=[]},1),B.$attr_reader("string"),e(B,"$beginning_of_line?",function(){var f=this;return 0===f.pos||"\n"===f.string.charAt(f.pos-1)},0),e(B,"$scan",function(f){var _=this,T=(f=_.$anchor(f)).exec(_.working);return null==T?_.matched=t:"object"==typeof T?(_.prev_pos=_.pos,_.pos+=T[0].length,_.working=_.working.substring(T[0].length),_.matched=T[0],_.match=T,T[0]):"string"==typeof T?(_.pos+=T.length,_.working=_.working.substring(T.length),T):t},1),e(B,"$scan_until",function(f){var _=this;f=_.$anchor(f);for(var L,T=_.pos,N=_.working;;){if(L=f.exec(N),T+=1,N=N.substr(1),null!=L)return _.matched=_.string.substr(_.pos,T-_.pos-1+L[0].length),_.match=L,_.prev_pos=T-1,_.pos=T,_.working=N.substr(L[0].length),_.matched;if(0===N.length)return _.match=[],_.matched=t}},1),e(B,"$[]",function(f){var T;if(y(this.match["$empty?"]()))return t;C(Q("Symbol"),T=f)?f=f.$to_s():C(Q("String"),T)||(f=I["$coerce_to!"](f,Q("Integer"),"to_int"));var N=this.match;return f<0&&(f+=N.length),f<0||f>=N.length||null==N[f]?t:N[f]},1),e(B,"$check",function(f){var _=this,T=(f=_.$anchor(f)).exec(_.working);return _.matched=null==T?t:T[0]},1),e(B,"$check_until",function(f){var _=this,T=_.prev_pos,N=_.pos,L=_.$scan_until(f);return L!==t&&(_.matched=L.substr(-1),_.working=_.string.substr(N)),_.prev_pos=T,_.pos=N,L},1),e(B,"$peek",function(f){return this.working.substring(0,f)},1),e(B,"$eos?",function(){return 0===this.working.length},0),e(B,"$exist?",function(f){var T=f.exec(this.working);return null==T?t:0==T.index?0:T.index+1},1),e(B,"$skip",function(f){var _=this,T=(f=_.$anchor(f)).exec(_.working);if(null==T)return _.match=[],_.matched=t;var N=T[0],L=N.length;return _.matched=N,_.match=T,_.prev_pos=_.pos,_.pos+=L,_.working=_.working.substring(L),L},1),e(B,"$skip_until",function(f){var T=this.$scan_until(f);return T===t?t:(this.matched=T.substr(-1),T.length)},1),e(B,"$get_byte",function(){var f=this,_=t;return f.pos<f.string.length?(f.prev_pos=f.pos,f.pos+=1,_=f.matched=f.working.substring(0,1),f.working=f.working.substring(1)):f.matched=t,_},0),e(B,"$match?",function(f){var _=this,T=(f=_.$anchor(f)).exec(_.working);return null==T?t:(_.prev_pos=_.pos,T[0].length)},1),e(B,"$pos=",function(f){var _=this;return f<0&&(f+=_.string.$length()),_.pos=f,_.working=_.string.slice(f)},1),e(B,"$matched_size",function(){return this.matched===t?t:this.matched.length},0),e(B,"$post_match",function(){var f=this;return f.matched===t?t:f.string.substr(f.pos)},0),e(B,"$pre_match",function(){var f=this;return f.matched===t?t:f.string.substr(0,f.prev_pos)},0),e(B,"$reset",function(){var f=this;return f.working=f.string,f.matched=t,f.pos=0},0),e(B,"$rest",function(){return this.working},0),e(B,"$rest?",function(){return 0!==this.working.length},0),e(B,"$rest_size",function(){return this.$rest().$size()},0),e(B,"$terminate",function(){var _,f=this;return f.match=t,_=[f.string.$length()],c(f,"pos=",P(_)),_[Y(_.length,1)]},0),e(B,"$unscan",function(){var f=this;return f.pos=f.prev_pos,f.prev_pos=t,f.match=t,f},0),A(B,"bol?","beginning_of_line?"),A(B,"getch","get_byte"),B.$private(),e(B,"$anchor",function(f){var _=f.toString().match(/\/([^\/]+)$/);return _=_?_[1]:void 0,new RegExp("^(?:"+f.source+")",_)},1)},Opal.modules["bcdice/normalize"]=function(r){var c,E,Y,M=[],t=r.nil,b=r.module,e=r.eqeqeq,y=r.def,C=r.eqeq;return c=M,Y=[b(M[0],"BCDice")].concat(c),(E=b(Y[0],"Normalize")).$module_function(),y(E,"$comparison_operator",function(H){var B;return e(/<=|=</,B=H)?"<=":e(/>=|=>/,B)?">=":e(/<>|!=|=!/,B)?"!=":e(/</,B)?"<":e(/>/,B)?">":e(/=/,B)?"==":t},1),y(E,"$target_number",function(H){return C(H,"?")?H:H.$to_i()},1)},Opal.modules["bcdice/command/lexer"]=function(r){var E,j,_,T,N,L,p,U,H,M=r.top,t=[],b=r.nil,e=r.module,y=r.klass,C=r.const_set,I=r.hash2,c=r.truthy,P=r.send,Y=r.def;return M.$require("strscan"),M.$require("bcdice/normalize"),E=t,j=H=[e(t[0],"BCDice")].concat(E),_=U=[e(H[0],"Command")].concat(j),N=[T=y(U[0],null,"Lexer")].concat(_),L=r.$r(N),(p=T.$$prototype).scanner=p.notations=b,C(N[0],"SYMBOLS",I(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),Y(T,"$initialize",function(x,k){var l,u,s;return x=c(s=(u=(l=x)===b||null==l?b:P(l,"split",[" ",2]))===b||null==u?b:P(u,"first",[]))?s:"",this.scanner=L("StringScanner").$new(x),this.notations=P(k,"map",[],function(n){return null==n&&(n=b),c(n["$is_a?"](L("String")))?L("Regexp").$new(n):n},1)},2),Y(T,"$next_token",function(){try{var x=this,k=b,l=b,i=b,s=b;return c(x.scanner["$eos?"]())?[!1,"$"]:(P(x.notations,"each",[],function $(n){var d,a=null==$.$$s?this:$.$$s;if(null==a.scanner&&(a.scanner=b),null==n&&(n=b),d=a.scanner.$scan(n),!c(d))return b;r.ret(["NOTATION",d])},{$$arity:1,$$s:x}),c(k=x.scanner.$scan(/\d+/))?["NUMBER",k.$to_i()]:c(l=x.scanner.$scan(/[<>!=]+/))?(l=L("Normalize").$comparison_operator(l),[c(l)?"CMP_OP":"ILLEGAL",l]):(i=x.scanner.$getch().$upcase(),[c(s=L("SYMBOLS")["$[]"](i))?s:i.$to_sym(),i]))}catch($){if($===r.returner)return $.$v;throw $}},0),Y(T,"$source",function(){return this.scanner.$string()},0)},Opal.modules["bcdice/command/parsed"]=function(r){var P,F,U,z,f,_,T,B,A,M=[],t=r.nil,b=r.module,e=r.klass,y=r.def,C=r.truthy,I=r.eqeqeq;return P=M,F=A=[b(M[0],"BCDice")].concat(P),U=B=[b(A[0],"Command")].concat(F),f=[z=e(B[0],null,"Parsed")].concat(U),_=r.$r(f),(T=z.$$prototype).question_target=T.critical=T.fumble=T.dollar=T.modify_number=T.target_number=T.prefix_number=T.command=T.suffix_number=T.cmp_op=t,z.$attr_accessor("command"),z.$attr_accessor("prefix_number"),z.$attr_accessor("suffix_number"),z.$attr_accessor("critical"),z.$attr_accessor("fumble"),z.$attr_accessor("dollar"),z.$attr_accessor("modify_number"),z.$attr_accessor("cmp_op"),z.$attr_accessor("target_number"),z.$attr_writer("question_target"),y(z,"$initialize",function(){var L=this;return L.prefix_number=t,L.suffix_number=t,L.critical=t,L.fumble=t,L.dollar=t,L.cmp_op=t,L.target_number=t,L.question_target=!1},0),y(z,"$question_target?",function(){return this.question_target},0),y(z,"$to_s",function(L){var i,p=this,m=t,x=t,k=t,l=t,u=t;return null==L&&(L="after_command"),m=C(p.critical)?"@"+p.critical:t,x=C(p.fumble)?"#"+p.fumble:t,k=C(p.dollar)?"$"+p.dollar:t,l=_("Format").$modifier(p.modify_number),u=C(p.question_target)?"?":p.target_number,I("after_command",i=L)?[p.prefix_number,p.command,p.suffix_number,m,x,k,l,p.cmp_op,u].$join():I("after_modify_number",i)?[p.prefix_number,p.command,p.suffix_number,l,m,x,k,p.cmp_op,u].$join():I("after_target_number",i)?[p.prefix_number,p.command,p.suffix_number,l,p.cmp_op,u,m,x,k].$join():t},-1)},Opal.modules["bcdice/command/parser"]=function(r){var _,p,i,a,d,v,h,g,q,G,o,V,ae,s,$,n,ne,x,k,N,M=r.top,t=[],b=r.$r(t),e=r.nil,y=r.$$$,C=r.klass,I=r.module,c=r.hash2,P=r.send2,Y=r.find_super,A=r.def,E=r.send,F=r.to_a,H=r.rb_minus,B=r.eqeq,j=r.hash,Q=r.const_set,U=r.truthy,z=r.to_ary;return M.$require("racc/parser.rb"),M.$require("bcdice/arithmetic/node"),M.$require("bcdice/command/lexer"),M.$require("bcdice/command/parsed"),C(y(b("BCDice"),"Command"),y(b("Racc"),"Parser"),"Parser"),_=t,p=N=[I(t[0],"BCDice")].concat(_),x=[I(N[0],"Command")].concat(p),k=r.$r(x),i=x,$=[s=C(x[0],y(k("Racc"),"Parser"),"Parser")].concat(i),n=r.$r($),(ne=s.$$prototype).notations=ne.lexer=ne.modifier=ne.suffix_number=ne.prefix_number=ne.need_suffix_number=ne.need_prefix_number=ne.critical=ne.fumble=ne.dollar=ne.allowed_cmp_op=ne.question_target=e,A(s,"$initialize",function K(w,Z){var R,S,O,re,W=this;if(delete K.$$p,R=r.slice.call(arguments),null==(S=r.extract_kwargs(R)))S=c([],{});else if(!S.$$is_hash)throw r.ArgumentError.$new("expected kwargs");if(O=R,!r.hasOwnProperty.call(S.$$smap,"round_type"))throw r.ArgumentError.$new("missing keyword: round_type");return re=S.$$smap.round_type,P(W,Y(W,"initialize",K,!1,!0),"initialize",[],null),W.notations=O,W.round_type=re,W.prefix_number=!1,W.suffix_number=!1,W.need_prefix_number=!1,W.need_suffix_number=!1,W.modifier=!0,W.critical=!1,W.fumble=!1,W.dollar=!1,W.allowed_cmp_op=[e,">=",">","<=","<","==","!="],W.question_target=!1},-2),A(s,"$disable_modifier",function(){return this.modifier=!1,this},0),A(s,"$enable_prefix_number",function(){return this.prefix_number=!0,this},0),A(s,"$enable_suffix_number",function(){return this.suffix_number=!0,this},0),A(s,"$has_prefix_number",function(){var w=this;return w.prefix_number=!0,w.need_prefix_number=!0,w},0),A(s,"$has_suffix_number",function(){var w=this;return w.suffix_number=!0,w.need_suffix_number=!0,w},0),A(s,"$enable_critical",function(){return this.critical=!0,this},0),A(s,"$enable_fumble",function(){return this.fumble=!0,this},0),A(s,"$enable_dollar",function(){return this.dollar=!0,this},0),A(s,"$restrict_cmp_op_to",function(w){var Z,S=this;return Z=r.slice.call(arguments),S.allowed_cmp_op=Z,S},-1),A(s,"$enable_question_target",function(){return this.question_target=!0,this},0),A(s,"$parse",function(w){var Z=this;try{return Z.lexer=n("Lexer").$new(w,Z.notations),Z.$do_parse()}catch(R){if(!r.rescue(R,[n("ParseError"),n("ZeroDivisionError")]))throw R;try{return e}finally{r.pop_exception()}}},1),s.$private(),A(s,"$parsed",function(w,Z,R,S){return E(n("Parsed").$new(),"tap",[],function re(X){var W,se,$e,_e,le,ue,ie=null==re.$$s?this:re.$$s,J=e;return null==ie.round_type&&(ie.round_type=e),null==X&&(X=e),J=[w["$[]"]("command")],E(X,"command=",F(J)),H(J.length,1),J=[(W=w["$[]"]("prefix"),W===e||null==W?e:E(W,"eval",[ie.round_type]))],E(X,"prefix_number=",F(J)),H(J.length,1),J=[(se=w["$[]"]("suffix"),se===e||null==se?e:E(se,"eval",[ie.round_type]))],E(X,"suffix_number=",F(J)),H(J.length,1),J=[($e=Z["$[]"]("critical"),$e===e||null==$e?e:E($e,"eval",[ie.round_type]))],E(X,"critical=",F(J)),H(J.length,1),J=[(_e=Z["$[]"]("fumble"),_e===e||null==_e?e:E(_e,"eval",[ie.round_type]))],E(X,"fumble=",F(J)),H(J.length,1),J=[(le=Z["$[]"]("dollar"),le===e||null==le?e:E(le,"eval",[ie.round_type]))],E(X,"dollar=",F(J)),H(J.length,1),J=[R.$eval(ie.round_type)],E(X,"modify_number=",F(J)),H(J.length,1),J=[S["$[]"]("cmp_op")],E(X,"cmp_op=",F(J)),H(J.length,1),B(S["$[]"]("target"),"?")?(E(X,"question_target=",F(J=[!0])),H(J.length,1),E(X,"target_number=",F(J=[0])),J[H(J.length,1)]):(E(X,"question_target=",F(J=[!1])),H(J.length,1),J=[(ue=S["$[]"]("target"),ue===e||null==ue?e:E(ue,"eval",[ie.round_type]))],E(X,"target_number=",F(J)),J[H(J.length,1)])},{$$arity:1,$$s:this})},4),A(s,"$next_token",function(){return this.lexer.$next_token()},0),a=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,33,34,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,e,e,17,18,6,e,5,e,e,17,18,e,e,5,23,24,25,26,56,54,55,57],d=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,e,17,15,15,18,18,23,e,18,30,30,23,23,24,e,23,31,31,24,24,25,e,24,44,44,25,25,28,e,25,47,47,28,28,29,e,28,48,48,29,29,33,e,29,49,49,33,33,34,e,33,50,50,34,34,36,e,34,e,e,36,36,37,e,36,e,e,37,37,e,e,37,27,27,27,27,52,52,52,52],v=[-2,4,16,-3,-1,11,e,33,13,35,23,30,1,e,28,40,e,37,44,e,e,-2,e,51,58,65,0,106,72,79,47,54,e,86,93,e,100,107,e,e,e,e,e,e,63,e,e,68,75,82,89,e,120,e,e,e,e,e],h=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],g=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,e,e,21,47,48,40,51,52,49,50,44,46,3,e,e,e,13,e,e,e,e,e,e,e,32],q=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,e,e,4,8,8,5,7,7,8,8,9,5,6,e,e,e,6,e,e,e,e,e,e,e,6],G=[e,6,13,3,9,-1,27,-15,-10,-1,-38],o=[e,e,e,e,e,e,19,16,15,e,e],V=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],ae=j(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),Q($[0],"Racc_arg",[a,d,h,v,g,q,o,G,19,V,ae,58,35,!0]),Q($[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),Q($[0],"Racc_debug_parser",!1),A(s,"$_reduce_1",function(w,Z,R){var S;return U(this.modifier)||this.$raise(n("ParseError")),S=z(w),this.$parsed(null==S[0]?e:S[0],null==S[1]?e:S[1],null==S[2]?e:S[2],null==S[3]?e:S[3])},3),A(s,"$_reduce_2",function(w,Z,R){var S;return U(this.modifier)||this.$raise(n("ParseError")),S=z(w),this.$parsed(null==S[0]?e:S[0],null==S[2]?e:S[2],null==S[1]?e:S[1],null==S[3]?e:S[3])},3),A(s,"$_reduce_3",function(w,Z,R){var S,se;return se=null==(S=z(w))[2]?e:S[2],this.$parsed(null==S[0]?e:S[0],null==S[1]?e:S[1],y(y(n("Arithmetic"),"Node"),"Number").$new(0),se)},3),A(s,"$_reduce_4",function(w,Z,R){var S=this;return U(S.prefix_number)&&U(S.suffix_number)||S.$raise(n("ParseError")),c(["command","prefix","suffix"],{command:w["$[]"](1),prefix:w["$[]"](0),suffix:w["$[]"](2)})},3),A(s,"$_reduce_5",function(w,Z,R){var S=this;return U(S.prefix_number)||S.$raise(n("ParseError")),U(S.need_suffix_number)&&S.$raise(n("ParseError")),c(["command","prefix"],{command:w["$[]"](1),prefix:w["$[]"](0)})},3),A(s,"$_reduce_6",function(w,Z,R){var S=this;return U(S.suffix_number)||S.$raise(n("ParseError")),U(S.need_prefix_number)&&S.$raise(n("ParseError")),c(["command","suffix"],{command:w["$[]"](0),suffix:w["$[]"](1)})},3),A(s,"$_reduce_7",function(w,Z,R){var S=this;return(U(S.need_prefix_number)||U(S.need_suffix_number))&&S.$raise(n("ParseError")),c(["command"],{command:w["$[]"](0)})},3),A(s,"$_reduce_8",function(w,Z,R){return c([],{})},3),A(s,"$_reduce_9",function(w,Z,R){var S,se,$e,X=e;return X=null==(S=z(w))[0]?e:S[0],se=null==S[2]?e:S[2],U(this.critical)&&U(X["$[]"]("critical")["$nil?"]())||this.$raise(n("ParseError")),E(X,"[]=",F($e=["critical",se])),H($e.length,1),X},3),A(s,"$_reduce_10",function(w,Z,R){var S,se,$e,X=e;return X=null==(S=z(w))[0]?e:S[0],se=null==S[2]?e:S[2],U(this.fumble)&&U(X["$[]"]("fumble")["$nil?"]())||this.$raise(n("ParseError")),E(X,"[]=",F($e=["fumble",se])),H($e.length,1),X},3),A(s,"$_reduce_11",function(w,Z,R){var S,se,$e,X=e;return X=null==(S=z(w))[0]?e:S[0],se=null==S[2]?e:S[2],U(this.dollar)&&U(X["$[]"]("dollar")["$nil?"]())||this.$raise(n("ParseError")),E(X,"[]=",F($e=["dollar",se])),H($e.length,1),X},3),A(s,"$_reduce_12",function(w,Z,R){return w["$[]"](1)},3),A(s,"$_reduce_13",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"Negative").$new(w["$[]"](1))},3),A(s,"$_reduce_14",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"+",w["$[]"](2))},3),A(s,"$_reduce_15",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"-",w["$[]"](2))},3),A(s,"$_reduce_16",function(w,Z,R){return U(this.allowed_cmp_op["$include?"](e))||this.$raise(n("ParseError")),c([],{})},3),A(s,"$_reduce_17",function(w,Z,R){var S,X,W;return W=null==(S=z(w))[1]?e:S[1],U(this.allowed_cmp_op["$include?"](X=null==S[0]?e:S[0]))||this.$raise(n("ParseError")),c(["cmp_op","target"],{cmp_op:X,target:W})},3),A(s,"$_reduce_18",function(w,Z,R){var O,S=this;return O=w["$[]"](0),U(S.question_target)||S.$raise(n("ParseError")),U(S.allowed_cmp_op["$include?"](O))||S.$raise(n("ParseError")),c(["cmp_op","target"],{cmp_op:O,target:"?"})},3),A(s,"$_reduce_19",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"+",w["$[]"](2))},3),A(s,"$_reduce_20",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"-",w["$[]"](2))},3),A(s,"$_reduce_22",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"*",w["$[]"](2))},3),A(s,"$_reduce_23",function(w,Z,R){return w["$[]"](3).$new(w["$[]"](0),w["$[]"](2))},3),A(s,"$_reduce_25",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"DivideWithGameSystemDefault")},3),A(s,"$_reduce_26",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"DivideWithCeil")},3),A(s,"$_reduce_27",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"DivideWithCeil")},3),A(s,"$_reduce_28",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"DivideWithRound")},3),A(s,"$_reduce_29",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"DivideWithFloor")},3),A(s,"$_reduce_30",function(w,Z,R){return w["$[]"](1)},3),A(s,"$_reduce_31",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"Negative").$new(w["$[]"](1))},3),A(s,"$_reduce_33",function(w,Z,R){return w["$[]"](1)},3),A(s,"$_reduce_34",function(w,Z,R){return y(y(n("Arithmetic"),"Node"),"Number").$new(w["$[]"](0))},3),A(s,"$_reduce_none",function(w,Z,R){return w["$[]"](0)},3)},Opal.modules["bcdice/deprecated/checker"]=function(r){var P,F,Q,U,z,f,B,A,M=[],t=r.nil,b=r.module,e=r.send,y=r.eqeqeq,C=r.truthy,I=r.def;return P=M,F=A=[b(M[0],"BCDice")].concat(P),Q=B=[b(A[0],"Deprecated")].concat(F),z=[U=b(B[0],"Checker")].concat(Q),f=r.$r(z),U.$private(),I(U,"$check_result_legacy",function(T,N,L,p){var l,m=this,x=t,k=t,u=t,i=t;return x=e(N,"map",[],"sides".$to_proc()),l=(k=e(N,"map",[],"value".$to_proc())).$sum(),u=y([100],i=x)?m.$check_1D100(T,l,L,p):y([20],i)?m.$check_1D20(T,l,L,p):y([6,6],i)?m.$check_2D6(T,l,k,L,p):t,(C(u["$nil?"]())||C(u["$empty?"]()))&&(u=y([10],i=x.$uniq())?m.$check_nD10(T,l,k,L,p):y([6],i)?m.$check_nD6(T,l,k,L,p):t,C(u["$nil?"]())||C(u["$empty?"]()))?t:f("Result").$new(u.$delete_prefix(" \uff1e "))},4),I(U,"$check_1D100",function(T,N,L,p){return t},4),I(U,"$check_1D20",function(T,N,L,p){return t},4),I(U,"$check_nD10",function(T,N,L,p,m){return t},5),I(U,"$check_2D6",function(T,N,L,p,m){return t},5),I(U,"$check_nD6",function(T,N,L,p,m){return t},5)},Opal.modules["bcdice/base"]=function(r){var N,k,$,a,d,l,u,i,s,p,M=r.top,t=[],b=r.$r(t),e=r.nil,y=r.$$$,C=r.module,I=r.klass,c=r.truthy,P=r.def,Y=r.regexp,A=r.rb_plus,E=r.send,F=r.to_a,H=r.rb_minus,B=r.eqeqeq,j=r.eqeq,Q=r.range,U=r.rb_divide,z=r.rb_times,f=r.rb_ge,_=e;return M.$require("i18n"),M.$require("i18n/backend/fallbacks"),M.$require("bcdice/randomizer"),M.$require("bcdice/dice_table"),M.$require("bcdice/enum"),M.$require("bcdice/translate"),M.$require("bcdice/result"),M.$require("bcdice/command/parser"),M.$require("bcdice/deprecated/checker"),N=t,k=p=[C(t[0],"BCDice")].concat(N),u=[l=I(p[0],null,"Base")].concat(k),i=r.$r(u),(s=l.$$prototype).sort_add_dice=s.sort_barabara_dice=s.enabled_d9=s.raw_input=s.randomizer=s.enabled_upcase_input=s.debug=e,a=[$=r.get_singleton_class(l)].concat(u),d=r.$r(a),$.$attr_reader("prefixes"),P($,"$register_prefix",function(h){var q,G=this,o=e;return null==G.prefixes&&(G.prefixes=e),q=r.slice.call(arguments),G.prefixes=c(o=G.prefixes)?o:[],G.prefixes.$concat(q.$flatten())},-1),P($,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())},0),P($,"$prefixes_pattern",function(){var h=this,g=e;return null==h.prefixes_pattern&&(h.prefixes_pattern=e),null==h.prefixes&&(h.prefixes=e),h.prefixes_pattern=c(g=h.prefixes_pattern)?g:e,c(h.prefixes_pattern)?h.prefixes_pattern:(h.prefixes=c(g=h.prefixes)?g:[],h.prefixes.$freeze(),h.prefixes_pattern=(c(h.prefixes["$empty?"]())?/(?!)/:Y(["^(S)?(",h.prefixes.$join("|"),")"],"i")).$freeze())},0),P($,"$command_pattern",function(){var h=this,g=e,q=e;return null==h.command_pattern&&(h.command_pattern=e),null==h.prefixes&&(h.prefixes=e),h.command_pattern=c(g=h.command_pattern)?g:e,c(h.command_pattern)?h.command_pattern:(h.prefixes=c(g=h.prefixes)?g:[],h.prefixes.$freeze(),q=A(E(y(d("CommonCommand"),"COMMANDS"),"map",[],function(o){return null==o&&(o=e),y(o,"PREFIX_PATTERN").$source()},1),h.prefixes),h.command_pattern=Y(["^S?(",q.$join("|"),")"],"i").$freeze())},0),P($,"$eval",function(h){return this.$new(h).$eval()},1),l.$include(i("Translate")),l.$include(y(i("Deprecated"),"Checker")),P(l,"$initialize",function(n){var a=this;return a.raw_input=n,a.sort_add_dice=!1,a.sort_barabara_dice=!1,a.d66_sort_type=y(i("D66SortType"),"NO_SORT"),a.enabled_d9=!1,a.round_type=y(i("RoundType"),"FLOOR"),a.sides_implicit_d=6,a.upper_dice_reroll_threshold=e,a.reroll_dice_reroll_threshold=e,a.default_cmp_op=e,a.default_target_number=e,a.enabled_upcase_input=!0,a.locale="ja_jp",a.randomizer=y(i("BCDice"),"Randomizer").$new(),a.debug=!1},1),l.$attr_accessor("randomizer"),l.$attr_reader("d66_sort_type"),l.$attr_reader("round_type"),l.$attr_reader("sides_implicit_d"),l.$attr_reader("upper_dice_reroll_threshold"),l.$attr_reader("reroll_dice_reroll_threshold"),l.$attr_reader("default_cmp_op"),l.$attr_reader("default_target_number"),P(l,"$sort_add_dice?",function(){return this.sort_add_dice},0),P(l,"$sort_barabara_dice?",function(){return this.sort_barabara_dice},0),P(l,"$enabled_d9?",function(){return this.enabled_d9},0),P(l,"$enable_debug",function(){return this.debug=!0},0),P(l,"$eval",function(){var a,d,v,n=this,h=e;return a=y(i("BCDice"),"Preprocessor").$process(n.raw_input,n),d=c(v=n.$dice_command(a))?v:n.$eval_common_command(n.raw_input),c(d)?(h=[n.randomizer.$rand_results()],E(d,"rands=",F(h)),H(h.length,1),h=[n.randomizer.$detailed_rand_results()],E(d,"detailed_rands=",F(h)),H(h.length,1),d):e},0),P(l,"$change_text",function(n){return n},1),P(l,"$check_result",function(n,a,d,v){var h=this,g=e,q=e,G=e,o=e,V=e;return g=h.$check_result_legacy(n,a,d,v),c(g)?g:(q=E(a,"map",[],"sides".$to_proc()),o=(G=E(a,"map",[],"value".$to_proc())).$sum(),g=B([100],V=q)?h.$result_1d100(n,o,d,v):B([20],V)?h.$result_1d20(n,o,d,v):B([6,6],V)?h.$result_2d6(n,o,G,d,v):e,j(g,i("Result").$nothing())?e:c(g)?g:(g=B([10],V=q.$uniq())?h.$result_nd10(n,o,G,d,v):B([6],V)?h.$result_nd6(n,o,G,d,v):e,j(g,i("Result").$nothing())?e:c(g)?g:h.$result_ndx(n,d,v)))},4),P(l,"$grich_text",function(n,a,d){return e},3),l.$private(),P(l,"$eval_common_command",function(n){try{return n=this.$change_text(n),E(y(i("CommonCommand"),"COMMANDS"),"each",[],function d(v){var g,h=null==d.$$s?this:d.$$s;if(null==h.randomizer&&(h.randomizer=e),null==v&&(v=e),g=v.$eval(n,h,h.randomizer),!c(g))return e;r.ret(g)},{$$arity:1,$$s:this}),e}catch(d){if(d===r.returner)return d.$v;throw d}},1),P(l,"$dice_command",function(n){var a=this,d=e,v=e,h=e,g=e,q=e;return c(a.enabled_upcase_input)&&(n=n.$upcase()),d=a.$class().$prefixes_pattern().$match(n),c(d)?(v=d["$[]"](1)["$nil?"]()["$!"](),c(v)&&(n=n["$[]"](Q(1,-1,!1))),h=a.$eval_game_system_specific_command(n),c(h["$is_a?"](i("Result")))?(g=[c(q=h["$secret?"]())?q:v],E(h,"secret=",F(g)),H(g.length,1),h):c(h["$nil?"]())||c(h["$empty?"]())||j(h,"1")?e:E(i("Result").$new(),"tap",[],function(o){return null==o&&(o=e),g=[h.$to_s()],E(o,"text=",F(g)),H(g.length,1),E(o,"secret=",F(g=[v])),g[H(g.length,1)]},1)):e},1),P(l,"$eval_game_system_specific_command",function(n){return e},1),P(l,"$result_ndx",function(n,a,d){return c(d["$is_a?"](i("String")))?e:c(n.$send(a,d))?i("Result").$success(this.$translate("success")):i("Result").$failure(this.$translate("failure"))},3),P(l,"$result_1d100",function(n,a,d,v){return e},4),P(l,"$result_1d20",function(n,a,d,v){return e},4),P(l,"$result_nd10",function(n,a,d,v,h){return e},5),P(l,"$result_2d6",function(n,a,d,v,h){return e},5),P(l,"$result_nd6",function(n,a,d,v,h){return e},5),P(l,"$get_table_by_2d6",function(n){return this.$get_table_by_nD6(n,2)},1),P(l,"$get_table_by_1d6",function(n){return this.$get_table_by_nD6(n,1)},1),P(l,"$get_table_by_nD6",function(n,a){return this.$get_table_by_nDx(n,a,6)},2),P(l,"$get_table_by_nDx",function(n,a,d){var h,g=e;return h=this.randomizer.$roll_sum(a,d),g=this.$get_table_value(n["$[]"](H(h,a))),c(g["$nil?"]())?["1",0]:[g,h]},3),P(l,"$get_table_by_1d3",function(n){var v,h,a=this,g=e;return a.$debug("get_table_by_1d3"),v=a.randomizer.$roll_sum(1,6),a.$debug("num",v),h=U(H(v,1),2).$to_i(),a.$debug("index",h),g=n["$[]"](h),c(g["$nil?"]())?["1",0]:[g,v]},1),P(l,"$get_table_by_d66_swap",function(n){var d;return d=this.randomizer.$roll_d66(y(i("D66SortType"),"ASC")),[this.$get_table_by_number(d,n),d]},1),P(l,"$get_table_by_d66",function(n){var d,v,h,q,g=e;return d=this.randomizer.$roll_once(6),v=this.randomizer.$roll_once(6),h=A(z(H(d,1),6),H(v,1)),g=n["$[]"](h),q=""+d+v,c(g["$nil?"]())?["1",q]:[g,q]},1),P(l,"$get_table_by_number",function(n,a,d){try{return null==d&&(d="1"),E(a,"each",[],function h(g){var G,q=null==h.$$s?this:h.$$s;if(null==g&&(g=e),G=g["$[]"](0),!c(f(G,n)))return e;r.ret(q.$get_table_value(g["$[]"](1)))},{$$arity:1,$$s:this}),this.$get_table_value(d)}catch(h){if(h===r.returner)return h.$v;throw h}},-3),P(l,"$get_table_value",function(n){return c(n["$is_a?"](i("Proc")))?n.$call():n},1),P(l,"$roll_tables",function(n,a){var v=e;return v=a["$[]"](n),c(v)?v.$roll(this.randomizer).$to_s():e},2),P(l,"$debug",function(n,a){var v,h=this,g=e,q=e;return v=r.slice.call(arguments,1),c(h.debug)?(g=c(n["$is_a?"](i("String")))?n:n.$inspect(),c(v["$empty?"]())?h.$warn(g):(q=E(v,"map",[],function(o){return null==o&&(o=e),c(o["$is_a?"](i("String")))?'"'+o+'"':o.$inspect()},1),h.$warn(g+": "+q.$join(", ")))):e},-2),y(y(b("I18n"),"Backend"),"Simple").$include(y(y(b("I18n"),"Backend"),"Fallbacks")),b("I18n").$load_path()["$<<"](b("Dir")["$[]"](b("File").$join("bcdice","../../i18n/**/*.yml"))),_=["ja_jp"],E(b("I18n"),"default_locale=",F(_)),H(_.length,1),_=[["ja_jp"]],E(b("I18n").$fallbacks(),"defaults=",F(_)),_[H(_.length,1)]},Opal.queue(function(r){var U,T,k,$,n,l,u,i,s,L,p,f,t=[],b=r.nil,e=r.$$$,y=r.module,C=r.klass,I=r.const_set,c=r.send2,P=r.find_super,Y=r.def,A=r.truthy,E=r.send,F=r.hash2,H=r.rb_le,B=r.hash,j=r.rb_plus;return r.top.$require("bcdice/base"),U=t,T=f=[y(t[0],"BCDice")].concat(U),L=[y(f[0],"GameSystem")].concat(T),p=r.$r(L),k=L,u=[l=C(L[0],p("Base"),"AlchemiaStruggle")].concat(k),i=r.$r(u),s=b,l.$$prototype.randomizer=b,I(u[0],"ID","AlchemiaStruggle"),I(u[0],"NAME","\u30a2\u30eb\u30b1\u30df\u30a2\u30fb\u30b9\u30c8\u30e9\u30b0\u30eb"),I(u[0],"SORT_KEY","\u3042\u308b\u3051\u307f\u3042\u3059\u3068\u3089\u304f\u308b"),I(u[0],"HELP_MESSAGE","\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff08 xAS \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 5AS\n\n\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff06\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306b\u30d4\u30c3\u30af\uff08 xASy \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u3001\u305d\u3053\u304b\u3089\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306by\u500b\u3092\u30d4\u30c3\u30af\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 4AS3\n\n\u25a0 \u30a6\u30eb\u30c0\u30a4\u30b9\u306e\u7372\u5f97\uff08 xUL \uff09\n  xD\u306e\u30a6\u30eb\u30c0\u30a4\u30b9\u3092\u632f\u308a\u3001\u51fa\u305f\u51fa\u76ee\u306e\u500b\u6570\u3092No.\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 6UL\n\n\u25a0 \u8868\n  \u30fb\u5947\u8de1\u306e\u89e6\u5a92\n    \u30fb\u30a8\u30ec\u30e1\u30f3\u30c8 (CELE, CElement)\n    \u30fb\u30a2\u30eb\u30b1\u30df\u30a2 (CALC, CAlchemia)\n    \u30fb\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8 (CINF, CInformant)\n    \u30fb\u30a4\u30ce\u30bb\u30f3\u30b9 (CINN, CInnocence)\n    \u30fb\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9 (CACQ, CAcquired)\n  \u30fb\u643a\u884c\u54c1\n    \u30fb\uff33\u30b5\u30a4\u30ba (ARS, ArticleS)\n    \u30fb\uff2d\u30b5\u30a4\u30ba (ARM, ArticleM)\n    \u30fb\uff2c\u30b5\u30a4\u30ba (ARL, ArticleL)\n  \u30fb\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868 (PCI, PCInformation)\n  \u30fb\u7406\u7531\u8868 (REA, Reason)\n  \u30fb\u4ea4\u6d41\u8868 (ASS, Associate)\n  \u30fb\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868 (CON, Contact)\n"),I(u[0],"ROLL_REG",/^(\d+)AS(\d+)?$/i.$freeze()),l.$register_prefix("\\d+AS","\\d+UL"),Y(l,"$initialize",function d(v){var g=this;return delete d.$$p,c(g,P(g,"initialize",d,!1,!0),"initialize",[v],null),g.sort_add_dice=!0,g.sort_barabara_dice=!0,g.round_type=e(i("RoundType"),"CEIL")},1),Y(l,"$eval_game_system_specific_command",function(v){var g,G,h=this,q=b;return g=A(q=i("ALIAS")["$[]"](v))?q:v,A(q=A(G=h.$try_roll_alchemia(g))?G:h.$try_roll_uldice(g))?q:h.$roll_tables(g,i("TABLES"))},1),Y(l,"$try_roll_alchemia",function(v){var h=this,g=b,q=b,G=b,o=b;return g=i("ROLL_REG").$match(v),A(g)?(q=g["$[]"](1).$to_i(),A(g["$[]"](2)["$nil?"]())?(G=h.$roll_alchemia(q),h.$make_roll_text(G)):(o=g["$[]"](2).$to_i(),G=h.$roll_alchemia_and_pick(q,o),h.$make_roll_and_pick_text(G["$[]"]("rolled_dices"),o,G["$[]"]("picked_dices")))):b},1),Y(l,"$try_roll_uldice",function(v){var g=b,q=b,G=b;return g=/^(\d+)UL$/.$match(v),A(g)?["("+(q=g["$[]"](1).$to_i())+"D6)","["+(G=this.randomizer.$roll_barabara(q,6).$sort()).$join(",")+"]",E(E(G,"group_by",[],"itself".$to_proc()),"map",[],function(ae,te){return null==ae&&(ae=b),null==te&&(te=b),"No."+ae+": "+te.$size()+"\u500b"},2).$join(", ")].$join(" \uff1e "):b},1),Y(l,"$roll_alchemia",function(v){return this.randomizer.$roll_barabara(v,6)},1),Y(l,"$roll_alchemia_and_pick",function(v,h){var q;return q=this.$roll_alchemia(v),F(["rolled_dices","picked_dices"],{rolled_dices:q,picked_dices:this.$pick_maximum(q,h)})},2),Y(l,"$pick_maximum",function(v,h){return A(H(v.$size(),h))?v:v.$sort().$pop(h)},2),Y(l,"$make_roll_text",function(v){return"("+v.$size()+"D6) \uff1e "+this.$make_dice_text(v)},1),Y(l,"$make_roll_and_pick_text",function(v,h,g){return"("+v.$size()+"D6|>"+h+"D6) \uff1e "+this.$make_dice_text(v)+" >> "+this.$make_dice_text(g)+" \uff1e "+g.$sum()},3),Y(l,"$make_dice_text",function(v){return"["+v.$sort().$join(", ")+"]"},1),I(u[0],"CATALYST_TABLES",E(F(["CElement","CAlchemia","CInformant","CInnocence","CAcquired"],{CElement:e(i("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a8\u30ec\u30e1\u30f3\u30c8\uff09","1D6",["\u30ef\u30f3\u30c9","\u6c34\u6676\u7389","\u30ab\u30fc\u30c9","\u30b9\u30c6\u30c3\u30ad","\u624b\u93e1","\u5b9d\u77f3"]),CAlchemia:e(i("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30eb\u30b1\u30df\u30a2\uff09","1D6",["\u6307\u8f2a","\u30d6\u30ec\u30b9\u30ec\u30c3\u30c8","\u30a4\u30e4\u30ea\u30f3\u30b0","\u30cd\u30c3\u30af\u30ec\u30b9","\u30d6\u30ed\u30fc\u30c1","\u30d8\u30a2\u30d4\u30f3"]),CInformant:e(i("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8\uff09","1D6",["\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3","\u30bf\u30d6\u30ec\u30c3\u30c8","\u30ce\u30fc\u30c8\u30d1\u30bd\u30b3\u30f3","\u7121\u7dda\u6a5f\uff08\u30c8\u30e9\u30f3\u30b7\u30fc\u30d0\u30fc\uff09","\u30a6\u30a7\u30a2\u30e9\u30d6\u30eb\u30c7\u30d0\u30a4\u30b9","\u643a\u5e2f\u30b2\u30fc\u30e0\u6a5f"]),CInnocence:e(i("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30ce\u30bb\u30f3\u30b9\uff09","1D6",["\u624b\u888b","\u7b1b","\u9774","\u9234","\u62e1\u58f0\u5668","\u5f26\u697d\u5668"]),CAcquired:e(i("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9\uff09","1D6",["\u30dc\u30bf\u30f3","\u97f3\u58f0","\u30e2\u30fc\u30b7\u30e7\u30f3","\u8133\u6ce2","\u8a18\u9332\u5a92\u4f53","\uff21\uff29"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),I(u[0],"ARTICLE_TABLES",E(F(["ArticleS","ArticleM","ArticleL"],{ArticleS:e(i("DiceTable"),"D66Table").$new("\u643a\u884c\u54c1\uff08\uff33\u30b5\u30a4\u30ba\uff09",e(i("D66SortType"),"ASC"),B(11,"\u30de\u30c3\u30c1",12,"\u30da\u30c3\u30c8\u30dc\u30c8\u30eb",13,"\u8a66\u9a13\u7ba1",14,"\u56e3\u6247",15,"\u690d\u7269",16,"\u30cf\u30f3\u30ab\u30c1",22,"\u5316\u7ca7\u7528\u5177",23,"\u30d9\u30eb\u30c8",24,"\u30bf\u30d0\u30b3",25,"\u30c1\u30a7\u30fc\u30f3",26,"\u96fb\u6c60",33,"\u304a\u83d3\u5b50",34,"\u91dd\u91d1",35,"\u30b3\u30a4\u30f3",36,"\u30ca\u30a4\u30d5",44,"\u30ab\u30c8\u30e9\u30ea\u30fc",45,"\u7802",46,"\u30b9\u30d7\u30ec\u30fc",55,"\u77f3",56,"\u6587\u623f\u5177",66,"\u30da\u30f3\u30e9\u30a4\u30c8")),ArticleM:e(i("DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2d\u30b5\u30a4\u30ba\uff09",["\u672c","\u5098","\u91d1\u5c5e\u677f","\u82b1\u706b","\u30a8\u30a2\u30ac\u30f3","\u5305\u5e2f"],["\u5de5\u5177","\u30b8\u30e3\u30b1\u30c3\u30c8","\u30ed\u30fc\u30d7","\u4eba\u5f62","\u8efd\u98df","\u30ac\u30e9\u30b9\u74f6"]),ArticleL:e(i("DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2c\u30b5\u30a4\u30ba\uff09",["\u6728\u5200","\u91e3\u308a\u5177","\u81ea\u8ee2\u8eca","\u30d0\u30c3\u30c8","\u5bdd\u888b","\u4e38\u592a"],["\u7269\u5e72\u3057\u7aff","\u934b","\u30b9\u30b1\u30fc\u30c8\u30dc\u30fc\u30c9","\u30b7\u30e3\u30d9\u30eb\uff08\u30b9\u30b3\u30c3\u30d7\uff09","\u30bf\u30f3\u30af","\u811a\u7acb"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),I(u[0],"DRAMA_SEQUENCE_TABLES",E(F(["PCInformation","Reason","Associate","Contact"],{PCInformation:e(i("DiceTable"),"D66ParityTable").$new("\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u3066\u3044\u305f\u5834\u6240\u3002\u805e\u304d\u305f\u3044\u3053\u3068\u3092\u7a81\u304d\u3064\u3051\u308b\u9803\u5408\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b9\u306b\u5f15\u304d\u8fbc\u307f\u3001\u3086\u3055\u3076\u308a\u3092\u304b\u3051\u308b\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u76f8\u624b\u306e\u30da\u30fc\u30b9\u306b\u5451\u307e\u308c\u306a\u3044\u3088\u3046\u3001\u614e\u91cd\u306b\u3044\u3053\u3046\u3002","\u81ea\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u4ef2\u9593\u306b\u624b\u306f\u51fa\u3055\u305b\u305a\u3001\u3042\u304f\u307e\u3067\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u3092\u4e0e\u3048\u308b\u3060\u3051\u306b\u3057\u3066\u3082\u3089\u3046\u3002","\u30ab\u30d5\u30a7\u3001\u30d0\u30fc \u2015\u2015 \u53b3\u304b\u306a\u7a7a\u6c17\u306b\u5305\u307e\u308c\u305f\u5927\u4eba\u306e\u5834\u6240\u3002\u3053\u3053\u3067\u58f0\u3092\u8352\u3052\u308b\u306e\u306f\u7d33\u58eb\u7684\u3067\u306f\u306a\u3044\u3002","\u8def\u5730\u88cf \u2015\u2015 \u5efa\u7269\u3068\u5efa\u7269\u306e\u9593\u3084\u3001\u4eba\u901a\u308a\u306e\u5c11\u306a\u3044\u88cf\u901a\u308a\u3002\u591a\u5c11\u624b\u8352\u306a\u624b\u6bb5\u306b\u51fa\u3066\u3082\u76ee\u7acb\u3061\u306f\u3057\u306a\u3044\u3060\u308d\u3046\u3002"],["\u5ec3\u589f \u2015\u2015 \u5ec3\u30d3\u30eb\u3001\u5ec3\u5de5\u5834\u306e\u3088\u3046\u306a\u4eba\u304c\u7acb\u3061\u5165\u3089\u306a\u3044\u5834\u6240\u3002\u304a\u3042\u3064\u3089\u3048\u5411\u304d\u306e\u5834\u6240\u3092\u7528\u610f\u3057\u3066\u3084\u3063\u305f\u3002","\u516c\u5171\u4ea4\u901a\u6a5f\u95a2 \u2015\u2015 \u30d0\u30b9\u3001\u96fb\u8eca\u306a\u3069\u3002\u663c\u591c\u554f\u308f\u305a\u591a\u304f\u306e\u4eba\u304c\u5229\u7528\u3059\u308b\u4e57\u308a\u7269\u3002\u6562\u3048\u3066\u4eba\u76ee\u306b\u4ed8\u304f\u5834\u6240\u3067\u8a70\u3081\u5bc4\u308a\u3001\u52d5\u63fa\u3092\u8a98\u3046\u3002","\u96d1\u6728\u6797 \u2015\u2015 \u8349\u6728\u304c\u63fa\u308c\u308b\u97f3\u3001\u866b\u3084\u9ce5\u306e\u9cf4\u304d\u58f0\u3060\u3051\u304c\u805e\u3053\u3048\u308b\u3002\u305d\u3053\u306b\u90aa\u9b54\u3059\u308b\u8005\u306f\u3044\u306a\u3044\u3002","\u591c\u306e\u516c\u5712 \u2015\u2015 \u5bdd\u9759\u307e\u3063\u305f\u8857\u306e\u516c\u5712\u3002\u8857\u706f\u306b\u7167\u3089\u3055\u308c\u306a\u3044\u5834\u6240\u306a\u3089\u76ee\u7acb\u3064\u3053\u3068\u3082\u306a\u3044\u3060\u308d\u3046\u3002","\u99d0\u8eca\u5834 \u2015\u2015 \u7acb\u4f53\u3001\u5e73\u9762\u3001\u5730\u4e0b\u3092\u554f\u308f\u305a\u8eca\u3092\u505c\u3081\u308b\u5834\u6240\u3002\u4eba\u306e\u51fa\u5165\u308a\u306e\u6fc0\u3057\u3055\u306b\u5bfe\u3057\u3001\u305d\u3053\u306b\u7559\u307e\u308b\u4eba\u306f\u5c11\u306a\u3044\u3002\u76ee\u6483\u8005\u3082\u591a\u304f\u306f\u306a\u3044\u3060\u308d\u3046\u3002","\u9ad8\u67b6\u4e0b \u2015\u2015 \u7dda\u8def\u3001\u9053\u8def\u306e\u6a4b\u306e\u4e0b\u3002\u97ff\u304f\u9a12\u97f3\u304c\u81ea\u5206\u305f\u3061\u306e\u5b58\u5728\u3092\u8584\u3081\u3066\u304f\u308c\u308b\u3002"]),Reason:e(i("DiceTable"),"Table").$new("\u7406\u7531\u8868","1D6",["\u4e0d\u4fe1\u611f \u2015\u2015 \u884c\u52d5\u3084\u8a00\u52d5\u306b\u306a\u306b\u304b\u91c8\u7136\u3068\u3057\u306a\u3044\u90e8\u5206\u3092\u611f\u3058\u308b\u3002\u767d\u9ed2\u306f\u3063\u304d\u308a\u3055\u305b\u3088\u3046\u3002","\u597d\u5947\u5fc3 \u2015\u2015 \u76f8\u624b\u306e\u3053\u3068\u3092\u77e5\u308a\u305f\u3044\u3068\u63bb\u304d\u7acb\u3066\u3089\u308c\u308b\u3002\u77e5\u308a\u305f\u3044\u6c17\u6301\u3061\u3092\u6291\u3048\u3089\u308c\u306a\u3044\u3002","\u5e87\u8b77\u611f \u2015\u2015 \u77e5\u53e4\u306e\u59ff\u3092\u91cd\u306d\u3066\u5b88\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u4fe1\u983c\u95a2\u4fc2\u3092\u541b\u3068\u7bc9\u304f\u305f\u3081\u3001\u8e0f\u307f\u8fbc\u3093\u3060\u3068\u3053\u308d\u307e\u3067\u77e5\u3063\u3066\u304a\u304d\u305f\u3044\u3002","\u5acc\u60aa\u611f \u2015\u2015 \u7406\u7531\u306f\u306a\u3044\u3051\u3069\u6c17\u306b\u98df\u308f\u306a\u3044\u3002\u60c5\u5831\u306e\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u3092\u63e1\u308b\u3053\u3068\u3067\u512a\u4f4d\u306b\u7acb\u3066\u308b\u306f\u305a\u3060\u3002","\u504f\u611b \u2015\u2015 \u611b\u3086\u3048\u306b\u77e5\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u541b\u306e\u601d\u8003\u3001\u76ee\u7684\u3001\u611f\u60c5\u306e\u3059\u3079\u3066\u3092\u624b\u306b\u5165\u308c\u305f\u3044\u3002","\u76f4\u611f \u2015\u2015 \u6839\u62e0\u306f\u306a\u3044\u304c\u3001\u306a\u306b\u304b\u96a0\u3057\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u3002\u4e00\u304b\u516b\u304b\u3001\u52dd\u8ca0\u306b\u51fa\u3088\u3046\u3002"]),Associate:e(i("DiceTable"),"D66ParityTable").$new("\u4ea4\u6d41\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u305f\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u4e00\u606f\u3064\u304f\u3082\u306e\u3044\u3044\u3060\u308d\u3046\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u4e00\u7dd2\u306b\u304f\u3064\u308d\u304e\u306a\u304c\u3089\u8a71\u3092\u3057\u3088\u3046\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u304a\u90aa\u9b54\u3055\u305b\u3066\u3082\u3089\u3048\u306a\u3044\u3060\u308d\u3046\u304b\uff1f","\u76f8\u624b\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u82e5\u5e72\u306e\u5c45\u5fc3\u5730\u60aa\u3055\u306f\u3042\u308b\u304c\u3001\u597d\u611f\u3092\u6301\u3063\u3066\u3082\u3089\u3046\u305f\u3081\u306b\u306f\u6211\u6162\u3082\u5fc5\u8981\u3002","\u98df\u4e8b\u51e6 \u2015\u2015 \u30d5\u30a1\u30df\u30ec\u30b9\u3001\u5c45\u9152\u5c4b\u306a\u3069\u3002\u4eba\u3067\u306b\u304e\u308f\u3046\u98df\u4e8b\u51e6\u3002\u6c17\u8efd\u306b\u98f2\u307f\u98df\u3044\u3067\u304d\u308b\u7a7a\u9593\u3067\u3001\u8a71\u3082\u5f3e\u3080\u306f\u305a\u3002","\u30a2\u30df\u30e5\u30fc\u30ba\u30e1\u30f3\u30c8\u65bd\u8a2d \u2015\u2015 \u30ab\u30e9\u30aa\u30b1\u3001\u30dc\u30fc\u30ea\u30f3\u30b0\u3001\u30b2\u30fc\u30e0\u30bb\u30f3\u30bf\u30fc\u306a\u3069\u306e\u5a2f\u697d\u65bd\u8a2d\u3002\u904a\u3079\u3070\u4eba\u3068\u306a\u308a\u304c\u308f\u304b\u308b\u3002\u624b\u3063\u53d6\u308a\u65e9\u304f\u3044\u3053\u3046\u3002"],["\u304a\u796d\u308a \u2015\u2015 \u8001\u82e5\u7537\u5973\u304c\u53c2\u52a0\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3002\u975e\u65e5\u5e38\u7684\u306a\u7a7a\u6c17\u3092\u697d\u3057\u3080\u3053\u3068\u3067\u3001\u6c17\u5206\u8ee2\u63db\u3082\u3067\u304d\u308b\u3060\u308d\u3046\u3002","\u663c\u9593\u306e\u516c\u5712 \u2015\u2015 \u6563\u6b69\u3059\u308b\u4eba\u3084\u5b50\u9023\u308c\u306e\u5bb6\u65cf\u3067\u6ea2\u308c\u308b\u516c\u5712\u3002\u50d5\u3089\u306b\u3082\u3042\u3042\u3084\u3063\u3066\u751f\u304d\u308b\u9053\u304c\u3042\u3063\u305f\u306e\u3060\u308d\u3046\u304b\u3002","\u601d\u3044\u51fa\u306e\u5834\u6240 \u2015\u2015 \u81ea\u5206\u306b\u3068\u3063\u3066\u601d\u3044\u5165\u308c\u306e\u3042\u308b\u5927\u4e8b\u306a\u5834\u6240\u3002\u3053\u306e\u4eba\u306b\u306a\u3089\u80f8\u306e\u5185\u3092\u660e\u304b\u3057\u3066\u3082\u3044\u3044\u6c17\u5206\u306b\u306a\u3063\u305f\u3002","\u30b9\u30dd\u30fc\u30c4\u89b3\u6226 \u2015\u2015 \u91ce\u7403\u3001\u30b5\u30c3\u30ab\u30fc\u3001\u30d0\u30b9\u30b1\u306a\u3069\u3002\u30d7\u30ed\u30a2\u30de\u554f\u308f\u305a\u89b3\u6226\u3059\u308b\u3002\u624b\u306b\u6c57\u63e1\u308b\u5c55\u958b\u3092\u5171\u306b\u898b\u5c4a\u3051\u3088\u3046\u3002","\u5c4b\u4e0a \u2015\u2015 \u8857\u3068\u4eba\u3092\u898b\u4e0b\u308d\u3059\u773a\u3081\u306e\u3044\u3044\u5834\u6240\u3002\u3053\u306e\u666f\u8272\u3092\u541b\u306f\u559c\u3076\u3060\u308d\u3046\u304b\u3001\u6016\u304c\u308b\u3060\u308d\u3046\u304b\u3002","\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 \u2015\u2015 \u5927\u578b\u5546\u696d\u65bd\u8a2d\u3084\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30b9\u30c8\u30ea\u30fc\u30c8\u306b\u5411\u304b\u3046\u3002\u4e92\u3044\u306e\u8208\u5473\u304c\u3042\u308b\u3082\u306e\u3092\u77e5\u308b\u3044\u3044\u6a5f\u4f1a\u3060\u3002"]),Contact:e(i("DiceTable"),"Table").$new("\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868","1D6",["\u4f53\u52e2\u3092\u5d29\u3059 \u2015\u2015 \u8ee2\u3073\u305d\u3046\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3092\u652f\u3048\u308b\u3001\u652f\u3048\u3089\u308c\u308b\u3002","\u4ed8\u7740\u7269\u3092\u3068\u308b \u2015\u2015 \u9aea\u3084\u670d\u306b\u3064\u3044\u3066\u3044\u308b\u30b4\u30df\u3001\u6c5a\u308c\u3092\u3068\u3063\u3066\u3042\u3052\u308b\u3002","\u601d\u308f\u305a\u624b\u304c\u51fa\u308b \u2015\u2015 \u8a00\u8449\u3088\u308a\u5148\u306b\u3001\u5f37\u3081\u306b\u624b\u304c\u51fa\u3066\u3057\u307e\u3046\u3002","\u7269\u3054\u3057\u306b\u89e6\u308c\u308b \u2015\u2015 \u7269\u3092\u6e21\u3059\u3001\u62fe\u3046\u969b\u306b\u6307\u5148\u540c\u58eb\u304c\u3076\u3064\u304b\u308b\u3002","\u53cb\u597d\u306e\u30b5\u30a4\u30f3 \u2015\u2015 \u80a9\u3092\u7d44\u3080\u3001\u63e1\u624b\u3092\u3059\u308b\u3001\u30cf\u30b0\u3092\u3059\u308b\u306a\u3069\u3002","\u30b1\u30a2\u3092\u3057\u3066\u3042\u3052\u308b \u2015\u2015 \u9aea\u3092\u3068\u304b\u3059\u3001\u80a9\u3092\u3082\u3080\u3001\u982d\u3092\u64ab\u3067\u308b\u3002\u76f8\u624b\u3092\u52b4\u3063\u3066\u3059\u308b\u884c\u70ba\u5168\u822c\u3002"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),I(u[0],"TABLES",i("CATALYST_TABLES").$merge(i("ARTICLE_TABLES")).$merge(i("DRAMA_SEQUENCE_TABLES"))),s=E(i("CATALYST_TABLES").$keys(),"map",[],function(v){return null==v&&(v=b),[v["$[]"](0,4),v]},1).$to_h(),$=E(i("ARTICLE_TABLES").$keys(),"map",[],function(v){return null==v&&(v=b),[j(v["$[]"](0,2),v["$[]"](-1)),v]},1).$to_h(),n=E(i("DRAMA_SEQUENCE_TABLES").$keys(),"map",[],function(v){return null==v&&(v=b),[v["$[]"](0,3),v]},1).$to_h(),I(u[0],"ALIAS",s.$merge($).$merge(n).$freeze()),l.$register_prefix(i("ALIAS").$keys(),i("TABLES").$keys())})}}]);