(self.webpackChunkudonarium_lily=self.webpackChunkudonarium_lily||[]).push([[8509],{8509:function(Ze,Je,Qe){var e,B,A,U,I,k,K,m,z,J,D,c,F,$;Qe(4656),Opal.modules["i18n/backend/fallbacks"]=function(e){function Y(z,i){return"number"==typeof z&&"number"==typeof i?z-i:z["$-"](i)}var i,m,U,k,H,A,V,E=[],r=e.nil,D=e.$$$,c=e.$$,F=e.module,$=e.truthy,d=e.send,B=e.send2,t=e.hash2;return i=E,V=[A=F(E[0],"I18n")].concat(i),e.class_variable_set(V[0],"@@fallbacks",r),m=e.get_singleton_class(A),H=[m].concat(V),e.def(m,"$fallbacks",U=function(){var I,n,b;return e.class_variable_set(H[1],"@@fallbacks",$(b=null==(I=H[1].$$cvars["@@fallbacks"])?r:I)?b:D(D(c(H,"I18n"),"Locale"),"Fallbacks").$new()),$(n=c(H,"Thread").$current()["$[]"]("i18n_fallbacks"))?n:null==(I=H[1].$$cvars["@@fallbacks"])?r:I},U.$$arity=0),e.def(m,"$fallbacks=",k=function(I){var M,n;return e.class_variable_set(H[1],"@@fallbacks",$(I["$is_a?"](c(H,"Array")))?D(D(c(H,"I18n"),"Locale"),"Fallbacks").$new(I):I),n=["i18n_fallbacks",null==(M=H[1].$$cvars["@@fallbacks"])?r:M],d(c(H,"Thread").$current(),"[]=",e.to_a(n)),n[Y(n.length,1)]},k.$$arity=1),void function(m,S){var U=[F(m,"Backend")].concat(S);!function(k,K){var b,n,v,s,I=F(k,"Fallbacks"),M=[I].concat(K);e.def(I,"$translate",b=function(P,h,R){try{var g,w=b.$$p,o=this,_=r,l=r,T=r,f=r,x=r,a=r;for(w&&(b.$$p=null),x=0,a=arguments.length,f=new Array(a);x<a;x++)f[x]=arguments[x];return null==R&&(R=c(M,"EMPTY_HASH")),!$(R.$fetch("fallback",!0))||$(R["$[]"]("fallback_in_progress"))?B(o,e.find_super_dispatcher(o,"translate",b,!1,!0),"translate",f,w):($(R["$[]"]("default"))&&(_=o["$extract_non_symbol_default!"](R)),l=R.$merge(t(["fallback_in_progress"],{fallback_in_progress:!0})),d(c(M,"I18n").$fallbacks()["$[]"](P),"each",[],((g=function(j){var Q,Z=null==g.$$s?this:g.$$s;null==j&&(j=r);try{return d(Z,"catch",["exception"],((Q=function(){var ue=null==Q.$$s?this:Q.$$s,ye=r;if(ye=B(ue,e.find_iter_super_dispatcher(ue,"translate",Q.$$def||g.$$def||b,!1,!1),"translate",[j,h,l],null),$(ye["$nil?"]()))return r;$(P.$to_s()["$!="](j.$to_s()))&&ue.$on_fallback(P,j,h,R),e.ret(ye)}).$$s=Z,Q.$$arity=0,Q))}catch(ae){if(!e.rescue(ae,[D(c(M,"I18n"),"InvalidLocale")]))throw ae;try{return r}finally{e.pop_exception()}}}).$$s=o,g.$$arity=1,g)),$($(T=R["$key?"]("default"))?R["$[]"]("default")["$nil?"]():T)?r:$(_)?B(o,e.find_super_dispatcher(o,"translate",b,!1,!0),"translate",[P,r,R.$merge(t(["default"],{default:_}))],null):o.$throw("exception",D(c(M,"I18n"),"MissingTranslation").$new(P,h,R)))}catch(p){if(p===e.returner)return p.$v;throw p}},b.$$arity=-3),e.def(I,"$extract_non_symbol_default!",n=function(P){var h,w,g=r,G=r;return g=[P["$[]"]("default")].$flatten(),w=d(g,"detect",[],((h=function(_){return null==_&&(_=r),_["$is_a?"](c(M,"Symbol"))["$!"]()}).$$s=this,h.$$arity=1,h)),$(w)&&(G=["default",g["$[]"](0,g.$index(w))],d(P,"[]=",e.to_a(G)),Y(G.length,1)),w},n.$$arity=1),e.def(I,"$exists?",v=function(P,h,R){try{var g,w=v.$$p,o=this,_=r,l=r,T=r;for(w&&(v.$$p=null),l=0,T=arguments.length,_=new Array(T);l<T;l++)_[l]=arguments[l];return null==R&&(R=c(M,"EMPTY_HASH")),$(R.$fetch("fallback",!0))?(d(c(M,"I18n").$fallbacks()["$[]"](P),"each",[],((g=function(x){var a=null==g.$$s?this:g.$$s;null==x&&(x=r);try{if(!$(B(a,e.find_iter_super_dispatcher(a,"exists?",g.$$def||v,!1,!1),"exists?",[x,h],null)))return r;e.ret(!0)}catch(p){if(!e.rescue(p,[D(c(M,"I18n"),"InvalidLocale")]))throw p;try{return r}finally{e.pop_exception()}}}).$$s=o,g.$$arity=1,g)),!1):B(o,e.find_super_dispatcher(o,"exists?",v,!1,!0),"exists?",_,w)}catch(f){if(f===e.returner)return f.$v;throw f}},v.$$arity=-3),I.$private(),e.def(I,"$on_fallback",s=function(P,h,R,g){return r},s.$$arity=4)}(U[0],U)}(V[0],V)},Opal.modules["bcdice/randomizer"]=function(e){function Y(m,S){return"number"==typeof m&&"number"==typeof S?m>S:m["$>"](S)}function J(m,S){return"number"==typeof m&&"number"==typeof S?m+S:m["$+"](S)}function E(m,S){return"number"==typeof m&&"number"==typeof S?m<=S:m["$<="](S)}function r(m,S){return"number"==typeof m&&"number"==typeof S?m-S:m["$-"](S)}function D(m,S){return"number"==typeof m&&"number"==typeof S?m*S:m["$*"](S)}var S,I,n,v,s,y,P,h,R,g,w,G,o,M,b,U,$=[],d=e.nil,B=e.$$$,t=e.$$,i=e.klass,A=e.truthy,V=e.send;return S=$,I=U=[(0,e.module)($[0],"BCDice")].concat(S),M=i(U[0],null,"Randomizer"),b=[M].concat(I),M.$$prototype.rand_results=M.$$prototype.detailed_rand_results=d,e.const_set(b[0],"UPPER_LIMIT_DICE_TIMES",200),e.const_set(b[0],"UPPER_LIMIT_DICE_SIDES",1e3),e.const_set(b[0],"UPPER_LIMIT_RANDS",1e4),e.def(M,"$initialize",n=function(){return this.rand_results=[],this.detailed_rand_results=[]},n.$$arity=0),M.$attr_reader("rand_results"),M.$attr_reader("detailed_rand_results"),e.const_set(b[0],"DetailedRandResult",t(b,"Struct").$new("kind","sides","value")),e.def(M,"$roll_barabara",v=function(l,T){var f,a,x=this;return A(Y(J(x.rand_results.$size(),l),t(b,"UPPER_LIMIT_RANDS")))&&x.$raise(t(b,"TooManyRandsError")),A(A(a=E(l,0))?a:Y(l,t(b,"UPPER_LIMIT_DICE_TIMES")))?[]:V(t(b,"Array"),"new",[l],((f=function(){return(null==f.$$s?this:f.$$s).$roll_once(T)}).$$s=x,f.$$arity=0,f))},v.$$arity=2),e.def(M,"$roll_sum",s=function(l,T){return this.$roll_barabara(l,T).$sum()},s.$$arity=2),e.def(M,"$roll_once",y=function(l){var f,x=d;return A(A(f=E(l,0))?f:Y(l,t(b,"UPPER_LIMIT_DICE_SIDES")))?0:(x=this.$rand_inner(l),this.$push_to_detail("normal",l,x),x)},y.$$arity=1),e.def(M,"$roll_index",P=function(l){return r(this.$roll_once(l),1)},P.$$arity=1),e.def(M,"$roll_tens_d10",h=function(){var f,T=d;return(T=this.$rand_inner(10))["$=="](10)&&(T=0),f=D(T,10),this.$push_to_detail("tens_d10",10,f),f},h.$$arity=0),e.def(M,"$roll_d9",R=function(){var T;return T=r(this.$rand_inner(10),1),this.$push_to_detail("d9",10,T),T},R.$$arity=0),e.def(M,"$roll_d66",g=function(l){var T,a,x=d;return x=V(t(b,"Array"),"new",[2],((T=function(){return(null==T.$$s?this:T.$$s).$roll_once(6)}).$$s=this,T.$$arity=0,T)),a=l,B(t(b,"D66SortType"),"ASC")["$==="](a)?x["$sort!"]():B(t(b,"D66SortType"),"DESC")["$==="](a)&&x["$sort!"]()["$reverse!"](),J(D(x["$[]"](0),10),x["$[]"](1))},g.$$arity=1),M.$private(),e.def(M,"$rand_inner",w=function(l){var f,T=this;return A(function(m,S){return"number"==typeof m&&"number"==typeof S?m>=S:m["$>="](S)}(T.rand_results.$size(),t(b,"UPPER_LIMIT_RANDS")))&&T.$raise(t(b,"TooManyRandsError")),f=T.$random(l),T.rand_results["$<<"]([f,l]),f},w.$$arity=1),e.def(M,"$random",G=function(l){return J(t(b,"Kernel").$rand(l),1)},G.$$arity=1),e.def(M,"$push_to_detail",o=function(l,T,f){var a;return a=t(b,"DetailedRandResult").$new(l,T,f),this.detailed_rand_results.$push(a)},o.$$arity=3),void function(k,K,I){[i(k,K,"TooManyRandsError")].concat(I)}(U[0],t(U,"StandardError"),U)},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var B,A,U,I,M,b,n,k,K,m,z,J=[],E=e.nil,D=e.$$,c=e.module,F=e.klass,$=e.truthy;return B=J,A=z=[c(J[0],"BCDice")].concat(B),U=m=[c(z[0],"DiceTable")].concat(A),k=F(m[0],null,"RollResult"),K=[k].concat(U),k.$$prototype.table_name=k.$$prototype.value=k.$$prototype.body=E,e.def(k,"$initialize",I=function(s,y,P){var h=this;return h.table_name=s,h.value=y,h.body=P},I.$$arity=3),k.$attr_reader("table_name"),k.$attr_reader("value"),k.$attr_reader("body"),e.def(k,"$to_s",M=function(){var s=this;return s.table_name+"("+s.value+") \uff1e "+s.body},M.$$arity=0),e.def(k,"$last_body",b=function(){var s=this;return $(s.body["$is_a?"](D(K,"RollResult")))?s.body.$last_body():s.body},b.$$arity=0),void e.def(k,"$empty?",n=function(){return!1},n.$$arity=0)},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var t,V,k,M,b,K,I,S,i,E=[],r=e.nil,c=e.$$,F=e.module,$=e.klass,d=e.truthy;return t=E,V=i=[F(E[0],"BCDice")].concat(t),k=S=[F(i[0],"DiceTable")].concat(V),K=$(S[0],null,"ChainTable"),I=[K].concat(k),K.$$prototype.times=K.$$prototype.sides=K.$$prototype.items=K.$$prototype.name=r,e.def(K,"$initialize",M=function(v,s,y){var P=this,h=r;return P.name=v,P.items=y.$freeze(),h=/(\d+)D(\d+)/i.$match(s),d(h)||P.$raise(c(I,"ArgumentError"),"Unexpected table type: "+s),P.times=h["$[]"](1).$to_i(),P.sides=h["$[]"](2).$to_i()},M.$$arity=3),void e.def(K,"$roll",b=function(v){var y,P,s=this,h=r;return P=function(B,t){return"number"==typeof B&&"number"==typeof t?B-t:B["$-"](t)}(y=v.$roll_sum(s.times,s.sides),s.times),h=s.items["$[]"](P),d(h["$respond_to?"]("roll"))&&(h=h.$roll(v)),c(I,"RollResult").$new(s.name,y,h)},b.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function E(z,i){return"number"==typeof z&&"number"==typeof i?z-i:z["$-"](i)}var i,S,I,n,v,s,M,b,U,V,D=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.hash2;return i=D,S=V=[d(D[0],"BCDice")].concat(i),I=U=[d(V[0],"DiceTable")].concat(S),M=B(U[0],null,"D66GridTable"),b=[M].concat(I),M.$$prototype.name=M.$$prototype.items=c,e.defs(M,"$from_i18n",n=function(P,h){var g=c;return g=$(b,"I18n").$t(P,t(["locale","raise"],{locale:h,raise:!0})),this.$new(g["$[]"]("name"),g["$[]"]("items"))},n.$$arity=2),e.def(M,"$initialize",v=function(P,h){return this.name=P,this.items=h.$freeze()},v.$$arity=2),void e.def(M,"$roll",s=function(P){var R,g,w,G,o;return R=P.$roll_once(6),g=P.$roll_once(6),w=function(z,i){return"number"==typeof z&&"number"==typeof i?z+i:z["$+"](i)}(function(z,i){return"number"==typeof z?10*z:z["$*"](10)}(R),g),G=E(R,1),o=E(g,1),$(b,"RollResult").$new(this.name,w,this.items["$[]"](G)["$[]"](o))},s.$$arity=1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var B,A,U,I,M,k,K,m,z,J=[],E=e.nil,D=e.$$,c=e.module,F=e.klass,$=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),B=J,A=z=[c(J[0],"BCDice")].concat(B),U=m=[c(z[0],"DiceTable")].concat(A),k=F(m[0],D(m,"D66GridTable"),"D66HalfGridTable"),K=[k].concat(U),e.defs(k,"$from_i18n",I=function(n,v){var y=E;return y=D(K,"I18n").$t(n,$(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2_3"),y["$[]"]("items_4_5_6"))},I.$$arity=2),void e.def(k,"$initialize",M=function(n,v,s){return this.name=n,this.items=[v,v,v,s,s,s].$freeze()},M.$$arity=3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var B,A,U,I,M,k,K,m,z,J=[],E=e.nil,D=e.$$,c=e.module,F=e.klass,$=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),B=J,A=z=[c(J[0],"BCDice")].concat(B),U=m=[c(z[0],"DiceTable")].concat(A),k=F(m[0],D(m,"D66GridTable"),"D66OneThirdTable"),K=[k].concat(U),e.defs(k,"$from_i18n",I=function(n,v){var y=E;return y=D(K,"I18n").$t(n,$(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2"),y["$[]"]("items_3_4"),y["$[]"]("items_5_6"))},I.$$arity=2),void e.def(k,"$initialize",M=function(n,v,s,y){return this.name=n,this.items=[v,v,s,s,y,y].$freeze()},M.$$arity=4)},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var i,S,I,n,v,s,y,M,b,U,V,r=[],D=e.nil,c=e.$$$,F=e.$$,$=e.module,d=e.klass,B=e.hash2,t=e.truthy;return i=r,S=V=[$(r[0],"BCDice")].concat(i),I=U=[$(V[0],"DiceTable")].concat(S),M=d(U[0],null,"D66Table"),b=[M].concat(I),M.$$prototype.sort_type=M.$$prototype.items=M.$$prototype.name=D,e.defs(M,"$from_i18n",n=function(h,R){var G,w=D;return w=F(b,"I18n").$t(h,B(["locale"],{locale:R})),G=F(b,"D66SortType").$const_get(w["$[]"]("d66_sort_type")),this.$new(w["$[]"]("name"),G,w["$[]"]("items"))},n.$$arity=2),e.def(M,"$initialize",v=function(h,R,g){var w=this;return w.name=h,w.sort_type=R,w.items=g.$freeze()},v.$$arity=3),e.def(M,"$roll",s=function(h){var w,_,R=this,g=D,G=D,o=D;return g=h.$roll_barabara(2,6),w=R.sort_type,c(F(b,"D66SortType"),"ASC")["$==="](w)?g["$sort!"]():c(F(b,"D66SortType"),"DESC")["$==="](w)&&g["$sort!"]()["$reverse!"](),G=function(z,i){return"number"==typeof z&&"number"==typeof i?z+i:z["$+"](i)}(function(z,i){return"number"==typeof z?10*z:z["$*"](10)}(g["$[]"](0)),g["$[]"](1)),o=t(_=R.items["$[]"](G))?_:R.items["$[]"](G.$to_s()),t(o["$respond_to?"]("roll"))&&(o=o.$roll(h)),F(b,"RollResult").$new(R.name,G,o)},s.$$arity=1),void e.def(M,"$choice",y=function(h){return F(b,"RollResult").$new(this.name,h,this.items["$[]"](h))},y.$$arity=1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){function Y(A,V){return"number"==typeof A&&"number"==typeof V?A+V:A["$+"](V)}var V,b,s,n,U,K,S,D=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.hash2,z=e.send,i=e.send2;return e.top.$require("bcdice/dice_table/d66_table"),V=D,U=S=[d(D[0],"BCDice")].concat(V),b=K=[d(S[0],"DiceTable")].concat(U),[n=B(K[0],$(K,"D66Table"),"D66LeftRangeTable")].concat(b),void e.def(n,"$initialize",s=function(P,h,R){var g,_,o=this;return s.$$p&&(s.$$p=null),_=t([],{}),z(R,"each",[],((g=function(l){function T(f){return l.apply(this,arguments)}return T.toString=function(){return l.toString()},T}(function(l){var f,a,j,T=null==g.$$s?this:g.$$s;return null==l&&(l=c),f=e.to_ary(l),j=null==f[1]?c:f[1],z(null==f[0]?c:f[0],"each",[],((a=function(Q){var ue;return null==Q&&(Q=c),z(j,"each_with_index",[],((ue=function(De,Pe){var Be,me;return null==De&&(De=c),null==Pe&&(Pe=c),Be=Y(function(A,V){return"number"==typeof A?10*A:A["$*"](10)}(Q),Y(Pe,1)),z(_,"[]=",e.to_a(me=[Be,De])),me[function(A,V){return"number"==typeof A?A-1:A["$-"](1)}(me.length)]}).$$s=null==a.$$s?this:a.$$s,ue.$$arity=2,ue))}).$$s=T,a.$$arity=1,a))})).$$s=o,g.$$arity=1,g)),i(o,e.find_super_dispatcher(o,"initialize",s,!1,!0),"initialize",[P,h,_],null)},s.$$arity=3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var i,S,I,n,v,M,b,U,V,D=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.truthy;return i=D,S=V=[d(D[0],"BCDice")].concat(i),I=U=[d(V[0],"DiceTable")].concat(S),M=B(U[0],null,"D66ParityTable"),b=[M].concat(I),M.$$prototype.odd=M.$$prototype.even=M.$$prototype.name=c,e.def(M,"$initialize",n=function(y,P,h){var R=this;return R.name=y,R.odd=P.$freeze(),R.even=h.$freeze()},n.$$arity=3),void e.def(M,"$roll",v=function(y){var R,w,G,P=this,h=c;return h=y.$roll_once(6),R=y.$roll_once(6),w=(t(h["$odd?"]())?P.odd:P.even)["$[]"](function(z,i){return"number"==typeof z?z-1:z["$-"](1)}(R)),G=function(z,i){return"number"==typeof z&&"number"==typeof i?z+i:z["$+"](i)}(function(z,i){return"number"==typeof z?10*z:z["$*"](10)}(h),R),$(b,"RollResult").$new(P.name,G,w)},v.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var z,m,K,b,n,I,M,H,A,r=[],D=e.nil,F=e.$$,$=e.module,d=e.klass,B=e.send;return z=r,m=A=[$(r[0],"BCDice")].concat(z),K=H=[$(A[0],"DiceTable")].concat(m),I=d(H[0],null,"D66RangeTable"),M=[I].concat(K),I.$$prototype.items=I.$$prototype.name=D,e.def(I,"$initialize",b=function(s,y){return this.name=s,this.items=y.$freeze()},b.$$arity=2),void e.def(I,"$roll",n=function(s){var y,h,R,g,t,P=this,w=D;return h=s.$roll_once(6),R=s.$roll_once(6),g=function(t,z){return"number"==typeof t&&"number"==typeof z?t+z:t["$+"](z)}("number"==typeof(t=h)?10*t:t["$*"](10),R),w=B(P.items,"find",[],((y=function(o){return null==o&&(o=D),o["$[]"](0)["$include?"](g)}).$$s=P,y.$$arity=1,y)),F(M,"RollResult").$new(P.name,g,w["$[]"](1))},n.$$arity=1)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var A,H,M,v,s,y,P,h,R,g,w,G,b,n,k,m,D=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.send,z=e.truthy;return A=D,H=m=[d(D[0],"BCDice")].concat(A),M=k=[d(m[0],"DiceTable")].concat(H),b=B(k[0],null,"RangeTable"),n=[b].concat(M),b.$$prototype.name=b.$$prototype.items=b.$$prototype.num_of_dice=b.$$prototype.num_of_sides=b.$$prototype.formatter=c,e.const_set(n[0],"RollResult",t($(n,"Struct"),"new",["sum","values","content","formatted"],((v=function(){return(null==v.$$s?this:v.$$s).$alias_method("to_s","formatted")}).$$s=b,v.$$arity=0,v))),e.const_set(n[0],"Item",$(n,"Struct").$new("range","content")),e.const_set(n[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(n[0],"DEFAULT_FORMATTER",t(b,"lambda",[],($$2=function(o){function _(l,T){return o.apply(this,arguments)}return _.toString=function(){return o.toString()},_}(function(o,_){return null==$$2.$$s||$$2,null==o&&(o=c),null==_&&(_=c),o.$name()+"("+_.$sum()+") \uff1e "+_.$content()}),$$2.$$s=b,$$2.$$arity=2,$$2))),b.$attr_reader("name"),b.$attr_reader("num_of_dice"),b.$attr_reader("num_of_sides"),e.def(b,"$initialize",s=function(_,l,T){var p,f=s.$$p,x=f||c,a=this,j=c;return f&&(s.$$p=null),f&&(s.$$p=null),a.name=_.$freeze(),a.formatter=z(p=x)?p:$(n,"DEFAULT_FORMATTER"),j=$(n,"DICE_ROLL_METHOD_RE").$match(l),z(j)||a.$raise($(n,"ArgumentError"),a.name+": invalid dice roll method: "+l),a.num_of_dice=j["$[]"](1).$to_i(),a.num_of_sides=j["$[]"](2).$to_i(),a.$store(T)},s.$$arity=3),e.def(b,"$fetch",y=function(_){var l,f,T=this;return f=t(T.items,"find",[],((l=function(a){return null==a&&(a=c),a.$range()["$include?"](_)}).$$s=T,l.$$arity=1,l)),z(f)||T.$raise($(n,"RangeError"),T.name+": value is out of range: "+_),f},y.$$arity=1),e.def(b,"$roll",P=function(_){var f,x,a,i,l=this,T=c;return f=(T=_.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),x=$(n,"RollResult").$new(f,T,l.$fetch(f).$content()),a=[l.formatter["$[]"](l,x)],t(x,"formatted=",e.to_a(a)),"number"==typeof(i=a.length)||i["$-"](1),x},P.$$arity=1),b.$private(),e.def(b,"$store",h=function(_){var l,T,f,a,p,x=this;return a=t(_,"map",[],((l=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),[(null==l.$$s?this:l.$$s).$coerce_to_int_range(Z),Q]}).$$s=x,l.$$arity=2,l)),p=t(a,"sort_by",[],((T=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),Z.$min()}).$$s=x,T.$$arity=2,T)),x.$assert_min_sum_is_covered(p),x.$assert_max_sum_is_covered(p),x.$assert_no_gap_or_overlap_in_ranges(p),x.items=t(p,"map",[],(f=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),$(n,"Item").$new(Z,Q.$freeze()).$freeze()},f.$$s=x,f.$$arity=2,f)).$freeze(),x},h.$$arity=1),e.def(b,"$coerce_to_int_range",R=function(_){var T,f=c;return T=_,$(n,"Integer")["$==="](T)?$(n,"Range").$new(_,_):$(n,"Range")["$==="](T)&&z(z(f=_.$begin()["$is_a?"]($(n,"Integer")))?_.$end()["$is_a?"]($(n,"Integer")):f)?_:this.$raise($(n,"TypeError"),this.name+": "+_+" ("+_.$class()+") must be an Integer or a Range with Integers ")},R.$$arity=1),e.def(b,"$assert_min_sum_is_covered",g=function(_){var T,l=this,f=c;return T=l.num_of_dice,f=_.$first()["$[]"](0),z(f["$include?"](T))||l.$raise($(n,"RangeError"),l.name+": min value ("+T+") is not covered: "+f),l},g.$$arity=1),e.def(b,"$assert_max_sum_is_covered",w=function(_){var T,l=this,f=c;return T=function(i,A){return"number"==typeof i&&"number"==typeof A?i*A:i["$*"](A)}(l.num_of_dice,l.num_of_sides),f=_.$last()["$[]"](0),z(f["$include?"](T))||l.$raise($(n,"RangeError"),l.name+": max value ("+T+") is not covered: "+f),l},w.$$arity=1),void e.def(b,"$assert_no_gap_or_overlap_in_ranges",G=function(_){var l;return t(_,"each_cons",[2],((l=function(x,a){var Q,ae,i,p=null==l.$$s?this:l.$$s,j=c,Z=c;return null==p.name&&(p.name=c),null==x&&(x=c),null==a&&(a=c),j=x["$[]"](0),Z=a["$[]"](0),ae="number"==typeof(i=Q=j.$max())?i+1:i["$+"](1),z(Z["$include?"](Q))&&p.$raise($(n,"RangeError"),p.name+": Range overlap: "+j+" and "+Z),z(Z["$include?"](ae))?c:p.$raise($(n,"RangeError"),p.name+": Range gap: "+j+" and "+Z)}).$$s=this,l.$$arity=2,l)),this},G.$$arity=1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var t,V,k,n,y,P,h,v,s,I,S,i,E=[],r=e.nil,D=e.$$$,c=e.$$,F=e.module,$=e.klass,d=e.send;return t=E,V=i=[F(E[0],"BCDice")].concat(t),k=S=[F(i[0],"DiceTable")].concat(V),n=I=[$(S[0],null,"SaiFicSkillTable")].concat(k),v=$(I[0],null,"Category"),s=[v].concat(n),v.$$prototype.name=r,e.def(v,"$initialize",y=function(g,w,G,o){var _,l=this;return l.name=g,l.skills=d(w.$map(),"with_index",[2],((_=function(T){function f(x,a){return T.apply(this,arguments)}return f.toString=function(){return T.toString()},f}(function(T,f){return null==T&&(T=r),null==f&&(f=r),D(c(s,"SaiFicSkillTable"),"Skill").$new(g,T,G,f,o)})).$$s=l,_.$$arity=2,_)),l.dice=G},y.$$arity=4),e.def(v,"$roll",P=function(g){return this.$skills()["$[]"](function(B,t){return"number"==typeof B?B-2:B["$-"](2)}(g.$roll_sum(2,6)))},P.$$arity=1),e.def(v,"$to_s",h=function(){return this.name},h.$$arity=0),void v.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var B,A,b,s,y,n,U,K,m,z,J=[],E=e.nil,c=e.module,F=e.klass,$=e.hash2;return B=J,A=z=[c(J[0],"BCDice")].concat(B),U=m=[c(z[0],"DiceTable")].concat(A),b=K=[F(m[0],null,"SaiFicSkillTable")].concat(U),[n=F(K[0],null,"Skill")].concat(b),n.$$prototype.s_format=n.$$prototype.category_dice=n.$$prototype.row_dice=n.$$prototype.category_name=n.$$prototype.name=E,e.def(n,"$initialize",s=function(h,R,g,w,G){var o=this;return o.category_name=h,o.name=R,o.category_dice=g,o.row_dice=w,o.s_format=G},s.$$arity=5),e.def(n,"$to_s",y=function(){var h=this;return h.$format(h.s_format,$(["category_dice","row_dice","category_name","skill_name"],{category_dice:h.category_dice,row_dice:h.row_dice,category_name:h.category_name,skill_name:h.name}))},y.$$arity=0),void n.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var V,U,b,s,y,P,h,R,g,w,n,v,K,S,E=e.top,r=[],D=e.nil,c=e.$$$,F=e.$$,$=e.module,d=e.klass,B=e.hash2,t=e.send,i=e.truthy;return E.$require("bcdice/dice_table/sai_fic_skill_table/category"),E.$require("bcdice/dice_table/sai_fic_skill_table/skill"),V=r,U=S=[$(r[0],"BCDice")].concat(V),b=K=[$(S[0],"DiceTable")].concat(U),n=d(K[0],null,"SaiFicSkillTable"),v=[n].concat(b),n.$$prototype.rtt=n.$$prototype.rtt_format=n.$$prototype.rct=n.$$prototype.rct_format=n.$$prototype.rttn=n.$$prototype.rttn_format=n.$$prototype.categories=D,e.defs(n,"$from_i18n",s=function(o,_,l){var T,f,x,a,Q,Z=D;if(null==l)l=B([],{});else if(!l.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(T=l.$$smap.rtt)&&(T=D),null==(f=l.$$smap.rct)&&(f=D),null==(x=l.$$smap.rttn)&&(x=D),Q=(Z=F(v,"I18n").$t("RTT",B(["locale","raise","default"],{locale:_,raise:!1,default:B([],{})})).$merge(F(v,"I18n").$t(o,B(["locale","raise"],{locale:_,raise:!0}))))["$[]"]("items"),Z=t(Z,"select",[],((a=function(ae){function ue(ye,De){return ae.apply(this,arguments)}return ue.toString=function(){return ae.toString()},ue}(function(ae,ue){return null==ae&&(ae=D),null==ue&&(ue=D),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](ae)})).$$s=this,a.$$arity=2,a)),this.$new(Q,e.to_hash(Z).$merge(B(["rtt","rct","rttn"],{rtt:T,rct:f,rttn:x})))},s.$$arity=-3),e.const_set(v[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),e.const_set(v[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),e.const_set(v[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),e.const_set(v[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),e.def(n,"$initialize",y=function(o,_){var l,T,f,x,a,p,j,Z,Q=this;if(null==_)_=B([],{});else if(!_.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(l=_.$$smap.rtt)&&(l=D),null==(T=_.$$smap.rct)&&(T=D),null==(f=_.$$smap.rttn)&&(f=D),null==(x=_.$$smap.rtt_format)&&(x=F(v,"DEFAULT_RTT")),null==(a=_.$$smap.rct_format)&&(a=F(v,"DEFAULT_RCT")),null==(p=_.$$smap.rttn_format)&&(p=F(v,"DEFAULT_RTTN")),null==(j=_.$$smap.s_format)&&(j=F(v,"DEFAULT_S")),Q.categories=t(o.$map(),"with_index",[1],((Z=function(ue,ye){var Pe,Be,me;return null==ue&&(ue=D),null==ye&&(ye=D),Be=null==(Pe=e.to_ary(ue))[0]?D:Pe[0],me=null==Pe[1]?D:Pe[1],c(F(v,"SaiFicSkillTable"),"Category").$new(Be,me,ye,j)}).$$s=Q,Z.$$arity=2,Z.$$has_top_level_mlhs_arg=!0,Z)),Q.rtt=l,Q.rct=T,Q.rttn=f.$to_a(),Q.rtt_format=x,Q.rct_format=a,Q.rttn_format=p},y.$$arity=-2),e.const_set(v[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),n.$attr_reader("categories"),e.def(n,"$roll_command",P=function(o,_){var T,l=this,f=D,x=D,a=D;return i(["RTT",l.rtt]["$include?"](T=_))?l.$format_skill(l.rtt_format,l.$roll_skill(o)):i(["RCT",l.rct]["$include?"](T))?(f=l.$roll_category(o),l.$format(l.rct_format,B(["category_dice","category_name"],{category_dice:f.$dice(),category_name:f.$name()}))):i(i(x=a=F(v,"RTTN").$index(T))?x:a=l.rttn.$index(T))?l.$format_skill(l.rttn_format,l.categories["$[]"](a).$roll(o)):D},P.$$arity=2),e.def(n,"$roll_category",h=function(o){return this.categories["$[]"](function(A,V){return"number"==typeof A?A-1:A["$-"](1)}(o.$roll_once(6)))},h.$$arity=1),e.def(n,"$roll_skill",R=function(o){return this.$roll_category(o).$roll(o)},R.$$arity=1),e.def(n,"$prefixes",g=function(){var o=this;return function(A,V){return"number"==typeof A&&"number"==typeof V?A+V:A["$+"](V)}(["RTT[1-6]?","RCT",o.rtt,o.rct],o.rttn).$compact()},g.$$arity=0),n.$private(),void e.def(n,"$format_skill",w=function(o,_){return this.$format(o,B(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:_.$category_dice(),row_dice:_.$row_dice(),category_name:_.$category_name(),skill_name:_.$name(),text:_.$to_s()}))},w.$$arity=2)},Opal.modules["bcdice/dice_table/table"]=function(e){var z,m,K,b,n,v,s,I,M,H,A,E=[],r=e.nil,c=e.$$,F=e.module,$=e.klass,d=e.hash2,B=e.truthy;return z=E,m=A=[F(E[0],"BCDice")].concat(z),K=H=[F(A[0],"DiceTable")].concat(m),I=$(H[0],null,"Table"),M=[I].concat(K),I.$$prototype.times=I.$$prototype.sides=I.$$prototype.name=I.$$prototype.items=r,e.defs(I,"$from_i18n",b=function(P,h){var g=r;return g=c(M,"I18n").$t(P,d(["locale"],{locale:h})),this.$new(g["$[]"]("name"),g["$[]"]("type"),g["$[]"]("items"))},b.$$arity=2),e.def(I,"$initialize",n=function(P,h,R){var g=this,w=r;return g.name=P,g.items=R.$freeze(),w=/(\d+)D(\d+)/i.$match(h),B(w)||g.$raise(c(M,"ArgumentError"),"Unexpected table type: "+h),g.times=w["$[]"](1).$to_i(),g.sides=w["$[]"](2).$to_i()},n.$$arity=3),e.def(I,"$roll",v=function(P){var R,h=this;return R=P.$roll_sum(h.times,h.sides),h.$choice(R)},v.$$arity=1),void e.def(I,"$choice",s=function(P){var R,h=this;return R=function(t,z){return"number"==typeof t&&"number"==typeof z?t-z:t["$-"](z)}(P,h.times),c(M,"RollResult").$new(h.name,P,h.items["$[]"](R))},s.$$arity=1)},Opal.modules["bcdice/dice_table"]=function(e){var Y=e.top;return Y.$require("bcdice/dice_table/roll_result"),Y.$require("bcdice/dice_table/chain_table"),Y.$require("bcdice/dice_table/d66_grid_table"),Y.$require("bcdice/dice_table/d66_half_grid_table"),Y.$require("bcdice/dice_table/d66_one_third_table"),Y.$require("bcdice/dice_table/d66_left_range_table"),Y.$require("bcdice/dice_table/d66_parity_table"),Y.$require("bcdice/dice_table/d66_range_table"),Y.$require("bcdice/dice_table/d66_table"),Y.$require("bcdice/dice_table/range_table"),Y.$require("bcdice/dice_table/sai_fic_skill_table"),Y.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var $,z,A,B,J=[],c=e.module;return $=J,z=B=[c(J[0],"BCDice")].concat($),A=[c(B[0],"D66SortType")].concat(z),e.const_set(A[0],"NO_SORT","no_sort"),e.const_set(A[0],"ASC","asc"),e.const_set(A[0],"DESC","desc"),void function(t,z){var A=[c(t,"RoundType")].concat(z);e.const_set(A[0],"CEIL","ceil"),e.const_set(A[0],"FLOOR","floor"),e.const_set(A[0],"ROUND","round")}(B[0],B)},Opal.modules["bcdice/translate"]=function(e){var B,A,S,V,m,z,J=[],E=e.nil,D=e.$$,c=e.module,F=e.hash2;return B=J,A=z=[c(J[0],"BCDice")].concat(B),V=c(z[0],"Translate"),m=[V].concat(A),void e.def(V,"$translate",S=function(U,k){var K,I=this;if(null==I.locale&&(I.locale=E),null==k)k=F([],{});else if(!k.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return K=e.kwrestargs(k,{}),D(m,"I18n").$translate(U,F(["locale","raise"],{locale:I.locale,raise:!0}).$merge(e.to_hash(K)))},S.$$arity=-2)},Opal.modules["bcdice/result"]=function(e){function Y(B,t){return"number"==typeof B&&"number"==typeof t?B-t:B["$-"](t)}var t,v,P,h,R,g,w,m,U,k,K,I,M,b,n,S,H,i,E=[],r=e.nil,$=e.klass,d=e.send;return t=E,m=i=[(0,e.module)(E[0],"BCDice")].concat(t),H=[S=$(i[0],null,"Result")].concat(m),S.$$prototype.secret=S.$$prototype.success=S.$$prototype.failure=S.$$prototype.critical=S.$$prototype.fumble=r,[v=e.get_singleton_class(S)].concat(H),e.def(v,"$success",P=function(o){var _;return d(this.$new(),"tap",[],((_=function(T){function f(x){return T.apply(this,arguments)}return f.toString=function(){return T.toString()},f}(function(T){var x=r;return null==T&&(T=r),d(T,"text=",e.to_a(x=[o])),Y(x.length,1),d(T,"success=",e.to_a(x=[!0])),x[Y(x.length,1)]})).$$s=this,_.$$arity=1,_))},P.$$arity=1),e.def(v,"$failure",h=function(o){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[o])),Y(a.length,1),d(f,"failure=",e.to_a(a=[!0])),a[Y(a.length,1)]}).$$s=this,_.$$arity=1,_))},h.$$arity=1),e.def(v,"$critical",R=function(o){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[o])),Y(a.length,1),d(f,"critical=",e.to_a(a=[!0])),Y(a.length,1),d(f,"success=",e.to_a(a=[!0])),a[Y(a.length,1)]}).$$s=this,_.$$arity=1,_))},R.$$arity=1),e.def(v,"$fumble",g=function(o){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[o])),Y(a.length,1),d(f,"fumble=",e.to_a(a=[!0])),Y(a.length,1),d(f,"failure=",e.to_a(a=[!0])),a[Y(a.length,1)]}).$$s=this,_.$$arity=1,_))},g.$$arity=1),e.def(v,"$nothing",w=function(){return"nothing"},w.$$arity=0),e.def(S,"$initialize",U=function(s){var y=this;return null==s&&(s=r),y.text=s,y.rands=r,y.detailed_rands=r,y.secret=!1,y.success=!1,y.failure=!1,y.critical=!1,y.fumble=!1},U.$$arity=-1),S.$attr_accessor("text","rands","detailed_rands"),S.$attr_writer("secret","success","failure","critical","fumble"),e.def(S,"$secret?",k=function(){return this.secret},k.$$arity=0),e.def(S,"$success?",K=function(){return this.success},K.$$arity=0),e.def(S,"$failure?",I=function(){return this.failure},I.$$arity=0),e.def(S,"$critical?",M=function(){return this.critical},M.$$arity=0),e.def(S,"$fumble?",b=function(){return this.fumble},b.$$arity=0),void e.def(S,"$condition=",n=function(s){return this.success=s,this.failure=s["$!"]()},n.$$arity=1)},Opal.modules["racc/parser"]=function(e){function Y(U,k){return"number"==typeof U&&"number"==typeof k?U<k:U["$<"](k)}function J(U,k){return"number"==typeof U&&"number"==typeof k?U-k:U["$-"](k)}function E(U,k){return"number"==typeof U&&"number"==typeof k?U+k:U["$+"](k)}function r(U,k){return"number"==typeof U&&"number"==typeof k?U>=k:U["$>="](k)}function D(U,k){return"number"==typeof U&&"number"==typeof k?U>k:U["$>"](k)}function c(U,k){return"number"==typeof U&&"number"==typeof k?U<=k:U["$<="](k)}var M,b,n,k,I,B=[],t=e.nil,z=e.$$$,i=e.$$,A=e.module,V=e.klass,m=e.truthy,S=e.gvars,H=e.send;return k=B,M=(I=[A(B[0],"Racc")].concat(k))[0],b=i(I,"StandardError"),n=I,[V(M,b,"ParseError")].concat(n),m(z("::","ParseError","skip_raise")?"constant":t)||e.const_set(B[0],"ParseError",z(i(B,"Racc"),"ParseError")),function(U,k){var v,P,h,R,g,w,G,o,_,l,T,f,x,a,p,j,Z,Q,ae,ue,ye,De,Pe,Me,Be,s,y,I=[A(U,"Racc")].concat(k);m(i(I,"Racc_No_Extensions","skip_raise")?"constant":t)||e.const_set(I[0],"Racc_No_Extensions",!1),v=I,s=V(I[0],null,"Parser"),y=[s].concat(v),s.$$prototype.yydebug=s.$$prototype.racc_debug_out=s.$$prototype.racc_error_status=s.$$prototype.racc_t=s.$$prototype.racc_vstack=s.$$prototype.racc_val=s.$$prototype.racc_state=s.$$prototype.racc_tstack=t,e.const_set(y[0],"Racc_Runtime_Version","1.4.6"),e.const_set(y[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),e.const_set(y[0],"Racc_Runtime_Core_Version_R","1.4.6"),e.const_set(y[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),e.const_set(y[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),e.const_set(y[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),e.const_set(y[0],"Racc_Runtime_Core_Version",i(y,"Racc_Runtime_Core_Version_R")),e.const_set(y[0],"Racc_Runtime_Core_Revision",i(y,"Racc_Runtime_Core_Revision_R")),e.const_set(y[0],"Racc_Runtime_Type","ruby"),e.defs(i(y,"Parser"),"$racc_runtime_type",P=function(){return i(y,"Racc_Runtime_Type")},P.$$arity=0),e.def(s,"$_racc_setup",h=function(){var re,ee,u=this,q=t,C=t,L=t;return null==S.stderr&&(S.stderr=t),m(z(u.$class(),"Racc_debug_parser"))||(u.yydebug=!1),m(null!=(re=u.yydebug)&&re!==t?"instance-variable":t)||(u.yydebug=!1),m(u.yydebug)&&(m(null!=(ee=u.racc_debug_out)&&ee!==t?"instance-variable":t)||(u.racc_debug_out=S.stderr),u.racc_debug_out=m(q=u.racc_debug_out)?q:S.stderr),C=z(u.$class(),"Racc_arg"),m(Y(C.$size(),14))&&(H(C,"[]=",e.to_a(L=[13,!0])),J(L.length,1)),C},h.$$arity=0),e.def(s,"$_racc_init_sysvars",R=function(){var re=this;return re.racc_state=[0],re.racc_tstack=[],re.racc_vstack=[],re.racc_t=t,re.racc_val=t,re.racc_read_next=!0,re.racc_user_yyerror=!1,re.racc_error_status=0},R.$$arity=0),e.def(s,"$do_parse",g=function(){return this.$__send__(i(y,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},g.$$arity=0),e.def(s,"$next_token",w=function(){return this.$raise(i(y,"NotImplementedError"),this.$class()+"#next_token is not defined")},w.$$arity=0),e.def(s,"$_racc_do_parse_rb",G=function(re,ee){var u,C,L=this,O=t,te=t,$e=t,be=t,ie=t,ve=t,ge=t,de=t;return u=e.to_ary(re),O=null==u[0]?t:u[0],te=null==u[1]?t:u[1],$e=null==u[2]?t:u[2],be=null==u[3]?t:u[3],ie=null==u[10]?t:u[10],L.$_racc_init_sysvars(),ve=ge=de=t,H(L,"catch",["racc_end_parse"],((C=function(){var Ce,Ae,se=null==C.$$s?this:C.$$s,Re=t,Ie=t,ze=t;for(null==se.racc_state&&(se.racc_state=t),null==se.racc_read_next&&(se.racc_read_next=t),null==se.racc_t&&(se.racc_t=t),null==se.yydebug&&(se.yydebug=t),null==se.racc_val&&(se.racc_val=t);m(!0);)for(m(de=be["$[]"](se.racc_state["$[]"](-1)))?(m(se.racc_read_next)&&m(se.racc_t["$!="](0))&&(Ae=se.$next_token(),Ce=e.to_ary(Ae),ve=null==Ce[0]?t:Ce[0],se.racc_val=null==Ce[1]?t:Ce[1],se.racc_t=m(ve)?m(Re=ie["$[]"](ve))?Re:1:0,m(se.yydebug)&&se.$racc_read_token(se.racc_t,ve,se.racc_val),se.racc_read_next=!1),de=E(de,se.racc_t),m(m(Ie=m(ze=r(de,0))?ge=O["$[]"](de):ze)?te["$[]"](de)["$=="](se.racc_state["$[]"](-1)):Ie)||(ge=$e["$[]"](se.racc_state["$[]"](-1)))):ge=$e["$[]"](se.racc_state["$[]"](-1));m(ge=se.$_racc_evalact(ge,re)););}).$$s=L,C.$$arity=0,C))},G.$$arity=2),e.def(s,"$yyparse",o=function(re,ee){return this.$__send__(i(y,"Racc_YY_Parse_Method"),re,ee,this.$_racc_setup(),!0)},o.$$arity=2),e.def(s,"$_racc_yyparse_rb",_=function(re,ee,u,q){var C,O,$e=t,be=t,ne=t,ie=t,ge=t,de=t,Te=t;return C=e.to_ary(u),$e=null==C[0]?t:C[0],be=null==C[1]?t:C[1],ne=null==C[2]?t:C[2],ie=null==C[3]?t:C[3],ge=null==C[10]?t:C[10],this.$_racc_init_sysvars(),de=t,Te=t,H(this,"catch",["racc_end_parse"],((O=function(){var Re,ke=null==O.$$s?this:O.$$s;for(null==ke.racc_state&&(ke.racc_state=t);!m(Te=ie["$[]"](ke.racc_state["$[]"](-1)));)for(;m(de=ke.$_racc_evalact(ne["$[]"](ke.racc_state["$[]"](-1)),u)););return H(re,"__send__",[ee],((Re=function(ze,Le){var We,Ue,Se=null==Re.$$s?this:Re.$$s,qe=t,Ge=t,je=t,He=t,ce=t,W=t,le=t;for(null==Se.racc_t&&(Se.racc_t=t),null==Se.racc_state&&(Se.racc_state=t),null==Se.racc_read_next&&(Se.racc_read_next=t),null==ze&&(ze=t),null==Le&&(Le=t),Se.racc_t=m(ze)?m(qe=ge["$[]"](ze))?qe:1:0,Se.racc_val=Le,Se.racc_read_next=!1,Te=E(Te,Se.racc_t),m(m(We=m(Ue=r(Te,0))?de=$e["$[]"](Te):Ue)?be["$[]"](Te)["$=="](Se.racc_state["$[]"](-1)):We)||(de=ne["$[]"](Se.racc_state["$[]"](-1)));m(de=Se.$_racc_evalact(de,u)););for(;m(m(Ge=m(je=(Te=ie["$[]"](Se.racc_state["$[]"](-1)))["$!"]())?je:Se.racc_read_next["$!"]())?Ge:Se.racc_t["$=="](0));)for(m(m(He=m(ce=m(W=m(le=Te)?Te=E(Te,Se.racc_t):le)?r(Te,0):W)?de=$e["$[]"](Te):ce)?be["$[]"](Te)["$=="](Se.racc_state["$[]"](-1)):He)||(de=ne["$[]"](Se.racc_state["$[]"](-1)));m(de=Se.$_racc_evalact(de,u)););}).$$s=ke,Re.$$arity=2,Re))}).$$s=this,O.$$arity=0,O))},_.$$arity=4),e.def(s,"$_racc_evalact",l=function(re,ee){var u,C,ne,ve,L=this,O=t,te=t,be=t,ie=t,ge=t,de=t,Te=t,se=t,ke=t,Ce=t;if(O=null==(u=e.to_ary(ee))[0]?t:u[0],te=null==u[1]?t:u[1],be=null==u[3]?t:u[3],ne=null==u[11]?t:u[11],ie=null==u[12]?t:u[12],m(m(ve=D(re,0))?Y(re,ne):ve))m(D(L.racc_error_status,0))&&(L.racc_t["$=="](1)||(L.racc_error_status=J(L.racc_error_status,1))),L.racc_vstack.$push(L.racc_val),L.racc_state.$push(re),L.racc_read_next=!0,m(L.yydebug)&&(L.racc_tstack.$push(L.racc_t),L.$racc_shift(L.racc_t,L.racc_tstack,L.racc_vstack));else if(m(m(ge=Y(re,0))?D(re,ie["$-@"]()):ge)){if(de=H(L,"catch",["racc_jump"],((C=function(){var Re=null==C.$$s?this:C.$$s;return null==Re.racc_state&&(Re.racc_state=t),Re.racc_state.$push(Re.$_racc_do_reduce(ee,re)),!1}).$$s=L,C.$$arity=0,C)),m(de)){if(1["$==="](Te=de))return L.racc_user_yyerror=!0,ie["$-@"]();if(2["$==="](Te))return ne;L.$raise("[Racc Bug] unknown jump code")}}else if(re["$=="](ne))m(L.yydebug)&&L.$racc_accept(),L.$throw("racc_end_parse",L.racc_vstack["$[]"](0));else{if(re["$=="](ie["$-@"]())){for((0)["$==="](Te=L.racc_error_status)?m(ee["$[]"](21))||L.$on_error(L.racc_t,L.racc_val,L.racc_vstack):3["$==="](Te)&&(L.racc_t["$=="](0)&&L.$throw("racc_end_parse",t),L.racc_read_next=!0),L.racc_user_yyerror=!1,L.racc_error_status=3;m(!0)&&(!m(se=be["$[]"](L.racc_state["$[]"](-1)))||(se=E(se,1),!m(m(ke=m(Ce=r(se,0))?re=O["$[]"](se):Ce)?te["$[]"](se)["$=="](L.racc_state["$[]"](-1)):ke)));)m(c(L.racc_state.$size(),1))&&L.$throw("racc_end_parse",t),L.racc_state.$pop(),L.racc_vstack.$pop(),m(L.yydebug)&&(L.racc_tstack.$pop(),L.$racc_e_pop(L.racc_state,L.racc_tstack,L.racc_vstack));return re}L.$raise("[Racc Bug] unknown action "+re.$inspect())}return m(L.yydebug)&&L.$racc_next_state(L.racc_state["$[]"](-1),L.racc_state),t},l.$$arity=2),e.def(s,"$_racc_do_reduce",T=function(re,ee){var u,ne,ve,Ce,Ae,Re,Se,C=this,O=t,te=t,$e=t,be=t,ie=t,ge=t,de=t,Te=t,se=t,ke=t,Ie=t,ze=t,Le=t,Fe=t,Ne=t,qe=t;return O=null==(u=e.to_ary(re))[4]?t:u[4],te=null==u[5]?t:u[5],$e=null==u[6]?t:u[6],be=null==u[7]?t:u[7],ne=null==u[8]?t:u[8],ie=null==u[9]?t:u[9],ve=null==u[13]?t:u[13],ge=C.racc_state,de=C.racc_vstack,Te=C.racc_tstack,se=function(U,k){return"number"==typeof U?-3*U:U["$*"](-3)}(ee),ke=ie["$[]"](se),Ce=ie["$[]"](E(se,1)),Ae=ie["$[]"](E(se,2)),Re=[],m(C.yydebug)&&(Ie=Te["$[]"](ke["$-@"](),ke)),ze=de["$[]"](ke["$-@"](),ke),m(C.yydebug)&&(Le=[ke["$-@"](),ke,Re],H(Te,"[]=",e.to_a(Le)),J(Le.length,1)),Le=[ke["$-@"](),ke,Re],H(de,"[]=",e.to_a(Le)),J(Le.length,1),Le=[ke["$-@"](),ke,Re],H(ge,"[]=",e.to_a(Le)),J(Le.length,1),m(ve)?de.$push(C.$__send__(Ae,ze,de,ze["$[]"](0))):de.$push(C.$__send__(Ae,ze,de)),Te.$push(Ce),m(C.yydebug)&&C.$racc_reduce(Ie,Ce,Te,de),Se=J(Ce,ne),m(se=be["$[]"](Se))&&(se=E(se,ge["$[]"](-1)),m(m(Fe=m(Ne=r(se,0))?qe=O["$[]"](se):Ne)?te["$[]"](se)["$=="](Se):Fe))?qe:$e["$[]"](Se)},T.$$arity=2),e.def(s,"$on_error",f=function(re,ee,u){var C,q=this;return q.$raise(i(y,"ParseError"),q.$sprintf("\nparse error on value %s (%s)",ee.$inspect(),m(C=q.$token_to_str(re))?C:"?"))},f.$$arity=3),e.def(s,"$yyerror",x=function(){return this.$throw("racc_jump",1)},x.$$arity=0),e.def(s,"$yyaccept",a=function(){return this.$throw("racc_jump",2)},a.$$arity=0),e.def(s,"$yyerrok",p=function(){return this.racc_error_status=0},p.$$arity=0),e.def(s,"$racc_read_token",j=function(re,ee,u){var q=this;return q.racc_debug_out.$print("read    "),q.racc_debug_out.$print(ee.$inspect(),"(",q.$racc_token2str(re),") "),q.racc_debug_out.$puts(u.$inspect()),q.racc_debug_out.$puts()},j.$$arity=3),e.def(s,"$racc_shift",Z=function(re,ee,u){var q=this;return q.racc_debug_out.$puts("shift   "+q.$racc_token2str(re)),q.$racc_print_stacks(ee,u),q.racc_debug_out.$puts()},Z.$$arity=3),e.def(s,"$racc_reduce",Q=function(re,ee,u,q){var C,L=this,O=t;return(O=L.racc_debug_out).$print("reduce "),m(re["$empty?"]())?O.$print(" <none>"):H(re,"each",[],((C=function($e){return null==$e&&($e=t),O.$print(" ",(null==C.$$s?this:C.$$s).$racc_token2str($e))}).$$s=L,C.$$arity=1,C)),O.$puts(" --\x3e "+L.$racc_token2str(ee)),L.$racc_print_stacks(u,q),L.racc_debug_out.$puts()},Q.$$arity=4),e.def(s,"$racc_accept",ae=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},ae.$$arity=0),e.def(s,"$racc_e_pop",ue=function(re,ee,u){var q=this;return q.racc_debug_out.$puts("error recovering mode: pop token"),q.$racc_print_states(re),q.$racc_print_stacks(ee,u),q.racc_debug_out.$puts()},ue.$$arity=3),e.def(s,"$racc_next_state",ye=function(re,ee){var u=this;return u.racc_debug_out.$puts("goto    "+re),u.$racc_print_states(ee),u.racc_debug_out.$puts()},ye.$$arity=2),e.def(s,"$racc_print_stacks",De=function(re,ee){var u,C=t;return(C=this.racc_debug_out).$print("        ["),H(re,"each_index",[],((u=function(O){return null==O&&(O=t),C.$print(" (",(null==u.$$s?this:u.$$s).$racc_token2str(re["$[]"](O))," ",ee["$[]"](O).$inspect(),")")}).$$s=this,u.$$arity=1,u)),C.$puts(" ]")},De.$$arity=2),e.def(s,"$racc_print_states",Pe=function(re){var ee,q=t;return(q=this.racc_debug_out).$print("        ["),H(re,"each",[],((ee=function(L){return null==L&&(L=t),q.$print(" ",L)}).$$s=this,ee.$$arity=1,ee)),q.$puts(" ]")},Pe.$$arity=1),e.def(s,"$racc_token2str",Me=function(re){var u;return m(u=z(this.$class(),"Racc_token_to_s_table")["$[]"](re))?u:this.$raise("[Racc Bug] can't convert token "+re+" to string")},Me.$$arity=1),e.def(s,"$token_to_str",Be=function(re){return z(this.$class(),"Racc_token_to_s_table")["$[]"](re)},Be.$$arity=1)}(B[0],B)},Opal.modules["bcdice/arithmetic/node"]=function(e){function Y(B,t){return"number"==typeof B&&"number"==typeof t?B/t:B["$/"](t)}var t,V,U,I,M,b,s,y,P,h,R,g,n,v,K,S,i,E=[],r=e.nil,D=e.$$$,c=e.$$,F=e.module,$=e.klass,d=e.send2;return t=E,V=i=[F(E[0],"BCDice")].concat(t),U=S=[F(i[0],"Arithmetic")].concat(V),function(I,M,b){var s,y,P,h,R,n=$(I,null,"BinaryOp");[n].concat(b),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",s=function(w,G,o){var _=this;return _.lhs=w,_.op=G,_.rhs=o},s.$$arity=3),e.def(n,"$eval",y=function(w){var _,G=this,o=r;return o=G.lhs.$eval(w),_=G.rhs.$eval(w),o.$send(G.op,_)},y.$$arity=1),e.def(n,"$output",P=function(){var w=this;return""+w.lhs.$output()+w.op+w.rhs.$output()},P.$$arity=0),e.def(n,"$s_exp",h=function(){var w=this;return"("+w.$op_for_s_exp()+" "+w.lhs.$s_exp()+" "+w.rhs.$s_exp()+")"},h.$$arity=0),e.def(n,"$op_for_s_exp",R=function(){return this.op},R.$$arity=0)}((K=[F(S[0],"Node")].concat(U))[0],0,K),I=K[0],M=c(K,"BinaryOp"),b=K,n=$(I,M,"DivideBase"),v=[n].concat(b),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",s=function(G,o){return s.$$p&&(s.$$p=null),d(this,e.find_super_dispatcher(this,"initialize",s,!1,!0),"initialize",[G,"/",o],null)},s.$$arity=2),e.def(n,"$eval",y=function(G){var _,o=this,l=r;return _=o.lhs.$eval(G),(l=o.rhs.$eval(G))["$=="](0)&&o.$raise(c(v,"ZeroDivisionError")),o.$divide_and_round(_,l,G)},y.$$arity=1),e.def(n,"$output",P=function(){var G=P.$$p,_=this,l=r,T=r,f=r;for(G&&(P.$$p=null),T=0,f=arguments.length,l=new Array(f);T<f;T++)l[T]=arguments[T];return""+d(_,e.find_super_dispatcher(_,"output",P,!1,!0),"output",l,G)+_.$rounding_method()},P.$$arity=0),n.$private(),e.def(n,"$rounding_method",h=function(){return D(this.$class(),"ROUNDING_METHOD")},h.$$arity=0),e.def(n,"$op_for_s_exp",R=function(){return""+this.op+this.$rounding_method()},R.$$arity=0),e.def(n,"$divide_and_round",g=function(G,o,_){return this.$raise(c(v,"NotImplementedError"))},g.$$arity=3),function(I,M,b){var s,n=$(I,M,"DivideWithGameSystemDefault"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD",""),n.$private(),e.def(n,"$divide_and_round",s=function(P,h,R){var w;return w=R,D(c(v,"RoundType"),"CEIL")["$==="](w)?Y(P.$to_f(),h).$ceil():D(c(v,"RoundType"),"ROUND")["$==="](w)?Y(P.$to_f(),h).$round():Y(P,h).$to_i()},s.$$arity=3)}(K[0],c(K,"DivideBase"),K),function(I,M,b){var s,n=$(I,M,"DivideWithCeil"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","C"),n.$private(),e.def(n,"$divide_and_round",s=function(P,h,R){return Y(P.$to_f(),h).$ceil()},s.$$arity=3)}(K[0],c(K,"DivideBase"),K),function(I,M,b){var s,n=$(I,M,"DivideWithRound"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","R"),n.$private(),e.def(n,"$divide_and_round",s=function(P,h,R){return Y(P.$to_f(),h).$round()},s.$$arity=3)}(K[0],c(K,"DivideBase"),K),function(I,M,b){var s,n=$(I,M,"DivideWithFloor"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","F"),n.$private(),e.def(n,"$divide_and_round",s=function(P,h,R){return Y(P,h).$to_i()},s.$$arity=3)}(K[0],c(K,"DivideBase"),K),function(I,M,b){var s,y,P,h,n=$(I,null,"Negative");[n].concat(b),n.$$prototype.body=r,e.def(n,"$initialize",s=function(g){return this.body=g},s.$$arity=1),e.def(n,"$eval",y=function(g){return this.body.$eval(g)["$-@"]()},y.$$arity=1),e.def(n,"$output",P=function(){return"-"+this.body.$output()},P.$$arity=0),e.def(n,"$s_exp",h=function(){return"(- "+this.body.$s_exp()+")"},h.$$arity=0)}(K[0],0,K),function(I,M,b){var s,y,P,h,n=$(I,null,"Parenthesis");[n].concat(b),n.$$prototype.expr=r,e.def(n,"$initialize",s=function(g){return this.expr=g},s.$$arity=1),e.def(n,"$eval",y=function(g){return this.expr.$eval(g)},y.$$arity=1),e.def(n,"$output",P=function(){return"("+this.expr.$output()+")"},P.$$arity=0),e.def(n,"$s_exp",h=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},h.$$arity=0)}(K[0],0,K),void function(I,M,b){var s,y,P,n=$(I,null,"Number");[n].concat(b),n.$$prototype.value=r,e.def(n,"$initialize",s=function(R){return this.value=R},s.$$arity=1),e.def(n,"$eval",y=function(R){return this.value},y.$$arity=1),e.def(n,"$output",P=function(){return this.value.$to_s()},P.$$arity=0),e.alias(n,"s_exp","output")}(K[0],0,K)},Opal.modules.strscan=function(e){var z,V,m,S,H,U,k,K,I,M,b,n,v,s,y,P,h,R,g,w,G,o,_,l,T,f,i,A,E=[],r=e.nil,c=e.$$,$=e.truthy,d=e.send;return z=E,i=(0,e.klass)(E[0],null,"StringScanner"),A=[i].concat(z),i.$$prototype.pos=i.$$prototype.string=i.$$prototype.working=i.$$prototype.matched=i.$$prototype.prev_pos=i.$$prototype.match=r,i.$attr_reader("pos"),i.$attr_reader("matched"),e.def(i,"$initialize",V=function(a){var p=this;return p.string=a,p.pos=0,p.matched=r,p.working=a,p.match=[]},V.$$arity=1),i.$attr_reader("string"),e.def(i,"$beginning_of_line?",m=function(){var a=this;return 0===a.pos||"\n"===a.string.charAt(a.pos-1)},m.$$arity=0),e.alias(i,"bol?","beginning_of_line?"),e.def(i,"$scan",S=function(a){var p=this,j=(a=p.$anchor(a)).exec(p.working);return null==j?p.matched=r:"object"==typeof j?(p.prev_pos=p.pos,p.pos+=j[0].length,p.working=p.working.substring(j[0].length),p.matched=j[0],p.match=j,j[0]):"string"==typeof j?(p.pos+=j.length,p.working=p.working.substring(j.length),j):r},S.$$arity=1),e.def(i,"$scan_until",H=function(a){var p=this;a=p.$anchor(a);for(var Q,j=p.pos,Z=p.working;;){if(Q=a.exec(Z),j+=1,Z=Z.substr(1),null!=Q)return p.matched=p.string.substr(p.pos,j-p.pos-1+Q[0].length),p.match=Q,p.prev_pos=j-1,p.pos=j,p.working=Z.substr(Q[0].length),p.matched;if(0===Z.length)return p.match=[],p.matched=r}},H.$$arity=1),e.def(i,"$[]",U=function(a){var j;if($(this.match["$empty?"]()))return r;j=a,c(A,"Symbol")["$==="](j)?a=a.$to_s():c(A,"String")["$==="](j)||(a=c(A,"Opal")["$coerce_to!"](a,c(A,"Integer"),"to_int"));var Z=this.match;return a<0&&(a+=Z.length),a<0||a>=Z.length||null==Z[a]?r:Z[a]},U.$$arity=1),e.def(i,"$check",k=function(a){var p=this,j=(a=p.$anchor(a)).exec(p.working);return p.matched=null==j?r:j[0]},k.$$arity=1),e.def(i,"$check_until",K=function(a){var p=this,j=p.prev_pos,Z=p.pos,Q=p.$scan_until(a);return Q!==r&&(p.matched=Q.substr(-1),p.working=p.string.substr(Z)),p.prev_pos=j,p.pos=Z,Q},K.$$arity=1),e.def(i,"$peek",I=function(a){return this.working.substring(0,a)},I.$$arity=1),e.def(i,"$eos?",M=function(){return 0===this.working.length},M.$$arity=0),e.def(i,"$exist?",b=function(a){var j=a.exec(this.working);return null==j?r:0==j.index?0:j.index+1},b.$$arity=1),e.def(i,"$skip",n=function(a){var p=this,j=(a=p.$anchor(a)).exec(p.working);if(null==j)return p.match=[],p.matched=r;var Z=j[0],Q=Z.length;return p.matched=Z,p.match=j,p.prev_pos=p.pos,p.pos+=Q,p.working=p.working.substring(Q),Q},n.$$arity=1),e.def(i,"$skip_until",v=function(a){var j=this.$scan_until(a);return j===r?r:(this.matched=j.substr(-1),j.length)},v.$$arity=1),e.def(i,"$get_byte",s=function(){var a=this,p=r;return a.pos<a.string.length?(a.prev_pos=a.pos,a.pos+=1,p=a.matched=a.working.substring(0,1),a.working=a.working.substring(1)):a.matched=r,p},s.$$arity=0),e.alias(i,"getch","get_byte"),e.def(i,"$match?",y=function(a){var p=this,j=(a=p.$anchor(a)).exec(p.working);return null==j?r:(p.prev_pos=p.pos,j[0].length)},y.$$arity=1),e.def(i,"$pos=",P=function(a){var p=this;return a<0&&(a+=p.string.$length()),p.pos=a,p.working=p.string.slice(a)},P.$$arity=1),e.def(i,"$matched_size",h=function(){return this.matched===r?r:this.matched.length},h.$$arity=0),e.def(i,"$post_match",R=function(){var a=this;return a.matched===r?r:a.string.substr(a.pos)},R.$$arity=0),e.def(i,"$pre_match",g=function(){var a=this;return a.matched===r?r:a.string.substr(0,a.prev_pos)},g.$$arity=0),e.def(i,"$reset",w=function(){var a=this;return a.working=a.string,a.matched=r,a.pos=0},w.$$arity=0),e.def(i,"$rest",G=function(){return this.working},G.$$arity=0),e.def(i,"$rest?",o=function(){return 0!==this.working.length},o.$$arity=0),e.def(i,"$rest_size",_=function(){return this.$rest().$size()},_.$$arity=0),e.def(i,"$terminate",l=function(){var p,a=this;return a.match=r,p=[a.string.$length()],d(a,"pos=",e.to_a(p)),p[function(B,t){return"number"==typeof B?B-1:B["$-"](1)}(p.length)]},l.$$arity=0),e.def(i,"$unscan",T=function(){var a=this;return a.pos=a.prev_pos,a.prev_pos=r,a.match=r,a},T.$$arity=0),i.$private(),e.def(i,"$anchor",f=function(a){var j=a.toString().match(/\/([^\/]+)$/);return j=j?j[1]:void 0,new RegExp("^(?:"+a.source+")",j)},f.$$arity=1),r&&"anchor"},Opal.modules["bcdice/normalize"]=function(e){var z,V,m,i,$,B,J=[],E=e.nil,c=e.module;return $=J,z=B=[c(J[0],"BCDice")].concat($),[i=c(B[0],"Normalize")].concat(z),i.$module_function(),e.def(i,"$comparison_operator",V=function(H){var k;return/<=|=</["$==="](k=H)?"<=":/>=|=>/["$==="](k)?">=":/<>|!=|=!/["$==="](k)?"!=":/</["$==="](k)?"<":/>/["$==="](k)?">":/=/["$==="](k)?"==":E},V.$$arity=1),void e.def(i,"$target_number",m=function(H){return H["$=="]("?")?H:H.$to_i()},m.$$arity=1)},Opal.modules["bcdice/command/lexer"]=function(e){var z,m,K,b,n,v,I,M,H,A,Y=e.top,J=[],E=e.nil,D=e.$$,c=e.module,F=e.klass,$=e.hash2,d=e.truthy,B=e.send;return Y.$require("strscan"),Y.$require("bcdice/normalize"),z=J,m=A=[c(J[0],"BCDice")].concat(z),K=H=[c(A[0],"Command")].concat(m),I=F(H[0],null,"Lexer"),M=[I].concat(K),I.$$prototype.scanner=I.$$prototype.notations=E,e.const_set(M[0],"SYMBOLS",$(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(I,"$initialize",b=function(y,P){var h,R,g,G,w=this;return y=d(G=(R=(h=y)===E||null==h?E:B(h,"split",[" ",2]))===E||null==R?E:B(R,"first",[]))?G:"",w.scanner=D(M,"StringScanner").$new(y),w.notations=B(P,"map",[],((g=function(o){function _(l){return o.apply(this,arguments)}return _.toString=function(){return o.toString()},_}(function(o){return null==o&&(o=E),d(o["$is_a?"](D(M,"String")))?D(M,"Regexp").$new(o):o})).$$s=w,g.$$arity=1,g))},b.$$arity=2),e.def(I,"$next_token",n=function(){try{var y,P=this,h=E,R=E,w=E,G=E;return d(P.scanner["$eos?"]())?[!1,"$"]:(B(P.notations,"each",[],((y=function(_){var T,l=null==y.$$s?this:y.$$s;if(null==l.scanner&&(l.scanner=E),null==_&&(_=E),T=l.scanner.$scan(_),!d(T))return E;e.ret(["NOTATION",T])}).$$s=P,y.$$arity=1,y)),d(h=P.scanner.$scan(/\d+/))?["NUMBER",h.$to_i()]:d(R=P.scanner.$scan(/[<>!=]+/))?(R=D(M,"Normalize").$comparison_operator(R),[d(R)?"CMP_OP":"ILLEGAL",R]):(w=P.scanner.$getch().$upcase(),[d(G=D(M,"SYMBOLS")["$[]"](w))?G:w.$to_sym(),w]))}catch(o){if(o===e.returner)return o.$v;throw o}},n.$$arity=0),void e.def(I,"$source",v=function(){return this.scanner.$string()},v.$$arity=0)},Opal.modules["bcdice/command/parsed"]=function(e){var B,A,U,I,M,b,k,K,m,z,J=[],E=e.nil,D=e.$$,c=e.module,F=e.klass,$=e.truthy;return B=J,A=z=[c(J[0],"BCDice")].concat(B),U=m=[c(z[0],"Command")].concat(A),k=F(m[0],null,"Parsed"),K=[k].concat(U),k.$$prototype.question_target=k.$$prototype.critical=k.$$prototype.fumble=k.$$prototype.dollar=k.$$prototype.modify_number=k.$$prototype.target_number=k.$$prototype.prefix_number=k.$$prototype.command=k.$$prototype.suffix_number=k.$$prototype.cmp_op=E,k.$attr_accessor("command"),k.$attr_accessor("prefix_number"),k.$attr_accessor("suffix_number"),k.$attr_accessor("critical"),k.$attr_accessor("fumble"),k.$attr_accessor("dollar"),k.$attr_accessor("modify_number"),k.$attr_accessor("cmp_op"),k.$attr_accessor("target_number"),k.$attr_writer("question_target"),e.def(k,"$initialize",I=function(){var v=this;return v.prefix_number=E,v.suffix_number=E,v.critical=E,v.fumble=E,v.dollar=E,v.cmp_op=E,v.target_number=E,v.question_target=!1},I.$$arity=0),e.def(k,"$question_target?",M=function(){return this.question_target},M.$$arity=0),void e.def(k,"$to_s",b=function(v){var w,s=this,y=E,P=E,h=E,R=E,g=E;return null==v&&(v="after_command"),y=$(s.critical)?"@"+s.critical:E,P=$(s.fumble)?"#"+s.fumble:E,h=$(s.dollar)?"$"+s.dollar:E,R=D(K,"Format").$modifier(s.modify_number),g=$(s.question_target)?"?":s.target_number,"after_command"["$==="](w=v)?[s.prefix_number,s.command,s.suffix_number,y,P,h,R,s.cmp_op,g].$join():"after_modify_number"["$==="](w)?[s.prefix_number,s.command,s.suffix_number,R,y,P,h,s.cmp_op,g].$join():"after_target_number"["$==="](w)?[s.prefix_number,s.command,s.suffix_number,R,s.cmp_op,g,y,P,h].$join():E},b.$$arity=-1)},Opal.modules["bcdice/command/parser"]=function(e){function Y(A,V){return"number"==typeof A&&"number"==typeof V?A-V:A["$-"](V)}var V,U,I,M,b,s,y,P,h,R,g,w,G,o,_,l,T,f,x,a,p,j,Z,Q,ae,ue,ye,De,Pe,Me,Be,me,re,ee,u,q,C,L,O,te,$e,be,ne,ie,ve,ge,de,Te,se,ke,Ce,Ae,Re,Ie,ze,Le,Se,Fe,Ne,qe,Ge,n,v,K,S,J=e.top,E=[],r=e.nil,D=e.$$$,c=e.$$,F=e.klass,$=e.module,d=e.hash2,B=e.send2,t=e.send,z=e.hash,i=e.truthy;return J.$require("racc/parser.rb"),J.$require("bcdice/arithmetic/node"),J.$require("bcdice/command/lexer"),J.$require("bcdice/command/parsed"),function(A,V,m){[F(A,V,"Parser")].concat(m)}(D(c(E,"BCDice"),"Command"),D(c(E,"Racc"),"Parser"),E),V=E,U=S=[$(E[0],"BCDice")].concat(V),I=(K=[$(S[0],"Command")].concat(U))[0],M=D(c(K,"Racc"),"Parser"),b=K,n=F(I,M,"Parser"),v=[n].concat(b),n.$$prototype.notations=n.$$prototype.lexer=n.$$prototype.modifier=n.$$prototype.prefix_number=n.$$prototype.suffix_number=n.$$prototype.need_suffix_number=n.$$prototype.need_prefix_number=n.$$prototype.critical=n.$$prototype.fumble=n.$$prototype.dollar=n.$$prototype.allowed_cmp_op=n.$$prototype.question_target=r,e.def(n,"$initialize",s=function(W,le){var X,N,_e,xe,pe=s.$$p,fe=this;if(pe&&(s.$$p=null),X=e.slice.call(arguments,0,arguments.length),null==(N=e.extract_kwargs(X)))N=d([],{});else if(!N.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(_e=X,!e.hasOwnProperty.call(N.$$smap,"round_type"))throw e.ArgumentError.$new("missing keyword: round_type");return xe=N.$$smap.round_type,B(fe,e.find_super_dispatcher(fe,"initialize",s,!1,!0),"initialize",[],null),fe.notations=_e,fe.round_type=xe,fe.prefix_number=!1,fe.suffix_number=!1,fe.need_prefix_number=!1,fe.need_suffix_number=!1,fe.modifier=!0,fe.critical=!1,fe.fumble=!1,fe.dollar=!1,fe.allowed_cmp_op=[r,">=",">","<=","<","==","!="],fe.question_target=!1},s.$$arity=-2),e.def(n,"$disable_modifier",y=function(){return this.modifier=!1,this},y.$$arity=0),e.def(n,"$enable_prefix_number",P=function(){return this.prefix_number=!0,this},P.$$arity=0),e.def(n,"$enable_suffix_number",h=function(){return this.suffix_number=!0,this},h.$$arity=0),e.def(n,"$has_prefix_number",R=function(){var W=this;return W.prefix_number=!0,W.need_prefix_number=!0,W},R.$$arity=0),e.def(n,"$has_suffix_number",g=function(){var W=this;return W.suffix_number=!0,W.need_suffix_number=!0,W},g.$$arity=0),e.def(n,"$enable_critical",w=function(){return this.critical=!0,this},w.$$arity=0),e.def(n,"$enable_fumble",G=function(){return this.fumble=!0,this},G.$$arity=0),e.def(n,"$enable_dollar",o=function(){return this.dollar=!0,this},o.$$arity=0),e.def(n,"$restrict_cmp_op_to",_=function(W){var le,N=this;return le=e.slice.call(arguments,0,arguments.length),N.allowed_cmp_op=le,N},_.$$arity=-1),e.def(n,"$enable_question_target",l=function(){return this.question_target=!0,this},l.$$arity=0),e.def(n,"$parse",T=function(W){try{return this.lexer=c(v,"Lexer").$new(W,this.notations),this.$do_parse()}catch(X){if(!e.rescue(X,[c(v,"ParseError"),c(v,"ZeroDivisionError")]))throw X;try{return r}finally{e.pop_exception()}}},T.$$arity=1),n.$private(),e.def(n,"$parsed",f=function(W,le,X,N){var _e;return t(c(v,"Parsed").$new(),"tap",[],((_e=function(he){var we,Ee,Ke,Xe,Ye,Ve,fe=null==_e.$$s?this:_e.$$s,oe=r;return null==fe.round_type&&(fe.round_type=r),null==he&&(he=r),oe=[W["$[]"]("command")],t(he,"command=",e.to_a(oe)),Y(oe.length,1),oe=[(we=W["$[]"]("prefix"),we===r||null==we?r:t(we,"eval",[fe.round_type]))],t(he,"prefix_number=",e.to_a(oe)),Y(oe.length,1),oe=[(Ee=W["$[]"]("suffix"),Ee===r||null==Ee?r:t(Ee,"eval",[fe.round_type]))],t(he,"suffix_number=",e.to_a(oe)),Y(oe.length,1),oe=[(Ke=le["$[]"]("critical"),Ke===r||null==Ke?r:t(Ke,"eval",[fe.round_type]))],t(he,"critical=",e.to_a(oe)),Y(oe.length,1),oe=[(Xe=le["$[]"]("fumble"),Xe===r||null==Xe?r:t(Xe,"eval",[fe.round_type]))],t(he,"fumble=",e.to_a(oe)),Y(oe.length,1),oe=[(Ye=le["$[]"]("dollar"),Ye===r||null==Ye?r:t(Ye,"eval",[fe.round_type]))],t(he,"dollar=",e.to_a(oe)),Y(oe.length,1),oe=[X.$eval(fe.round_type)],t(he,"modify_number=",e.to_a(oe)),Y(oe.length,1),oe=[N["$[]"]("cmp_op")],t(he,"cmp_op=",e.to_a(oe)),Y(oe.length,1),N["$[]"]("target")["$=="]("?")?(t(he,"question_target=",e.to_a(oe=[!0])),Y(oe.length,1),t(he,"target_number=",e.to_a(oe=[0])),oe[Y(oe.length,1)]):(t(he,"question_target=",e.to_a(oe=[!1])),Y(oe.length,1),oe=[(Ve=N["$[]"]("target"),Ve===r||null==Ve?r:t(Ve,"eval",[fe.round_type]))],t(he,"target_number=",e.to_a(oe)),oe[Y(oe.length,1)])}).$$s=this,_e.$$arity=1,_e))},f.$$arity=4),e.def(n,"$next_token",x=function(){return this.lexer.$next_token()},x.$$arity=0),Ae=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,33,34,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,r,r,17,18,6,r,5,r,r,17,18,r,r,5,23,24,25,26,56,54,55,57],Re=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,r,17,15,15,18,18,23,r,18,30,30,23,23,24,r,23,31,31,24,24,25,r,24,44,44,25,25,28,r,25,47,47,28,28,29,r,28,48,48,29,29,33,r,29,49,49,33,33,34,r,33,50,50,34,34,36,r,34,r,r,36,36,37,r,36,r,r,37,37,r,r,37,27,27,27,27,52,52,52,52],Ie=[-2,4,16,-3,-1,11,r,33,13,35,23,30,1,r,28,40,r,37,44,r,r,-2,r,51,58,65,0,106,72,79,47,54,r,86,93,r,100,107,r,r,r,r,r,r,63,r,r,68,75,82,89,r,120,r,r,r,r,r],ze=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],Le=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,r,r,21,47,48,40,51,52,49,50,44,46,3,r,r,r,13,r,r,r,r,r,r,r,32],Se=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,r,r,4,8,8,5,7,7,8,8,9,5,6,r,r,r,6,r,r,r,r,r,r,r,6],Fe=[r,6,13,3,9,-1,27,-15,-10,-1,-38],Ne=[r,r,r,r,r,r,19,16,15,r,r],qe=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],Ge=z(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),e.const_set(v[0],"Racc_arg",[Ae,Re,ze,Ie,Le,Se,Ne,Fe,19,qe,Ge,58,35,!0]),e.const_set(v[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),e.const_set(v[0],"Racc_debug_parser",!1),e.def(n,"$_reduce_1",a=function(W,le,X){var N;return i(this.modifier)||this.$raise(c(v,"ParseError")),N=e.to_ary(W),this.$parsed(null==N[0]?r:N[0],null==N[1]?r:N[1],null==N[2]?r:N[2],null==N[3]?r:N[3])},a.$$arity=3),e.def(n,"$_reduce_2",p=function(W,le,X){var N;return i(this.modifier)||this.$raise(c(v,"ParseError")),N=e.to_ary(W),this.$parsed(null==N[0]?r:N[0],null==N[2]?r:N[2],null==N[1]?r:N[1],null==N[3]?r:N[3])},p.$$arity=3),e.def(n,"$_reduce_3",j=function(W,le,X){var N,fe;return fe=null==(N=e.to_ary(W))[2]?r:N[2],this.$parsed(null==N[0]?r:N[0],null==N[1]?r:N[1],D(D(c(v,"Arithmetic"),"Node"),"Number").$new(0),fe)},j.$$arity=3),e.def(n,"$_reduce_4",Z=function(W,le,X){var _e,N=this;return i(i(_e=N.prefix_number)?N.suffix_number:_e)||N.$raise(c(v,"ParseError")),d(["command","prefix","suffix"],{command:W["$[]"](1),prefix:W["$[]"](0),suffix:W["$[]"](2)})},Z.$$arity=3),e.def(n,"$_reduce_5",Q=function(W,le,X){var N=this;return i(N.prefix_number)||N.$raise(c(v,"ParseError")),i(N.need_suffix_number)&&N.$raise(c(v,"ParseError")),d(["command","prefix"],{command:W["$[]"](1),prefix:W["$[]"](0)})},Q.$$arity=3),e.def(n,"$_reduce_6",ae=function(W,le,X){var N=this;return i(N.suffix_number)||N.$raise(c(v,"ParseError")),i(N.need_prefix_number)&&N.$raise(c(v,"ParseError")),d(["command","suffix"],{command:W["$[]"](0),suffix:W["$[]"](1)})},ae.$$arity=3),e.def(n,"$_reduce_7",ue=function(W,le,X){var _e,N=this;return i(i(_e=N.need_prefix_number)?_e:N.need_suffix_number)&&N.$raise(c(v,"ParseError")),d(["command"],{command:W["$[]"](0)})},ue.$$arity=3),e.def(n,"$_reduce_8",ye=function(W,le,X){return d([],{})},ye.$$arity=3),e.def(n,"$_reduce_9",De=function(W,le,X){var N,fe,Ee,we,pe=r;return pe=null==(N=e.to_ary(W))[0]?r:N[0],fe=null==N[2]?r:N[2],i(i(we=this.critical)?pe["$[]"]("critical")["$nil?"]():we)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Ee=["critical",fe])),Y(Ee.length,1),pe},De.$$arity=3),e.def(n,"$_reduce_10",Pe=function(W,le,X){var N,fe,Ee,we,pe=r;return pe=null==(N=e.to_ary(W))[0]?r:N[0],fe=null==N[2]?r:N[2],i(i(we=this.fumble)?pe["$[]"]("fumble")["$nil?"]():we)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Ee=["fumble",fe])),Y(Ee.length,1),pe},Pe.$$arity=3),e.def(n,"$_reduce_11",Me=function(W,le,X){var N,fe,Ee,we,pe=r;return pe=null==(N=e.to_ary(W))[0]?r:N[0],fe=null==N[2]?r:N[2],i(i(we=this.dollar)?pe["$[]"]("dollar")["$nil?"]():we)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Ee=["dollar",fe])),Y(Ee.length,1),pe},Me.$$arity=3),e.def(n,"$_reduce_12",Be=function(W,le,X){return W["$[]"](1)},Be.$$arity=3),e.def(n,"$_reduce_13",me=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"Negative").$new(W["$[]"](1))},me.$$arity=3),e.def(n,"$_reduce_14",re=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"+",W["$[]"](2))},re.$$arity=3),e.def(n,"$_reduce_15",ee=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"-",W["$[]"](2))},ee.$$arity=3),e.def(n,"$_reduce_16",u=function(W,le,X){return i(this.allowed_cmp_op["$include?"](r))||this.$raise(c(v,"ParseError")),d([],{})},u.$$arity=3),e.def(n,"$_reduce_17",q=function(W,le,X){var N,pe,he;return he=null==(N=e.to_ary(W))[1]?r:N[1],i(this.allowed_cmp_op["$include?"](pe=null==N[0]?r:N[0]))||this.$raise(c(v,"ParseError")),d(["cmp_op","target"],{cmp_op:pe,target:he})},q.$$arity=3),e.def(n,"$_reduce_18",C=function(W,le,X){var _e,N=this;return _e=W["$[]"](0),i(N.question_target)||N.$raise(c(v,"ParseError")),i(N.allowed_cmp_op["$include?"](_e))||N.$raise(c(v,"ParseError")),d(["cmp_op","target"],{cmp_op:_e,target:"?"})},C.$$arity=3),e.def(n,"$_reduce_19",L=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"+",W["$[]"](2))},L.$$arity=3),e.def(n,"$_reduce_20",O=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"-",W["$[]"](2))},O.$$arity=3),e.def(n,"$_reduce_22",te=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"*",W["$[]"](2))},te.$$arity=3),e.def(n,"$_reduce_23",$e=function(W,le,X){return W["$[]"](3).$new(W["$[]"](0),W["$[]"](2))},$e.$$arity=3),e.def(n,"$_reduce_25",be=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},be.$$arity=3),e.def(n,"$_reduce_26",ne=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"DivideWithCeil")},ne.$$arity=3),e.def(n,"$_reduce_27",ie=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"DivideWithCeil")},ie.$$arity=3),e.def(n,"$_reduce_28",ve=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"DivideWithRound")},ve.$$arity=3),e.def(n,"$_reduce_29",ge=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"DivideWithFloor")},ge.$$arity=3),e.def(n,"$_reduce_30",de=function(W,le,X){return W["$[]"](1)},de.$$arity=3),e.def(n,"$_reduce_31",Te=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"Negative").$new(W["$[]"](1))},Te.$$arity=3),e.def(n,"$_reduce_33",se=function(W,le,X){return W["$[]"](1)},se.$$arity=3),e.def(n,"$_reduce_34",ke=function(W,le,X){return D(D(c(v,"Arithmetic"),"Node"),"Number").$new(W["$[]"](0))},ke.$$arity=3),void e.def(n,"$_reduce_none",Ce=function(W,le,X){return W["$[]"](0)},Ce.$$arity=3)},Opal.modules["bcdice/deprecated/checker"]=function(e){var B,A,H,K,I,M,b,n,v,U,k,m,z,J=[],E=e.nil,D=e.$$,c=e.module,F=e.send,$=e.truthy;return B=J,A=z=[c(J[0],"BCDice")].concat(B),H=m=[c(z[0],"Deprecated")].concat(A),U=c(m[0],"Checker"),k=[U].concat(H),U.$private(),e.def(U,"$check_result_legacy",K=function(y,P,h,R){var o,T,g=this,w=E,G=E,_=E,l=E,f=E;return w=F(P,"map",[],"sides".$to_proc()),o=(G=F(P,"map",[],"value".$to_proc())).$sum(),_=[100]["$==="](l=w)?g.$check_1D100(y,o,h,R):[20]["$==="](l)?g.$check_1D20(y,o,h,R):[6,6]["$==="](l)?g.$check_2D6(y,o,G,h,R):E,$($(T=_["$nil?"]())?T:_["$empty?"]())&&(l=w.$uniq(),_=[10]["$==="](l)?g.$check_nD10(y,o,G,h,R):[6]["$==="](l)?g.$check_nD6(y,o,G,h,R):E,$($(f=_["$nil?"]())?f:_["$empty?"]()))?E:D(k,"Result").$new(_.$delete_prefix(" \uff1e "))},K.$$arity=4),e.def(U,"$check_1D100",I=function(y,P,h,R){return E},I.$$arity=4),e.def(U,"$check_1D20",M=function(y,P,h,R){return E},M.$$arity=4),e.def(U,"$check_nD10",b=function(y,P,h,R,g){return E},b.$$arity=5),e.def(U,"$check_2D6",n=function(y,P,h,R,g){return E},n.$$arity=5),void e.def(U,"$check_nD6",v=function(y,P,h,R,g){return E},v.$$arity=5)},Opal.modules["bcdice/base"]=function(e){function Y(S,H){return"number"==typeof S&&"number"==typeof H?S+H:S["$+"](H)}function J(S,H){return"number"==typeof S&&"number"==typeof H?S-H:S["$-"](H)}var H,M,v,s,y,P,h,R,g,w,G,o,_,l,T,f,x,a,p,j,Z,Q,ae,ue,ye,De,Pe,Me,Be,me,re,ee,C,L,O,te,$e,q,b,n,k,c=e.top,F=[],$=e.nil,d=e.$$$,B=e.$$,t=e.module,z=e.klass,i=e.truthy,A=e.send,V=e.range,m=$;return c.$require("i18n"),c.$require("i18n/backend/fallbacks"),c.$require("bcdice/randomizer"),c.$require("bcdice/dice_table"),c.$require("bcdice/enum"),c.$require("bcdice/translate"),c.$require("bcdice/result"),c.$require("bcdice/command/parser"),c.$require("bcdice/deprecated/checker"),H=F,M=k=[t(F[0],"BCDice")].concat(H),b=z(k[0],null,"Base"),n=[b].concat(M),b.$$prototype.sort_add_dice=b.$$prototype.sort_barabara_dice=b.$$prototype.enabled_d9=b.$$prototype.raw_input=b.$$prototype.randomizer=b.$$prototype.enabled_upcase_input=b.$$prototype.debug=$,ee=e.get_singleton_class(b),q=[ee].concat(n),ee.$attr_reader("prefixes"),e.def(ee,"$register_prefix",C=function(ne){var ve,ge=this,de=$;return null==ge.prefixes&&(ge.prefixes=$),ve=e.slice.call(arguments,0,arguments.length),ge.prefixes=i(de=ge.prefixes)?de:[],ge.prefixes.$concat(ve.$flatten())},C.$$arity=-1),e.def(ee,"$register_prefix_from_super_class",L=function(){return this.$register_prefix(this.$superclass().$prefixes())},L.$$arity=0),e.def(ee,"$prefixes_pattern",O=function(){var ie,ne=this,ve=$;return null==ne.prefixes_pattern&&(ne.prefixes_pattern=$),null==ne.prefixes&&(ne.prefixes=$),ne.prefixes_pattern=i(ie=ne.prefixes_pattern)?ie:$,i(ne.prefixes_pattern)?ne.prefixes_pattern:(ne.prefixes=i(ve=ne.prefixes)?ve:[],ne.prefixes.$freeze(),ne.prefixes_pattern=(i(ne.prefixes["$empty?"]())?/(?!)/:e.regexp(["^(S)?(",ne.prefixes.$join("|"),")"],"i")).$freeze())},O.$$arity=0),e.def(ee,"$command_pattern",te=function(){var ne,ve,ie=this,ge=$,de=$;return null==ie.command_pattern&&(ie.command_pattern=$),null==ie.prefixes&&(ie.prefixes=$),ie.command_pattern=i(ve=ie.command_pattern)?ve:$,i(ie.command_pattern)?ie.command_pattern:(ie.prefixes=i(ge=ie.prefixes)?ge:[],ie.prefixes.$freeze(),de=Y(A(d(B(q,"CommonCommand"),"COMMANDS"),"map",[],((ne=function(se){return null==se&&(se=$),d(se,"PREFIX_PATTERN").$source()}).$$s=ie,ne.$$arity=1,ne)),ie.prefixes),ie.command_pattern=e.regexp(["^S?(",de.$join("|"),")"],"i").$freeze())},te.$$arity=0),e.def(ee,"$eval",$e=function(ne){return this.$new(ne).$eval()},$e.$$arity=1),b.$include(B(n,"Translate")),b.$include(d(B(n,"Deprecated"),"Checker")),e.def(b,"$initialize",v=function(u){var q=this;return q.raw_input=u,q.sort_add_dice=!1,q.sort_barabara_dice=!1,q.d66_sort_type=d(B(n,"D66SortType"),"NO_SORT"),q.enabled_d9=!1,q.round_type=d(B(n,"RoundType"),"FLOOR"),q.sides_implicit_d=6,q.upper_dice_reroll_threshold=$,q.reroll_dice_reroll_threshold=$,q.default_cmp_op=$,q.default_target_number=$,q.enabled_upcase_input=!0,q.locale="ja_jp",q.randomizer=d(B(n,"BCDice"),"Randomizer").$new(),q.debug=!1},v.$$arity=1),b.$attr_accessor("randomizer"),b.$attr_reader("d66_sort_type"),b.$attr_reader("round_type"),b.$attr_reader("sides_implicit_d"),b.$attr_reader("upper_dice_reroll_threshold"),b.$attr_reader("reroll_dice_reroll_threshold"),b.$attr_reader("default_cmp_op"),b.$attr_reader("default_target_number"),e.def(b,"$sort_add_dice?",s=function(){return this.sort_add_dice},s.$$arity=0),e.def(b,"$sort_barabara_dice?",y=function(){return this.sort_barabara_dice},y.$$arity=0),e.def(b,"$enabled_d9?",P=function(){return this.enabled_d9},P.$$arity=0),e.def(b,"$enable_debug",h=function(){return this.debug=!0},h.$$arity=0),e.def(b,"$eval",R=function(){var q,C,L,u=this,O=$;return q=d(B(n,"BCDice"),"Preprocessor").$process(u.raw_input,u),C=i(L=u.$dice_command(q))?L:u.$eval_common_command(u.raw_input),i(C)?(O=[u.randomizer.$rand_results()],A(C,"rands=",e.to_a(O)),J(O.length,1),O=[u.randomizer.$detailed_rand_results()],A(C,"detailed_rands=",e.to_a(O)),J(O.length,1),C):$},R.$$arity=0),e.def(b,"$change_text",g=function(u){return u},g.$$arity=1),e.def(b,"$check_result",w=function(u,q,C,L){var O=this,te=$,$e=$,be=$,ne=$,ie=$;return te=O.$check_result_legacy(u,q,C,L),i(te)?te:($e=A(q,"map",[],"sides".$to_proc()),ne=(be=A(q,"map",[],"value".$to_proc())).$sum(),(te=[100]["$==="](ie=$e)?O.$result_1d100(u,ne,C,L):[20]["$==="](ie)?O.$result_1d20(u,ne,C,L):[6,6]["$==="](ie)?O.$result_2d6(u,ne,be,C,L):$)["$=="](B(n,"Result").$nothing())?$:i(te)?te:(ie=$e.$uniq(),(te=[10]["$==="](ie)?O.$result_nd10(u,ne,be,C,L):[6]["$==="](ie)?O.$result_nd6(u,ne,be,C,L):$)["$=="](B(n,"Result").$nothing())?$:i(te)?te:O.$result_ndx(u,C,L)))},w.$$arity=4),e.def(b,"$grich_text",G=function(u,q,C){return $},G.$$arity=3),b.$private(),e.def(b,"$eval_common_command",o=function(u){try{var q;return u=this.$change_text(u),A(d(B(n,"CommonCommand"),"COMMANDS"),"each",[],((q=function(O){var $e,te=null==q.$$s?this:q.$$s;if(null==te.randomizer&&(te.randomizer=$),null==O&&(O=$),$e=O.$eval(u,te,te.randomizer),!i($e))return $;e.ret($e)}).$$s=this,q.$$arity=1,q)),$}catch(L){if(L===e.returner)return L.$v;throw L}},o.$$arity=1),e.def(b,"$dice_command",_=function(u){var q,C=this,L=$,O=$,te=$,$e=$,be=$,ne=$,ie=$;return i(C.enabled_upcase_input)&&(u=u.$upcase()),L=C.$class().$prefixes_pattern().$match(u),i(L)?(O=L["$[]"](1)["$nil?"]()["$!"](),i(O)&&(u=u["$[]"](V(1,-1,!1))),te=C.$eval_game_system_specific_command(u),i(te["$is_a?"](B(n,"Result")))?($e=[i(be=te["$secret?"]())?be:O],A(te,"secret=",e.to_a($e)),J($e.length,1),te):i(i(ne=i(ie=te["$nil?"]())?ie:te["$empty?"]())?ne:te["$=="]("1"))?$:A(B(n,"Result").$new(),"tap",[],((q=function(ge){return null==ge&&(ge=$),$e=[te.$to_s()],A(ge,"text=",e.to_a($e)),J($e.length,1),A(ge,"secret=",e.to_a($e=[O])),$e[J($e.length,1)]}).$$s=C,q.$$arity=1,q))):$},_.$$arity=1),e.def(b,"$eval_game_system_specific_command",l=function(u){return $},l.$$arity=1),e.def(b,"$result_ndx",T=function(u,q,C){return i(C["$is_a?"](B(n,"String")))?$:i(u.$send(q,C))?B(n,"Result").$success(this.$translate("success")):B(n,"Result").$failure(this.$translate("failure"))},T.$$arity=3),e.def(b,"$result_1d100",f=function(u,q,C,L){return $},f.$$arity=4),e.def(b,"$result_1d20",x=function(u,q,C,L){return $},x.$$arity=4),e.def(b,"$result_nd10",a=function(u,q,C,L,O){return $},a.$$arity=5),e.def(b,"$result_2d6",p=function(u,q,C,L,O){return $},p.$$arity=5),e.def(b,"$result_nd6",j=function(u,q,C,L,O){return $},j.$$arity=5),e.def(b,"$get_table_by_2d6",Z=function(u){return this.$get_table_by_nD6(u,2)},Z.$$arity=1),e.def(b,"$get_table_by_1d6",Q=function(u){return this.$get_table_by_nD6(u,1)},Q.$$arity=1),e.def(b,"$get_table_by_nD6",ae=function(u,q){return this.$get_table_by_nDx(u,q,6)},ae.$$arity=2),e.def(b,"$get_table_by_nDx",ue=function(u,q,C){var O,te=$;return O=this.randomizer.$roll_sum(q,C),te=this.$get_table_value(u["$[]"](J(O,q))),i(te["$nil?"]())?["1",0]:[te,O]},ue.$$arity=3),e.def(b,"$get_table_by_1d3",ye=function(u){var L,O,q=this,te=$;return q.$debug("get_table_by_1d3"),L=q.randomizer.$roll_sum(1,6),q.$debug("num",L),O=function(S,H){return"number"==typeof S?S/2:S["$/"](2)}(J(L,1)).$to_i(),q.$debug("index",O),te=u["$[]"](O),i(te["$nil?"]())?["1",0]:[te,L]},ye.$$arity=1),e.def(b,"$get_table_by_d66_swap",De=function(u){var C;return C=this.randomizer.$roll_d66(d(B(n,"D66SortType"),"ASC")),[this.$get_table_by_number(C,u),C]},De.$$arity=1),e.def(b,"$get_table_by_d66",Pe=function(u){var C,L,O,$e,te=$;return C=this.randomizer.$roll_once(6),L=this.randomizer.$roll_once(6),O=Y(function(S,H){return"number"==typeof S?6*S:S["$*"](6)}(J(C,1)),J(L,1)),te=u["$[]"](O),$e=""+C+L,i(te["$nil?"]())?["1",$e]:[te,$e]},Pe.$$arity=1),e.def(b,"$get_table_by_number",Me=function(u,q,C){try{var L;return null==C&&(C="1"),A(q,"each",[],((L=function($e){var ne,be=null==L.$$s?this:L.$$s;if(null==$e&&($e=$),ne=$e["$[]"](0),!i(function(S,H){return"number"==typeof S&&"number"==typeof H?S>=H:S["$>="](H)}(ne,u)))return $;e.ret(be.$get_table_value($e["$[]"](1)))}).$$s=this,L.$$arity=1,L)),this.$get_table_value(C)}catch(te){if(te===e.returner)return te.$v;throw te}},Me.$$arity=-3),e.def(b,"$get_table_value",Be=function(u){return i(u["$is_a?"](B(n,"Proc")))?u.$call():u},Be.$$arity=1),e.def(b,"$roll_tables",me=function(u,q){var L=$;return L=q["$[]"](u),i(L)?L.$roll(this.randomizer).$to_s():$},me.$$arity=2),e.def(b,"$debug",re=function(u,q){var L,O,te=this,$e=$,be=$;return L=e.slice.call(arguments,1,arguments.length),i(te.debug)?($e=i(u["$is_a?"](B(n,"String")))?u:u.$inspect(),i(L["$empty?"]())?te.$warn($e):(be=A(L,"map",[],((O=function(ie){return null==ie&&(ie=$),i(ie["$is_a?"](B(n,"String")))?'"'+ie+'"':ie.$inspect()}).$$s=te,O.$$arity=1,O)),te.$warn($e+": "+be.$join(", ")))):$},re.$$arity=-2),d(d(B(F,"I18n"),"Backend"),"Simple").$include(d(d(B(F,"I18n"),"Backend"),"Fallbacks")),B(F,"I18n").$load_path()["$<<"](B(F,"Dir")["$[]"](B(F,"File").$join(c.$__dir__(),"../../i18n/**/*.yml"))),m=["ja_jp"],A(B(F,"I18n"),"default_locale=",e.to_a(m)),J(m.length,1),m=[["ja_jp"]],A(B(F,"I18n").$fallbacks(),"defaults=",e.to_a(m)),m[J(m.length,1)]},Opal.modules["bcdice/game_system/MagicaLogia"]=function(e){function Y(m,S){return"number"==typeof m&&"number"==typeof S?m<=S:m["$<="](S)}function J(m,S){return"number"==typeof m&&"number"==typeof S?m>=S:m["$>="](S)}function E(m,S){return"number"==typeof m&&"number"==typeof S?m+S:m["$+"](S)}function r(m,S){return"number"==typeof m&&"number"==typeof S?m-S:m["$-"](S)}var S,K,b,n,v,P,h,R,g,o,T,f,x,a,p,_,l,s,y,M,U,c=[],F=e.nil,$=e.$$$,d=e.$$,B=e.module,t=e.klass,z=e.send2,i=e.truthy,A=e.send,V=e.hash2;return e.top.$require("bcdice/base"),S=c,K=U=[B(c[0],"BCDice")].concat(S),b=(M=[B(U[0],"GameSystem")].concat(K))[0],n=d(M,"Base"),v=M,s=t(b,n,"MagicaLogia"),y=[s].concat(v),s.$$prototype.randomizer=F,e.const_set(y[0],"ID","MagicaLogia"),e.const_set(y[0],"NAME","\u30de\u30ae\u30ab\u30ed\u30ae\u30a2"),e.const_set(y[0],"SORT_KEY","\u307e\u304d\u304b\u308d\u304d\u3042"),e.const_set(y[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u30b9\u30da\u30b7\u30e3\u30eb\uff0f\u30d5\u30a1\u30f3\u30d6\u30eb\uff0f\u6210\u529f\uff0f\u5931\u6557\u3092\u5224\u5b9a\n\u30fb\u5404\u7a2e\u8868\n\u7d4c\u6b74\u8868\u3000BGT/\u521d\u671f\u30a2\u30f3\u30ab\u30fc\u8868\u3000DAT/\u904b\u547d\u5c5e\u6027\u8868\u3000FAT\n\u9858\u3044\u8868\u3000WIT/\u30d7\u30e9\u30a4\u30ba\u8868\u3000PT\n\u6642\u306e\u6d41\u308c\u8868\u3000TPT/\u5927\u5224\u6642\u306e\u6d41\u308c\u8868\u3000TPTB\n\u4e8b\u4ef6\u8868\u3000AT\n\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000FT\uff0f\u5909\u8abf\u8868\u3000WT\n\u904b\u547d\u5909\u8ee2\u8868\u3000FCT\n\u3000\u5178\u578b\u7684\u707d\u5384 TCT\uff0f\u7269\u7406\u7684\u707d\u5384 PCT\uff0f\u7cbe\u795e\u7684\u707d\u5384 MCT\uff0f\u72c2\u6c17\u7684\u707d\u5384 ICT\n\u3000\u793e\u4f1a\u7684\u707d\u5384 SCT\uff0f\u8d85\u5e38\u7684\u707d\u5384 XCT\uff0f\u4e0d\u601d\u8b70\u7cfb\u707d\u5384 WCT\uff0f\u30b3\u30df\u30ab\u30eb\u7cfb\u707d\u5384 CCT\n\u3000\u9b54\u6cd5\u4f7f\u3044\u306e\u707d\u5384 MGCT\n\u30b7\u30fc\u30f3\u8868\u3000ST\uff0f\u5927\u5224\u30b7\u30fc\u30f3\u8868\u3000STB\n\u3000\u6975\u9650\u74b0\u5883 XEST\uff0f\u5185\u9762\u4e16\u754c IWST\uff0f\u9b54\u6cd5\u90fd\u5e02 MCST\n\u3000\u6b7b\u5f8c\u4e16\u754c WDST\uff0f\u8ff7\u5bae\u4e16\u754c LWST\n\u3000\u9b54\u6cd5\u66f8\u67b6 MBST\uff0f\u9b54\u6cd5\u5b66\u9662 MAST\uff0f\u30af\u30ec\u30c9\u306e\u5854 TCST\n\u3000\u4e26\u884c\u4e16\u754c PWST\uff0f\u7d42\u672b\u3000\u3000 PAST\uff0f\u7570\u4e16\u754c\u9152\u5834 GBST\n\u3000\u307b\u3057\u304b\u3052 SLST\uff0f\u65e7\u56f3\u66f8\u9928 OLST\n\u4e16\u754c\u6cd5\u5247\u8ffd\u52a0\u8868 WLAT/\u3055\u307e\u3088\u3046\u602a\u7269\u8868 WMT\n\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868\u3000RCT\n\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868\u3000RTT\n\u3000\u661f\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTS, RTT1\n\u3000\u7363\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTB, RTT2\n\u3000\u529b\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTF, RTT3\n\u3000\u6b4c\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTP, RTT4\n\u3000\u5922\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTD, RTT5\n\u3000\u95c7\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTN, RTT6\n\u30d6\u30e9\u30f3\u30af\u79d8\u5bc6\u8868\u3000BST/\n\u3000\u5bbf\u6575\u8868\u3000MIT/\u8b00\u7565\u8868\u3000MOT/\u56e0\u7e01\u8868\u3000MAT\n\u3000\u5947\u4eba\u8868\u3000MUT/\u529b\u5834\u8868\u3000MFT/\u540c\u76df\u8868\u3000MLT\n\u843d\u82b1\u8868\u3000FFT\n\u305d\u306e\u5f8c\u8868 FLT\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),e.def(s,"$initialize",P=function(G){var l=this;return P.$$p&&(P.$$p=null),z(l,e.find_super_dispatcher(l,"initialize",P,!1,!0),"initialize",[G],null),l.sort_add_dice=!0,l.sort_barabara_dice=!0,l.d66_sort_type=$(d(y,"D66SortType"),"ASC")},P.$$arity=1),e.def(s,"$result_2d6",h=function(G,o,_,l,T){var f=this,x=F,a=F;return T["$=="]("?")||!l["$=="](">=")?F:(a=[E((x=i(Y(o,2))?d(y,"Result").$fumble(f.$translate("fumble")):i(J(o,12))?d(y,"Result").$critical(f.$translate("MagicaLogia.special")):i(J(G,T))?d(y,"Result").$success(f.$translate("success")):d(y,"Result").$failure(f.$translate("failure"))).$text(),f.$gain_magic_element(_["$[]"](0),_["$[]"](1)))],A(x,"text=",e.to_a(a)),r(a.length,1),x)},h.$$arity=5),e.def(s,"$eval_game_system_specific_command",R=function(G){var _,o=this;return i(_=$(o.$class(),"SKILL_TABLE").$roll_command(o.randomizer,G))?_:o.$roll_tables(G,$(o.$class(),"TABLES"))},R.$$arity=1),s.$private(),e.def(s,"$gain_magic_element",g=function(G,o){var _=this,l=F;return G["$=="](o)?(l=_.$translate("MagicaLogia.elements.items")["$[]"](r(G,1)),E(" \uff1e ",_.$format(_.$translate("MagicaLogia.elements.format"),V(["text"],{text:l})))):""},g.$$arity=2),o=y,_=t(y[0],null,"SkillExpandTable"),l=[_].concat(o),_.$$prototype.times=_.$$prototype.sides=_.$$prototype.items=_.$$prototype.name=_.$$prototype.skill_table=F,e.defs(_,"$from_i18n",T=function(Z,Q,ae){var ye=F;return ye=d(l,"I18n").$t(Z,V(["locale","raise"],{locale:Q,raise:!1})),this.$new(ye["$[]"]("name"),ye["$[]"]("type"),ye["$[]"]("items"),ae)},T.$$arity=3),e.def(_,"$initialize",f=function(Z,Q,ae,ue){var ye=this,De=F;return ye.name=Z,ye.items=ae.$freeze(),ye.skill_table=ue,De=/(\d+)D(\d+)/i.$match(Q),i(De)||ye.$raise(d(l,"ArgumentError"),"Unexpected table type: "+Q),ye.times=De["$[]"](1).$to_i(),ye.sides=De["$[]"](2).$to_i()},f.$$arity=4),e.def(_,"$roll",x=function(Z){var ae,ue,Q=this;return ae=Z.$roll_sum(Q.times,Q.sides),ue=Q.$expand(Q.items["$[]"](r(ae,Q.times)),Z),$(d(l,"DiceTable"),"RollResult").$new(Q.name,ae,ue)},x.$$arity=1),_.$private(),e.def(_,"$expand",a=function(Z,Q){var ae;return A(Z,"gsub",[/%{([a-z]+)}/],((ae=function(){var Me,De=null==ae.$$s?this:ae.$$s;return Me=d(l,"Regexp").$last_match()["$[]"](1).$to_sym(),De.$roll_skill(Me,Q)}).$$s=this,ae.$$arity=0,ae))},a.$$arity=2),e.const_set(l[0],"CATEGORIES",["star","beast","force","poem","dream","night"].$freeze()),e.def(_,"$roll_skill",p=function(Z,Q){var ue=F;return Z["$=="]("skill")?this.skill_table.$roll_skill(Q):Z["$=="]("element")?this.skill_table.$roll_category(Q):(ue=d(l,"CATEGORIES").$index(Z),i(ue)||this.$raise(d(l,"ArgumentError")),this.skill_table.$categories()["$[]"](ue).$roll(Q).$name())},p.$$arity=2),function(w,G,o){var T,f,x,_=t(w,null,"FallenAfterTable"),l=[_].concat(o);_.$$prototype.lower=_.$$prototype.higher=_.$$prototype.name=F,e.defs(_,"$from_i18n",T=function(p,j){var Q=F;return Q=d(l,"I18n").$t(p,V(["locale","raise"],{locale:j,raise:!0})),this.$new(Q["$[]"]("name"),Q["$[]"]("items_lower"),Q["$[]"]("items_higher"))},T.$$arity=2),e.def(_,"$initialize",f=function(p,j,Z){var Q=this;return Q.name=p,Q.lower=j,Q.higher=Z},f.$$arity=3),e.def(_,"$roll",x=function(p){var j,Z,ae,ue,Q=this,ye=F;return Z=p.$roll_barabara(2,6),ue=null==(j=e.to_ary(Z))[1]?F:j[1],ye=i(Y(ae=null==j[0]?F:j[0],3))?Q.lower:Q.higher,Q.name+"("+ae+","+ue+") \uff1e "+ye["$[]"](r(ue,1))},x.$$arity=1)}(y[0],0,y),function(w,G){var _,l,o=[w].concat(G);w.$private(),e.def(w,"$translate_skill_table",_=function(f){return $(d(o,"DiceTable"),"SaiFicSkillTable").$from_i18n("MagicaLogia.skill_table",f,V(["rttn"],{rttn:["RTS","RTB","RTF","RTP","RTD","RTN"]}))},_.$$arity=1),e.def(w,"$translate_tables",l=function(f,x){var p,j,Z,Q,ae,ue;return p=d(o,"SkillExpandTable").$from_i18n("MagicaLogia.inveterate_enemy_table",f,x),j=$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.conspiracy_table",f),Z=$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.fate_table",f),Q=$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.cueball_table",f),ae=$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.force_field_table",f),ue=d(o,"SkillExpandTable").$from_i18n("MagicaLogia.alliance_table",f,x),V(["TPT","ST","FT","WT","FCT","AT","BGT","DAT","FAT","WIT","TCT","PCT","MCT","ICT","SCT","XCT","WCT","CCT","MIT","MOT","MAT","MUT","MFT","MLT","BST","PT","XEST","IWST","MCST","WDST","LWST","STB","MGCT","MBST","MAST","TCST","PWST","PAST","GBST","SLST","WLAT","WMT","FFT","OLST","TPTB","FLT"],{TPT:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TPT",f,x),ST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.ST",f,x),FT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FT",f),WT:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WT",f,x),FCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FCT",f),AT:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.AT",f,x),BGT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.BGT",f),DAT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.DAT",f),FAT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FAT",f),WIT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WIT",f),TCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.TCT",f),PCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.PCT",f),MCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.MCT",f),ICT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.ICT",f),SCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.SCT",f),XCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.XCT",f),WCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WCT",f),CCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.CCT",f),MIT:p,MOT:j,MAT:Z,MUT:Q,MFT:ae,MLT:ue,BST:$(d(o,"DiceTable"),"ChainTable").$new(d(o,"I18n").$translate("MagicaLogia.tables.BST.name",V(["raise","locale"],{raise:!0,locale:f})),"1D6",[p,j,Z,Q,ae,ue]),PT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.PT",f),XEST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.XEST",f,x),IWST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.IWST",f,x),MCST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MCST",f,x),WDST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WDST",f,x),LWST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.LWST",f,x),STB:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.STB",f,x),MGCT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.MGCT",f),MBST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MBST",f,x),MAST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MAST",f,x),TCST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TCST",f,x),PWST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.PWST",f,x),PAST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.PAST",f,x),GBST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.GBST",f,x),SLST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.SLST",f,x),WLAT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WLAT",f),WMT:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WMT",f,x),FFT:$(d(o,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FFT",f),OLST:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.OLST",f,x),TPTB:d(o,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TPTB",f,x),FLT:d(o,"FallenAfterTable").$from_i18n("MagicaLogia.tables.FLT",f)})},l.$$arity=2)}(e.get_singleton_class(s),y),e.const_set(y[0],"SKILL_TABLE",s.$translate_skill_table("ja_jp")),e.const_set(y[0],"TABLES",s.$translate_tables("ja_jp",d(y,"SKILL_TABLE"))),s.$register_prefix(d(y,"SKILL_TABLE").$prefixes()),void s.$register_prefix(d(y,"TABLES").$keys())},J=[],D=(e=Opal).$$,c=e.module,F=e.klass,$=e.send2,e.top.$require("bcdice/game_system/MagicaLogia"),B=J,A=z=[c(J[0],"BCDice")].concat(B),U=m=[c(z[0],"GameSystem")].concat(A),K=[k=F(m[0],D(m,"MagicaLogia"),"MagicaLogia_SimplifiedChinese")].concat(U),e.const_set(K[0],"ID","MagicaLogia:SimplifiedChinese"),e.const_set(K[0],"NAME","\u9b54\u5bfc\u4e66\u5927\u6218"),e.const_set(K[0],"SORT_KEY","\u56fd\u969b\u5316:Simplified Chinese:\u9b54\u5bfc\u4e66\u5927\u6218"),e.const_set(K[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u53ef\u4ee5\u5224\u5b9a\u5927\u6210\u529f\uff0f\u5927\u5931\u8d25\uff0f\u6210\u529f\uff0f\u5931\u8d25\n\u30fb\u5404\u79cd\u8868\n\u7ecf\u5386\u8868\u3000BGT/\u521d\u671f\u951a\u70b9\u8868\u3000DAT/\u547d\u8fd0\u5c5e\u6027\u8868\u3000FAT\n\u613f\u671b\u8868\u3000WIT/\u6218\u5229\u54c1\u8868\u3000PT\n\u65f6\u95f4\u6d41\u901d\u8868\u3000TPT/\u5927\u5224\u65f6\u95f4\u6d41\u901d\u8868\u3000TPTB\n\u4e8b\u4ef6\u8868\u3000AT\n\u5927\u5931\u8d25\u8868\u3000FT\uff0f\u53d8\u8c03\u8868\u3000WT\n\u547d\u8fd0\u8f6c\u53d8\u8868\u8868\u3000FCT\n\u3000\u5178\u578b\u6027\u707e\u5384 TCT\uff0f\u7269\u7406\u6027\u707e\u5384 PCT\uff0f\u7cbe\u795e\u6027\u707e\u5384 MCT\uff0f\u72c2\u6c14\u6027\u707e\u5384 ICT\n\u3000\u793e\u4f1a\u6027\u707e\u5384 SCT\uff0f\u8d85\u81ea\u7136\u707e\u5384 XCT\uff0f\u4e0d\u53ef\u601d\u8bae\u7684\u707e\u5384 WCT\uff0f\u559c\u5267\u6027\u707e\u5384 CCT\n\u3000\u9b54\u6cd5\u4f7f\u7684\u707e\u5384 MGCT\n\u573a\u666f\u8868\u3000ST\uff0f\u5927\u5224\u573a\u666f\u8868\u3000STB\n\u3000\u6781\u9650\u73af\u5883 XEST\uff0f\u5185\u5fc3\u4e16\u754c IWST\uff0f\u9b54\u6cd5\u90fd\u5e02 MCST\n\u3000\u6b7b\u540e\u4e16\u754c WDST\uff0f\u8ff7\u5bab\u4e16\u754c LWST\n\u3000\u9b54\u6cd5\u4e66\u67b6 MBST\uff0f\u9b54\u6cd5\u5b66\u9662 MAST\uff0f\u514b\u96f7\u5fb7\u5854 TCST\n\u3000\u5e73\u884c\u4e16\u754c PWST\uff0f\u7ec8\u672b\u4e16\u754c PAST\uff0f\u5f02\u4e16\u754c\u9152\u5427 GBST\n\u3000\u661f\u5f71 SLST\uff0f\u65e7\u56fe\u4e66\u9986 OLST\n\u4e16\u754c\u6cd5\u5219\u8ffd\u52a0\u8868 WLAT/\u5f98\u5f8a\u602a\u7269\u8868 WMT\n\u968f\u673a\u9886\u57df\u8868\u3000RCT\n\u968f\u673a\u7279\u6280\u8868\u3000RTT\n\u3000\u661f\u9886\u57df\u968f\u673a\u7279\u6280\u8868  RTS, RTT1\n\u3000\u517d\u9886\u57df\u968f\u673a\u7279\u6280\u8868  RTB, RTT2\n\u3000\u529b\u9886\u57df\u968f\u673a\u7279\u6280\u8868  RTF, RTT3\n\u3000\u6b4c\u9886\u57df\u968f\u673a\u7279\u6280\u8868  RTP, RTT4\n\u3000\u68a6\u9886\u57df\u968f\u673a\u7279\u6280\u8868  RTD, RTT5\n\u3000\u6697\u9886\u57df\u968f\u673a\u7279\u6280\u8868  RTN, RTT6\n\u7a7a\u767d\u79d8\u5bc6\u8868\u3000BST\n\u3000\u5bbf\u654c\u8868\u3000MIT/\u8c0b\u7565\u8868\u3000MOT/\u56e0\u7f18\u8868\u3000MAT\n\u3000\u5947\u4eba\u8868\u3000MUT/\u529b\u573a\u8868\u3000MFT/\u540c\u76df\u8868\u3000MLT\n\u843d\u82b1\u8868\u3000FFT\n\u90a3\u4e4b\u540e\u8868 FLT\n\u30fb\u53ef\u4ee5\u4f7f\u7528D66\n"),k.$register_prefix_from_super_class(),e.def(k,"$initialize",I=function(b){var s=this;return I.$$p&&(I.$$p=null),$(s,e.find_super_dispatcher(s,"initialize",I,!1,!0),"initialize",[b],null),s.locale="zh_hans"},I.$$arity=1),e.const_set(K[0],"SKILL_TABLE",k.$translate_skill_table("zh_hans")),e.const_set(K[0],"TABLES",k.$translate_tables("zh_hans",D(K,"SKILL_TABLE")))}}]);