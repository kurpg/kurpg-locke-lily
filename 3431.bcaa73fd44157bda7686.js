(self.webpackChunkudonarium_lily=self.webpackChunkudonarium_lily||[]).push([[3431],{3431:function(me,ye,De){De(4656),function(i){function P(o,l){return"number"==typeof o&&"number"==typeof l?o+l:o["$+"](l)}function j(o,l){return"number"==typeof o&&"number"==typeof l?o/l:o["$/"](l)}function S(o,l){return"number"==typeof o&&"number"==typeof l?o-l:o["$-"](l)}function F(o,l){return"number"==typeof o&&"number"==typeof l?o*l:o["$*"](l)}var l,oe,_e,A,W,I,X,q,J,U,Q,Z,O,ee,te,re,t,D,u,a,d,r,n,g,x,N,V,G=[],e=i.nil,E=i.$$$,s=i.$$,L=i.module,K=i.klass,ie=i.send2,b=i.truthy,v=i.send,M=i.hash2;l=G,oe=V=[L(G[0],"BCDice")].concat(l),_e=N=[L(V[0],"GameSystem")].concat(oe),g=K(N[0],s(N,"Base"),"Dracurouge"),x=[g].concat(_e),g.$$prototype.randomizer=e,i.const_set(x[0],"ID","Dracurouge"),i.const_set(x[0],"NAME","\u30c9\u30e9\u30af\u30eb\u30fc\u30b8\u30e5"),i.const_set(x[0],"SORT_KEY","\u3068\u3089\u304f\u308b\u3046\u3057\u3086"),i.const_set(x[0],"HELP_MESSAGE","\u30fb\u884c\u3044\u5224\u5b9a\uff08DRx+y\uff09\n\u3000x\uff1a\u632f\u308b\u30b5\u30a4\u30b3\u30ed\u306e\u6570\uff08\u7701\u7565\u6642\uff14\uff09\u3001y\uff1a\u6e07\u304d\u4fee\u6b63\uff08\u7701\u7565\u6642\uff10\uff09\n\u3000\u4f8b\uff09 DR\u3000DR6\u3000DR+1\u3000DR5+2\n\u30fb\u6297\u3044\u5224\u5b9a\uff08DRRx\uff09\n\u3000x\uff1a\u632f\u308b\u30b5\u30a4\u30b3\u30ed\u306e\u6570\n\u3000\u4f8b\uff09 DRR3\n\u30fb\u539f\u98a8\u666f\u8868\uff08ST\uff09\u3001\u53d9\u52f2\u8868\uff08CO\uff09\u3001\u53d9\u52f2\u5f8c\u8868\uff08CA\uff09\u3001\u9065\u304b\u904e\u53bb\u8868\uff08EP\uff09\n\u3000\u539f\u7f6a\u8868\uff08OS\uff09\u3001\u53d7\u96e3\u8868\uff08PN\uff09\u3001\u8fd1\u6cc1\u8868\uff08RS\uff09\u3001\u5e73\u548c\u306a\u904e\u53bb\u8868\uff08PP\uff09\n\u30fb\u5815\u843d\u8868\uff08CTx\uff09 x\uff1a\u6e07\u304d \uff08\u4f8b\uff09 CT3\n\u30fb\u5815\u843d\u306e\u5146\u3057\u8868\uff08CS\uff09\u3001\u62e1\u5f35\u30fb\u5815\u843d\u306e\u5146\u3057\u8868\uff08ECS\uff09\n\u30fb\u7d46\u5185\u5bb9\u6c7a\u5b9a\u8868\uff08BT\uff09\n\u30fb\u53cd\u5fdc\u8868\uff08RTxy\uff09x\uff1a\u8840\u7d71\u3001y\uff1a\u9053\u3000xy\u7701\u7565\u3067\u4e00\u62ec\u8868\u793a\n\u3000\u8840\u7d71\u3000D\uff1a\u30c9\u30e9\u30af\u3001R\uff1a\u30ed\u30fc\u30bc\u30f3\u30d6\u30eb\u30af\u3001H\uff1a\u30d8\u30eb\u30ba\u30ac\u30eb\u30c9\u3001M\uff1a\u30c0\u30b9\u30c8\u30cf\u30a4\u30e0\n\u3000\u3000\u3000\u3000A\uff1a\u30a2\u30f4\u30a1\u30ed\u30fc\u30e0\u3000N\uff1a\u30ce\u30b9\u30d5\u30a7\u30e9\u30b9\u3001G\uff1a\u30b2\u30a4\u30ba\u30f4\u30a1\u30eb\u30c8\u3001K\uff1a\u30ab\u30a4\u30f3\u30b7\u30eb\u30c8\n\u3000\u9053\u3000F\uff1a\u9818\u4e3b\u3001G\uff1a\u8fd1\u885b\u3001R\uff1a\u904d\u6b74\u3001W\uff1a\u8ce2\u8005\u3001J\uff1a\u72e9\u4eba\u3001N\uff1a\u591c\u7363\n\u3000\u3000\u3000E\uff1a\u5c06\u8ecd\u3001B\uff1a\u50e7\u6b63\u3001H\uff1a\u7a7a\u99c6\u3001K\uff1a\u8239\u9577\u3001L\uff1a\u5bf5\u7ae5\u3001V\uff1a\u4ef2\u7acb\u3001U\uff1a\u6280\u5e2b\u3001D\uff1a\u535a\u58eb\n\u3000\u3000\u3000S\uff1a\u661f\u8aad\u3001G2\uff1a\u5f8c\u898b\n\u3000\u4f8b\uff09RT\uff08\u4e00\u62ec\u8868\u793a\uff09\u3001RTDF\uff08\u30c9\u30e9\u30af\u306e\u9818\u4e3b\uff09\u3001RTAG2\uff08\u30a2\u30f4\u30a1\u30ed\u30fc\u30e0\u306e\u5f8c\u898b\u4eba\uff09\n\u30fb\u7570\u7aef\u306e\u53cd\u5fdc\u8868\uff08HRTxy\uff09x\uff1a\u8840\u7d71\u3001y\uff1a\u9053\u3000xy\u7701\u7565\u3067\u4e00\u62ec\u8868\u793a\n\u3000\u8840\u7d71\u3000L\uff1a\u7570\u7aef\u537f\u3001V\uff1a\u30f4\u30eb\u30b3\u30e9\u30af\u3001N\uff1a\u30ca\u30cf\u30c4\u30a7\u30fc\u30e9\u3001K\uff1a\u30ab\u30eb\u30f3\u30b7\u30e5\u30bf\u30a4\u30f3\n\u3000\u3000\u3000\u3000G\uff1a\u30b0\u30ea\u30de\u30eb\u30ad\u30f3\u3001S\uff1a\u30b9\u30c8\u30ea\u30ac\u3001M\uff1a\u30e1\u30ea\u30e5\u30b8\u30fc\u30cc\u3001F\uff1a\u30d5\u30a9\u30fc\u30f3\n\u3000\u3000\u3000\u3000H\uff1a\u30db\u30e0\u30f3\u30af\u30eb\u30b9\u3001E\uff1a\u30a8\u30ca\u30e1\u30eb\u30e0\u3001S2\uff1a\u30b5\u30f3\u30b0\u30a3\u30ca\u30ea\u30a8\u3001A\uff1a\u30a2\u30fc\u30eb\u30f4\n\u3000\u3000\u3000\u3000V2\uff1a\u30f4\u30a3\u30fc\u30f4\u30eb\u3001L2\uff1a\u30eb\u30fc\u30ac\u30eb\u30fc\u3001A2\uff1a\u30a2\u30eb\u30e9\u30a6\u30cd\u3001F2\uff1a\u30d5\u30ea\u30c3\u30ac\n\u3000\u9053\u3000W\uff1a\u91ce\u4f0f\u3001N\uff1a\u6d41\u6d6a\u3001S\uff1a\u5bc6\u4f7f\u3001H\uff1a\u9b54\u5973\u3001F\uff1a\u5263\u58eb\u3001X\uff1a\u691c\u4f53\n\u3000\u4f8b\uff09HRT\uff08\u4e00\u62ec\u8868\u793a\uff09\u3001HRTVW\uff08\u30f4\u30eb\u30b3\u30e9\u30af\u306e\u91ce\u4f0f\uff09\u3001HRTF2X\uff08\u30d5\u30ea\u30c3\u30ac\u306e\u691c\u4f53\uff09\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),i.def(g,"$initialize",A=function($){var n=this;return A.$$p&&(A.$$p=null),ie(n,i.find_super_dispatcher(n,"initialize",A,!1,!0),"initialize",[$],null),n.d66_sort_type=E(s(x,"D66SortType"),"NO_SORT")},A.$$arity=1),i.def(g,"$eval_game_system_specific_command",W=function($){var r,n,D,u,a,t=this;return b(r=b(n=b(D=b(u=b(a=t.$roll_conduct_dice($))?a:t.$roll_resist_dice($))?u:t.$getReactionDiceCommandResult($))?D:t.$getHeresyReactionDiceCommandResult($))?n:t.$getCorruptionDiceCommandResult($))?r:t.$roll_tables($,E(t.$class(),"TABLES"))},W.$$arity=1),g.$private(),i.def(g,"$roll_conduct_dice",I=function($){var t,r=this,n=e,D=e,u=e,a=e,d=e,R=e,m=e;return n=/^DR(\d*[1-9])?(\+\d+)?$/.$match($),b(n)?(D=b(u=(t=n["$[]"](1))===e||null==t?e:v(t,"to_i",[]))?u:4,a=n["$[]"](2).$to_i(),d=r.randomizer.$roll_barabara(D,6).$sort(),R=r.$count_glory_dice(d),d=P(d,s(x,"Array").$new(R,10)),m=r.$apply_thirsty_point(d,a),["("+$+")",D+"D6"+s(x,"Format").$modifier(a),m,"[ "+d.$join(", ")+" ]"].$compact().$join(" \uff1e ")):e},I.$$arity=1),i.def(g,"$count_glory_dice",X=function($){var r,n;return r=$.$count(1),n=$.$count(6),P(j(r,2).$to_i(),j(n,2).$to_i())},X.$$arity=1),i.def(g,"$apply_thirsty_point",q=function($,t){var r,D=e,u=e,a=e;return t["$=="](0)?e:(a=[D=v($,"rindex",[],((r=function(R){return null==R&&(R=e),"number"==typeof(o=R)?o<=6:o["$<="](6);var o}).$$s=this,r.$$arity=1,r)),P((u=v($,"map",[],"to_s".$to_proc()))["$[]"](D),"+"+t)],v(u,"[]=",i.to_a(a)),S(a.length,1),a=[D,P($["$[]"](D),t)],v($,"[]=",i.to_a(a)),S(a.length,1),"[ "+u.$join(", ")+" ]")},q.$$arity=2),i.def(g,"$roll_resist_dice",J=function($){var r=e,n=e,D=e,u=e;return r=/^DRR(\d+)$/.$match($),b(r)?((n=r["$[]"](1).$to_i())["$=="](0)&&(n=4),u=(D=this.randomizer.$roll_barabara(n,6).$sort()).$sum(),"("+$+") \uff1e "+n+"D6 \uff1e [ "+D.$join(", ")+" ] \uff1e "+u):e},J.$$arity=1),i.def(g,"$getReactionDiceCommandResult",U=function($){var t=this,r=e,n=e,D=e,u=e,a=e;return b($["$=~"](/^RT((\w\d*)(\w\d*))?/))?(r=s(x,"Regexp").$last_match(2),n=s(x,"Regexp").$last_match(3),D=t.$translate("Dracurouge.RT.name"),u=t.$translate("Dracurouge.RT.blood"),a=t.$translate("Dracurouge.RT.style"),t.$getReactionText(D,r,n,u,a)):e},U.$$arity=1),i.def(g,"$getHeresyReactionDiceCommandResult",Q=function($){var t=this,r=e,n=e,D=e,u=e,a=e;return b($["$=~"](/^HRT((\w\d*)(\w\d*))?/))?(r=s(x,"Regexp").$last_match(2),n=s(x,"Regexp").$last_match(3),D=t.$translate("Dracurouge.HRT.name"),u=t.$translate("Dracurouge.HRT.blood"),a=t.$translate("Dracurouge.HRT.style"),t.$getReactionText(D,r,n,u,a)):e},Q.$$arity=1),i.def(g,"$getReactionText",Z=function($,t,r,n,D){var a,d,R,m,_,o,u=this,c=e,y=e,f=e,C=e;if(!b(u.$checkTypeText(t,n))||!b(u.$checkTypeText(r,D)))return e;if(R=""+(a=u.randomizer.$roll_once(6))+(d=u.randomizer.$roll_once(6)),m="number"==typeof(o=a)?o<4:o["$<"](4),c=b(m)?n:D,y=b(m)?t:r,_=P(S(d,1),F(b(m)?S(a,1):S(a,4),6)),u.$debug("index",_),b(y["$nil?"]()))f=u.$getReactionTextFull(c,_);else{if(C=c["$[]"](y.$to_sym()),b(C["$nil?"]()))return e;f=u.$getReactionTex(C,_)}return $+"("+R+") \uff1e "+f},Z.$$arity=5),i.def(g,"$checkTypeText",O=function($,t){return!!b($["$nil?"]())||t.$keys()["$include?"]($.$to_sym())},O.$$arity=2),i.def(g,"$getReactionTextFull",ee=function($,t){var r,D=e;return D=[],v($,"each_value",[],((r=function(a){return null==a&&(a=e),D["$<<"]((null==r.$$s?this:r.$$s).$getReactionTex(a,t))}).$$s=this,r.$$arity=1,r)),D.$join("\uff0f")},ee.$$arity=2),i.def(g,"$getReactionTex",te=function($,t){return $["$[]"]("name")+"\uff1a"+$["$[]"]("table")["$[]"](t)},te.$$arity=2),i.def(g,"$getCorruptionDiceCommandResult",re=function($){var t=this,r=e,n=e,D=e,u=e,a=e,d=e,R=e;return b($["$=~"](/^CT(\d+)$/))?(r=s(x,"Regexp").$last_match(1).$to_i(),n=t.$translate("Dracurouge.CT.name"),D=[[0,t.$translate("Dracurouge.CT.table.0")],[1,t.$translate("Dracurouge.CT.table.1")],[3,t.$translate("Dracurouge.CT.table.3")],[5,t.$translate("Dracurouge.CT.table.5")],[6,t.$translate("Dracurouge.CT.table.6")],[7,t.$translate("Dracurouge.CT.table.7")],[8,t.$translate("Dracurouge.CT.table.8")],[99,t.$translate("Dracurouge.CT.table.99")]],a=(u=t.randomizer.$roll_barabara(2,6)).$sum(),d=u.$join(","),R=S(a,r),t.$debug("index",R),"2D6["+d+"]-"+r+" \uff1e  "+n+"("+R+") \uff1e "+t.$get_table_by_number(R,D)):e},re.$$arity=1),t=x,r=K(x[0],null,"YearTable"),n=[r].concat(t),r.$$prototype.items=r.$$prototype.name=r.$$prototype.year_title=e,i.defs(r,"$from_i18n",D=function(m,c,y){var C,f=e;return C=(f=s(n,"I18n").$translate(m,M(["locale","raise"],{locale:c,raise:!0})))["$[]"]("items").$zip(y),this.$new(f["$[]"]("name"),f["$[]"]("year_title"),C)},D.$$arity=3),i.def(r,"$initialize",u=function(m,c,y){var _=this;return _.name=m,_.year_title=c,_.items=y.$freeze()},u.$$arity=3),i.def(r,"$roll",a=function(m){var c,y,_,C,h,k,z,B,p,f=this,w=e;return y=m.$roll_barabara(2,6),h=null==(c=i.to_ary(y))[1]?e:c[1],k=P(F(S(C=null==c[0]?e:c[0],1),6),S(h,1)),y=f.items["$[]"](k),z=null==(c=i.to_ary(y))[0]?e:c[0],w=v(B=null==c[1]?e:c[1],"gsub",[/\d+D6+/],((_=function(H){return null==H&&(H=e),(null==_.$$s?this:_.$$s).$roll_d6x(H,m)}).$$s=f,_.$$arity=1,_)),p=s(n,"ArithmeticEvaluator").$eval(w.$gsub("\xd7","*")),f.name+"("+C+h+") \uff1e "+z+" \uff1e "+f.year_title+"\uff1a"+B+" \uff1e ("+w+") \uff1e "+f.year_title+"\uff1a"+p+"\u5e74"},a.$$arity=1),r.$private(),i.def(r,"$roll_d6x",d=function(m,c){var y,_,f,h=e,k=e;return _=m.$split("D",2),y=i.to_ary(_),k=null==y[1]?e:y[1],h=(h=null==y[0]?e:y[0]).$to_i(),v(s(n,"Array"),"new",[h],((f=function(){var p,w=null==f.$$s?this:f.$$s;return v(c.$roll_barabara(k.$length(),6).$reverse().$map(),"with_index",[],(p=function(H,Y){return null==H&&(H=e),null==Y&&(Y=e),F(H,10["$**"](Y).$to_i())},p.$$s=w,p.$$arity=2,p)).$sum()}).$$s=this,f.$$arity=0,f)).$sum()},d.$$arity=2),function(T,$){var r,t=[T].concat($);T.$private(),i.def(T,"$translate_tables",r=function(D){return M(["CO","CA","EP","OS","RS","PP","ST","PN","CS","ECS","BT"],{CO:s(t,"YearTable").$from_i18n("Dracurouge.table.CO",D,["7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","7+1D6\xd71D6","10+1D6\xd71D6","7+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","18+1D6\xd71D6","10+2D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","30+1D6\xd71D6","14+1D6\xd71D6","7+1D6\xd71D6","14+1D6\xd71D6","10+2D6","14+1D6\xd71D6","14+1D6\xd71D6","7+4D6","14+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6"]),CA:s(t,"YearTable").$from_i18n("Dracurouge.table.CA",D,["2D6\xd710","1D6\xd71D6","1D6\xd71D6","2D6\xd75","2D6\xd710","1D6\xd71D6","2D6\xd710","1D6\xd75","2D6\xd710","2D6\xd73","1D6\xd71D6","1D6\xd71D6","2D6\xd710","2D6\xd710","2D6\xd720","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd73","1D6\xd71D6","1D6\xd75","2D6\xd710","1D6\xd71D6","2D6\xd710","2D6","1D6\xd71D6","2D6","1D6\xd71D6","2D6\xd720","2D6\xd710","1D6\xd71D6","2D6\xd750","2D6\xd710","1D6\xd71D6","2D6\xd75","1D6\xd71D6"]),EP:s(t,"YearTable").$from_i18n("Dracurouge.table.EP",D,["1D66+1300","1D666","1D666","1D666","1D66+1250","1D666","3D6\xd7100","2D6\xd7100","1D66+1210","1D666","2D6\xd7100","3D6\xd7100","1D66+1300","2D6\xd7100","1D6+1250","1D666","1D666","1D666","1D66+1250","2D6\xd7100","1D666","3D6\xd7100","2D6\xd7100","2D6\xd7100","1D6\xd7150","2D6\xd7100","1D66+1250","1D66+400","1212","2D6\xd7100","2D6\xd7100","1D66\xd710","3D6\xd7100","3D6\xd7100","1D66+1300","1D66+1833"]),OS:s(t,"YearTable").$from_i18n("Dracurouge.table.OS",D,["7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","13+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","10+1D6\xd71D6","7+1D6\xd71D6","15+1D6\xd71D6","6+2D6","7+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","35+1D6\xd71D6","9+2D6","13+1D6\xd71D6","9+2D6","6+2D6","7+1D6\xd71D6","7+2D6","7+1D6\xd71D5","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6"]),RS:s(t,"YearTable").$from_i18n("Dracurouge.table.RS",D,["2D6\xd710","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","3D6\xd730","3D6\xd730","2D6\xd710","2D6\xd710","2D6\xd710","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd71D6","3D6\xd730","3D6\xd720","1D6\xd71D6","3D6\xd730","3D6\xd720","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1D6\xd710","2D6\xd710","3D6\xd750","1D6\xd71D6","3D6\xd720","2D6\xd710","1D6\xd71D6","3D6\xd750"]),PP:s(t,"YearTable").$from_i18n("Dracurouge.table.PP",D,["8+2D6","6+2D6","7+1D6\xd71D6","15+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","6+2D6","7+1D6\xd71D6","9+2D6","15+1D6\xd71D6","9+3D6","7+1D6\xd71D6","10+1D6\xd71D6","9+2D6","9+2D6","9+3D6","6+2D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","6+2D6","10+1D6\xd71D6","7+1D6\xd71D6","12+1D6\xd71D6","15+1D6\xd71D6","9+3D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","12+4D6"]),ST:E(s(t,"DiceTable"),"D66Table").$from_i18n("Dracurouge.table.ST",D),PN:E(s(t,"DiceTable"),"D66Table").$from_i18n("Dracurouge.table.PN",D),CS:E(s(t,"DiceTable"),"Table").$from_i18n("Dracurouge.table.CS",D),ECS:E(s(t,"DiceTable"),"D66Table").$from_i18n("Dracurouge.table.ECS",D),BT:E(s(t,"DiceTable"),"Table").$from_i18n("Dracurouge.table.BT",D)})},r.$$arity=1)}(i.get_singleton_class(g),x),i.const_set(x[0],"TABLES",g.$translate_tables("ja_jp")),g.$register_prefix("DR","RT","HRT","CT",s(x,"TABLES").$keys())}(Opal)}}]);