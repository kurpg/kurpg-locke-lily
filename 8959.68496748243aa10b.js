(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[8959],{8959:(de,me,fe)=>{fe(9993),Opal.modules["i18n/backend/fallbacks"]=function(r){var B,u,E,I,L,f,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.class_variable_set,w=r.truthy,P=r.class_variable_get,o=r.def,H=r.send,V=r.to_a,m=r.rb_minus,A=r.send2,N=r.find_super,Z=r.hash2,F=r.find_block_super,G=r.neqeq;return B=Y,f=[L=e(Y[0],"I18n")].concat(B),k(f[0],"@@fallbacks",n),u=r.get_singleton_class(L),E=[u].concat(f),I=r.$r(E),o(u,"$fallbacks",function(){var C=n;return k(E[1],"@@fallbacks",w(null!=E[1].$$cvars["@@fallbacks"]?"class variable":n)&&w(C=P(E[1],"@@fallbacks",!1))?C:t(t(I("I18n"),"Locale"),"Fallbacks").$new()),w(C=I("Thread").$current()["$[]"]("i18n_fallbacks"))?C:P(E[1],"@@fallbacks",!1)},0),o(u,"$fallbacks=",function(b){var C;return k(E[1],"@@fallbacks",w(b["$is_a?"](I("Array")))?t(t(I("I18n"),"Locale"),"Fallbacks").$new(b):b),C=["i18n_fallbacks",P(E[1],"@@fallbacks",!1)],H(I("Thread").$current(),"[]=",V(C)),C[m(C.length,1)]},1),function(u,D){var b,C,z,v,I=[e(u,"Backend")].concat(D);return b=I,z=[C=e(I[0],"Fallbacks")].concat(b),v=r.$r(z),o(C,"$translate",function d(c,_,s){try{var $=d.$$p||n,l=this,h=n,x=n;return delete d.$$p,null==s&&(s=v("EMPTY_HASH")),w(s.$fetch("fallback",!0))?w(s["$[]"]("fallback_in_progress"))?A(l,N(l,"translate",d,!1,!0),"translate",[c,_,s],$):(w(s["$[]"]("default"))&&(h=l["$extract_non_symbol_default!"](s)),x=s.$merge(Z(["fallback_in_progress"],{fallback_in_progress:!0})),H(v("I18n").$fallbacks()["$[]"](c),"each",[],function T(g){var U=null==T.$$s?this:T.$$s;null==g&&(g=n);try{return H(U,"catch",["exception"],function K(){var i=null==K.$$s?this:K.$$s,q=n;if(q=A(i,F(i,"translate",K.$$def||T.$$def||d,!1,!1),"translate",[g,_,x],null),w(q["$nil?"]()))return n;G(c.$to_s(),g.$to_s())&&i.$on_fallback(c,g,_,s),r.ret(q)},{$$arity:0,$$s:U})}catch(K){if(!r.rescue(K,[t(v("I18n"),"InvalidLocale")]))throw K;try{return n}finally{r.pop_exception()}}},{$$arity:1,$$s:l}),w(s["$key?"]("default"))&&w(s["$[]"]("default")["$nil?"]())?n:w(h)?A(l,N(l,"translate",d,!1,!0),"translate",[c,n,s.$merge(Z(["default"],{default:h}))],null):l.$throw("exception",t(v("I18n"),"MissingTranslation").$new(c,_,s))):A(l,N(l,"translate",d,!1,!0),"translate",[c,_,s],$)}catch(T){if(T===r.returner)return T.$v;throw T}},-3),o(C,"$extract_non_symbol_default!",function(c){var s,_=n,$=n;return _=[c["$[]"]("default")].$flatten(),s=H(_,"detect",[],function(h){return null==h&&(h=n),h["$is_a?"](v("Symbol"))["$!"]()},1),w(s)&&($=["default",_["$[]"](0,_.$index(s))],H(c,"[]=",V($)),m($.length,1)),s},1),o(C,"$exists?",function d(c,_,s){try{var $=d.$$p||n,l=this;return delete d.$$p,null==s&&(s=v("EMPTY_HASH")),w(s.$fetch("fallback",!0))?(H(v("I18n").$fallbacks()["$[]"](c),"each",[],function h(x){var T=null==h.$$s?this:h.$$s;null==x&&(x=n);try{if(!w(A(T,F(T,"exists?",h.$$def||d,!1,!1),"exists?",[x,_],null)))return n;r.ret(!0)}catch(g){if(!r.rescue(g,[t(v("I18n"),"InvalidLocale")]))throw g;try{return n}finally{r.pop_exception()}}},{$$arity:1,$$s:l}),!1):A(l,N(l,"exists?",d,!1,!0),"exists?",[c,_,s],$)}catch(h){if(h===r.returner)return h.$v;throw h}},-3),C.$private(),o(C,"$on_fallback",function(c,_,s,$){return n},4)}(f[0],f)},Opal.modules["bcdice/randomizer"]=function(r){var L,S,b,C,z,v,u,D,Y=[],n=r.nil,t=r.$$$,k=r.klass,w=r.const_set,P=r.def,o=r.truthy,H=r.rb_gt,V=r.rb_plus,m=r.rb_le,A=r.send,N=r.rb_minus,Z=r.eqeq,F=r.rb_times,G=r.eqeqeq,ee=r.rb_ge;return L=Y,u=[(0,r.module)(Y[0],"BCDice")].concat(L),D=r.$r(u),S=u,C=[b=k(u[0],null,"Randomizer")].concat(S),z=r.$r(C),(v=b.$$prototype).rand_results=v.detailed_rand_results=n,w(C[0],"UPPER_LIMIT_DICE_TIMES",200),w(C[0],"UPPER_LIMIT_DICE_SIDES",1e4),w(C[0],"UPPER_LIMIT_RANDS",1e4),P(b,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]},0),b.$attr_reader("rand_results"),b.$attr_reader("detailed_rand_results"),w(C[0],"DetailedRandResult",z("Struct").$new("kind","sides","value")),P(b,"$roll_barabara",function(c,_){var s=this;return o(H(V(s.rand_results.$size(),c),z("UPPER_LIMIT_RANDS")))&&s.$raise(z("TooManyRandsError")),o(m(c,0))||o(H(c,z("UPPER_LIMIT_DICE_TIMES")))?[]:A(z("Array"),"new",[c],function $(){return(null==$.$$s?this:$.$$s).$roll_once(_)},{$$arity:0,$$s:s})},2),P(b,"$roll_sum",function(c,_){return this.$roll_barabara(c,_).$sum()},2),P(b,"$roll_once",function(c){var s=n;return o(m(c,0))||o(H(c,z("UPPER_LIMIT_DICE_SIDES")))?0:(s=this.$rand_inner(c),this.$push_to_detail("normal",c,s),s)},1),P(b,"$roll_index",function(c){return N(this.$roll_once(c),1)},1),P(b,"$roll_tens_d10",function(){var s,_=n;return _=this.$rand_inner(10),Z(_,10)&&(_=0),s=F(_,10),this.$push_to_detail("tens_d10",10,s),s},0),P(b,"$roll_d9",function(){var _;return _=N(this.$rand_inner(10),1),this.$push_to_detail("d9",10,_),_},0),P(b,"$roll_d66",function(c){var $,s=n;return s=A(z("Array"),"new",[2],function l(){return(null==l.$$s?this:l.$$s).$roll_once(6)},{$$arity:0,$$s:this}),G(t(z("D66SortType"),"ASC"),$=c)?s["$sort!"]():G(t(z("D66SortType"),"DESC"),$)&&s["$sort!"]()["$reverse!"](),V(F(s["$[]"](0),10),s["$[]"](1))},1),b.$private(),P(b,"$rand_inner",function(c){var s,_=this;return o(ee(_.rand_results.$size(),z("UPPER_LIMIT_RANDS")))&&_.$raise(z("TooManyRandsError")),s=_.$random(c),_.rand_results["$<<"]([s,c]),s},1),P(b,"$random",function(c){return V(z("Kernel").$rand(c),1)},1),P(b,"$push_to_detail",function(c,_,s){var l;return l=z("DetailedRandResult").$new(c,_,s),this.detailed_rand_results.$push(l)},3),k(u[0],D("StandardError"),"TooManyRandsError"),n},Opal.modules["bcdice/dice_table/roll_result"]=function(r){var o,A,ee,B,L,f,u,Z,V,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,w=r.truthy;return o=Y,A=V=[t(Y[0],"BCDice")].concat(o),ee=Z=[t(V[0],"DiceTable")].concat(A),L=[B=e(Z[0],null,"RollResult")].concat(ee),f=r.$r(L),(u=B.$$prototype).table_name=u.value=u.body=n,k(B,"$initialize",function(E,I,S){var b=this;return b.table_name=E,b.value=I,b.body=S},3),B.$attr_reader("table_name"),B.$attr_reader("value"),B.$attr_reader("body"),k(B,"$to_s",function(){var E=this;return E.table_name+"("+E.value+") \uff1e "+E.body},0),k(B,"$last_body",function(){var E=this;return w(E.body["$is_a?"](f("RollResult")))?E.body.$last_body():E.body},0),k(B,"$empty?",function(){return!1},0)},Opal.modules["bcdice/dice_table/chain_table"]=function(r){var H,N,B,L,f,u,D,F,m,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.truthy,w=r.def,P=r.rb_minus;return H=Y,N=m=[t(Y[0],"BCDice")].concat(H),B=F=[t(m[0],"DiceTable")].concat(N),f=[L=e(F[0],null,"ChainTable")].concat(B),u=r.$r(f),(D=L.$$prototype).times=D.sides=D.items=D.name=n,w(L,"$initialize",function(I,S,b){var C=this,z=n;return C.name=I,C.items=b.$freeze(),z=/(\d+)D(\d+)/i.$match(S),k(z)||C.$raise(u("ArgumentError"),"Unexpected table type: "+S),C.times=z["$[]"](1).$to_i(),C.sides=z["$[]"](2).$to_i()},3),w(L,"$roll",function(I){var b,C,S=this,z=n;return b=I.$roll_sum(S.times,S.sides),C=P(b,S.times),z=S.items["$[]"](C),k(z["$respond_to?"]("roll"))&&(z=z.$roll(I)),u("RollResult").$new(S.name,b,z)},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(r){var A,G,u,D,E,I,S,B,Z,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,w=r.defs,P=r.def,o=r.rb_plus,H=r.rb_times,V=r.rb_minus;return A=Y,G=Z=[t(Y[0],"BCDice")].concat(A),u=B=[t(Z[0],"DiceTable")].concat(G),E=[D=e(B[0],null,"D66GridTable")].concat(u),I=r.$r(E),(S=D.$$prototype).name=S.items=n,w(D,"$from_i18n",function(C,z){var d=n;return d=I("I18n").$t(C,k(["locale","raise"],{locale:z,raise:!0})),this.$new(d["$[]"]("name"),d["$[]"]("items"))},2),P(D,"$initialize",function(C,z){return this.name=C,this.items=z.$freeze()},2),P(D,"$roll",function(C){var v,d,c,_,s;return v=C.$roll_once(6),d=C.$roll_once(6),c=o(H(v,10),d),_=V(v,1),s=V(d,1),I("RollResult").$new(this.name,c,this.items["$[]"](_)["$[]"](s))},1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(r){var V,Z,f,u,D,E,G,ee,A,n=[],t=r.nil,e=r.module,k=r.klass,w=r.hash2,P=r.defs,o=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),V=n,Z=A=[e(n[0],"BCDice")].concat(V),G=[e(A[0],"DiceTable")].concat(Z),ee=r.$r(G),f=G,D=[u=k(G[0],ee("D66GridTable"),"D66HalfGridTable")].concat(f),E=r.$r(D),P(u,"$from_i18n",function(S,b){var z=t;return z=E("I18n").$t(S,w(["locale","raise"],{locale:b,raise:!0})),this.$new(z["$[]"]("name"),z["$[]"]("items_1_2_3"),z["$[]"]("items_4_5_6"))},2),o(u,"$initialize",function(S,b,C){return this.name=S,this.items=[b,b,b,C,C,C].$freeze()},3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(r){var V,Z,f,u,D,E,G,ee,A,n=[],t=r.nil,e=r.module,k=r.klass,w=r.hash2,P=r.defs,o=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),V=n,Z=A=[e(n[0],"BCDice")].concat(V),G=[e(A[0],"DiceTable")].concat(Z),ee=r.$r(G),f=G,D=[u=k(G[0],ee("D66GridTable"),"D66OneThirdTable")].concat(f),E=r.$r(D),P(u,"$from_i18n",function(S,b){var z=t;return z=E("I18n").$t(S,w(["locale","raise"],{locale:b,raise:!0})),this.$new(z["$[]"]("name"),z["$[]"]("items_1_2"),z["$[]"]("items_3_4"),z["$[]"]("items_5_6"))},2),o(u,"$initialize",function(S,b,C,z){return this.name=S,this.items=[b,b,C,C,z,z].$freeze()},4)},Opal.modules["bcdice/dice_table/d66_table"]=function(r){var Z,B,E,I,S,b,C,f,G,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,w=r.hash2,P=r.defs,o=r.def,H=r.eqeqeq,V=r.rb_plus,m=r.rb_times,A=r.truthy;return Z=Y,B=G=[e(Y[0],"BCDice")].concat(Z),E=f=[e(G[0],"DiceTable")].concat(B),S=[I=k(f[0],null,"D66Table")].concat(E),b=r.$r(S),(C=I.$$prototype).sort_type=C.items=C.name=n,P(I,"$from_i18n",function(v,d){var s,_=n;return _=b("I18n").$t(v,w(["locale"],{locale:d})),s=b("D66SortType").$const_get(_["$[]"]("d66_sort_type")),this.$new(_["$[]"]("name"),s,_["$[]"]("items"))},2),o(I,"$initialize",function(v,d,c){var _=this;return _.name=v,_.sort_type=d,_.items=c.$freeze()},3),o(I,"$roll",function(v){var d=this,c=n,_=n,s=n,$=n;return c=v.$roll_barabara(2,6),H(t(b("D66SortType"),"ASC"),_=d.sort_type)?c["$sort!"]():H(t(b("D66SortType"),"DESC"),_)&&c["$sort!"]()["$reverse!"](),s=V(m(c["$[]"](0),10),c["$[]"](1)),$=A(_=d.items["$[]"](s))?_:d.items["$[]"](s.$to_s()),A($["$respond_to?"]("roll"))&&($=$.$roll(v)),b("RollResult").$new(d.name,s,$)},1),o(I,"$choice",function(v){return b("RollResult").$new(this.name,v,this.items["$[]"](v))},1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(r){var ee,u,E,I,L,n=[],t=r.nil,e=r.module,k=r.klass,w=r.hash2,P=r.send,o=r.to_ary,H=r.rb_plus,V=r.rb_times,m=r.to_a,A=r.rb_minus,N=r.send2,Z=r.find_super,F=r.def;return r.top.$require("bcdice/dice_table/d66_table"),ee=n,u=L=[e(n[0],"BCDice")].concat(ee),E=[e(L[0],"DiceTable")].concat(u),I=r.$r(E),F(k(E[0],I("D66Table"),"D66LeftRangeTable"),"$initialize",function z(v,d,c){var $;return delete z.$$p,$=w([],{}),P(c,"each",[],function(h){var x,U;return null==h&&(h=t),x=o(h),U=null==x[1]?t:x[1],P(null==x[0]?t:x[0],"each",[],function(i){return null==i&&(i=t),P(U,"each_with_index",[],function(a,M){var j,Q;return null==a&&(a=t),null==M&&(M=t),j=H(V(i,10),H(M,1)),P($,"[]=",m(Q=[j,a])),Q[A(Q.length,1)]},2)},1)},1),N(this,Z(this,"initialize",z,!1,!0),"initialize",[v,d,$],null)},3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(r){var N,ee,D,E,I,S,b,L,F,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,w=r.defs,P=r.def,o=r.truthy,H=r.rb_minus,V=r.rb_plus,m=r.rb_times;return N=Y,ee=F=[t(Y[0],"BCDice")].concat(N),D=L=[t(F[0],"DiceTable")].concat(ee),I=[E=e(L[0],null,"D66ParityTable")].concat(D),S=r.$r(I),(b=E.$$prototype).odd=b.even=b.name=n,w(E,"$from_i18n",function(z,v){var c=n;return c=S("I18n").$t(z,k(["locale","raise"],{locale:v,raise:!0})),this.$new(c["$[]"]("name"),c["$[]"]("odd"),c["$[]"]("even"))},2),P(E,"$initialize",function(z,v,d){var c=this;return c.name=z,c.odd=v.$freeze(),c.even=d.$freeze()},3),P(E,"$roll",function(z){var c,s,$,v=this,d=n;return d=z.$roll_once(6),c=z.$roll_once(6),s=(o(d["$odd?"]())?v.odd:v.even)["$[]"](H(c,1)),$=V(m(d,10),c),S("RollResult").$new(v.name,$,s)},1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(r){var V,Z,L,f,u,D,E,G,A,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,w=r.rb_plus,P=r.rb_times,o=r.send;return V=Y,Z=A=[t(Y[0],"BCDice")].concat(V),L=G=[t(A[0],"DiceTable")].concat(Z),u=[f=e(G[0],null,"D66RangeTable")].concat(L),D=r.$r(u),(E=f.$$prototype).items=E.name=n,k(f,"$initialize",function(S,b){return this.name=S,this.items=b.$freeze()},2),k(f,"$roll",function(S){var C,z,v,d=n;return C=S.$roll_once(6),z=S.$roll_once(6),v=w(P(C,10),z),d=o(this.items,"find",[],function(_){return null==_&&(_=n),_["$[]"](0)["$include?"](v)},1),D("RollResult").$new(this.name,v,d["$[]"](1))},1)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var F,L,I,S,b,C,z,u,ee,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.const_set,w=r.send,P=r.truthy,o=r.def,H=r.to_a,V=r.rb_minus,m=r.eqeqeq,A=r.rb_times,N=r.rb_plus;return F=Y,L=ee=[t(Y[0],"BCDice")].concat(F),I=u=[t(ee[0],"DiceTable")].concat(L),b=[S=e(u[0],null,"RangeTable")].concat(I),C=r.$r(b),(z=S.$$prototype).name=z.items=z.num_of_dice=z.num_of_sides=z.formatter=n,k(b[0],"RollResult",w(C("Struct"),"new",["sum","values","content","formatted"],function v(){return(null==v.$$s?this:v.$$s).$alias_method("to_s","formatted")},{$$arity:0,$$s:S})),k(b[0],"Item",C("Struct").$new("range","content")),k(b[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),k(b[0],"DEFAULT_FORMATTER",w(S,"lambda",[],function(d,c){return null==d&&(d=n),null==c&&(c=n),d.$name()+"("+c.$sum()+") \uff1e "+c.$content()},2)),S.$attr_reader("name"),S.$attr_reader("num_of_dice"),S.$attr_reader("num_of_sides"),o(S,"$initialize",function v(d,c,_){var l,s=v.$$p||n,$=this,h=n;return delete v.$$p,$.name=d.$freeze(),$.formatter=P(l=s)?l:C("DEFAULT_FORMATTER"),h=C("DICE_ROLL_METHOD_RE").$match(c),P(h)||$.$raise(C("ArgumentError"),$.name+": invalid dice roll method: "+c),$.num_of_dice=h["$[]"](1).$to_i(),$.num_of_sides=h["$[]"](2).$to_i(),$.$store(_)},3),o(S,"$fetch",function(d){var _,c=this;return _=w(c.items,"find",[],function($){return null==$&&($=n),$.$range()["$include?"](d)},1),P(_)||c.$raise(C("RangeError"),c.name+": value is out of range: "+d),_},1),o(S,"$roll",function(d){var s,$,l,c=this,_=n;return s=(_=d.$roll_barabara(c.num_of_dice,c.num_of_sides)).$sum(),$=C("RollResult").$new(s,_,c.$fetch(s).$content()),l=[c.formatter["$[]"](c,$)],w($,"formatted=",H(l)),V(l.length,1),$},1),S.$private(),o(S,"$store",function(d){var _,s,c=this;return _=w(d,"map",[],function $(l,h){return null==l&&(l=n),null==h&&(h=n),[(null==$.$$s?this:$.$$s).$coerce_to_int_range(l),h]},{$$arity:2,$$s:c}),s=w(_,"sort_by",[],function(l,h){return null==l&&(l=n),null==h&&(h=n),l.$min()},2),c.$assert_min_sum_is_covered(s),c.$assert_max_sum_is_covered(s),c.$assert_no_gap_or_overlap_in_ranges(s),c.items=w(s,"map",[],function(l,h){return null==l&&(l=n),null==h&&(h=n),C("Item").$new(l,h.$freeze()).$freeze()},2).$freeze(),c},1),o(S,"$coerce_to_int_range",function(d){var _;return m(C("Integer"),_=d)?C("Range").$new(d,d):m(C("Range"),_)&&P(d.$begin()["$is_a?"](C("Integer")))&&P(d.$end()["$is_a?"](C("Integer")))?d:this.$raise(C("TypeError"),this.name+": "+d+" ("+d.$class()+") must be an Integer or a Range with Integers ")},1),o(S,"$assert_min_sum_is_covered",function(d){var _,c=this,s=n;return _=c.num_of_dice,s=d.$first()["$[]"](0),P(s["$include?"](_))||c.$raise(C("RangeError"),c.name+": min value ("+_+") is not covered: "+s),c},1),o(S,"$assert_max_sum_is_covered",function(d){var _,c=this,s=n;return _=A(c.num_of_dice,c.num_of_sides),s=d.$last()["$[]"](0),P(s["$include?"](_))||c.$raise(C("RangeError"),c.name+": max value ("+_+") is not covered: "+s),c},1),o(S,"$assert_no_gap_or_overlap_in_ranges",function(d){return w(d,"each_cons",[2],function _(s,$){var T,g,l=null==_.$$s?this:_.$$s,h=n,x=n;return null==l.name&&(l.name=n),null==s&&(s=n),null==$&&($=n),h=s["$[]"](0),x=$["$[]"](0),T=h.$max(),g=N(T,1),P(x["$include?"](T))&&l.$raise(C("RangeError"),l.name+": Range overlap: "+h+" and "+x),P(x["$include?"](g))?n:l.$raise(C("RangeError"),l.name+": Range gap: "+h+" and "+x)},{$$arity:2,$$s:this}),this},1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(r){var V,Z,L,I,S,b,C,u,G,A,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,w=r.send,P=r.def,o=r.rb_minus;return V=Y,Z=A=[e(Y[0],"BCDice")].concat(V),L=G=[e(A[0],"DiceTable")].concat(Z),I=u=[k(G[0],null,"SaiFicSkillTable")].concat(L),b=[S=k(u[0],null,"Category")].concat(I),C=r.$r(b),S.$$prototype.name=n,P(S,"$initialize",function(d,c,_,s){var $=this;return $.name=d,$.skills=w(c.$map(),"with_index",[2],function(h,x){return null==h&&(h=n),null==x&&(x=n),t(C("SaiFicSkillTable"),"Skill").$new(d,h,_,x,s)},2),$.dice=_},4),P(S,"$roll",function(d){return this.$skills()["$[]"](o(d.$roll_sum(2,6),2))},1),P(S,"$to_s",function(){return this.name},0),S.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(r){var o,A,ee,D,E,L,Z,V,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,w=r.hash2;return o=Y,A=V=[t(Y[0],"BCDice")].concat(o),ee=Z=[t(V[0],"DiceTable")].concat(A),L=[e(Z[0],null,"SaiFicSkillTable")].concat(ee),(E=(D=e(L[0],null,"Skill")).$$prototype).s_format=E.category_dice=E.row_dice=E.category_name=E.name=n,k(D,"$initialize",function(S,b,C,z,v){var d=this;return d.category_name=S,d.name=b,d.category_dice=C,d.row_dice=z,d.s_format=v},5),k(D,"$to_s",function(){var S=this;return S.$format(S.s_format,w(["category_dice","row_dice","category_name","skill_name"],{category_dice:S.category_dice,row_dice:S.row_dice,category_name:S.category_name,skill_name:S.name}))},0),D.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(r){var B,D,C,z,v,d,c,I,f,Y=r.top,n=[],t=r.nil,e=r.$$$,k=r.module,w=r.klass,P=r.hash2,o=r.send,V=r.defs,m=r.const_set,A=r.to_ary,N=r.def,Z=r.truthy,F=r.rb_minus,G=r.rb_plus;return Y.$require("bcdice/dice_table/sai_fic_skill_table/category"),Y.$require("bcdice/dice_table/sai_fic_skill_table/skill"),B=n,D=f=[k(n[0],"BCDice")].concat(B),C=I=[k(f[0],"DiceTable")].concat(D),v=[z=w(I[0],null,"SaiFicSkillTable")].concat(C),d=r.$r(v),(c=z.$$prototype).rtt=c.rtt_format=c.rct=c.rct_format=c.rttn=c.rttn_format=c.categories=t,V(z,"$from_i18n",function(s,$,l){var h,x,T,i,K=t;if(null==l)l=P([],{});else if(!l.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(h=l.$$smap.rtt)&&(h=t),null==(x=l.$$smap.rct)&&(x=t),null==(T=l.$$smap.rttn)&&(T=t),i=(K=d("I18n").$t("RTT",P(["locale","raise","default"],{locale:$,raise:!1,default:P([],{})})).$merge(d("I18n").$t(s,P(["locale","raise"],{locale:$,raise:!0}))))["$[]"]("items"),K=o(K,"select",[],function(a,M){return null==a&&(a=t),null==M&&(M=t),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](a)},2),this.$new(i,r.to_hash(K).$merge(P(["rtt","rct","rttn"],{rtt:h,rct:x,rttn:T})))},-3),m(v[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),m(v[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),m(v[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),m(v[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),N(z,"$initialize",function(s,$){var l,h,x,T,g,U,K,i=this;if(null==$)$=P([],{});else if(!$.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(l=$.$$smap.rtt)&&(l=t),null==(h=$.$$smap.rct)&&(h=t),null==(x=$.$$smap.rttn)&&(x=t),null==(T=$.$$smap.rtt_format)&&(T=d("DEFAULT_RTT")),null==(g=$.$$smap.rct_format)&&(g=d("DEFAULT_RCT")),null==(U=$.$$smap.rttn_format)&&(U=d("DEFAULT_RTTN")),null==(K=$.$$smap.s_format)&&(K=d("DEFAULT_S")),i.categories=o(s.$map(),"with_index",[1],function(a,M){var j,re,X;return null==a&&(a=t),null==M&&(M=t),re=null==(j=A(a))[0]?t:j[0],X=null==j[1]?t:j[1],e(d("SaiFicSkillTable"),"Category").$new(re,X,M,K)},{$$arity:2,$$has_top_level_mlhs_arg:!0}),i.rtt=l,i.rct=h,i.rttn=x.$to_a(),i.rtt_format=T,i.rct_format=g,i.rttn_format=U},-2),m(v[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),z.$attr_reader("categories"),N(z,"$roll_command",function(s,$){var h,l=this,x=t,T=t;return Z(["RTT",l.rtt]["$include?"](h=$))?l.$format_skill(l.rtt_format,l.$roll_skill(s)):Z(["RCT",l.rct]["$include?"](h))?(x=l.$roll_category(s),l.$format(l.rct_format,P(["category_dice","category_name"],{category_dice:x.$dice(),category_name:x.$name()}))):Z(T=d("RTTN").$index(h))||Z(T=l.rttn.$index(h))?l.$format_skill(l.rttn_format,l.categories["$[]"](T).$roll(s)):t},2),N(z,"$roll_category",function(s){return this.categories["$[]"](F(s.$roll_once(6),1))},1),N(z,"$roll_skill",function(s){return this.$roll_category(s).$roll(s)},1),N(z,"$prefixes",function(){var s=this;return G(["RTT[1-6]?","RCT",s.rtt,s.rct],s.rttn).$compact()},0),z.$private(),N(z,"$format_skill",function(s,$){return this.$format(s,P(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:$.$category_dice(),row_dice:$.$row_dice(),category_name:$.$category_name(),skill_name:$.$name(),text:$.$to_s()}))},2)},Opal.modules["bcdice/dice_table/table"]=function(r){var m,F,f,u,D,E,I,ee,N,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,w=r.defs,P=r.truthy,o=r.def,H=r.rb_minus;return m=Y,F=N=[t(Y[0],"BCDice")].concat(m),f=ee=[t(N[0],"DiceTable")].concat(F),D=[u=e(ee[0],null,"Table")].concat(f),E=r.$r(D),(I=u.$$prototype).times=I.sides=I.name=I.items=n,w(u,"$from_i18n",function(b,C){var v=n;return v=E("I18n").$t(b,k(["locale"],{locale:C})),this.$new(v["$[]"]("name"),v["$[]"]("type"),v["$[]"]("items"))},2),o(u,"$initialize",function(b,C,z){var v=this,d=n;return v.name=b,v.items=z.$freeze(),d=/(\d+)D(\d+)/i.$match(C),P(d)||v.$raise(E("ArgumentError"),"Unexpected table type: "+C),v.times=d["$[]"](1).$to_i(),v.sides=d["$[]"](2).$to_i()},3),o(u,"$roll",function(b){var z,C=this;return z=b.$roll_sum(C.times,C.sides),C.$choice(z)},1),o(u,"$choice",function(b){var z,C=this;return z=H(b,C.times),E("RollResult").$new(C.name,b,C.items["$[]"](z))},1)},Opal.modules["bcdice/dice_table"]=function(r){var Y=r.top;return Y.$require("bcdice/dice_table/roll_result"),Y.$require("bcdice/dice_table/chain_table"),Y.$require("bcdice/dice_table/d66_grid_table"),Y.$require("bcdice/dice_table/d66_half_grid_table"),Y.$require("bcdice/dice_table/d66_one_third_table"),Y.$require("bcdice/dice_table/d66_left_range_table"),Y.$require("bcdice/dice_table/d66_parity_table"),Y.$require("bcdice/dice_table/d66_range_table"),Y.$require("bcdice/dice_table/d66_table"),Y.$require("bcdice/dice_table/range_table"),Y.$require("bcdice/dice_table/sai_fic_skill_table"),Y.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(r){var w,V,A,o,Y=[],t=r.module,e=r.const_set;return w=Y,V=o=[t(Y[0],"BCDice")].concat(w),A=[t(o[0],"D66SortType")].concat(V),e(A[0],"NO_SORT","no_sort"),e(A[0],"ASC","asc"),e(A[0],"DESC","desc"),function(H,V){var A=[t(H,"RoundType")].concat(V);return e(A[0],"CEIL","ceil"),e(A[0],"FLOOR","floor"),e(A[0],"ROUND","round")}(o[0],o)},Opal.modules["bcdice/translate"]=function(r){var o,A,N,Z,F,V,Y=[],n=r.nil,t=r.module,e=r.hash2,w=r.def;return o=Y,A=V=[t(Y[0],"BCDice")].concat(o),Z=[N=t(V[0],"Translate")].concat(A),F=r.$r(Z),w(N,"$translate",function(ee,B){var L,f=this;if(null==f.locale&&(f.locale=n),null==B)B=e([],{});else if(!B.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return L=r.kwrestargs(B,{}),F("I18n").$translate(ee,e(["locale","raise"],{locale:f.locale,raise:!0}).$merge(r.to_hash(L)))},-2)},Opal.modules["bcdice/result"]=function(r){var V,F,L,G,B,A,Y=[],n=r.nil,e=r.klass,k=r.send,w=r.to_a,P=r.rb_minus,o=r.def;return V=Y,F=A=[(0,r.module)(Y[0],"BCDice")].concat(V),[G=e(A[0],null,"Result")].concat(F),(B=G.$$prototype).secret=B.success=B.failure=B.critical=B.fumble=n,o(L=r.get_singleton_class(G),"$success",function(D){return k(this.$new(),"tap",[],function(S){var b=n;return null==S&&(S=n),k(S,"text=",w(b=[D])),P(b.length,1),k(S,"success=",w(b=[!0])),b[P(b.length,1)]},1)},1),o(L,"$failure",function(D){return k(this.$new(),"tap",[],function(S){var b=n;return null==S&&(S=n),k(S,"text=",w(b=[D])),P(b.length,1),k(S,"failure=",w(b=[!0])),b[P(b.length,1)]},1)},1),o(L,"$critical",function(D){return k(this.$new(),"tap",[],function(S){var b=n;return null==S&&(S=n),k(S,"text=",w(b=[D])),P(b.length,1),k(S,"critical=",w(b=[!0])),P(b.length,1),k(S,"success=",w(b=[!0])),b[P(b.length,1)]},1)},1),o(L,"$fumble",function(D){return k(this.$new(),"tap",[],function(S){var b=n;return null==S&&(S=n),k(S,"text=",w(b=[D])),P(b.length,1),k(S,"fumble=",w(b=[!0])),P(b.length,1),k(S,"failure=",w(b=[!0])),b[P(b.length,1)]},1)},1),o(L,"$nothing",function(){return"nothing"},0),o(G,"$initialize",function(f){var u=this;return null==f&&(f=n),u.text=f,u.rands=n,u.detailed_rands=n,u.secret=!1,u.success=!1,u.failure=!1,u.critical=!1,u.fumble=!1},-1),G.$attr_accessor("text","rands","detailed_rands"),G.$attr_writer("secret","success","failure","critical","fumble"),o(G,"$secret?",function(){return this.secret},0),o(G,"$success?",function(){return this.success},0),o(G,"$failure?",function(){return this.failure},0),o(G,"$critical?",function(){return this.critical},0),o(G,"$fumble?",function(){return this.fumble},0),o(G,"$condition=",function(f){return this.success=f,this.failure=f["$!"]()},1)},Opal.modules["racc/parser"]=function(r){var C,v,d,n=[],t=r.$r(n),e=r.nil,k=r.$$$,w=r.module,P=r.klass,o=r.truthy,H=r.const_set,V=r.defs,m=r.gvars,A=r.rb_lt,N=r.send,Z=r.to_a,F=r.rb_minus,G=r.def,ee=r.to_ary,B=r.neqeq,L=r.rb_plus,f=r.eqeq,u=r.rb_ge,D=r.rb_gt,E=r.eqeqeq,I=r.rb_le,S=r.rb_times;return C=n,v=[w(n[0],"Racc")].concat(C),d=r.$r(v),P(v[0],d("StandardError"),"ParseError"),o(k("::","ParseError","skip_raise")?"constant":e)||H(n[0],"ParseError",k(t("Racc"),"ParseError")),function(b,C){var $,l,h,x,T,d=[w(b,"Racc")].concat(C),c=r.$r(d);return o(c("Racc_No_Extensions","skip_raise")?"constant":e)||H(d[0],"Racc_No_Extensions",!1),$=d,h=[l=P(d[0],null,"Parser")].concat($),x=r.$r(h),(T=l.$$prototype).yydebug=T.racc_debug_out=T.racc_error_status=T.racc_t=T.racc_vstack=T.racc_val=T.racc_state=T.racc_tstack=e,H(h[0],"Racc_Runtime_Version","1.4.6"),H(h[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),H(h[0],"Racc_Runtime_Core_Version_R","1.4.6"),H(h[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),H(h[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),H(h[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),H(h[0],"Racc_Runtime_Core_Version",x("Racc_Runtime_Core_Version_R")),H(h[0],"Racc_Runtime_Core_Revision",x("Racc_Runtime_Core_Revision_R")),H(h[0],"Racc_Runtime_Type","ruby"),V(x("Parser"),"$racc_runtime_type",function(){return x("Racc_Runtime_Type")},0),G(l,"$_racc_setup",function(){var U,K,i=this,q=e,a=e,M=e;return null==m.stderr&&(m.stderr=e),o(k(i.$class(),"Racc_debug_parser"))||(i.yydebug=!1),o(null!=(U=i.yydebug)&&U!==e?"instance-variable":e)||(i.yydebug=!1),o(i.yydebug)&&(o(null!=(K=i.racc_debug_out)&&K!==e?"instance-variable":e)||(i.racc_debug_out=m.stderr),i.racc_debug_out=o(q=i.racc_debug_out)?q:m.stderr),a=k(i.$class(),"Racc_arg"),o(A(a.$size(),14))&&(N(a,"[]=",Z(M=[13,!0])),F(M.length,1)),a},0),G(l,"$_racc_init_sysvars",function(){var U=this;return U.racc_state=[0],U.racc_tstack=[],U.racc_vstack=[],U.racc_t=e,U.racc_val=e,U.racc_read_next=!0,U.racc_user_yyerror=!1,U.racc_error_status=0},0),G(l,"$do_parse",function(){return this.$__send__(x("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},0),G(l,"$next_token",function(){return this.$raise(x("NotImplementedError"),this.$class()+"#next_token is not defined")},0),G(l,"$_racc_do_parse_rb",function(U,K){var i,a=this,M=e,j=e,Q=e,re=e,W=e,y=e,J=e,p=e;return i=ee(U),M=null==i[0]?e:i[0],j=null==i[1]?e:i[1],Q=null==i[2]?e:i[2],re=null==i[3]?e:i[3],W=null==i[10]?e:i[10],a.$_racc_init_sysvars(),y=J=p=e,N(a,"catch",["racc_end_parse"],function R(){var $e,te,O=null==R.$$s?this:R.$$s,ue=e;for(null==O.racc_state&&(O.racc_state=e),null==O.racc_read_next&&(O.racc_read_next=e),null==O.racc_t&&(O.racc_t=e),null==O.yydebug&&(O.yydebug=e),null==O.racc_val&&(O.racc_val=e);o(!0);)for(o(p=re["$[]"](O.racc_state["$[]"](-1)))?(o(O.racc_read_next)&&B(O.racc_t,0)&&(te=O.$next_token(),$e=ee(te),y=null==$e[0]?e:$e[0],O.racc_val=null==$e[1]?e:$e[1],O.racc_t=o(y)?o(ue=W["$[]"](y))?ue:1:0,o(O.yydebug)&&O.$racc_read_token(O.racc_t,y,O.racc_val),O.racc_read_next=!1),p=L(p,O.racc_t),o(u(p,0))&&o(J=M["$[]"](p))&&f(j["$[]"](p),O.racc_state["$[]"](-1))||(J=Q["$[]"](O.racc_state["$[]"](-1)))):J=Q["$[]"](O.racc_state["$[]"](-1));o(J=O.$_racc_evalact(J,U)););},{$$arity:0,$$s:a})},2),G(l,"$yyparse",function(U,K){return this.$__send__(x("Racc_YY_Parse_Method"),U,K,this.$_racc_setup(),!0)},2),G(l,"$_racc_yyparse_rb",function(U,K,i,q){var a,j=this,Q=e,re=e,X=e,W=e,J=e,p=e,R=e;return a=ee(i),Q=null==a[0]?e:a[0],re=null==a[1]?e:a[1],X=null==a[2]?e:a[2],W=null==a[3]?e:a[3],J=null==a[10]?e:a[10],j.$_racc_init_sysvars(),p=e,R=e,N(j,"catch",["racc_end_parse"],function ne(){var O=null==ne.$$s?this:ne.$$s;for(null==O.racc_state&&(O.racc_state=e);!o(R=W["$[]"](O.racc_state["$[]"](-1)));)for(;o(p=O.$_racc_evalact(X["$[]"](O.racc_state["$[]"](-1)),i)););return N(U,"__send__",[K],function ue(se,le){var ae=null==ue.$$s?this:ue.$$s,ie=e,_e=e;for(null==ae.racc_t&&(ae.racc_t=e),null==ae.racc_state&&(ae.racc_state=e),null==ae.racc_read_next&&(ae.racc_read_next=e),null==se&&(se=e),null==le&&(le=e),ae.racc_t=o(se)?o(ie=J["$[]"](se))?ie:1:0,ae.racc_val=le,ae.racc_read_next=!1,R=L(R,ae.racc_t),o(u(R,0))&&o(p=Q["$[]"](R))&&f(re["$[]"](R),ae.racc_state["$[]"](-1))||(p=X["$[]"](ae.racc_state["$[]"](-1)));o(p=ae.$_racc_evalact(p,i)););for(;o(o(ie=o(_e=(R=W["$[]"](ae.racc_state["$[]"](-1)))["$!"]())?_e:ae.racc_read_next["$!"]())?ie:ae.racc_t["$=="](0));)for(o(R)&&o(R=L(R,ae.racc_t))&&o(u(R,0))&&o(p=Q["$[]"](R))&&f(re["$[]"](R),ae.racc_state["$[]"](-1))||(p=X["$[]"](ae.racc_state["$[]"](-1)));o(p=ae.$_racc_evalact(p,i)););},{$$arity:2,$$s:O})},{$$arity:0,$$s:j})},4),G(l,"$_racc_evalact",function(U,K){var i,X,a=this,M=e,j=e,re=e,W=e,y=e,J=e,p=e;if(M=null==(i=ee(K))[0]?e:i[0],j=null==i[1]?e:i[1],re=null==i[3]?e:i[3],X=null==i[11]?e:i[11],W=null==i[12]?e:i[12],o(D(U,0))&&o(A(U,X)))o(D(a.racc_error_status,0))&&(f(a.racc_t,1)||(a.racc_error_status=F(a.racc_error_status,1))),a.racc_vstack.$push(a.racc_val),a.racc_state.$push(U),a.racc_read_next=!0,o(a.yydebug)&&(a.racc_tstack.$push(a.racc_t),a.$racc_shift(a.racc_t,a.racc_tstack,a.racc_vstack));else if(o(A(U,0))&&o(D(U,W["$-@"]()))){if(y=N(a,"catch",["racc_jump"],function R(){var ne=null==R.$$s?this:R.$$s;return null==ne.racc_state&&(ne.racc_state=e),ne.racc_state.$push(ne.$_racc_do_reduce(K,U)),!1},{$$arity:0,$$s:a}),o(y)){if(E(1,J=y))return a.racc_user_yyerror=!0,W["$-@"]();if(E(2,J))return X;a.$raise("[Racc Bug] unknown jump code")}}else if(f(U,X))o(a.yydebug)&&a.$racc_accept(),a.$throw("racc_end_parse",a.racc_vstack["$[]"](0));else{if(f(U,W["$-@"]())){for(E(0,J=a.racc_error_status)?o(K["$[]"](21))||a.$on_error(a.racc_t,a.racc_val,a.racc_vstack):E(3,J)&&(f(a.racc_t,0)&&a.$throw("racc_end_parse",e),a.racc_read_next=!0),a.racc_user_yyerror=!1,a.racc_error_status=3;o(!0)&&!(o(p=re["$[]"](a.racc_state["$[]"](-1)))&&(p=L(p,1),o(u(p,0))&&o(U=M["$[]"](p))&&f(j["$[]"](p),a.racc_state["$[]"](-1))));)o(I(a.racc_state.$size(),1))&&a.$throw("racc_end_parse",e),a.racc_state.$pop(),a.racc_vstack.$pop(),o(a.yydebug)&&(a.racc_tstack.$pop(),a.$racc_e_pop(a.racc_state,a.racc_tstack,a.racc_vstack));return U}a.$raise("[Racc Bug] unknown action "+U.$inspect())}return o(a.yydebug)&&a.$racc_next_state(a.racc_state["$[]"](-1),a.racc_state),e},2),G(l,"$_racc_do_reduce",function(U,K){var i,W,J,O,ue,se,ae,a=this,j=e,Q=e,re=e,X=e,y=e,p=e,R=e,ne=e,$e=e,te=e,le=e,oe=e,ce=e,ie=e;return j=null==(i=ee(U))[4]?e:i[4],Q=null==i[5]?e:i[5],re=null==i[6]?e:i[6],X=null==i[7]?e:i[7],W=null==i[8]?e:i[8],y=null==i[9]?e:i[9],J=null==i[13]?e:i[13],p=a.racc_state,R=a.racc_vstack,ne=a.racc_tstack,$e=S(K,-3),te=y["$[]"]($e),O=y["$[]"](L($e,1)),ue=y["$[]"](L($e,2)),se=[],o(a.yydebug)&&(le=ne["$[]"](te["$-@"](),te)),oe=R["$[]"](te["$-@"](),te),o(a.yydebug)&&(ce=[te["$-@"](),te,se],N(ne,"[]=",Z(ce)),F(ce.length,1)),ce=[te["$-@"](),te,se],N(R,"[]=",Z(ce)),F(ce.length,1),ce=[te["$-@"](),te,se],N(p,"[]=",Z(ce)),F(ce.length,1),o(J)?R.$push(a.$__send__(ue,oe,R,oe["$[]"](0))):R.$push(a.$__send__(ue,oe,R)),ne.$push(O),o(a.yydebug)&&a.$racc_reduce(le,O,ne,R),ae=F(O,W),o($e=X["$[]"](ae))&&($e=L($e,p["$[]"](-1)),o(u($e,0))&&o(ie=j["$[]"]($e))&&f(Q["$[]"]($e),ae))?ie:re["$[]"](ae)},2),G(l,"$on_error",function(U,K,i){var a,q=this;return q.$raise(x("ParseError"),q.$sprintf("\nparse error on value %s (%s)",K.$inspect(),o(a=q.$token_to_str(U))?a:"?"))},3),G(l,"$yyerror",function(){return this.$throw("racc_jump",1)},0),G(l,"$yyaccept",function(){return this.$throw("racc_jump",2)},0),G(l,"$yyerrok",function(){return this.racc_error_status=0},0),G(l,"$racc_read_token",function(U,K,i){var q=this;return q.racc_debug_out.$print("read    "),q.racc_debug_out.$print(K.$inspect(),"(",q.$racc_token2str(U),") "),q.racc_debug_out.$puts(i.$inspect()),q.racc_debug_out.$puts()},3),G(l,"$racc_shift",function(U,K,i){var q=this;return q.racc_debug_out.$puts("shift   "+q.$racc_token2str(U)),q.$racc_print_stacks(K,i),q.racc_debug_out.$puts()},3),G(l,"$racc_reduce",function(U,K,i,q){var a=this,M=e;return(M=a.racc_debug_out).$print("reduce "),o(U["$empty?"]())?M.$print(" <none>"):N(U,"each",[],function j(Q){return null==Q&&(Q=e),M.$print(" ",(null==j.$$s?this:j.$$s).$racc_token2str(Q))},{$$arity:1,$$s:a}),M.$puts(" --\x3e "+a.$racc_token2str(K)),a.$racc_print_stacks(i,q),a.racc_debug_out.$puts()},4),G(l,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},0),G(l,"$racc_e_pop",function(U,K,i){var q=this;return q.racc_debug_out.$puts("error recovering mode: pop token"),q.$racc_print_states(U),q.$racc_print_stacks(K,i),q.racc_debug_out.$puts()},3),G(l,"$racc_next_state",function(U,K){var i=this;return i.racc_debug_out.$puts("goto    "+U),i.$racc_print_states(K),i.racc_debug_out.$puts()},2),G(l,"$racc_print_stacks",function(U,K){var q=e;return(q=this.racc_debug_out).$print("        ["),N(U,"each_index",[],function a(M){return null==M&&(M=e),q.$print(" (",(null==a.$$s?this:a.$$s).$racc_token2str(U["$[]"](M))," ",K["$[]"](M).$inspect(),")")},{$$arity:1,$$s:this}),q.$puts(" ]")},2),G(l,"$racc_print_states",function(U){var i=e;return(i=this.racc_debug_out).$print("        ["),N(U,"each",[],function(a){return null==a&&(a=e),i.$print(" ",a)},1),i.$puts(" ]")},1),G(l,"$racc_token2str",function(U){var i;return o(i=k(this.$class(),"Racc_token_to_s_table")["$[]"](U))?i:this.$raise("[Racc Bug] can't convert token "+U+" to string")},1),G(l,"$token_to_str",function(U){return k(this.$class(),"Racc_token_to_s_table")["$[]"](U)},1)}(n[0],n)},Opal.modules["bcdice/arithmetic/node"]=function(r){var G,f,I,d,c,b,C,D,B,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,w=r.def,P=r.send2,o=r.find_super,H=r.eqeq,V=r.const_set,m=r.eqeqeq,A=r.rb_divide,N=r.truthy,Z=r.alias;return G=Y,f=B=[e(Y[0],"BCDice")].concat(G),I=D=[e(B[0],"Arithmetic")].concat(f),b=[e(D[0],"Node")].concat(I),C=r.$r(b),(c=(d=k(b[0],null,"BinaryOp")).$$prototype).lhs=c.rhs=c.op=n,w(d,"$initialize",function(s,$,l){var h=this;return h.lhs=s,h.op=$,h.rhs=l},3),w(d,"$eval",function(s){var h,$=this,l=n;return l=$.lhs.$eval(s),h=$.rhs.$eval(s),l.$send($.op,h)},1),w(d,"$output",function(){var s=this;return""+s.lhs.$output()+s.op+s.rhs.$output()},0),w(d,"$s_exp",function(){var s=this;return"("+s.$op_for_s_exp()+" "+s.lhs.$s_exp()+" "+s.rhs.$s_exp()+")"},0),w(d,"$op_for_s_exp",function(){return this.op},0),function(z,v,d){var c=k(z,v,"DivideBase"),_=[c].concat(d),s=r.$r(_),$=c.$$prototype;$.lhs=$.rhs=$.op=n,w(c,"$initialize",function l(h,x){return delete l.$$p,P(this,o(this,"initialize",l,!1,!0),"initialize",[h,"/",x],null)},2),w(c,"$eval",function(h){var T,g,x=this;return T=x.lhs.$eval(h),g=x.rhs.$eval(h),H(g,0)&&x.$raise(s("ZeroDivisionError")),x.$divide_and_round(T,g,h)},1),w(c,"$output",function l(){var h=l.$$p||n,x=this;return delete l.$$p,""+P(x,o(x,"output",l,!1,!0),"output",[],h)+x.$rounding_method()},0),c.$private(),w(c,"$rounding_method",function(){return t(this.$class(),"ROUNDING_METHOD")},0),w(c,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()},0),w(c,"$divide_and_round",function(h,x,T){return this.$raise(s("NotImplementedError"))},3)}(b[0],C("BinaryOp"),b),function(z,v,d){var c=k(z,v,"DivideWithGameSystemDefault"),_=[c].concat(d),s=r.$r(_);V(_[0],"ROUNDING_METHOD",""),c.$private(),w(c,"$divide_and_round",function(l,h,x){var T,g=n;return m(t(s("RoundType"),"CEIL"),T=x)?A(l.$to_f(),h).$ceil():m(t(s("RoundType"),"ROUND"),T)?(g=A(l.$to_f(),h),N(g["$negative?"]())?g.$abs().$round()["$-@"]():g.$round()):A(l,h).$floor()},3)}(b[0],C("DivideBase"),b),function(z,v,d){var c=k(z,v,"DivideWithCeil"),_=[c].concat(d);V(_[0],"ROUNDING_METHOD","C"),c.$private(),w(c,"$divide_and_round",function($,l,h){return A($.$to_f(),l).$ceil()},3)}(b[0],C("DivideBase"),b),function(z,v,d){var c=k(z,v,"DivideWithRound"),_=[c].concat(d);V(_[0],"ROUNDING_METHOD","R"),c.$private(),w(c,"$divide_and_round",function($,l,h){var x=n;return x=A($.$to_f(),l),N(x["$negative?"]())?x.$abs().$round()["$-@"]():x.$round()},3)}(b[0],C("DivideBase"),b),function(z,v,d){var c=k(z,v,"DivideWithFloor"),_=[c].concat(d);V(_[0],"ROUNDING_METHOD","F"),c.$private(),w(c,"$divide_and_round",function($,l,h){return A($,l).$floor()},3)}(b[0],C("DivideBase"),b),function(z,v){var d=k(z,null,"Negative");d.$$prototype.body=n,w(d,"$initialize",function(s){return this.body=s},1),w(d,"$eval",function(s){return this.body.$eval(s)["$-@"]()},1),w(d,"$output",function(){return"-"+this.body.$output()},0),w(d,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"},0)}(b[0]),function(z,v){var d=k(z,null,"Parenthesis");d.$$prototype.expr=n,w(d,"$initialize",function(s){return this.expr=s},1),w(d,"$eval",function(s){return this.expr.$eval(s)},1),w(d,"$output",function(){return"("+this.expr.$output()+")"},0),w(d,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"},0)}(b[0]),function(z,v){var d=k(z,null,"Number");return d.$$prototype.value=n,w(d,"$initialize",function(s){return this.value=s},1),w(d,"$eval",function(s){return this.value},1),w(d,"$output",function(){return this.value.$to_s()},0),Z(d,"s_exp","output")}(b[0])},Opal.modules.strscan=function(r){var Z,F,G,ee,B,Y=[],n=r.nil,e=r.def,k=r.truthy,w=r.eqeqeq,P=r.Opal,o=r.send,H=r.to_a,V=r.rb_minus,m=r.alias;return Z=Y,G=[F=(0,r.klass)(Y[0],null,"StringScanner")].concat(Z),ee=r.$r(G),(B=F.$$prototype).pos=B.string=B.working=B.matched=B.prev_pos=B.match=n,F.$attr_reader("pos","matched"),e(F,"$initialize",function(f){var u=this;return u.string=f,u.pos=0,u.matched=n,u.working=f,u.match=[]},1),F.$attr_reader("string"),e(F,"$beginning_of_line?",function(){var f=this;return 0===f.pos||"\n"===f.string.charAt(f.pos-1)},0),e(F,"$scan",function(f){var u=this,D=(f=u.$anchor(f)).exec(u.working);return null==D?u.matched=n:"object"==typeof D?(u.prev_pos=u.pos,u.pos+=D[0].length,u.working=u.working.substring(D[0].length),u.matched=D[0],u.match=D,D[0]):"string"==typeof D?(u.pos+=D.length,u.working=u.working.substring(D.length),D):n},1),e(F,"$scan_until",function(f){var u=this;f=u.$anchor(f);for(var I,D=u.pos,E=u.working;;){if(I=f.exec(E),D+=1,E=E.substr(1),null!=I)return u.matched=u.string.substr(u.pos,D-u.pos-1+I[0].length),u.match=I,u.prev_pos=D-1,u.pos=D,u.working=E.substr(I[0].length),u.matched;if(0===E.length)return u.match=[],u.matched=n}},1),e(F,"$[]",function(f){var D;if(k(this.match["$empty?"]()))return n;w(ee("Symbol"),D=f)?f=f.$to_s():w(ee("String"),D)||(f=P["$coerce_to!"](f,ee("Integer"),"to_int"));var E=this.match;return f<0&&(f+=E.length),f<0||f>=E.length||null==E[f]?n:E[f]},1),e(F,"$check",function(f){var u=this,D=(f=u.$anchor(f)).exec(u.working);return u.matched=null==D?n:D[0]},1),e(F,"$check_until",function(f){var u=this,D=u.prev_pos,E=u.pos,I=u.$scan_until(f);return I!==n&&(u.matched=I.substr(-1),u.working=u.string.substr(E)),u.prev_pos=D,u.pos=E,I},1),e(F,"$peek",function(f){return this.working.substring(0,f)},1),e(F,"$eos?",function(){return 0===this.working.length},0),e(F,"$exist?",function(f){var D=f.exec(this.working);return null==D?n:0==D.index?0:D.index+1},1),e(F,"$skip",function(f){var u=this,D=(f=u.$anchor(f)).exec(u.working);if(null==D)return u.match=[],u.matched=n;var E=D[0],I=E.length;return u.matched=E,u.match=D,u.prev_pos=u.pos,u.pos+=I,u.working=u.working.substring(I),I},1),e(F,"$skip_until",function(f){var D=this.$scan_until(f);return D===n?n:(this.matched=D.substr(-1),D.length)},1),e(F,"$get_byte",function(){var f=this,u=n;return f.pos<f.string.length?(f.prev_pos=f.pos,f.pos+=1,u=f.matched=f.working.substring(0,1),f.working=f.working.substring(1)):f.matched=n,u},0),e(F,"$match?",function(f){var u=this,D=(f=u.$anchor(f)).exec(u.working);return null==D?n:(u.prev_pos=u.pos,D[0].length)},1),e(F,"$pos=",function(f){var u=this;return f<0&&(f+=u.string.$length()),u.pos=f,u.working=u.string.slice(f)},1),e(F,"$matched_size",function(){return this.matched===n?n:this.matched.length},0),e(F,"$post_match",function(){var f=this;return f.matched===n?n:f.string.substr(f.pos)},0),e(F,"$pre_match",function(){var f=this;return f.matched===n?n:f.string.substr(0,f.prev_pos)},0),e(F,"$reset",function(){var f=this;return f.working=f.string,f.matched=n,f.pos=0},0),e(F,"$rest",function(){return this.working},0),e(F,"$rest?",function(){return 0!==this.working.length},0),e(F,"$rest_size",function(){return this.$rest().$size()},0),e(F,"$terminate",function(){var u,f=this;return f.match=n,u=[f.string.$length()],o(f,"pos=",H(u)),u[V(u.length,1)]},0),e(F,"$unscan",function(){var f=this;return f.pos=f.prev_pos,f.prev_pos=n,f.match=n,f},0),m(F,"bol?","beginning_of_line?"),m(F,"getch","get_byte"),F.$private(),e(F,"$anchor",function(f){var u=f.toString().match(/\/([^\/]+)$/);return u=u?u[1]:void 0,new RegExp("^(?:"+f.source+")",u)},1)},Opal.modules["bcdice/normalize"]=function(r){var o,A,V,Y=[],n=r.nil,t=r.module,e=r.eqeqeq,k=r.def,w=r.eqeq;return o=Y,V=[t(Y[0],"BCDice")].concat(o),(A=t(V[0],"Normalize")).$module_function(),k(A,"$comparison_operator",function(Z){var F;return e(/<=|=</,F=Z)?"<=":e(/>=|=>/,F)?">=":e(/<>|!=|=!/,F)?"!=":e(/</,F)?"<":e(/>/,F)?">":e(/=/,F)?"==":n},1),k(A,"$target_number",function(Z){return w(Z,"?")?Z:Z.$to_i()},1)},Opal.modules["bcdice/command/lexer"]=function(r){var A,G,u,D,E,I,S,B,Z,Y=r.top,n=[],t=r.nil,e=r.module,k=r.klass,w=r.const_set,P=r.hash2,o=r.truthy,H=r.send,V=r.def;return Y.$require("strscan"),Y.$require("bcdice/normalize"),A=n,G=Z=[e(n[0],"BCDice")].concat(A),u=B=[e(Z[0],"Command")].concat(G),E=[D=k(B[0],null,"Lexer")].concat(u),I=r.$r(E),(S=D.$$prototype).scanner=S.notations=t,w(E[0],"SYMBOLS",P(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),V(D,"$initialize",function(C,z){var v,d,_;return C=o(_=(d=(v=C)===t||null==v?t:H(v,"split",[" ",2]))===t||null==d?t:H(d,"first",[]))?_:"",this.scanner=I("StringScanner").$new(C),this.notations=H(z,"map",[],function($){return null==$&&($=t),o($["$is_a?"](I("String")))?I("Regexp").$new($):$},1)},2),V(D,"$next_token",function(){try{var C=this,z=t,v=t,c=t,_=t;return o(C.scanner["$eos?"]())?[!1,"$"]:(H(C.notations,"each",[],function s($){var h,l=null==s.$$s?this:s.$$s;if(null==l.scanner&&(l.scanner=t),null==$&&($=t),h=l.scanner.$scan($),!o(h))return t;r.ret(["NOTATION",h])},{$$arity:1,$$s:C}),o(z=C.scanner.$scan(/\d+/))?["NUMBER",z.$to_i()]:o(v=C.scanner.$scan(/[<>!=]+/))?(v=I("Normalize").$comparison_operator(v),[o(v)?"CMP_OP":"ILLEGAL",v]):(c=C.scanner.$getch().$upcase(),[o(_=I("SYMBOLS")["$[]"](c))?_:c.$to_sym(),c]))}catch(s){if(s===r.returner)return s.$v;throw s}},0),V(D,"$source",function(){return this.scanner.$string()},0)},Opal.modules["bcdice/command/parsed"]=function(r){var H,N,B,L,f,u,D,F,m,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,w=r.truthy,P=r.eqeqeq;return H=Y,N=m=[t(Y[0],"BCDice")].concat(H),B=F=[t(m[0],"Command")].concat(N),f=[L=e(F[0],null,"Parsed")].concat(B),u=r.$r(f),(D=L.$$prototype).question_target=D.critical=D.fumble=D.dollar=D.modify_number=D.target_number=D.prefix_number=D.command=D.suffix_number=D.cmp_op=n,L.$attr_accessor("command"),L.$attr_accessor("prefix_number"),L.$attr_accessor("suffix_number"),L.$attr_accessor("critical"),L.$attr_accessor("fumble"),L.$attr_accessor("dollar"),L.$attr_accessor("modify_number"),L.$attr_accessor("cmp_op"),L.$attr_accessor("target_number"),L.$attr_writer("question_target"),k(L,"$initialize",function(){var I=this;return I.prefix_number=n,I.suffix_number=n,I.critical=n,I.fumble=n,I.dollar=n,I.cmp_op=n,I.target_number=n,I.question_target=!1},0),k(L,"$question_target?",function(){return this.question_target},0),k(L,"$to_s",function(I){var c,S=this,b=n,C=n,z=n,v=n,d=n;return null==I&&(I="after_command"),b=w(S.critical)?"@"+S.critical:n,C=w(S.fumble)?"#"+S.fumble:n,z=w(S.dollar)?"$"+S.dollar:n,v=u("Format").$modifier(S.modify_number),d=w(S.question_target)?"?":S.target_number,P("after_command",c=I)?[S.prefix_number,S.command,S.suffix_number,b,C,z,v,S.cmp_op,d].$join():P("after_modify_number",c)?[S.prefix_number,S.command,S.suffix_number,v,b,C,z,S.cmp_op,d].$join():P("after_target_number",c)?[S.prefix_number,S.command,S.suffix_number,v,S.cmp_op,d,b,C,z].$join():n},-1)},Opal.modules["bcdice/command/parser"]=function(r){var u,S,c,l,h,x,T,g,U,K,i,q,j,_,s,$,X,C,z,E,Y=r.top,n=[],t=r.$r(n),e=r.nil,k=r.$$$,w=r.klass,P=r.module,o=r.hash2,H=r.send2,V=r.find_super,m=r.def,A=r.send,N=r.to_a,Z=r.rb_minus,F=r.eqeq,G=r.hash,ee=r.const_set,B=r.truthy,L=r.to_ary;return Y.$require("racc/parser.rb"),Y.$require("bcdice/arithmetic/node"),Y.$require("bcdice/command/lexer"),Y.$require("bcdice/command/parsed"),w(k(t("BCDice"),"Command"),k(t("Racc"),"Parser"),"Parser"),u=n,S=E=[P(n[0],"BCDice")].concat(u),C=[P(E[0],"Command")].concat(S),z=r.$r(C),c=C,s=[_=w(C[0],k(z("Racc"),"Parser"),"Parser")].concat(c),$=r.$r(s),(X=_.$$prototype).notations=X.lexer=X.modifier=X.suffix_number=X.prefix_number=X.need_suffix_number=X.need_prefix_number=X.critical=X.fumble=X.dollar=X.allowed_cmp_op=X.question_target=e,m(_,"$initialize",function W(y,J){var p,R,ne,$e,O=this;if(delete W.$$p,p=r.slice.call(arguments),null==(R=r.extract_kwargs(p)))R=o([],{});else if(!R.$$is_hash)throw r.ArgumentError.$new("expected kwargs");if(ne=p,!r.hasOwnProperty.call(R.$$smap,"round_type"))throw r.ArgumentError.$new("missing keyword: round_type");return $e=R.$$smap.round_type,H(O,V(O,"initialize",W,!1,!0),"initialize",[],null),O.notations=ne,O.round_type=$e,O.prefix_number=!1,O.suffix_number=!1,O.need_prefix_number=!1,O.need_suffix_number=!1,O.modifier=!0,O.critical=!1,O.fumble=!1,O.dollar=!1,O.allowed_cmp_op=[e,">=",">","<=","<","==","!="],O.question_target=!1},-2),m(_,"$disable_modifier",function(){return this.modifier=!1,this},0),m(_,"$enable_prefix_number",function(){return this.prefix_number=!0,this},0),m(_,"$enable_suffix_number",function(){return this.suffix_number=!0,this},0),m(_,"$has_prefix_number",function(){var y=this;return y.prefix_number=!0,y.need_prefix_number=!0,y},0),m(_,"$has_suffix_number",function(){var y=this;return y.suffix_number=!0,y.need_suffix_number=!0,y},0),m(_,"$enable_critical",function(){return this.critical=!0,this},0),m(_,"$enable_fumble",function(){return this.fumble=!0,this},0),m(_,"$enable_dollar",function(){return this.dollar=!0,this},0),m(_,"$restrict_cmp_op_to",function(y){var J,R=this;return J=r.slice.call(arguments),R.allowed_cmp_op=J,R},-1),m(_,"$enable_question_target",function(){return this.question_target=!0,this},0),m(_,"$parse",function(y){var J=this;try{return J.lexer=$("Lexer").$new(y,J.notations),J.$do_parse()}catch(p){if(!r.rescue(p,[$("ParseError"),$("ZeroDivisionError")]))throw p;try{return e}finally{r.pop_exception()}}},1),_.$private(),m(_,"$parsed",function(y,J,p,R){return A($("Parsed").$new(),"tap",[],function $e(te){var O,ue,se,le,oe,ce,ae=null==$e.$$s?this:$e.$$s,ie=e;return null==ae.round_type&&(ae.round_type=e),null==te&&(te=e),ie=[y["$[]"]("command")],A(te,"command=",N(ie)),Z(ie.length,1),ie=[(O=y["$[]"]("prefix"),O===e||null==O?e:A(O,"eval",[ae.round_type]))],A(te,"prefix_number=",N(ie)),Z(ie.length,1),ie=[(ue=y["$[]"]("suffix"),ue===e||null==ue?e:A(ue,"eval",[ae.round_type]))],A(te,"suffix_number=",N(ie)),Z(ie.length,1),ie=[(se=J["$[]"]("critical"),se===e||null==se?e:A(se,"eval",[ae.round_type]))],A(te,"critical=",N(ie)),Z(ie.length,1),ie=[(le=J["$[]"]("fumble"),le===e||null==le?e:A(le,"eval",[ae.round_type]))],A(te,"fumble=",N(ie)),Z(ie.length,1),ie=[(oe=J["$[]"]("dollar"),oe===e||null==oe?e:A(oe,"eval",[ae.round_type]))],A(te,"dollar=",N(ie)),Z(ie.length,1),ie=[p.$eval(ae.round_type)],A(te,"modify_number=",N(ie)),Z(ie.length,1),ie=[R["$[]"]("cmp_op")],A(te,"cmp_op=",N(ie)),Z(ie.length,1),F(R["$[]"]("target"),"?")?(A(te,"question_target=",N(ie=[!0])),Z(ie.length,1),A(te,"target_number=",N(ie=[0])),ie[Z(ie.length,1)]):(A(te,"question_target=",N(ie=[!1])),Z(ie.length,1),ie=[(ce=R["$[]"]("target"),ce===e||null==ce?e:A(ce,"eval",[ae.round_type]))],A(te,"target_number=",N(ie)),ie[Z(ie.length,1)])},{$$arity:1,$$s:this})},4),m(_,"$next_token",function(){return this.lexer.$next_token()},0),l=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,33,34,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,e,e,17,18,6,e,5,e,e,17,18,e,e,5,23,24,25,26,56,54,55,57],h=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,e,17,15,15,18,18,23,e,18,30,30,23,23,24,e,23,31,31,24,24,25,e,24,44,44,25,25,28,e,25,47,47,28,28,29,e,28,48,48,29,29,33,e,29,49,49,33,33,34,e,33,50,50,34,34,36,e,34,e,e,36,36,37,e,36,e,e,37,37,e,e,37,27,27,27,27,52,52,52,52],x=[-2,4,16,-3,-1,11,e,33,13,35,23,30,1,e,28,40,e,37,44,e,e,-2,e,51,58,65,0,106,72,79,47,54,e,86,93,e,100,107,e,e,e,e,e,e,63,e,e,68,75,82,89,e,120,e,e,e,e,e],T=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],g=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,e,e,21,47,48,40,51,52,49,50,44,46,3,e,e,e,13,e,e,e,e,e,e,e,32],U=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,e,e,4,8,8,5,7,7,8,8,9,5,6,e,e,e,6,e,e,e,e,e,e,e,6],K=[e,6,13,3,9,-1,27,-15,-10,-1,-38],i=[e,e,e,e,e,e,19,16,15,e,e],q=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],j=G(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),ee(s[0],"Racc_arg",[l,h,T,x,g,U,i,K,19,q,j,58,35,!0]),ee(s[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),ee(s[0],"Racc_debug_parser",!1),m(_,"$_reduce_1",function(y,J,p){var R;return B(this.modifier)||this.$raise($("ParseError")),R=L(y),this.$parsed(null==R[0]?e:R[0],null==R[1]?e:R[1],null==R[2]?e:R[2],null==R[3]?e:R[3])},3),m(_,"$_reduce_2",function(y,J,p){var R;return B(this.modifier)||this.$raise($("ParseError")),R=L(y),this.$parsed(null==R[0]?e:R[0],null==R[2]?e:R[2],null==R[1]?e:R[1],null==R[3]?e:R[3])},3),m(_,"$_reduce_3",function(y,J,p){var R,ue;return ue=null==(R=L(y))[2]?e:R[2],this.$parsed(null==R[0]?e:R[0],null==R[1]?e:R[1],k(k($("Arithmetic"),"Node"),"Number").$new(0),ue)},3),m(_,"$_reduce_4",function(y,J,p){var R=this;return B(R.prefix_number)&&B(R.suffix_number)||R.$raise($("ParseError")),o(["command","prefix","suffix"],{command:y["$[]"](1),prefix:y["$[]"](0),suffix:y["$[]"](2)})},3),m(_,"$_reduce_5",function(y,J,p){var R=this;return B(R.prefix_number)||R.$raise($("ParseError")),B(R.need_suffix_number)&&R.$raise($("ParseError")),o(["command","prefix"],{command:y["$[]"](1),prefix:y["$[]"](0)})},3),m(_,"$_reduce_6",function(y,J,p){var R=this;return B(R.suffix_number)||R.$raise($("ParseError")),B(R.need_prefix_number)&&R.$raise($("ParseError")),o(["command","suffix"],{command:y["$[]"](0),suffix:y["$[]"](1)})},3),m(_,"$_reduce_7",function(y,J,p){var R=this;return(B(R.need_prefix_number)||B(R.need_suffix_number))&&R.$raise($("ParseError")),o(["command"],{command:y["$[]"](0)})},3),m(_,"$_reduce_8",function(y,J,p){return o([],{})},3),m(_,"$_reduce_9",function(y,J,p){var R,ue,se,te=e;return te=null==(R=L(y))[0]?e:R[0],ue=null==R[2]?e:R[2],B(this.critical)&&B(te["$[]"]("critical")["$nil?"]())||this.$raise($("ParseError")),A(te,"[]=",N(se=["critical",ue])),Z(se.length,1),te},3),m(_,"$_reduce_10",function(y,J,p){var R,ue,se,te=e;return te=null==(R=L(y))[0]?e:R[0],ue=null==R[2]?e:R[2],B(this.fumble)&&B(te["$[]"]("fumble")["$nil?"]())||this.$raise($("ParseError")),A(te,"[]=",N(se=["fumble",ue])),Z(se.length,1),te},3),m(_,"$_reduce_11",function(y,J,p){var R,ue,se,te=e;return te=null==(R=L(y))[0]?e:R[0],ue=null==R[2]?e:R[2],B(this.dollar)&&B(te["$[]"]("dollar")["$nil?"]())||this.$raise($("ParseError")),A(te,"[]=",N(se=["dollar",ue])),Z(se.length,1),te},3),m(_,"$_reduce_12",function(y,J,p){return y["$[]"](1)},3),m(_,"$_reduce_13",function(y,J,p){return k(k($("Arithmetic"),"Node"),"Negative").$new(y["$[]"](1))},3),m(_,"$_reduce_14",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"+",y["$[]"](2))},3),m(_,"$_reduce_15",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"-",y["$[]"](2))},3),m(_,"$_reduce_16",function(y,J,p){return B(this.allowed_cmp_op["$include?"](e))||this.$raise($("ParseError")),o([],{})},3),m(_,"$_reduce_17",function(y,J,p){var R,te,O;return O=null==(R=L(y))[1]?e:R[1],B(this.allowed_cmp_op["$include?"](te=null==R[0]?e:R[0]))||this.$raise($("ParseError")),o(["cmp_op","target"],{cmp_op:te,target:O})},3),m(_,"$_reduce_18",function(y,J,p){var ne,R=this;return ne=y["$[]"](0),B(R.question_target)||R.$raise($("ParseError")),B(R.allowed_cmp_op["$include?"](ne))||R.$raise($("ParseError")),o(["cmp_op","target"],{cmp_op:ne,target:"?"})},3),m(_,"$_reduce_19",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"+",y["$[]"](2))},3),m(_,"$_reduce_20",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"-",y["$[]"](2))},3),m(_,"$_reduce_22",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"*",y["$[]"](2))},3),m(_,"$_reduce_23",function(y,J,p){return y["$[]"](3).$new(y["$[]"](0),y["$[]"](2))},3),m(_,"$_reduce_25",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")},3),m(_,"$_reduce_26",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithCeil")},3),m(_,"$_reduce_27",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithCeil")},3),m(_,"$_reduce_28",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithRound")},3),m(_,"$_reduce_29",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithFloor")},3),m(_,"$_reduce_30",function(y,J,p){return y["$[]"](1)},3),m(_,"$_reduce_31",function(y,J,p){return k(k($("Arithmetic"),"Node"),"Negative").$new(y["$[]"](1))},3),m(_,"$_reduce_33",function(y,J,p){return y["$[]"](1)},3),m(_,"$_reduce_34",function(y,J,p){return k(k($("Arithmetic"),"Node"),"Number").$new(y["$[]"](0))},3),m(_,"$_reduce_none",function(y,J,p){return y["$[]"](0)},3)},Opal.modules["bcdice/deprecated/checker"]=function(r){var H,N,ee,B,L,f,F,m,Y=[],n=r.nil,t=r.module,e=r.send,k=r.eqeqeq,w=r.truthy,P=r.def;return H=Y,N=m=[t(Y[0],"BCDice")].concat(H),ee=F=[t(m[0],"Deprecated")].concat(N),L=[B=t(F[0],"Checker")].concat(ee),f=r.$r(L),B.$private(),P(B,"$check_result_legacy",function(D,E,I,S){var v,b=this,C=n,z=n,d=n,c=n;return C=e(E,"map",[],"sides".$to_proc()),v=(z=e(E,"map",[],"value".$to_proc())).$sum(),d=k([100],c=C)?b.$check_1D100(D,v,I,S):k([20],c)?b.$check_1D20(D,v,I,S):k([6,6],c)?b.$check_2D6(D,v,z,I,S):n,(w(d["$nil?"]())||w(d["$empty?"]()))&&(d=k([10],c=C.$uniq())?b.$check_nD10(D,v,z,I,S):k([6],c)?b.$check_nD6(D,v,z,I,S):n,w(d["$nil?"]())||w(d["$empty?"]()))?n:f("Result").$new(d.$delete_prefix(" \uff1e "))},4),P(B,"$check_1D100",function(D,E,I,S){return n},4),P(B,"$check_1D20",function(D,E,I,S){return n},4),P(B,"$check_nD10",function(D,E,I,S,b){return n},5),P(B,"$check_2D6",function(D,E,I,S,b){return n},5),P(B,"$check_nD6",function(D,E,I,S,b){return n},5)},Opal.modules["bcdice/base"]=function(r){var E,z,s,l,h,v,d,c,_,S,Y=r.top,n=[],t=r.$r(n),e=r.nil,k=r.$$$,w=r.module,P=r.klass,o=r.truthy,H=r.def,V=r.regexp,m=r.rb_plus,A=r.send,N=r.to_a,Z=r.rb_minus,F=r.eqeqeq,G=r.eqeq,ee=r.range,B=r.rb_divide,L=r.rb_times,f=r.rb_ge,u=e;return Y.$require("i18n"),Y.$require("i18n/backend/fallbacks"),Y.$require("bcdice/randomizer"),Y.$require("bcdice/dice_table"),Y.$require("bcdice/enum"),Y.$require("bcdice/translate"),Y.$require("bcdice/result"),Y.$require("bcdice/command/parser"),Y.$require("bcdice/deprecated/checker"),E=n,z=S=[w(n[0],"BCDice")].concat(E),d=[v=P(S[0],null,"Base")].concat(z),c=r.$r(d),(_=v.$$prototype).sort_add_dice=_.sort_barabara_dice=_.enabled_d9=_.raw_input=_.randomizer=_.enabled_upcase_input=_.debug=e,l=[s=r.get_singleton_class(v)].concat(d),h=r.$r(l),s.$attr_reader("prefixes"),H(s,"$register_prefix",function(T){var U,K=this,i=e;return null==K.prefixes&&(K.prefixes=e),U=r.slice.call(arguments),K.prefixes=o(i=K.prefixes)?i:[],K.prefixes.$concat(U.$flatten())},-1),H(s,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())},0),H(s,"$prefixes_pattern",function(){var T=this,g=e;return null==T.prefixes_pattern&&(T.prefixes_pattern=e),null==T.prefixes&&(T.prefixes=e),T.prefixes_pattern=o(g=T.prefixes_pattern)?g:e,o(T.prefixes_pattern)?T.prefixes_pattern:(T.prefixes=o(g=T.prefixes)?g:[],T.prefixes.$freeze(),T.prefixes_pattern=(o(T.prefixes["$empty?"]())?/(?!)/:V(["^(S)?(",T.prefixes.$join("|"),")"],"i")).$freeze())},0),H(s,"$command_pattern",function(){var T=this,g=e,U=e;return null==T.command_pattern&&(T.command_pattern=e),null==T.prefixes&&(T.prefixes=e),T.command_pattern=o(g=T.command_pattern)?g:e,o(T.command_pattern)?T.command_pattern:(T.prefixes=o(g=T.prefixes)?g:[],T.prefixes.$freeze(),U=m(A(k(h("CommonCommand"),"COMMANDS"),"map",[],function(i){return null==i&&(i=e),k(i,"PREFIX_PATTERN").$source()},1),T.prefixes),T.command_pattern=V(["^S?(",U.$join("|"),")"],"i").$freeze())},0),H(s,"$eval",function(T){return this.$new(T).$eval()},1),v.$include(c("Translate")),v.$include(k(c("Deprecated"),"Checker")),H(v,"$initialize",function($){var l=this;return l.raw_input=$,l.sort_add_dice=!1,l.sort_barabara_dice=!1,l.d66_sort_type=k(c("D66SortType"),"NO_SORT"),l.enabled_d9=!1,l.round_type=k(c("RoundType"),"FLOOR"),l.sides_implicit_d=6,l.upper_dice_reroll_threshold=e,l.reroll_dice_reroll_threshold=e,l.default_cmp_op=e,l.default_target_number=e,l.enabled_upcase_input=!0,l.locale="ja_jp",l.randomizer=k(c("BCDice"),"Randomizer").$new(),l.debug=!1},1),v.$attr_accessor("randomizer"),v.$attr_reader("d66_sort_type"),v.$attr_reader("round_type"),v.$attr_reader("sides_implicit_d"),v.$attr_reader("upper_dice_reroll_threshold"),v.$attr_reader("reroll_dice_reroll_threshold"),v.$attr_reader("default_cmp_op"),v.$attr_reader("default_target_number"),H(v,"$sort_add_dice?",function(){return this.sort_add_dice},0),H(v,"$sort_barabara_dice?",function(){return this.sort_barabara_dice},0),H(v,"$enabled_d9?",function(){return this.enabled_d9},0),H(v,"$enable_debug",function(){return this.debug=!0},0),H(v,"$eval",function(){var l,h,x,$=this,T=e;return l=k(c("BCDice"),"Preprocessor").$process($.raw_input,$),h=o(x=$.$dice_command(l))?x:$.$eval_common_command($.raw_input),o(h)?(T=[$.randomizer.$rand_results()],A(h,"rands=",N(T)),Z(T.length,1),T=[$.randomizer.$detailed_rand_results()],A(h,"detailed_rands=",N(T)),Z(T.length,1),h):e},0),H(v,"$change_text",function($){return $},1),H(v,"$check_result",function($,l,h,x){var T=this,g=e,U=e,K=e,i=e,q=e;return g=T.$check_result_legacy($,l,h,x),o(g)?g:(U=A(l,"map",[],"sides".$to_proc()),i=(K=A(l,"map",[],"value".$to_proc())).$sum(),g=F([100],q=U)?T.$result_1d100($,i,h,x):F([20],q)?T.$result_1d20($,i,h,x):F([6,6],q)?T.$result_2d6($,i,K,h,x):e,G(g,c("Result").$nothing())?e:o(g)?g:(g=F([10],q=U.$uniq())?T.$result_nd10($,i,K,h,x):F([6],q)?T.$result_nd6($,i,K,h,x):e,G(g,c("Result").$nothing())?e:o(g)?g:T.$result_ndx($,h,x)))},4),H(v,"$grich_text",function($,l,h){return e},3),v.$private(),H(v,"$eval_common_command",function($){try{return $=this.$change_text($),A(k(c("CommonCommand"),"COMMANDS"),"each",[],function h(x){var g,T=null==h.$$s?this:h.$$s;if(null==T.randomizer&&(T.randomizer=e),null==x&&(x=e),g=x.$eval($,T,T.randomizer),!o(g))return e;r.ret(g)},{$$arity:1,$$s:this}),e}catch(h){if(h===r.returner)return h.$v;throw h}},1),H(v,"$dice_command",function($){var l=this,h=e,x=e,T=e,g=e,U=e;return o(l.enabled_upcase_input)&&($=$.$upcase()),h=l.$class().$prefixes_pattern().$match($),o(h)?(x=h["$[]"](1)["$nil?"]()["$!"](),o(x)&&($=$["$[]"](ee(1,-1,!1))),T=l.$eval_game_system_specific_command($),o(T["$is_a?"](c("Result")))?(g=[o(U=T["$secret?"]())?U:x],A(T,"secret=",N(g)),Z(g.length,1),T):o(T["$nil?"]())||o(T["$empty?"]())||G(T,"1")?e:A(c("Result").$new(),"tap",[],function(i){return null==i&&(i=e),g=[T.$to_s()],A(i,"text=",N(g)),Z(g.length,1),A(i,"secret=",N(g=[x])),g[Z(g.length,1)]},1)):e},1),H(v,"$eval_game_system_specific_command",function($){return e},1),H(v,"$result_ndx",function($,l,h){return o(h["$is_a?"](c("String")))?e:o($.$send(l,h))?c("Result").$success(this.$translate("success")):c("Result").$failure(this.$translate("failure"))},3),H(v,"$result_1d100",function($,l,h,x){return e},4),H(v,"$result_1d20",function($,l,h,x){return e},4),H(v,"$result_nd10",function($,l,h,x,T){return e},5),H(v,"$result_2d6",function($,l,h,x,T){return e},5),H(v,"$result_nd6",function($,l,h,x,T){return e},5),H(v,"$get_table_by_2d6",function($){return this.$get_table_by_nD6($,2)},1),H(v,"$get_table_by_1d6",function($){return this.$get_table_by_nD6($,1)},1),H(v,"$get_table_by_nD6",function($,l){return this.$get_table_by_nDx($,l,6)},2),H(v,"$get_table_by_nDx",function($,l,h){var T,g=e;return T=this.randomizer.$roll_sum(l,h),g=this.$get_table_value($["$[]"](Z(T,l))),o(g["$nil?"]())?["1",0]:[g,T]},3),H(v,"$get_table_by_1d3",function($){var x,T,l=this,g=e;return l.$debug("get_table_by_1d3"),x=l.randomizer.$roll_sum(1,6),l.$debug("num",x),T=B(Z(x,1),2).$to_i(),l.$debug("index",T),g=$["$[]"](T),o(g["$nil?"]())?["1",0]:[g,x]},1),H(v,"$get_table_by_d66_swap",function($){var h;return h=this.randomizer.$roll_d66(k(c("D66SortType"),"ASC")),[this.$get_table_by_number(h,$),h]},1),H(v,"$get_table_by_d66",function($){var h,x,T,U,g=e;return h=this.randomizer.$roll_once(6),x=this.randomizer.$roll_once(6),T=m(L(Z(h,1),6),Z(x,1)),g=$["$[]"](T),U=""+h+x,o(g["$nil?"]())?["1",U]:[g,U]},1),H(v,"$get_table_by_number",function($,l,h){try{return null==h&&(h="1"),A(l,"each",[],function T(g){var K,U=null==T.$$s?this:T.$$s;if(null==g&&(g=e),K=g["$[]"](0),!o(f(K,$)))return e;r.ret(U.$get_table_value(g["$[]"](1)))},{$$arity:1,$$s:this}),this.$get_table_value(h)}catch(T){if(T===r.returner)return T.$v;throw T}},-3),H(v,"$get_table_value",function($){return o($["$is_a?"](c("Proc")))?$.$call():$},1),H(v,"$roll_tables",function($,l){var x=e;return x=l["$[]"]($),o(x)?x.$roll(this.randomizer).$to_s():e},2),H(v,"$debug",function($,l){var x,T=this,g=e,U=e;return x=r.slice.call(arguments,1),o(T.debug)?(g=o($["$is_a?"](c("String")))?$:$.$inspect(),o(x["$empty?"]())?T.$warn(g):(U=A(x,"map",[],function(i){return null==i&&(i=e),o(i["$is_a?"](c("String")))?'"'+i+'"':i.$inspect()},1),T.$warn(g+": "+U.$join(", ")))):e},-2),k(k(t("I18n"),"Backend"),"Simple").$include(k(k(t("I18n"),"Backend"),"Fallbacks")),t("I18n").$load_path()["$<<"](t("Dir")["$[]"](t("File").$join("bcdice","../../i18n/**/*.yml"))),u=["ja_jp"],A(t("I18n"),"default_locale=",N(u)),Z(u.length,1),u=[["ja_jp"]],A(t("I18n").$fallbacks(),"defaults=",N(u)),u[Z(u.length,1)]},Opal.modules["bcdice/arithmetic_evaluator"]=function(r){var H,N,G,B,L,Z,F,m,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.hash2,w=r.truthy,P=r.def;return H=Y,N=m=[e(Y[0],"BCDice")].concat(H),F=[Z=e(m[0],"ArithmeticEvaluator")].concat(N),B=[G=r.get_singleton_class(Z)].concat(F),L=r.$r(B),P(G,"$eval",function(u,D){var E,I=n;if(null==D)D=k([],{});else if(!D.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(E=D.$$smap.round_type)&&(E=t(L("RoundType"),"FLOOR")),w(u)&&w(I=L("Arithmetic").$eval(u,E))?I:0},-2)},Opal.modules["bcdice/game_system/LogHorizon"]=function(r){var b,d,$,l,h,q,a,x,T,g,U,_,s,z,Y=r.top,n=[],t=r.nil,e=r.$$$,k=r.module,w=r.klass,P=r.const_set,o=r.send2,H=r.find_super,V=r.def,m=r.truthy,A=r.hash2,N=r.rb_plus,Z=r.send,F=r.to_a,G=r.rb_minus,ee=r.rb_ge,B=r.eqeqeq,L=r.rb_divide,f=r.rb_times,u=r.eqeq,D=r.neqeq,E=r.rb_le,I=r.rb_lt;return Y.$require("bcdice/base"),Y.$require("bcdice/arithmetic_evaluator"),b=n,d=z=[k(n[0],"BCDice")].concat(b),_=[k(z[0],"GameSystem")].concat(d),s=r.$r(_),$=_[0],l=s("Base"),h=_,T=[x=w($,l,"LogHorizon")].concat(h),g=r.$r(T),(U=x.$$prototype).randomizer=U.locale=t,P(T[0],"ID","LogHorizon"),P(T[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),P(T[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),P(T[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),x.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),V(x,"$initialize",function K(i){var a=this;return delete K.$$p,o(a,H(a,"initialize",K,!1,!0),"initialize",[i],null),a.d66_sort_type=e(g("D66SortType"),"NO_SORT")},1),V(x,"$eval_game_system_specific_command",function(i){var a,M,j,Q,re,X,W,y,J,p,R,q=this;return m(a=m(M=m(j=m(Q=m(re=m(X=m(W=m(y=m(J=m(p=m(R=q.$getCheckRollDiceCommandResult(i))?R:q.$roll_consumption(i))?p:q.$roll_consumption_table(i))?J:q.$roll_treasure(i))?y:q.$roll_treasure_table(i))?W:q.$roll_treasure_table_b2(i))?X:q.$getInventionAttributeTextDiceCommandResult(i))?re:q.$getTroubleInAkibaStreetDiceCommandResult(i))?Q:q.$getAbandonedChildDiceCommandResult(i))?j:q.$getMusicalInstrumentTypeDiceCommandResult(i))?M:q.$roll_eastal_exploration_table(i))?a:q.$roll_tables(i,e(q.$class(),"TABLES"))},1),x.$private(),V(x,"$getCheckRollDiceCommandResult",function(i){var q=this,M=t,j=t,Q=t,re=t,X=t,W=t,J=t;return M=e(g("Command"),"Parser").$new(/\d+LH/,A(["round_type"],{round_type:q.$round_type()})).$restrict_cmp_op_to(t,">=").$parse(i),m(M)?(j=M.$command().$to_i(),re=(Q=q.randomizer.$roll_barabara(j,6)).$sum(),X=N(re,M.$modify_number()),W=q.$result_text(j,Q,X,M),J=[["("+M+")",re+"["+Q.$join(",")+"]"+g("Format").$modifier(M.$modify_number()),X,W.$text()].$compact().$join(" \uff1e ")],Z(W,"text=",F(J)),G(J.length,1),W):t},1),V(x,"$result_text",function(i,q,a,M){var j=this;return m(ee(q.$count(6),2))?g("Result").$critical(j.$translate("LogHorizon.LH.critical")):m(ee(q.$count(1),i))?g("Result").$fumble(j.$translate("LogHorizon.LH.fumble")):m(M.$cmp_op()["$nil?"]())?g("Result").$new():m(ee(a,M.$target_number()))?g("Result").$success(j.$translate("success")):g("Result").$failure(j.$translate("failure"))},4),V(x,"$getValue",function(i,q){return m(i["$nil?"]())||m(i["$empty?"]())?q:g("ArithmeticEvaluator").$eval(i)},2),V(x,"$roll_consumption",function(i){var a=t,M=t,j=t,Q=t,re=t;return a=/^CT\d*([+\-\d]+)?$/.$match(i),m(a)?(M=g("ArithmeticEvaluator").$eval(a["$[]"](1)),j=g("Format").$modifier(M),Q=this.randomizer.$roll_once(6),m(j["$empty?"]())||(re=N(Q.$to_s(),j)),["(1D6"+j+")",re,N(Q,M)].$compact().$join(" \uff1e ")):t},1),V(x,"$roll_consumption_table",function(i){var a=t,M=t,j=t,Q=t;return a=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(i),m(a)?(M=this.$construct_consumption_table(a["$[]"](1)),j=a["$[]"](2).$to_i(),Q=g("ArithmeticEvaluator").$eval(a["$[]"](3)),m(a["$[]"](4))&&M.$fix_dice_value(a["$[]"](4).$to_i()),M.$roll(j,Q,this.randomizer)):t},1),V(x,"$construct_consumption_table",function(i){var M,q=this,a=t;return a=B("P",M=i)?q.$translate("LogHorizon.CT.PCT"):B("E",M)?q.$translate("LogHorizon.CT.ECT"):B("G",M)?q.$translate("LogHorizon.CT.GCT"):B("C",M)?q.$translate("LogHorizon.CT.CCT"):B("ES",M)?q.$translate("LogHorizon.CT.ESCT"):B("CS",M)?q.$translate("LogHorizon.CT.CSCT"):t,g("ConsumptionTable").$new(a["$[]"]("name"),a["$[]"]("items"))},1),(a=(q=w(T[0],null,"ConsumptionTable")).$$prototype).tables=a.dice_value=a.name=t,V(q,"$initialize",function(j,Q){return this.name=j,this.tables=Q,this.dice_value=t},2),V(q,"$fix_dice_value",function(j){return this.dice_value=j},1),V(q,"$roll",function(j,Q,re){var W,J,R,X=this,y=t,p=t;return W=L(G(j,1),5).$clamp(0,G(X.tables.$size(),1)),y=X.tables["$[]"](W),X.dice_value=m(J=X.dice_value)?J:re.$roll_once(6),p=N(X.dice_value,Q),R=y["$[]"](p.$clamp(0,7)),X.name+"("+p+"["+X.dice_value+"]) \uff1e "+R},3),V(x,"$roll_treasure",function(i){var a=t,M=t,j=t,Q=t,re=t,X=t;return a=/^TRS(\d+)?([+\-\d]+)?$/.$match(i),m(a)?(M=a["$[]"](1).$to_i(),j=g("ArithmeticEvaluator").$eval(a["$[]"](2)),re=(Q=this.randomizer.$roll_barabara(2,6)).$sum(),X=N(N(re,f(M,5)),j),"(2D6+"+M+"*5"+g("Format").$modifier(j)+") \uff1e "+re+"["+Q.$join(",")+"]"+g("Format").$modifier(N(f(M,5),j))+" \uff1e "+X):t},1),V(x,"$roll_treasure_table",function(i){var q=this,a=t,M=t,j=t,Q=t,re=t;return a=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(i),m(a)?(M=a["$[]"](1),j=q.$construct_treasure_table(M),Q=a["$[]"](2).$to_i(),re=g("ArithmeticEvaluator").$eval(a["$[]"](3)),u(Q,0)&&u(re,0)?q.$translate("LogHorizon.TRS.need_cr",A(["command"],{command:i})):(m(a["$[]"](4))&&j.$fix_dice_value(7),j.$roll(Q,re,q.randomizer))):t},1),V(x,"$construct_treasure_table",function(i){return u(i,"HTRS")?g("HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):g("TreasureTable").$from_i18n("LogHorizon.TRS."+i,this.locale)},1),V(x,"$roll_treasure_table_b2",function(i){var q=this,a=t,M=t,j=t,Q=t,re=t;return a=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(i),m(a)?(M=a["$[]"](1),j=g("ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+M,q.locale),Q=a["$[]"](2).$to_i(),re=g("ArithmeticEvaluator").$eval(a["$[]"](3)),u(Q,0)&&u(re,0)?q.$translate("LogHorizon.TRS.need_cr",A(["command"],{command:i})):(m(a["$[]"](4))&&j.$fix_dice_value(7),j.$roll(Q,re,q.randomizer))):t},1),function(K,i,q){var re,W,y,a=w(K,null,"TreasureTable"),M=[a].concat(q),j=r.$r(M),Q=a.$$prototype;Q.dice_list=Q.name=Q.items=t,a.$include(j("Translate")),W=[re=r.get_singleton_class(a)].concat(M),y=r.$r(W),V(re,"$from_i18n",function(p,R){var $e=t;return $e=y("I18n").$translate(p,A(["raise","locale"],{raise:!0,locale:R})),this.$new($e["$[]"]("name"),$e["$[]"]("items"),R)},2),V(a,"$initialize",function(X,W,y){var J=this;return J.name=X,J.items=W,J.locale=y,J.dice_list=t},3),V(a,"$fix_dice_value",function(X){return this.dice_list=[X]},1),V(a,"$roll",function(X,W,y){var J,p=this,R=t,ne=t,$e=t,te=t;return u(X,0)&&u(W,0)?t:(R=u(X,0)&&D(W,0)?W:(p.dice_list=m(ne=p.dice_list)?ne:y.$roll_barabara(2,6),N(N(p.dice_list.$sum(),f(5,X)),W)),$e=p.$pick_item(R),m(p.dice_list)&&(te="["+((J=p.dice_list)===t||null==J?t:Z(J,"join",[","]))+"]"),p.name+"("+R+te+") \uff1e "+$e)},3),a.$private(),V(a,"$pick_item",function(X){var W=this;return m(E(X,6))?W.$translate("LogHorizon.TRS.below_lower_limit",A(["value"],{value:6})):m(E(X,62))?W.items["$[]"](X.$to_s()):m(E(X,72))?W.items["$[]"](G(X,10).$to_s())+"&80G":m(E(X,82))?W.items["$[]"](G(X,20).$to_s())+"&160G":m(E(X,87))?W.items["$[]"](G(X,30).$to_s())+"&260G":W.$translate("LogHorizon.TRS.exceed_upper_limit",A(["value"],{value:88}))},1)}(T[0],0,T),function(K,i){var q=w(K,i,"HeroineTreasureTable");q.$$prototype.items=t,V(q,"$pick_item",function(j){var Q=this;return m(E(j,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",A(["value"],{value:6})):m(E(j,53))?Q.items["$[]"](j.$to_s()):Q.$translate("LogHorizon.TRS.exceed_upper_limit",A(["value"],{value:54}))},1)}(T[0],g("TreasureTable")),function(K,i){var q=w(K,i,"ExpansionTreasureTable");q.$$prototype.items=t,V(q,"$pick_item",function(j){var Q=this;return m(E(j,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",A(["value"],{value:6})):m(E(j,162))?Q.items["$[]"](j.$to_s()):m(E(j,172))?Q.items["$[]"](G(j,10).$to_s())+"&200G":m(E(j,182))?Q.items["$[]"](G(j,20).$to_s())+"&400G":m(E(j,187))?Q.items["$[]"](G(j,30).$to_s())+"&600G":Q.$translate("LogHorizon.TRS.exceed_upper_limit",A(["value"],{value:188}))},1)}(T[0],g("TreasureTable")),V(x,"$getInventionAttributeTextDiceCommandResult",function(i){var a=t,M=t,j=t,Q=t,re=t;return m(i["$=~"](/IAT([ABMDLT]*)/))?(a=this.$translate("LogHorizon.IAT.name"),M=m(g("Regexp").$last_match(1))&&D(g("Regexp").$last_match(1),"")?g("Regexp").$last_match(1):"MDLT",j=M.$length()["$=="](1),Q=[],re=[],Z(M.$split(/(?:)/),"each",[],function X(W){var R,y=null==X.$$s?this:X.$$s,J=t,p=t,ne=t;return null==y.randomizer&&(y.randomizer=t),null==W&&(W=t),J=y.randomizer.$roll_once(6),re["$<<"](J.$to_s()),ne=(p=B("A",R=W)||B("M",R)?y.$translate("LogHorizon.IAT.A"):B("B",R)||B("D",R)?y.$translate("LogHorizon.IAT.B"):B("L",R)?y.$translate("LogHorizon.IAT.L"):B("T",R)?y.$translate("LogHorizon.IAT.T"):t)["$[]"]("items")["$[]"](G(J,1)),m(j)&&(ne=p["$[]"]("name")+"\uff1a"+ne),Q.$push(ne)},{$$arity:1,$$s:this}),a+"(["+re.$join(",")+"]) \uff1e "+Q.$join(" ")):t},1),V(x,"$getTroubleInAkibaStreetDiceCommandResult",function(i){return u(i,"TIAS")?this.$roll_random_table("LogHorizon.TIAS"):t},1),V(x,"$getAbandonedChildDiceCommandResult",function(i){return u(i,"ABDC")?this.$roll_random_table("LogHorizon.ABDC"):t},1),V(x,"$roll_random_table",function(i){var a=t,M=t,j=t,Q=t;return a=this.$translate(i),M=a["$[]"]("tables"),j=this.randomizer.$roll_barabara(M.$size(),6),Q=Z(j.$map(),"with_index",[],function(X,W){return null==X&&(X=t),null==W&&(W=t),M["$[]"](W)["$[]"](G(X,1))},2),a["$[]"]("name")+"(["+j.$join(",")+"]) \uff1e "+Q.$join(" ")},1),V(x,"$getMusicalInstrumentTypeDiceCommandResult",function(i){var q=this,a=t,M=t,j=t,Q=t,re=t,X=t,W=t;return!m(i["$=~"](/MII(\d?)/))||(a=(m(M=g("Regexp").$last_match(1))?g("Regexp").$last_match(1)["$!="](""):M)["$!"](),j=m(a)?q.randomizer.$roll_once(6):g("Regexp").$last_match(1).$to_i(),m(I(j,1))||I(6,j))?t:(Q=q.$translate("LogHorizon.MII.name"),re=q.$translate("LogHorizon.MII.type_list")["$[]"](G(j,1)),X=q.randomizer.$roll_once(6),W=q.$translate("LogHorizon.MII.items")["$[]"](G(j,1))["$[]"](G(X,1)),N(N(Q.$to_s(),m(a)?"("+j+")":"")," \uff1e "+re+"("+X+") \uff1e "+W))},1),V(x,"$roll_eastal_exploration_table",function(i){var q,a=this,M=t,j=t,Q=t,re=t,X=t,W=t,y=t,J=t,R=t;return M=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(i),!m(M)||m(M["$[]"](1)["$nil?"]())&&m(M["$[]"](2)["$nil?"]())&&m(M["$[]"](3)["$nil?"]())?t:(j=M["$[]"](1).$to_i(),Q=g("ArithmeticEvaluator").$eval(M["$[]"](2)),re=(q=M["$[]"](3))===t||null==q?t:Z(q,"to_i",[]),X=m(re)?[re]:u(j,0)?[]:a.randomizer.$roll_barabara(2,6),m(X["$empty?"]())||(W="["+X.$join(",")+"]"),y=N(N(X.$sum(),f(j,5)),Q).$clamp(7,162),J=a.$translate("LogHorizon.ESTL.name"),R=a.$translate("LogHorizon.ESTL.items")["$[]"](y.$to_s()).$chomp(),J+"("+y+W+")\n"+R)},1),function(K,i){var q=[K].concat(i),a=r.$r(q);K.$private(),V(K,"$translate_tables",function(j){return A(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",j),KOYU:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",j),MGR1:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",j),MGR2:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",j),MGR3:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",j),HLOC:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",j),PCNM:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",j)})},1)}(r.get_singleton_class(x),T),P(T[0],"TABLES",x.$translate_tables("ja_jp")),x.$register_prefix(g("TABLES").$keys())},Opal.queue(function(r){var m,F,u,D,E,ee,B,N,n=[],e=r.module,k=r.klass,w=r.const_set,P=r.send2,o=r.find_super,H=r.def;return r.top.$require("bcdice/game_system/LogHorizon"),m=n,F=N=[e(n[0],"BCDice")].concat(m),ee=[e(N[0],"GameSystem")].concat(F),B=r.$r(ee),u=ee,w((E=[D=k(ee[0],B("LogHorizon"),"LogHorizon_Korean")].concat(u))[0],"ID","LogHorizon:Korean"),w(E[0],"NAME","\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),w(E[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),w(E[0],"HELP_MESSAGE","\u25a0 \ud310\uc815(xLH\xb1y>=z)\n\u3000xD6\uc758 \ud310\uc815.\ud06c\ub9ac\ud2f0\uceec, \ud38c\ube14\uc758 \uc790\ub3d9 \ud310\uc815\uc744 \uc2e4\uc2dc\ud569\ub2c8\ub2e4.\n\u3000x\uff1ax\ub85c \uad74\ub9b4 \uc8fc\uc0ac\uc704\uc758 \uc218\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\n\u3000\xb1y\uff1ay\ub85c \uc218\uc815\uce58\ub97c \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n  >=z\uff1az\ub85c \ubaa9\ud45c\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \uc18c\ubaa8\ud45c(tCTx\xb1y$z)\n\u3000PCT \uccb4\ub825\uff0fECT \uae30\ub825\uff0fGCT \ubb3c\ud488\uff0fCCT \uae08\uc804\n\u3000x:CR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\xb1y:\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$z\uff1a$\ub97c \ubd99\uc774\uba74 \uc8fc\uc0ac\uc704 \ub208\uc744 z\uace0\uc815\ud569\ub2c8\ub2e4. \ud45c\uc758 \ud2b9\uc815 \uac12 \ucc38\uc870\uc6a9\uc73c\ub85c \uc0ac\uc6a9\ud558\uba70.\uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc7ac\ubb3c\ud45c(tTRSx\xb1y$)\n\u3000CTRS \uae08\uc804\uff0fMTRS \ub9c8\ubc95\uc18c\uc7ac\uff0fITRS \ud658\uc804 \uc544\uc774\ud15c\uff0f\u203bHTRS \ud788\ub85c\uc778\uff0fGTRS \uace0\ube14\ub9b0 \uc7ac\ubcf4\ud45c\n\u3000x\uff1aCR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc0dd\ub7b5\uc2dc\uc5d0\ub294 \ub2e4\uc774\uce58 0\uace0\uc815\uc73c\ub85c \uc218\uc815\uce58\uc758 \ud45c\ub97c \ucc38\uc870.\u300a\uace8\ub4dc \ud551\uac70\u300b\uc0ac\uc6a9 \uc2dc \ub4f1.\n\u3000\xb1y\uff1a\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$\uff1a\uff04\uc744 \ubd99\uc774\uba74 \uc7ac\ubb3c\ud45c\uc758 \ub2e4\uc774\uc2a4\ub97c 7\ub85c \uace0\uc815\ud569\ub2c8\ub2e4.\uff081\ucc28 \ubd84\ub7c9\uc758 \ud504\ub77c\uc774\uc988 \uc6a9\ub3c4\uff09\uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc774\uc2a4\ud0c8 \ud0d0\uc0c9\ud45c (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \ud504\ub9ac\ud53d\uc2a4\ub4dc \ub9e4\uc9c1\uc544\uc774\ud15c \ud6a8\uacfc \ud45c(MGRx)\n\u3000x\ub294 MG\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\n\u25a0 \uc545\uae30 \uc885\ub958 \ud45c\u2020 (MIIx)\n\u3000x\ub294 \uc545\uae30\uc758 \uc885\ub958\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.(1~6\ub97c \uc9c0\uc815) \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u30001 \ud0c0\uc545\uae301\uff0f2 \uac74\ubc18\uc545\uae30\uff0f3 \ud604\uc545\uae301\uff0f4 \ud604\uc545\uae302\uff0f5 \uad00\uc545\uae301\uff0f6 \uad00\uc545\uae302\n\n\u25a0 \ud2b9\uc218 \uc18c\ubaa8\ud45c\u2606 (tSCTx\xb1y$z)\n\u3000\uc18c\ubaa8\ud45c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4. \ub2e4\ub9cc CR\uc740 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000ESCT \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\ub294 \ud3ed\ubc1c\ud588\ub2e4!\uff0fCSCT \uc54c\ube0c\uc758 \uc800\uc8fc\ub2e4!\n\n\u25a0 \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\uc758 \uc0c8\ub85c\uc6b4 \ubc1c\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (IATt)\n\u3000IATA \ud2b9\uc9d5A(\uc7a5\uc810)\uff0fIATB \ud2b9\uc9d5B(\ub2e8\uc810)\uff0fIATL \uc678\ud615\uff0fIATT \uc885\ub958\n\u3000t\ub97c \uc0dd\ub7b5\ud560 \uacbd\uc6b0 \ubaa8\ub450 \ud45c\uc2dc\ud569\ub2c8\ub2e4. t\uc5d0 A/B/L/T\ub97c \uc784\uc758\uc758 \uc21c\uc11c\ub85c \uc5f0\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \ud45c\n\u3000\u30fb\ud37c\uc2a4\ub110\ub9ac\ud2f0 \ud0dc\uadf8 \ud45c (PTAG)\n\u3000\u30fb\uad50\uc6b0\ud45c (KOYU)\n\u3000\u30fb\uacf5\uaca9 \uba85\uc911 \uc7a5\uc18c \ub79c\ub364 \uacb0\uc815\ud45c\u203b (HLOC)\n\u3000\u30fbPC\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (PCNM)\n\u3000\u30fb\uc544\ud0a4\ubc14 \uac70\ub9ac\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c \ub79c\ub364\uacb0\uc815 \ud45c\u203b (TIAS)\n\u3000\u30fb\ubc84\ub824\uc9c4 \uc544\uc774 \ub79c\ub364 \uacb0\uc815 \ud45c\u203b (ABDC)\n\n\u2020\ud45c\uc2dc\uc640 \u2606\ud45c\uc2dc\ub294\u300c\uc778\ud22c\u30fb\ub354\u30fb\uc140\ub374\uc2dc\uc544 \uc0c8\ub85c\uc6b4 \ube4c\ub4dc\uc758 \ub0a0\uac1c\uc9d3(1)\u300d\uc5d0\uc11c\u3001\n\u2606\ud45c\uc2dc\ub294 \uc140\ub374\uc2dc\uc544\u30fb\uac00\uc81c\ud2b8\u300cD \ub418\uae30\ub294 \ud560\uae4c? 66\u300dVol.1\uc5d0\uc11c\u3001\n\u203b\ud45c\uc2dc\ub294\u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc5d0\uc11c \ucc38\uc870\ud588\uc2b5\ub2c8\ub2e4. \uc774\uc6a9\ubc95\uc740 \ud56d\ubaa9\uc744 \ucc38\uc870\ud574\uc8fc\uc138\uc694.\n\u30fbD66\ub2e4\uc774\uc2a4\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\n\n\u30fb\uc5ed\uc790\uc758 \ub9d0 : \u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc740 \ud55c\uad6d\uc5d0\uc11c \ubc1c\ub9e4\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucc38\uace0\ud574\uc8fc\uc138\uc694.\n\u30fb\uc774\ub2c8\ud2f0\uc6c0\ub2d8, \uad11\ud669\ub2d8, CoC\ubc29 \uc5ec\ub7ec\ubd84 \uac10\uc0ac\ud569\ub2c8\ub2e4. by\ud638\ud761\ub3c4\uc758\uc2dd\ud558\uba74\uadc0\ucc2e\uc544\n"),D.$register_prefix_from_super_class(),H(D,"$initialize",function I(S){var C=this;return delete I.$$p,P(C,o(C,"initialize",I,!1,!0),"initialize",[S],null),C.locale="ko_kr"},1),w(E[0],"TABLES",D.$translate_tables("ko_kr"))})}}]);