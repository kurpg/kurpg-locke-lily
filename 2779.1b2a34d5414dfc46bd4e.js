(self.webpackChunkudonarium_lily=self.webpackChunkudonarium_lily||[]).push([[2779],{2779:function(te,$e,ie){ie(4656),Opal.modules["bcdice/game_system/beginning_idol/chain_table"]=function(e){var R,L,K,w,b,y,i,v,x,z,M,B=[],l=e.nil,t=e.$$,S=e.module,U=e.klass,r=e.truthy,H=e.send;return R=B,L=M=[S(B[0],"BCDice")].concat(R),K=z=[S(M[0],"GameSystem")].concat(L),w=x=[U(z[0],t(z,"Base"),"BeginningIdol")].concat(K),i=U(x[0],null,"ChainTable"),v=[i].concat(w),i.$$prototype.times=i.$$prototype.sides=i.$$prototype.items=i.$$prototype.name=l,e.def(i,"$initialize",b=function(m,u,a){var o=this,s=l;return o.name=m,o.items=a.$freeze(),s=/^(\d+)D(\d+)$/i.$match(u),r(s)||o.$raise(t(v,"ArgumentError"),"Unexpected table type: "+u),o.times=s["$[]"](1).$to_i(),o.sides=s["$[]"](2).$to_i()},b.$$arity=3),void e.def(i,"$roll",y=function(m){var u,o,s,_,c,a=this;return s=function(k,R){return"number"==typeof k&&"number"==typeof R?k-R:k["$-"](R)}(o=m.$roll_sum(a.times,a.sides),a.times),_=a.items["$[]"](s),c=H(_,"map",[],(u=function(D){return null==D&&(D=l),r(D["$respond_to?"]("roll"))?D.$roll(m):D},u.$$s=a,u.$$arity=1,u)).$join("\n"),a.name+"("+o+") \uff1e "+c},y.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/chain_d66_table"]=function(e){var I,N,i,y,n,v,V,W,C,d,l=[],$=e.nil,S=e.$$,U=e.module,r=e.klass,H=e.send,k=e.truthy;return I=l,N=d=[U(l[0],"BCDice")].concat(I),V=C=[U(d[0],"GameSystem")].concat(N),i=W=[r(C[0],S(C,"Base"),"BeginningIdol")].concat(V),[v=r(W[0],null,"ChainD66Table")].concat(i),v.$$prototype.items=v.$$prototype.name=$,e.def(v,"$initialize",y=function(u,a){return this.name=u,this.items=a.$freeze()},y.$$arity=2),void e.def(v,"$roll",n=function(u){var a,c,g,R,o=this,s=$,_=$;return _=function(R,I){return"number"==typeof R&&"number"==typeof I?R+I:R["$+"](I)}("number"==typeof(R=(s=u.$roll_barabara(2,6).$sort())["$[]"](0))?10*R:R["$*"](10),s["$[]"](1)),c=o.items["$[]"](_.$to_s()),g=H(c,"map",[],(a=function(A){return null==A&&(A=$),k(A["$respond_to?"]("roll"))?A.$roll(u):A},a.$$s=o,a.$$arity=1,a)).$join("\n"),o.name+"("+_+") \uff1e "+g},n.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/bad_status_table"]=function(e){var L,q,G,y,u,a,o,n,m,i,V,z,t=[],S=e.nil,r=e.$$,H=e.module,k=e.klass,R=e.truthy,I=e.send,M=e.hash2;return L=t,q=z=[H(t[0],"BCDice")].concat(L),G=V=[H(z[0],"GameSystem")].concat(q),y=i=[k(V[0],r(V,"Base"),"BeginningIdol")].concat(G),n=k(i[0],null,"BadStatusTable"),m=[n].concat(y),n.$$prototype.locale=S,e.def(n,"$initialize",u=function(_){return this.locale=_},u.$$arity=1),e.def(n,"$roll_command",a=function(_,c){var g,A=S,T=S,f=S;return A=/^BT(\d+)?$/.$match(c),R(A)?(T=R(f=(g=A["$[]"](1))===S||null==g?S:I(g,"to_i",[]))?f:1,this.$roll(_,T)):S},a.$$arity=2),void e.def(n,"$roll",o=function(_,c){var g,d,D=this,A=S,T=S,f=S,h=S,p=S,E=S,j=S;return null==c&&(c=1),R("number"==typeof(d=c)?d<=0:d["$<="](0))?S:(A=r(m,"I18n").$t("BeginningIdol.BT.name",M(["locale"],{locale:D.locale})),T=r(m,"I18n").$t("BeginningIdol.BT.items",M(["locale"],{locale:D.locale})),f=r(m,"I18n").$t("BeginningIdol.BT.prefix_format",M(["locale"],{locale:D.locale})),p=(h=_.$roll_barabara(c,6).$sort()).$uniq(),R(function(d,L){return"number"==typeof d?d>1:d["$>"](1)}(p.$size()))&&(E=function(d,L){return d["$+"]("\n")}(D.$format(f,M(["count_bad_status"],{count_bad_status:p.$size()})))),j=I(p,"map",[],(g=function(J){return null==J&&(J=S),T["$[]"](function(d,L){return"number"==typeof d?d-1:d["$-"](1)}(J))},g.$$s=D,g.$$arity=1,g)).$join("\n"),A+" \uff1e ["+h.$join(",")+"] \uff1e "+E+j)},o.$$arity=-2)},Opal.modules["bcdice/game_system/beginning_idol/random_event_table"]=function(e){var k,d,q,G,v,b,w,i,V,N,I,P=[],B=e.nil,l=e.$$$,$=e.$$,t=e.module,S=e.klass,U=e.truthy,r=e.hash2;return k=P,d=I=[t(P[0],"BCDice")].concat(k),q=N=[t(I[0],"GameSystem")].concat(d),G=V=[S(N[0],$(N,"Base"),"BeginningIdol")].concat(q),w=S(V[0],null,"RandomEventTable"),i=[w].concat(G),w.$$prototype.locale=B,e.def(w,"$initialize",v=function(n){return this.locale=n},v.$$arity=1),void e.def(w,"$roll",b=function(n){var o,_,c,m=this,u=B,a=B,s=B,g=B;return u=n.$roll_once(6),a=n.$roll_d66(l($(i,"D66SortType"),"NO_SORT")),o=U(u["$even?"]())?"BeginningIdol.RE.on_event":"BeginningIdol.RE.off_event",s=$(i,"I18n").$t(o,r(["locale"],{locale:m.locale})),_=$(i,"I18n").$t("BeginningIdol.RE.name",r(["locale"],{locale:m.locale})),c=$(i,"I18n").$t("BeginningIdol.RE.format",r(["locale"],{locale:m.locale})),g=s["$[]"]("items")["$[]"](a.$to_s()),_+" \uff1e (1D6) \uff1e "+u+"\n"+s["$[]"]("name")+" \uff1e ["+a+"] \uff1e "+m.$format(c,r(["event","page"],{event:g["$[]"](0),page:g["$[]"](1)}))},b.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/my_skill_name_table"]=function(e){function F(R,I){return"number"==typeof R&&"number"==typeof I?R-I:R["$-"](I)}var I,N,V,i,y,n,v,b,W,C,d,l=[],$=e.nil,t=e.$$$,S=e.$$,U=e.module,r=e.klass,H=e.send,k=e.hash2;return I=l,N=d=[U(l[0],"BCDice")].concat(I),V=C=[U(d[0],"GameSystem")].concat(N),i=W=[r(C[0],S(C,"Base"),"BeginningIdol")].concat(V),v=r(W[0],null,"MySkillNameTable"),b=[v].concat(i),v.$$prototype.chains=v.$$prototype.locale=$,e.def(v,"$initialize",y=function(u){var o=$,s=$,_=$,c=$,g=$;return this.locale=u,o=t(S(b,"DiceTable"),"Table").$from_i18n("BeginningIdol.MS.subtables.article",u),s=t(S(b,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.describe",u),_=t(S(b,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.scene",u),c=t(S(b,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.material",u),g=t(S(b,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.action",u),this.chains=[[s,_,c],[s,_,g],[s,c,g],[_,c,g],[s,_,o],[c,g,o]].$freeze()},y.$$arity=1),void e.def(v,"$roll",n=function(u){var a,o,_,c,D,T,s=this,g=$,A=$;return _=u.$roll_once(6),c=H(s.chains["$[]"](F(_,1)),"map",[],((a=function(h){return null==h&&(h=$),h.$roll(u)}).$$s=s,a.$$arity=1,a)),g=H(c,"map",[],((o=function(h){return null==h&&(h=$),function(R,I){return"number"==typeof R&&"number"==typeof I?R+I:R["$+"](I)}(h.$table_name(),h.$value().$to_s())}).$$s=s,o.$$arity=1,o)),D=S(b,"I18n").$t("BeginningIdol.MS.name",k(["locale"],{locale:s.locale})),A=S(b,"I18n").$t("BeginningIdol.MS.formats",k(["locale"],{locale:s.locale}))["$[]"](F(_,1)),T=H(s,"format",[A].concat(e.to_a(H(c,"map",[],"body".$to_proc())))),D+" \uff1e ["+_+","+g.$join(",")+"] \uff1e "+T},n.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/d6_twice_table"]=function(e){function F(H,k){return"number"==typeof H&&"number"==typeof k?H-k:H["$-"](k)}var k,d,q,G,v,b,y,w,i,V,N,I,B=[],l=e.nil,t=e.$$,S=e.module,U=e.klass,r=e.hash2;return k=B,d=I=[S(B[0],"BCDice")].concat(k),q=N=[S(I[0],"GameSystem")].concat(d),G=V=[U(N[0],t(N,"Base"),"BeginningIdol")].concat(q),w=U(V[0],null,"D6TwiceTable"),i=[w].concat(G),w.$$prototype.items1=w.$$prototype.items2=w.$$prototype.name=l,e.defs(w,"$from_i18n",v=function(m,u){var o=l;return o=t(i,"I18n").$t(m,r(["locale"],{locale:u})),this.$new(o["$[]"]("name"),o["$[]"]("items1"),o["$[]"]("items2"))},v.$$arity=2),e.def(w,"$initialize",b=function(m,u,a){var o=this;return o.name=m,o.items1=u,o.items2=a},b.$$arity=3),void e.def(w,"$roll",y=function(m){var u,a,s,_,c,g,o=this;return a=m.$roll_barabara(2,6),_=null==(u=e.to_ary(a))[1]?l:u[1],c=o.items1["$[]"](F(s=null==u[0]?l:u[0],1)),g=o.items2["$[]"](F(_,1)),o.name+"["+s+","+_+"] \uff1e "+c+g},y.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/item_table"]=function(e){var I,N,V,i,y,n,m,v,b,W,C,d,B=[],l=e.nil,t=e.$$,S=e.module,U=e.klass,r=e.truthy,H=e.send,k=e.hash2;return I=B,N=d=[S(B[0],"BCDice")].concat(I),V=C=[S(d[0],"GameSystem")].concat(N),i=W=[U(C[0],t(C,"Base"),"BeginningIdol")].concat(V),v=U(W[0],null,"ItemTable"),b=[v].concat(i),v.$$prototype.locale=l,e.def(v,"$initialize",y=function(a){return this.locale=a},y.$$arity=1),e.def(v,"$roll_command",n=function(a,o){var s,c=l,g=l,D=l;return c=/^IT(\d+)?$/.$match(o),r(c)?(g=r(D=(s=c["$[]"](1))===l||null==s?l:H(s,"to_i",[]))?D:1,this.$roll(a,g)):l},n.$$arity=2),void e.def(v,"$roll",m=function(a,o){var s,c=l,g=l,D=l,A=l;return null==o&&(o=1),o["$=="](0)?l:(c=t(b,"I18n").$t("BeginningIdol.item_table",k(["locale"],{locale:this.locale})),g=a.$roll_barabara(o,6).$sort(),D=H(g,"group_by",[],"itself".$to_proc()),A=H(D,"map",[],((s=function(f,h){var R,p=null==s.$$s?this:s.$$s,E=l;return null==f&&(f=l),null==h&&(h=l),E=c["$[]"]("items")["$[]"]("number"==typeof(R=f)?R-1:R["$-"](1)),r(D.$size()["$!="](1))&&(E=p.$format(c["$[]"]("emph"),k(["item"],{item:E}))),g.$size()["$=="](D.$size())?E:p.$format(c["$[]"]("counting"),k(["item","count"],{item:E,count:h.$size()}))}).$$s=this,s.$$arity=2,s)),c["$[]"]("name")+" \uff1e ["+g.$join(",")+"] \uff1e "+A.$join(c["$[]"]("sep")))},m.$$arity=-2)},Opal.modules["bcdice/game_system/beginning_idol/costume_table"]=function(e){var k,d,q,G,v,b,y,n,w,i,V,N,I,P=[],B=e.nil,l=e.$$$,$=e.$$,t=e.module,S=e.klass,U=e.hash2,r=e.send;return k=P,d=I=[t(P[0],"BCDice")].concat(k),q=N=[t(I[0],"GameSystem")].concat(d),G=V=[S(N[0],$(N,"Base"),"BeginningIdol")].concat(q),w=S(V[0],null,"CostumeTable"),i=[w].concat(G),w.$$prototype.name=w.$$prototype.items=B,e.defs(w,"$from_i18n",v=function(u,a){var s=B;return s=$(i,"I18n").$t(u,U(["locale"],{locale:a})),this.$new(s["$[]"]("name"),s["$[]"]("items"))},v.$$arity=2),e.def(w,"$initialize",b=function(u,a){return this.name=u,this.items=a},b.$$arity=2),e.def(w,"$roll",y=function(u){var o=B;return o=u.$roll_d66(l($(i,"D66SortType"),"ASC")),this.name+"("+o+") \uff1e "+this.items["$[]"](o.$to_s())},y.$$arity=1),void e.def(w,"$brand_only",n=function(){var u,a=this;return l($(i,"DiceTable"),"D66Table").$new(a.name,l($(i,"D66SortType"),"ASC"),r(a.items,"transform_values",[],((u=function(s){return null==s&&(s=B),s.$split("\n").$first()}).$$s=a,u.$$arity=1,u)))},n.$$arity=0)},Opal.modules["bcdice/game_system/beginning_idol/accessories_table"]=function(e){var H,M,C,V,G,W,q,K,L,R,P=[],B=e.nil,l=e.$$$,$=e.$$,t=e.module,S=e.klass,U=e.hash2;return H=P,M=R=[t(P[0],"BCDice")].concat(H),C=L=[t(R[0],"GameSystem")].concat(M),K=[q=S(L[0],$(L,"Base"),"BeginningIdol")].concat(C),V=e.get_singleton_class(q),W=[V].concat(K),V.$private(),void e.def(V,"$translate_accessories_table",G=function(i){var y,b=B;return b=$(W,"I18n").$t("BeginningIdol.ACT.items",U(["locale"],{locale:i})),y=[l($(W,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.head",i),l($(W,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.hat",i),l($(W,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.body",i),l($(W,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.arm",i),l($(W,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.foot",i),l($(W,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.other",i)],$(W,"ChainTable").$new($(W,"I18n").$t("BeginningIdol.ACT.name",U(["locale"],{locale:i})),"1D6",b.$zip(y))},G.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/with_abnormality"]=function(e){var I,N,q,K,V,w,b,y,i,v,W,C,d,P=[],B=e.nil,l=e.$$$,$=e.$$,t=e.module,S=e.klass,U=e.hash2,r=e.truthy,H=e.send,k=e.send2;return I=P,N=d=[t(P[0],"BCDice")].concat(I),q=(C=[t(d[0],"GameSystem")].concat(N))[0],K=$(C,"Base"),V=C,w=W=[S(q,K,"BeginningIdol")].concat(V),i=t(W[0],"WithAbnormality"),v=[i].concat(w),e.def(i,"$replace_abnormality",b=function(m,u){var a=this,o=B,s=B,_=B,c=B,g=B;return null==a.locale&&(a.locale=B),null==a.bad_status_table&&(a.bad_status_table=B),s=(o=$(v,"Regexp").$new($(v,"I18n").$t("BeginningIdol.abnormality.regexp",U(["locale"],{locale:a.locale})))).$match(m.$body()),r(s)&&(_=a.$kanji_to_i(s["$[]"](1)),r(_))?(c=a.bad_status_table.$roll(u,_),g=m.$body().$sub(o,c),l($(v,"DiceTable"),"RollResult").$new(m.$table_name(),m.$value(),g)):m},b.$$arity=2),e.def(i,"$kanji_to_i",y=function(m){var u,a=this;return null==a.locale&&(a.locale=B),(u=$(v,"I18n").$t("BeginningIdol.abnormality.num_map",U(["locale"],{locale:a.locale})).$find_index(m))===B||null==u?B:H(u,"succ",[])},y.$$arity=1),function(G,w,i){var y,n,m,v=S(G,w,"D66WithAbnormality"),b=[v].concat(i);v.$include($(b,"WithAbnormality")),e.defs(v,"$from_i18n",y=function(a,o,s){var g,c=B;return c=$(b,"I18n").$t(a,U(["locale"],{locale:s})),g=$(b,"D66SortType").$const_get(c["$[]"]("d66_sort_type")),this.$new(c["$[]"]("name"),g,c["$[]"]("items"),o,s)},y.$$arity=3),e.def(v,"$initialize",n=function(a,o,s,_,c){var A=this;return n.$$p&&(n.$$p=null),k(A,e.find_super_dispatcher(A,"initialize",n,!1,!0),"initialize",[a,o,s],null),A.bad_status_table=_,A.locale=c},n.$$arity=5),e.def(v,"$roll",m=function(a){var c,_=this;return m.$$p&&(m.$$p=null),c=k(_,e.find_super_dispatcher(_,"roll",m,!1,!0),"roll",[a],null),_.$replace_abnormality(c,a)},m.$$arity=1)}(W[0],l($(W,"DiceTable"),"D66Table"),W),void function(G,w,i){var y,n,m,v=S(G,w,"TableWithAbnormality"),b=[v].concat(i);v.$include($(b,"WithAbnormality")),e.defs(v,"$from_i18n",y=function(a,o,s){var c=B;return c=$(b,"I18n").$t(a,U(["locale"],{locale:s})),this.$new(c["$[]"]("name"),c["$[]"]("type"),c["$[]"]("items"),o,s)},y.$$arity=3),e.def(v,"$initialize",n=function(a,o,s,_,c){var A=this;return n.$$p&&(n.$$p=null),k(A,e.find_super_dispatcher(A,"initialize",n,!1,!0),"initialize",[a,o,s],null),A.bad_status_table=_,A.locale=c},n.$$arity=5),e.def(v,"$roll",m=function(a){var c,_=this;return m.$$p&&(m.$$p=null),c=k(_,e.find_super_dispatcher(_,"roll",m,!1,!0),"roll",[a],null),_.$replace_abnormality(c,a)},m.$$arity=1)}(W[0],l($(W,"DiceTable"),"Table"),W)},Opal.modules["bcdice/game_system/beginning_idol/work_table"]=function(e){var M,z,x,v,n,m,u,a,b,y,W,G,q,L,B=[],l=e.nil,$=e.$$$,t=e.$$,S=e.module,U=e.klass,r=e.hash2,H=e.send2,k=e.truthy,R=e.send;return M=B,z=L=[S(B[0],"BCDice")].concat(M),x=q=[S(L[0],"GameSystem")].concat(z),v=G=[W=U(q[0],t(q,"Base"),"BeginningIdol")].concat(x),b=U(G[0],$(t(G,"DiceTable"),"D66Table"),"WorkWithChanceTable"),y=[b].concat(v),b.$$prototype.regexp=b.$$prototype.off=l,e.defs(b,"$from_i18n",n=function(s,_){var D,g=l;return g=t(y,"I18n").$t(s,r(["locale"],{locale:_})),D=t(y,"D66SortType").$const_get(g["$[]"]("d66_sort_type")),this.$new(g["$[]"]("name"),D,g["$[]"]("items"),_)},n.$$arity=2),e.def(b,"$initialize",m=function(s,_,c,g){var T=this;return m.$$p&&(m.$$p=null),H(T,e.find_super_dispatcher(T,"initialize",m,!1,!0),"initialize",[s,_,c],null),T.regexp=t(y,"Regexp").$new(t(y,"I18n").$t("BeginningIdol.with_chance.regexp",r(["locale"],{locale:g}))),T.off=t(y,"I18n").$t("BeginningIdol.with_chance.off_text",r(["locale"],{locale:g}))},m.$$arity=4),e.def(b,"$roll_command",u=function(s,_){var c,D=l;return D=/^LO([1-6]{1,2})?$/.$match(_),k(D)?this.$roll(s,(c=D["$[]"](1))===l||null==c?l:R(c,"to_i",[])):l},u.$$arity=2),e.def(b,"$roll",a=function(s,_){var D=this,A=l,T=l,f=l;return a.$$p&&(a.$$p=null),null==_&&(_=l),A=H(D,e.find_super_dispatcher(D,"roll",a,!1,!0),"roll",[s],null),k(_)?(T=D.regexp.$match(A.$body()),k(k(f=T)?function(I,M){return"number"==typeof I&&"number"==typeof M?I>=M:I["$>="](M)}(T["$[]"](1).$to_i(),_):f)?$(t(y,"DiceTable"),"RollResult").$new(A.$table_name(),A.$value(),D.off):k(T)?$(t(y,"DiceTable"),"RollResult").$new(A.$table_name(),A.$value(),A.$body().$sub(D.regexp,"")):A):A},a.$$arity=-2),function(w,i){var b,v=[w].concat(i);w.$private(),e.def(w,"$translate_local_work_table",b=function(n){return t(v,"WorkWithChanceTable").$from_i18n("BeginningIdol.local_work",n)},b.$$arity=1)}(e.get_singleton_class(W),G),void W.$register_prefix("LO")},Opal.modules["bcdice/game_system/beginning_idol/skill_table"]=function(e){function F(I,M){return"number"==typeof I&&"number"==typeof M?I+M:I["$+"](M)}var M,z,K,V,x,w,i,v,n,m,u,b,y,G,q,L,B=[],l=e.nil,$=e.$$$,t=e.$$,S=e.module,U=e.klass,r=e.hash2,H=e.send2,k=e.truthy,R=e.send;return M=B,z=L=[S(B[0],"BCDice")].concat(M),K=(q=[S(L[0],"GameSystem")].concat(z))[0],V=t(q,"Base"),x=q,function(w,i,v){var n,b=U(w,i,"SkillTable");[b].concat(v),e.def(b,"$roll",n=function(u){return this.$roll_command(u,"RTT")},n.$$arity=1)}((G=[U(K,V,"BeginningIdol")].concat(x))[0],$(t(G,"DiceTable"),"SaiFicSkillTable"),G),w=G[0],i=$(t(G,"DiceTable"),"Table"),v=G,b=U(w,i,"SkillGetTable"),y=[b].concat(v),b.$$prototype.reroll_reg=l,e.defs(b,"$from_i18n",n=function(o,s,_){var g=l;return g=t(y,"I18n").$t(o,r(["locale"],{locale:_})),this.$new(g["$[]"]("name"),g["$[]"]("type"),g["$[]"]("items"),s,_)},n.$$arity=3),e.def(b,"$initialize",m=function(o,s,_,c,g){var T=this,f=l;return m.$$p&&(m.$$p=null),H(T,e.find_super_dispatcher(T,"initialize",m,!1,!0),"initialize",[o,s,_],null),T.skill_table=c,f=t(y,"I18n").$t("BeginningIdol.skill_get_table",r(["locale"],{locale:g})),T.reroll_reg=t(y,"Regexp").$new(f["$[]"]("reroll_reg")),T.reroll=f["$[]"]("reroll"),T.secondary_name=f["$[]"]("secondary_name")},m.$$arity=5),e.def(b,"$roll",u=function(o){var s,g=this,D=l,A=l,T=l,f=l;return u.$$p&&(u.$$p=null),D=H(g,e.find_super_dispatcher(g,"roll",u,!1,!0),"roll",[o],null),A=g.reroll_reg.$match(D.$body()),k(A)?(T=A.$captures(),f=F(D.$body(),"\n"),function(){var h=e.new_brk();try{R(g,"loop",[],((s=function(){var E=null==s.$$s?this:s.$$s,j=l;return null==E.skill_table&&(E.skill_table=l),null==E.secondary_name&&(E.secondary_name=l),null==E.reroll&&(E.reroll=l),j=E.skill_table.$roll_skill(o),f=F(f,E.secondary_name+" \uff1e ["+j.$category_dice()+","+j.$row_dice()+"] \uff1e "+j),k(T["$include?"](j.$category_name()))||e.brk(l,h),f=F(f," \uff1e "+E.reroll+"\n")}).$$s=g,s.$$brk=h,s.$$arity=0,s))}catch(p){if(p===h)return p.$v;throw p}}(),$(t(y,"DiceTable"),"RollResult").$new(D.$table_name(),D.$value(),f)):D},u.$$arity=1),void function(w,i,v){var n,m,b=U(w,null,"SkillHometown");[b].concat(v),b.$$prototype.skill_name=l,e.def(b,"$initialize",n=function(a){return this.skill_name=a},n.$$arity=1),e.def(b,"$roll",m=function(a){return this.skill_name.$roll_command(a,"AT6")},m.$$arity=1)}(G[0],0,G)},Opal.modules["bcdice/game_system/beginning_idol/table"]=function(e){var I,N,V,G,v,b,i,x,W,C,d,P=e.top,B=[],l=e.nil,$=e.$$$,t=e.$$,S=e.module,U=e.klass,r=e.hash2,H=e.send,k=e.truthy;return P.$require("bcdice/game_system/beginning_idol/chain_table"),P.$require("bcdice/game_system/beginning_idol/chain_d66_table"),P.$require("bcdice/game_system/beginning_idol/bad_status_table"),P.$require("bcdice/game_system/beginning_idol/random_event_table"),P.$require("bcdice/game_system/beginning_idol/my_skill_name_table"),P.$require("bcdice/game_system/beginning_idol/d6_twice_table"),P.$require("bcdice/game_system/beginning_idol/item_table"),P.$require("bcdice/game_system/beginning_idol/costume_table"),P.$require("bcdice/game_system/beginning_idol/accessories_table"),P.$require("bcdice/game_system/beginning_idol/with_abnormality"),P.$require("bcdice/game_system/beginning_idol/work_table"),P.$require("bcdice/game_system/beginning_idol/skill_table"),I=B,N=d=[S(B[0],"BCDice")].concat(I),V=C=[S(d[0],"GameSystem")].concat(N),W=[x=U(C[0],t(C,"Base"),"BeginningIdol")].concat(V),G=e.get_singleton_class(x),i=[G].concat(W),G.$private(),e.def(G,"$translate_skill_table",v=function(n){return t(i,"SkillTable").$from_i18n("BeginningIdol.skill_table",n,r(["rtt","rttn"],{rtt:"AT",rttn:["AT1","AT2","AT3","AT4","AT5","AT6"]}))},v.$$arity=1),e.def(G,"$translate_tables",b=function(n){var m,u,a,g,D,A,T,f,h,p,E,Y,J,R,o=this,s=l,_=l,c=l,j=l;return s=t(i,"CostumeTable").$from_i18n("BeginningIdol.tables.DT",n),_=t(i,"CostumeTable").$from_i18n("BeginningIdol.tables.RC",n),c=t(i,"CostumeTable").$from_i18n("BeginningIdol.tables.FC",n),g=t(i,"ChainTable").$new(t(i,"I18n").$t("BeginningIdol.ACB.name",r(["locale"],{locale:n})),"1D6",[[t(i,"I18n").$t("BeginningIdol.ACB.items.challenge_girls",r(["locale"],{locale:n})),s.$brand_only()],[t(i,"I18n").$t("BeginningIdol.ACB.items.challenge_girls",r(["locale"],{locale:n})),s.$brand_only()],[t(i,"I18n").$t("BeginningIdol.ACB.items.road_to_prince",r(["locale"],{locale:n})),_.$brand_only()],[t(i,"I18n").$t("BeginningIdol.ACB.items.road_to_prince",r(["locale"],{locale:n})),_.$brand_only()],[t(i,"I18n").$t("BeginningIdol.ACB.items.fortune_stars",r(["locale"],{locale:n})),c.$brand_only()],[t(i,"I18n").$t("BeginningIdol.ACB.items.fortune_stars",r(["locale"],{locale:n})),c.$brand_only()]]),D=t(i,"BadStatusTable").$new(n),A=o.$translate_skill_table(n),T=$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.rare_skill_table",n),f=t(i,"ItemTable").$new(n),h=t(i,"ChainTable").$new(t(i,"I18n").$t("BeginningIdol.TN.name",r(["locale"],{locale:n})),"1D6",H(t(i,"I18n").$t("BeginningIdol.TN.items",r(["locale"],{locale:n})).$dup(),"tap",[],((m=function(X){return null==X&&(X=l),X["$[]"](3).$push(A)}).$$s=o,m.$$arity=1,m))),p=t(i,"ChainTable").$new(t(i,"I18n").$t("BeginningIdol.CG.name",r(["locale"],{locale:n})),"1D6",H(t(i,"I18n").$t("BeginningIdol.CG.items",r(["locale"],{locale:n})).$map(),"with_index",[],((u=function(X,Z){return null==X&&(X=l),null==Z&&(Z=l),k([3,4]["$include?"](Z))?[X,f]:[X]}).$$s=o,u.$$arity=2,u))),E=t(i,"ChainD66Table").$new(t(i,"I18n").$t("BeginningIdol.GG.name",r(["locale"],{locale:n})),H(t(i,"I18n").$t("BeginningIdol.GG.items",r(["locale"],{locale:n})),"to_h",[],((a=function(X,Z){var ee;return null==X&&(X=l),null==Z&&(Z=l),ee=k(["23","24","25"]["$include?"](X))?[Z,T]:X["$=="]("56")?[Z,f]:[Z],[X,ee]}).$$s=o,a.$$arity=2,a))),Y=["22",[(j=t(i,"I18n").$t("BeginningIdol.HA.items",r(["locale"],{locale:n})))["$[]"]("22"),t(i,"SkillHometown").$new(A)].$flatten()],H(j,"[]=",e.to_a(Y)),"number"==typeof(R=Y.length)||R["$-"](1),J=t(i,"ChainD66Table").$new(t(i,"I18n").$t("BeginningIdol.HA.name",r(["locale"],{locale:n})),j),r(["DT","RC","FC","ACB","TN","CG","GG","HA","CBT","RCB","HBT","RHB","RU","SIP","BU","HW","FL","MSE","ST","FST","BWT","LWT","TWT","CWT","SU","WI","NA","GA","BA","WT","VA","MU","DR","VI","SP","CHR","PAR","SW","AN","MOV","FA","BVT","LVT","TVT","CVT","BST","LST","TST","CST","BPT","LPT","TPT","CPT","BIT","LIT","TIT","CIT","CHO","SCH","WCH","NCH","GCH","PCH","LUR","SUR","WUR","NUR","GUR","BUR","ACE","ACT","MS","RE","SH","MO","SEA","SPA","LN","SGT","RS"],{DT:s,RC:_,FC:c,ACB:g,TN:h,CG:p,GG:E,HA:J,CBT:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CBT",n),RCB:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.RCB",n),HBT:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.HBT",n),RHB:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.RHB",n),RU:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.RU",n),SIP:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.SIP",n),BU:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BU",n),HW:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.HW",n),FL:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.FL",n),MSE:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.MSE",n),ST:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.ST",n),FST:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.FST",n),BWT:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.BWT",n),LWT:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.LWT",n),TWT:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.TWT",n),CWT:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CWT",n),SU:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SU",n),WI:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.WI",n),NA:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.NA",n),GA:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.GA",n),BA:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.BA",n),WT:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.WT",n),VA:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.VA",n),MU:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.MU",n),DR:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.DR",n),VI:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.VI",n),SP:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SP",n),CHR:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CHR",n),PAR:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.PAR",n),SW:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SW",n),AN:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.AN",n),MOV:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.MOV",n),FA:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.FA",n),BVT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BVT",n),LVT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LVT",n),TVT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TVT",n),CVT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CVT",n),BST:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BST",n),LST:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LST",n),TST:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TST",n),CST:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CST",n),BPT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BPT",n),LPT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LPT",n),TPT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TPT",n),CPT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CPT",n),BIT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BIT",n),LIT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LIT",n),TIT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TIT",n),CIT:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CIT",n),CHO:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CHO",n),SCH:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.SCH",n),WCH:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.WCH",n),NCH:$(t(i,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.NCH",n),GCH:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.GCH",n),PCH:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.PCH",n),LUR:t(i,"D6TwiceTable").$from_i18n("BeginningIdol.tables.LUR",n),SUR:t(i,"D6TwiceTable").$from_i18n("BeginningIdol.tables.SUR",n),WUR:t(i,"D6TwiceTable").$from_i18n("BeginningIdol.tables.WUR",n),NUR:t(i,"D6TwiceTable").$from_i18n("BeginningIdol.tables.NUR",n),GUR:t(i,"D6TwiceTable").$from_i18n("BeginningIdol.tables.GUR",n),BUR:t(i,"D6TwiceTable").$from_i18n("BeginningIdol.tables.BUR",n),ACE:$(t(i,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.ACE",n),ACT:o.$translate_accessories_table(n),MS:t(i,"MySkillNameTable").$new(n),RE:t(i,"RandomEventTable").$new(n),SH:t(i,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SH",D,n),MO:t(i,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.MO",D,n),SEA:t(i,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SEA",D,n),SPA:t(i,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SPA",D,n),LN:t(i,"TableWithAbnormality").$from_i18n("BeginningIdol.tables.LN",D,n),SGT:t(i,"SkillGetTable").$from_i18n("BeginningIdol.tables.SGT",A,n),RS:t(i,"SkillGetTable").$from_i18n("BeginningIdol.tables.RS",A,n)})},b.$$arity=1),e.const_set(W[0],"TABLES",x.$translate_tables("ja_jp")),e.const_set(W[0],"BAD_STATUS_TABLE",t(W,"BadStatusTable").$new("ja_jp")),e.const_set(W[0],"LOCAL_WORK_TABLE",x.$translate_local_work_table("ja_jp")),e.const_set(W[0],"ITEM_TABLE",t(W,"ItemTable").$new("ja_jp")),e.const_set(W[0],"SKILL_TABLE",x.$translate_skill_table("ja_jp")),void x.$register_prefix(t(W,"TABLES").$keys())},function(e){function F(z,C){return"number"==typeof z&&"number"==typeof C?z<=C:z["$<="](C)}function P(z,C){return"number"==typeof z&&"number"==typeof C?z>=C:z["$>="](C)}function $(z,C){return"number"==typeof z&&"number"==typeof C?z+C:z["$+"](C)}var C,x,v,n,m,u,a,o,s,_,c,g,D,b,y,G,K,U=[],r=e.nil,H=e.$$$,k=e.$$,R=e.module,I=e.klass,M=e.send2,d=e.truthy,L=e.send,N=e.hash2;e.top.$require("bcdice/game_system/beginning_idol/table"),C=U,x=K=[R(U[0],"BCDice")].concat(C),v=G=[R(K[0],"GameSystem")].concat(x),b=I(G[0],k(G,"Base"),"BeginningIdol"),y=[b].concat(v),b.$$prototype.randomizer=r,e.const_set(y[0],"ID","BeginningIdol"),e.const_set(y[0],"NAME","\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb"),e.const_set(y[0],"SORT_KEY","\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b"),e.const_set(y[0],"HELP_MESSAGE","\u30fb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3000[r]PDn[+m/-m](r\uff1a\u5834\u306b\u6b8b\u3063\u305f\u51fa\u76ee\u3000n\uff1a\u632f\u308b\u6570\u3000m\uff1a\u4fee\u6b63\u5024)\n\u30fb\u30ef\u30fc\u30eb\u30c9\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0\u4ed5\u4e8b\u8868\u3000BWT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LWT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\n\u3000TWT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CWT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\u3000LO[n]\uff1a\u5730\u65b9\u30a2\u30a4\u30c9\u30eb(n\uff1a\u30c1\u30e3\u30f3\u30b9)\n\u3000SU\uff1a\u60c5\u71b1\u306e\u590f\u3000WI\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\u3000NA\uff1a\u5927\u81ea\u7136\u3000GA\uff1a\u5973\u5b66\u5712\u3000BA\uff1a\u30a2\u30ab\u30c7\u30df\u30fc\n\u30fb\u4ed5\u4e8b\u8868\u3000WT\u3000VA\uff1a\u30d0\u30e9\u30a8\u30c6\u30a3\u3000MU\uff1a\u97f3\u697d\u95a2\u4fc2\u3000DR\uff1a\u30c9\u30e9\u30de\u95a2\u4fc2\n\u3000VI\uff1a\u30d3\u30b8\u30e5\u30a2\u30eb\u95a2\u4fc2\u3000SP\uff1a\u30b9\u30dd\u30fc\u30c4\u3000CHR\uff1a\u30af\u30ea\u30b9\u30de\u30b9\u3000PAR\uff1a\u30d1\u30fc\u30c8\u30ca\u30fc\u95a2\u4fc2\n\u3000SW\uff1a\u304a\u83d3\u5b50\u3000AN\uff1a\u52d5\u7269\u3000MOV\uff1a\u6620\u753b\u3000FA\uff1a\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\n\u30fb\u30e9\u30f3\u30c0\u30e0\u30a4\u30d9\u30f3\u30c8\u3000RE\n\u30fb\u30cf\u30d7\u30cb\u30f3\u30b0\u8868\u3000HA\n\u30fb\u7279\u6280\u30ea\u30b9\u30c8\u3000AT[n](n\uff1a\u5206\u91ceNo.)\n\u30fb\u30a2\u30a4\u30c9\u30eb\u30b9\u30ad\u30eb\u4fee\u5f97\u8868\u3000SGT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RS\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u5909\u8abf\u3000BT[n](n\uff1a\u767a\u751f\u6570)\n\u30fb\u30a2\u30a4\u30c6\u30e0\u3000IT[n](n\uff1a\u7372\u5f97\u6570)\n\u30fb\u30a2\u30af\u30bb\u30b5\u30ea\u30fc\u3000ACT\uff1a\u7a2e\u5225\u6c7a\u5b9a\u3000ACB\uff1a\u30d6\u30e9\u30f3\u30c9\u6c7a\u5b9a\u3000ACE\uff1a\u52b9\u679c\u8868\n\u30fb\u8863\u88c5\u3000DT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RC\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\u3000FC:\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u30b9\u30bf\u30fc\u30ba\n\u30fb\u7121\u8336\u3076\u308a\u8868\u3000LUR\uff1a\u5730\u65b9\u30a2\u30a4\u30c9\u30eb\u3000SUR\uff1a\u60c5\u71b1\u306e\u590f\u3000WUR\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\n\u3000NUR\uff1a\u5927\u81ea\u7136\u3000GUR\uff1a\u5973\u5b66\u5712\u3000BUR\uff1a\u30a2\u30ab\u30c7\u30df\u30fc\n\u30fb\u30bb\u30f3\u30bf\u30fc\u30eb\u30fc\u30eb\u3000HW\uff1a\u5411\u304b\u3044\u98a8\u30b7\u30fc\u30f3\u8868\u3000FL\uff1a\u99c6\u3051\u51fa\u3057\u30b7\u30fc\u30f3\u8868\u3000LN\uff1a\u5b64\u72ec\u8868\n\u3000\u30de\u30a4\u30b9\u30ad\u30eb\u3010MS\uff1a\u540d\u524d\u6c7a\u5b9a\u3000MSE\uff1a\u52b9\u679c\u8868\u3011\u3000\u6f14\u51fa\u8868\u3010ST\u3000FST\uff1a\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\u3011\n\u30fb\u5408\u5bbf\u30eb\u30fc\u30eb\u3000\u6563\u7b56\u8868\u3010SH\uff1a\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30e2\u30fc\u30eb\u3000MO\uff1a\u5c71\u3000SEA\uff1a\u6d77\u3000SPA\uff1a\u6e29\u6cc9\u8857\u3011\n\u3000TN\uff1a\u591c\u8a9e\u308a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\u3000\u6210\u9577\u8868\u3010CG\uff1a\u30b3\u30e2\u30f3\u3000GG\uff1a\u30b4\u30fc\u30eb\u30c9\u3011\n\u30fb\u30b5\u30d3\u8868\u3000CHO\u3000SCH\uff1a\u60c5\u71b1\u306e\u590f\u3000WCH\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\u3000NCH\uff1a\u5927\u81ea\u7136\n\u3000GCH\uff1a\u5973\u6027\u5411\u3051\u3000PCH\uff1a\u529b\u5f37\u3044\n\u30fb\u30ad\u30e3\u30e9\u7a7a\u767d\u8868\u3000CBT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RCB\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u8da3\u5473\u7a7a\u767d\u8868\u3000HBT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RHB\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u30de\u30b9\u30b3\u30c3\u30c8\u66b4\u8d70\u8868\u3000RU\n\u30fb\u30a2\u30a4\u30c9\u30eb\u71b1\u6e6f\u98a8\u5442\u3000nC\uff1a\u30d0\u30fc\u30b9\u30c8\u30bf\u30a4\u30e0(n\uff1a\u6e29\u5ea6)\u3000BU\uff1a\u30d0\u30fc\u30b9\u30c8\u8868\n\u30fb\u653b\u6483\u3000n[S]A[r][+m/-m](n\uff1a\u632f\u308b\u6570\u3000S\uff1a\u5931\u6557\u3057\u306a\u3044\u3000r\uff1a\u53d6\u308a\u9664\u304f\u51fa\u76ee\u3000m\uff1a\u4fee\u6b63\u5024)\n\u30fb\u304b\u3093\u305f\u3093\u30d1\u30fc\u30bd\u30f3\u8868\u3000SIP\n\u30fb\u4f1a\u5834\u8868\n\u3000BVT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LVT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TVT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CVT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u5834\u6240\u8868\n\u3000BST\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LST\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TST\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CST\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u7a2e\u5225\u6c7a\u5b9a\u8868\n\u3000BPT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LPT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TPT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CPT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u9053\u5177\u8868\n\u3000BIT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LIT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TIT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CIT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n[]\u5185\u306f\u7701\u7565\u53ef\u3000D66\u5165\u308c\u66ff\u3048\u3042\u308a\n"),b.$register_prefix(k(y,"SKILL_TABLE").$prefixes(),"IT","BT","\\d{2}C","\\d+S?A","[1-7]*PD"),e.def(b,"$initialize",n=function(T){var p=this;return n.$$p&&(n.$$p=null),M(p,e.find_super_dispatcher(p,"initialize",n,!1,!0),"initialize",[T],null),p.sort_add_dice=!0,p.d66_sort_type=H(k(y,"D66SortType"),"ASC")},n.$$arity=1),e.def(b,"$result_nd6",m=function(T,f,h,p,E){var j=this;return E["$=="]("?")||!p["$=="](">=")?r:d(F(f,2))?k(y,"Result").$fumble(j.$translate("BeginningIdol.fumble")):d(P(f,12))?k(y,"Result").$critical(j.$translate("BeginningIdol.special")):d(P(T,E))?k(y,"Result").$success(j.$translate("success")):k(y,"Result").$failure(j.$translate("failure"))},m.$$arity=5),e.alias(b,"check_2D6","check_nD6"),e.def(b,"$eval_game_system_specific_command",u=function(T){var h,p,E,j,Y,J,Q,f=this;return d(h=d(p=d(E=d(j=d(Y=d(J=d(Q=f.$roll_attack(T))?Q:f.$roll_burst(T))?J:f.$roll_performance(T))?Y:H(f.$class(),"SKILL_TABLE").$roll_command(f.randomizer,T))?j:H(f.$class(),"ITEM_TABLE").$roll_command(f.randomizer,T))?E:H(f.$class(),"BAD_STATUS_TABLE").$roll_command(f.randomizer,T))?p:H(f.$class(),"LOCAL_WORK_TABLE").$roll_command(f.randomizer,T))?h:f.$roll_tables(T,H(f.$class(),"TABLES"))},u.$$arity=1),b.$private(),e.def(b,"$roll_burst",a=function(T){var z,f=this,h=r,p=r,E=r,j=r,Y=r,J=r,Q=r;return h=/^(\d{2})C$/.$match(T),!d(h)||(p=h["$[]"](1).$to_i(),d(d(E="number"==typeof(z=p)?z<45:z["$<"](45))?E:function(z,C){return"number"==typeof z?z>55:z["$>"](55)}(p)))?r:(j=d(F(p,49))?3:d(F(p,52))?4:d(F(p,54))?5:6,J=$((Y=f.randomizer.$roll_barabara(j,6).$sort()).$sum(),p),Q=d(P(J,80))?f.$translate("BeginningIdol.burst.burst"):d(P(J,75))?f.$translate("BeginningIdol.burst.critical_success"):d(P(J,65))?f.$translate("BeginningIdol.burst.success"):f.$translate("failure"),f.$translate("BeginningIdol.burst.name")+" \uff1e "+p+"+["+Y.$join(",")+"] \uff1e "+J+" \uff1e "+Q)},a.$$arity=1),e.def(b,"$roll_attack",o=function(T){var f=this,h=r,p=r,E=r,j=r,Y=r,J=r,Q=r,X=r,Z=r,O=r,ee=r,ne=r;return h=/^(\d+)(S?)A([1-6]*)([+\-]\d+)?$/.$match(T),!d(h)||(p=h["$[]"](1).$to_i(),d(F(p,0)))?r:(E=h["$[]"](2)["$empty?"]()["$!"](),j=L(h["$[]"](3).$each_char(),"map",[],"to_i".$to_proc()),Y=h["$[]"](4).$to_i(),J=k(y,"Format").$modifier(Y),X=(Q=f.randomizer.$roll_barabara(p,6).$sort()).$join(","),Q=function(z,C){return"number"==typeof z&&"number"==typeof C?z-C:z["$-"](C)}(Q,j),Z=f.$translate("BeginningIdol.attack.name")+" \uff1e ["+X+"]"+J+" \uff1e ",d(d(O=Q.$count()["$=="](p))?O:Q["$empty?"]())||(Z=$(Z,"["+Q.$join(",")+"]"+J+" \uff1e ")),d(d(ee=E)?ee:Q.$count()["$=="](Q.$uniq().$count()))?(ne=[$(Q.$sum(),Y.$to_i()),0].$max(),Z=$(Z,f.$format(f.$translate("BeginningIdol.attack.damage"),N(["total"],{total:ne})))):Z=$(Z,f.$translate("failure")),Z)},o.$$arity=1),e.def(b,"$roll_performance",s=function(T){var f=this,h=r,p=r,E=r,j=r,Y=r,J=r,Q=r,X=r,Z=r;return h=/^([1-7]*)PD(\d+)([+\-]\d+)?$/.$match(T),!d(h)||(p=h["$[]"](2).$to_i(),d(F(p,0)))?r:(E=L(h["$[]"](1).$chars(),"map",[],"to_i".$to_proc()).$sort(),j=h["$[]"](3).$to_i(),J=$(Y=f.randomizer.$roll_barabara(p,6).$sort(),E).$sort(),Q=f.$select_uniqs(J),X=d(E["$empty?"]())?f.$translate("BeginningIdol.PD.paformance"):f.$translate("BeginningIdol.PD.symphony"),Z=d(E["$empty?"]())?f.$result_performance(Q,j,J):f.$result_symphony(Q,j),[X,f.$format_dice_list(Y,E,j),Z].$join(" \uff1e "))},s.$$arity=1),e.def(b,"$select_uniqs",_=function(T){var f,h;return L(L(L(T,"group_by",[],"itself".$to_proc()).$to_a(),"select",[],(f=function(j,Y){return null==j&&(j=r),null==Y&&(Y=r),Y.$size()["$=="](1)},f.$$s=this,f.$$arity=2,f)),"map",[],(h=function(j,Y){return null==j&&(j=r),null==Y&&(Y=r),j},h.$$s=this,h.$$arity=2,h)).$sort()},_.$$arity=1),e.def(b,"$format_dice_list",c=function(T,f,h){return d(f["$empty?"]())?"["+T.$join(",")+"]"+k(y,"Format").$modifier(h):"["+T.$join(",")+"],["+f.$join(",")+"]"+k(y,"Format").$modifier(h)},c.$$arity=3),e.def(b,"$result_performance",g=function(T,f,h){var p=this;return d(T["$empty?"]())?p.$format(p.$translate("BeginningIdol.PD.miracle"),N(["value"],{value:$(f,10)})):T["$=="]([1,2,3,4,5,6])?p.$format(p.$translate("BeginningIdol.PD.perfect_miracle"),N(["value"],{value:$(f,30)})):d(T.$size()["$!="](h.$size()))?"["+T.$join(",")+"]"+k(y,"Format").$modifier(f)+" \uff1e "+$(T.$sum(),f):$(T.$sum(),f).$to_s()},g.$$arity=3),e.def(b,"$result_symphony",D=function(T,f){var h=this,p=r;return d(T["$empty?"]())?h.$format(h.$translate("BeginningIdol.PD.miracle_synchro"),N(["value"],{value:$(f,15)})):T["$=="]([1,2,3,4,5,6])?(p=h.$format(h.$translate("BeginningIdol.PD.perfect_miracle"),N(["value"],{value:$(f,30)})),"["+T.$join(",")+"]"+k(y,"Format").$modifier(f)+" \uff1e "+p):"["+T.$join(",")+"]"+k(y,"Format").$modifier(f)+" \uff1e "+$(T.$sum(),f)},D.$$arity=2)}(Opal)}}]);