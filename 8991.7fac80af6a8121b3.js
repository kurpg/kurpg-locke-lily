(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[8991],{8991:(de,me,fe)=>{fe(9993),Opal.modules["i18n/backend/fallbacks"]=function(r){var H,c,A,P,L,f,K=[],n=r.nil,t=r.$$$,e=r.module,k=r.class_variable_set,C=r.truthy,I=r.class_variable_get,_=r.def,B=r.send,V=r.to_a,m=r.rb_minus,E=r.send2,G=r.find_super,Z=r.hash2,j=r.find_block_super,U=r.neqeq;return H=K,f=[L=e(K[0],"I18n")].concat(H),k(f[0],"@@fallbacks",n),c=r.get_singleton_class(L),A=[c].concat(f),P=r.$r(A),_(c,"$fallbacks",function(){var z=n;return k(A[1],"@@fallbacks",C(null!=A[1].$$cvars["@@fallbacks"]?"class variable":n)&&C(z=I(A[1],"@@fallbacks",!1))?z:t(t(P("I18n"),"Locale"),"Fallbacks").$new()),C(z=P("Thread").$current()["$[]"]("i18n_fallbacks"))?z:I(A[1],"@@fallbacks",!1)},0),_(c,"$fallbacks=",function(b){var z;return k(A[1],"@@fallbacks",C(b["$is_a?"](P("Array")))?t(t(P("I18n"),"Locale"),"Fallbacks").$new(b):b),z=["i18n_fallbacks",I(A[1],"@@fallbacks",!1)],B(P("Thread").$current(),"[]=",V(z)),z[m(z.length,1)]},1),function(c,w){var b,z,q,v,P=[e(c,"Backend")].concat(w);return b=P,q=[z=e(P[0],"Fallbacks")].concat(b),v=r.$r(q),_(z,"$translate",function d(u,o,s){try{var $=d.$$p||n,l=this,h=n,x=n;return delete d.$$p,null==s&&(s=v("EMPTY_HASH")),C(s.$fetch("fallback",!0))?C(s["$[]"]("fallback_in_progress"))?E(l,G(l,"translate",d,!1,!0),"translate",[u,o,s],$):(C(s["$[]"]("default"))&&(h=l["$extract_non_symbol_default!"](s)),x=s.$merge(Z(["fallback_in_progress"],{fallback_in_progress:!0})),B(v("I18n").$fallbacks()["$[]"](u),"each",[],function T(g){var M=null==T.$$s?this:T.$$s;null==g&&(g=n);try{return B(M,"catch",["exception"],function Y(){var i=null==Y.$$s?this:Y.$$s,S=n;if(S=E(i,j(i,"translate",Y.$$def||T.$$def||d,!1,!1),"translate",[g,o,x],null),C(S["$nil?"]()))return n;U(u.$to_s(),g.$to_s())&&i.$on_fallback(u,g,o,s),r.ret(S)},{$$arity:0,$$s:M})}catch(Y){if(!r.rescue(Y,[t(v("I18n"),"InvalidLocale")]))throw Y;try{return n}finally{r.pop_exception()}}},{$$arity:1,$$s:l}),C(s["$key?"]("default"))&&C(s["$[]"]("default")["$nil?"]())?n:C(h)?E(l,G(l,"translate",d,!1,!0),"translate",[u,n,s.$merge(Z(["default"],{default:h}))],null):l.$throw("exception",t(v("I18n"),"MissingTranslation").$new(u,o,s))):E(l,G(l,"translate",d,!1,!0),"translate",[u,o,s],$)}catch(T){if(T===r.returner)return T.$v;throw T}},-3),_(z,"$extract_non_symbol_default!",function(u){var s,o=n,$=n;return o=[u["$[]"]("default")].$flatten(),s=B(o,"detect",[],function(h){return null==h&&(h=n),h["$is_a?"](v("Symbol"))["$!"]()},1),C(s)&&($=["default",o["$[]"](0,o.$index(s))],B(u,"[]=",V($)),m($.length,1)),s},1),_(z,"$exists?",function d(u,o,s){try{var $=d.$$p||n,l=this;return delete d.$$p,null==s&&(s=v("EMPTY_HASH")),C(s.$fetch("fallback",!0))?(B(v("I18n").$fallbacks()["$[]"](u),"each",[],function h(x){var T=null==h.$$s?this:h.$$s;null==x&&(x=n);try{if(!C(E(T,j(T,"exists?",h.$$def||d,!1,!1),"exists?",[x,o],null)))return n;r.ret(!0)}catch(g){if(!r.rescue(g,[t(v("I18n"),"InvalidLocale")]))throw g;try{return n}finally{r.pop_exception()}}},{$$arity:1,$$s:l}),!1):E(l,G(l,"exists?",d,!1,!0),"exists?",[u,o,s],$)}catch(h){if(h===r.returner)return h.$v;throw h}},-3),z.$private(),_(z,"$on_fallback",function(u,o,s,$){return n},4)}(f[0],f)},Opal.modules["bcdice/randomizer"]=function(r){var L,D,b,z,q,v,c,w,K=[],n=r.nil,t=r.$$$,k=r.klass,C=r.const_set,I=r.def,_=r.truthy,B=r.rb_gt,V=r.rb_plus,m=r.rb_le,E=r.send,G=r.rb_minus,Z=r.eqeq,j=r.rb_times,U=r.eqeqeq,ee=r.rb_ge;return L=K,c=[(0,r.module)(K[0],"BCDice")].concat(L),w=r.$r(c),D=c,z=[b=k(c[0],null,"Randomizer")].concat(D),q=r.$r(z),(v=b.$$prototype).rand_results=v.detailed_rand_results=n,C(z[0],"UPPER_LIMIT_DICE_TIMES",200),C(z[0],"UPPER_LIMIT_DICE_SIDES",1e4),C(z[0],"UPPER_LIMIT_RANDS",1e4),I(b,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]},0),b.$attr_reader("rand_results"),b.$attr_reader("detailed_rand_results"),C(z[0],"DetailedRandResult",q("Struct").$new("kind","sides","value")),I(b,"$roll_barabara",function(u,o){var s=this;return _(B(V(s.rand_results.$size(),u),q("UPPER_LIMIT_RANDS")))&&s.$raise(q("TooManyRandsError")),_(m(u,0))||_(B(u,q("UPPER_LIMIT_DICE_TIMES")))?[]:E(q("Array"),"new",[u],function $(){return(null==$.$$s?this:$.$$s).$roll_once(o)},{$$arity:0,$$s:s})},2),I(b,"$roll_sum",function(u,o){return this.$roll_barabara(u,o).$sum()},2),I(b,"$roll_once",function(u){var s=n;return _(m(u,0))||_(B(u,q("UPPER_LIMIT_DICE_SIDES")))?0:(s=this.$rand_inner(u),this.$push_to_detail("normal",u,s),s)},1),I(b,"$roll_index",function(u){return G(this.$roll_once(u),1)},1),I(b,"$roll_tens_d10",function(){var s,o=n;return o=this.$rand_inner(10),Z(o,10)&&(o=0),s=j(o,10),this.$push_to_detail("tens_d10",10,s),s},0),I(b,"$roll_d9",function(){var o;return o=G(this.$rand_inner(10),1),this.$push_to_detail("d9",10,o),o},0),I(b,"$roll_d66",function(u){var $,s=n;return s=E(q("Array"),"new",[2],function l(){return(null==l.$$s?this:l.$$s).$roll_once(6)},{$$arity:0,$$s:this}),U(t(q("D66SortType"),"ASC"),$=u)?s["$sort!"]():U(t(q("D66SortType"),"DESC"),$)&&s["$sort!"]()["$reverse!"](),V(j(s["$[]"](0),10),s["$[]"](1))},1),b.$private(),I(b,"$rand_inner",function(u){var s,o=this;return _(ee(o.rand_results.$size(),q("UPPER_LIMIT_RANDS")))&&o.$raise(q("TooManyRandsError")),s=o.$random(u),o.rand_results["$<<"]([s,u]),s},1),I(b,"$random",function(u){return V(q("Kernel").$rand(u),1)},1),I(b,"$push_to_detail",function(u,o,s){var l;return l=q("DetailedRandResult").$new(u,o,s),this.detailed_rand_results.$push(l)},3),k(c[0],w("StandardError"),"TooManyRandsError"),n},Opal.modules["bcdice/dice_table/roll_result"]=function(r){var _,E,ee,H,L,f,c,Z,V,K=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.truthy;return _=K,E=V=[t(K[0],"BCDice")].concat(_),ee=Z=[t(V[0],"DiceTable")].concat(E),L=[H=e(Z[0],null,"RollResult")].concat(ee),f=r.$r(L),(c=H.$$prototype).table_name=c.value=c.body=n,k(H,"$initialize",function(A,P,D){var b=this;return b.table_name=A,b.value=P,b.body=D},3),H.$attr_reader("table_name"),H.$attr_reader("value"),H.$attr_reader("body"),k(H,"$to_s",function(){var A=this;return A.table_name+"("+A.value+") \uff1e "+A.body},0),k(H,"$last_body",function(){var A=this;return C(A.body["$is_a?"](f("RollResult")))?A.body.$last_body():A.body},0),k(H,"$empty?",function(){return!1},0)},Opal.modules["bcdice/dice_table/chain_table"]=function(r){var B,G,H,L,f,c,w,j,m,K=[],n=r.nil,t=r.module,e=r.klass,k=r.truthy,C=r.def,I=r.rb_minus;return B=K,G=m=[t(K[0],"BCDice")].concat(B),H=j=[t(m[0],"DiceTable")].concat(G),f=[L=e(j[0],null,"ChainTable")].concat(H),c=r.$r(f),(w=L.$$prototype).times=w.sides=w.items=w.name=n,C(L,"$initialize",function(P,D,b){var z=this,q=n;return z.name=P,z.items=b.$freeze(),q=/(\d+)D(\d+)/i.$match(D),k(q)||z.$raise(c("ArgumentError"),"Unexpected table type: "+D),z.times=q["$[]"](1).$to_i(),z.sides=q["$[]"](2).$to_i()},3),C(L,"$roll",function(P){var b,z,D=this,q=n;return b=P.$roll_sum(D.times,D.sides),z=I(b,D.times),q=D.items["$[]"](z),k(q["$respond_to?"]("roll"))&&(q=q.$roll(P)),c("RollResult").$new(D.name,b,q)},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(r){var E,U,c,w,A,P,D,H,Z,K=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,C=r.defs,I=r.def,_=r.rb_plus,B=r.rb_times,V=r.rb_minus;return E=K,U=Z=[t(K[0],"BCDice")].concat(E),c=H=[t(Z[0],"DiceTable")].concat(U),A=[w=e(H[0],null,"D66GridTable")].concat(c),P=r.$r(A),(D=w.$$prototype).name=D.items=n,C(w,"$from_i18n",function(z,q){var d=n;return d=P("I18n").$t(z,k(["locale","raise"],{locale:q,raise:!0})),this.$new(d["$[]"]("name"),d["$[]"]("items"))},2),I(w,"$initialize",function(z,q){return this.name=z,this.items=q.$freeze()},2),I(w,"$roll",function(z){var v,d,u,o,s;return v=z.$roll_once(6),d=z.$roll_once(6),u=_(B(v,10),d),o=V(v,1),s=V(d,1),P("RollResult").$new(this.name,u,this.items["$[]"](o)["$[]"](s))},1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(r){var V,Z,f,c,w,A,U,ee,E,n=[],t=r.nil,e=r.module,k=r.klass,C=r.hash2,I=r.defs,_=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),V=n,Z=E=[e(n[0],"BCDice")].concat(V),U=[e(E[0],"DiceTable")].concat(Z),ee=r.$r(U),f=U,w=[c=k(U[0],ee("D66GridTable"),"D66HalfGridTable")].concat(f),A=r.$r(w),I(c,"$from_i18n",function(D,b){var q=t;return q=A("I18n").$t(D,C(["locale","raise"],{locale:b,raise:!0})),this.$new(q["$[]"]("name"),q["$[]"]("items_1_2_3"),q["$[]"]("items_4_5_6"))},2),_(c,"$initialize",function(D,b,z){return this.name=D,this.items=[b,b,b,z,z,z].$freeze()},3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(r){var V,Z,f,c,w,A,U,ee,E,n=[],t=r.nil,e=r.module,k=r.klass,C=r.hash2,I=r.defs,_=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),V=n,Z=E=[e(n[0],"BCDice")].concat(V),U=[e(E[0],"DiceTable")].concat(Z),ee=r.$r(U),f=U,w=[c=k(U[0],ee("D66GridTable"),"D66OneThirdTable")].concat(f),A=r.$r(w),I(c,"$from_i18n",function(D,b){var q=t;return q=A("I18n").$t(D,C(["locale","raise"],{locale:b,raise:!0})),this.$new(q["$[]"]("name"),q["$[]"]("items_1_2"),q["$[]"]("items_3_4"),q["$[]"]("items_5_6"))},2),_(c,"$initialize",function(D,b,z,q){return this.name=D,this.items=[b,b,z,z,q,q].$freeze()},4)},Opal.modules["bcdice/dice_table/d66_table"]=function(r){var Z,H,A,P,D,b,z,f,U,K=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,C=r.hash2,I=r.defs,_=r.def,B=r.eqeqeq,V=r.rb_plus,m=r.rb_times,E=r.truthy;return Z=K,H=U=[e(K[0],"BCDice")].concat(Z),A=f=[e(U[0],"DiceTable")].concat(H),D=[P=k(f[0],null,"D66Table")].concat(A),b=r.$r(D),(z=P.$$prototype).sort_type=z.items=z.name=n,I(P,"$from_i18n",function(v,d){var s,o=n;return o=b("I18n").$t(v,C(["locale"],{locale:d})),s=b("D66SortType").$const_get(o["$[]"]("d66_sort_type")),this.$new(o["$[]"]("name"),s,o["$[]"]("items"))},2),_(P,"$initialize",function(v,d,u){var o=this;return o.name=v,o.sort_type=d,o.items=u.$freeze()},3),_(P,"$roll",function(v){var d=this,u=n,o=n,s=n,$=n;return u=v.$roll_barabara(2,6),B(t(b("D66SortType"),"ASC"),o=d.sort_type)?u["$sort!"]():B(t(b("D66SortType"),"DESC"),o)&&u["$sort!"]()["$reverse!"](),s=V(m(u["$[]"](0),10),u["$[]"](1)),$=E(o=d.items["$[]"](s))?o:d.items["$[]"](s.$to_s()),E($["$respond_to?"]("roll"))&&($=$.$roll(v)),b("RollResult").$new(d.name,s,$)},1),_(P,"$choice",function(v){return b("RollResult").$new(this.name,v,this.items["$[]"](v))},1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(r){var ee,c,A,P,L,n=[],t=r.nil,e=r.module,k=r.klass,C=r.hash2,I=r.send,_=r.to_ary,B=r.rb_plus,V=r.rb_times,m=r.to_a,E=r.rb_minus,G=r.send2,Z=r.find_super,j=r.def;return r.top.$require("bcdice/dice_table/d66_table"),ee=n,c=L=[e(n[0],"BCDice")].concat(ee),A=[e(L[0],"DiceTable")].concat(c),P=r.$r(A),j(k(A[0],P("D66Table"),"D66LeftRangeTable"),"$initialize",function q(v,d,u){var $;return delete q.$$p,$=C([],{}),I(u,"each",[],function(h){var x,M;return null==h&&(h=t),x=_(h),M=null==x[1]?t:x[1],I(null==x[0]?t:x[0],"each",[],function(i){return null==i&&(i=t),I(M,"each_with_index",[],function(a,N){var F,Q;return null==a&&(a=t),null==N&&(N=t),F=B(V(i,10),B(N,1)),I($,"[]=",m(Q=[F,a])),Q[E(Q.length,1)]},2)},1)},1),G(this,Z(this,"initialize",q,!1,!0),"initialize",[v,d,$],null)},3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(r){var G,ee,w,A,P,D,b,L,j,K=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,C=r.defs,I=r.def,_=r.truthy,B=r.rb_minus,V=r.rb_plus,m=r.rb_times;return G=K,ee=j=[t(K[0],"BCDice")].concat(G),w=L=[t(j[0],"DiceTable")].concat(ee),P=[A=e(L[0],null,"D66ParityTable")].concat(w),D=r.$r(P),(b=A.$$prototype).odd=b.even=b.name=n,C(A,"$from_i18n",function(q,v){var u=n;return u=D("I18n").$t(q,k(["locale","raise"],{locale:v,raise:!0})),this.$new(u["$[]"]("name"),u["$[]"]("odd"),u["$[]"]("even"))},2),I(A,"$initialize",function(q,v,d){var u=this;return u.name=q,u.odd=v.$freeze(),u.even=d.$freeze()},3),I(A,"$roll",function(q){var u,s,$,v=this,d=n;return d=q.$roll_once(6),u=q.$roll_once(6),s=(_(d["$odd?"]())?v.odd:v.even)["$[]"](B(u,1)),$=V(m(d,10),u),D("RollResult").$new(v.name,$,s)},1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(r){var V,Z,L,f,c,w,A,U,E,K=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.rb_plus,I=r.rb_times,_=r.send;return V=K,Z=E=[t(K[0],"BCDice")].concat(V),L=U=[t(E[0],"DiceTable")].concat(Z),c=[f=e(U[0],null,"D66RangeTable")].concat(L),w=r.$r(c),(A=f.$$prototype).items=A.name=n,k(f,"$initialize",function(D,b){return this.name=D,this.items=b.$freeze()},2),k(f,"$roll",function(D){var z,q,v,d=n;return z=D.$roll_once(6),q=D.$roll_once(6),v=C(I(z,10),q),d=_(this.items,"find",[],function(o){return null==o&&(o=n),o["$[]"](0)["$include?"](v)},1),w("RollResult").$new(this.name,v,d["$[]"](1))},1)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var j,L,P,D,b,z,q,c,ee,K=[],n=r.nil,t=r.module,e=r.klass,k=r.const_set,C=r.send,I=r.truthy,_=r.def,B=r.to_a,V=r.rb_minus,m=r.eqeqeq,E=r.rb_times,G=r.rb_plus;return j=K,L=ee=[t(K[0],"BCDice")].concat(j),P=c=[t(ee[0],"DiceTable")].concat(L),b=[D=e(c[0],null,"RangeTable")].concat(P),z=r.$r(b),(q=D.$$prototype).name=q.items=q.num_of_dice=q.num_of_sides=q.formatter=n,k(b[0],"RollResult",C(z("Struct"),"new",["sum","values","content","formatted"],function v(){return(null==v.$$s?this:v.$$s).$alias_method("to_s","formatted")},{$$arity:0,$$s:D})),k(b[0],"Item",z("Struct").$new("range","content")),k(b[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),k(b[0],"DEFAULT_FORMATTER",C(D,"lambda",[],function(d,u){return null==d&&(d=n),null==u&&(u=n),d.$name()+"("+u.$sum()+") \uff1e "+u.$content()},2)),D.$attr_reader("name"),D.$attr_reader("num_of_dice"),D.$attr_reader("num_of_sides"),_(D,"$initialize",function v(d,u,o){var l,s=v.$$p||n,$=this,h=n;return delete v.$$p,$.name=d.$freeze(),$.formatter=I(l=s)?l:z("DEFAULT_FORMATTER"),h=z("DICE_ROLL_METHOD_RE").$match(u),I(h)||$.$raise(z("ArgumentError"),$.name+": invalid dice roll method: "+u),$.num_of_dice=h["$[]"](1).$to_i(),$.num_of_sides=h["$[]"](2).$to_i(),$.$store(o)},3),_(D,"$fetch",function(d){var o,u=this;return o=C(u.items,"find",[],function($){return null==$&&($=n),$.$range()["$include?"](d)},1),I(o)||u.$raise(z("RangeError"),u.name+": value is out of range: "+d),o},1),_(D,"$roll",function(d){var s,$,l,u=this,o=n;return s=(o=d.$roll_barabara(u.num_of_dice,u.num_of_sides)).$sum(),$=z("RollResult").$new(s,o,u.$fetch(s).$content()),l=[u.formatter["$[]"](u,$)],C($,"formatted=",B(l)),V(l.length,1),$},1),D.$private(),_(D,"$store",function(d){var o,s,u=this;return o=C(d,"map",[],function $(l,h){return null==l&&(l=n),null==h&&(h=n),[(null==$.$$s?this:$.$$s).$coerce_to_int_range(l),h]},{$$arity:2,$$s:u}),s=C(o,"sort_by",[],function(l,h){return null==l&&(l=n),null==h&&(h=n),l.$min()},2),u.$assert_min_sum_is_covered(s),u.$assert_max_sum_is_covered(s),u.$assert_no_gap_or_overlap_in_ranges(s),u.items=C(s,"map",[],function(l,h){return null==l&&(l=n),null==h&&(h=n),z("Item").$new(l,h.$freeze()).$freeze()},2).$freeze(),u},1),_(D,"$coerce_to_int_range",function(d){var o;return m(z("Integer"),o=d)?z("Range").$new(d,d):m(z("Range"),o)&&I(d.$begin()["$is_a?"](z("Integer")))&&I(d.$end()["$is_a?"](z("Integer")))?d:this.$raise(z("TypeError"),this.name+": "+d+" ("+d.$class()+") must be an Integer or a Range with Integers ")},1),_(D,"$assert_min_sum_is_covered",function(d){var o,u=this,s=n;return o=u.num_of_dice,s=d.$first()["$[]"](0),I(s["$include?"](o))||u.$raise(z("RangeError"),u.name+": min value ("+o+") is not covered: "+s),u},1),_(D,"$assert_max_sum_is_covered",function(d){var o,u=this,s=n;return o=E(u.num_of_dice,u.num_of_sides),s=d.$last()["$[]"](0),I(s["$include?"](o))||u.$raise(z("RangeError"),u.name+": max value ("+o+") is not covered: "+s),u},1),_(D,"$assert_no_gap_or_overlap_in_ranges",function(d){return C(d,"each_cons",[2],function o(s,$){var T,g,l=null==o.$$s?this:o.$$s,h=n,x=n;return null==l.name&&(l.name=n),null==s&&(s=n),null==$&&($=n),h=s["$[]"](0),x=$["$[]"](0),T=h.$max(),g=G(T,1),I(x["$include?"](T))&&l.$raise(z("RangeError"),l.name+": Range overlap: "+h+" and "+x),I(x["$include?"](g))?n:l.$raise(z("RangeError"),l.name+": Range gap: "+h+" and "+x)},{$$arity:2,$$s:this}),this},1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(r){var V,Z,L,P,D,b,z,c,U,E,K=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,C=r.send,I=r.def,_=r.rb_minus;return V=K,Z=E=[e(K[0],"BCDice")].concat(V),L=U=[e(E[0],"DiceTable")].concat(Z),P=c=[k(U[0],null,"SaiFicSkillTable")].concat(L),b=[D=k(c[0],null,"Category")].concat(P),z=r.$r(b),D.$$prototype.name=n,I(D,"$initialize",function(d,u,o,s){var $=this;return $.name=d,$.skills=C(u.$map(),"with_index",[2],function(h,x){return null==h&&(h=n),null==x&&(x=n),t(z("SaiFicSkillTable"),"Skill").$new(d,h,o,x,s)},2),$.dice=o},4),I(D,"$roll",function(d){return this.$skills()["$[]"](_(d.$roll_sum(2,6),2))},1),I(D,"$to_s",function(){return this.name},0),D.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(r){var _,E,ee,w,A,L,Z,V,K=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.hash2;return _=K,E=V=[t(K[0],"BCDice")].concat(_),ee=Z=[t(V[0],"DiceTable")].concat(E),L=[e(Z[0],null,"SaiFicSkillTable")].concat(ee),(A=(w=e(L[0],null,"Skill")).$$prototype).s_format=A.category_dice=A.row_dice=A.category_name=A.name=n,k(w,"$initialize",function(D,b,z,q,v){var d=this;return d.category_name=D,d.name=b,d.category_dice=z,d.row_dice=q,d.s_format=v},5),k(w,"$to_s",function(){var D=this;return D.$format(D.s_format,C(["category_dice","row_dice","category_name","skill_name"],{category_dice:D.category_dice,row_dice:D.row_dice,category_name:D.category_name,skill_name:D.name}))},0),w.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(r){var H,w,z,q,v,d,u,P,f,K=r.top,n=[],t=r.nil,e=r.$$$,k=r.module,C=r.klass,I=r.hash2,_=r.send,V=r.defs,m=r.const_set,E=r.to_ary,G=r.def,Z=r.truthy,j=r.rb_minus,U=r.rb_plus;return K.$require("bcdice/dice_table/sai_fic_skill_table/category"),K.$require("bcdice/dice_table/sai_fic_skill_table/skill"),H=n,w=f=[k(n[0],"BCDice")].concat(H),z=P=[k(f[0],"DiceTable")].concat(w),v=[q=C(P[0],null,"SaiFicSkillTable")].concat(z),d=r.$r(v),(u=q.$$prototype).rtt=u.rtt_format=u.rct=u.rct_format=u.rttn=u.rttn_format=u.categories=t,V(q,"$from_i18n",function(s,$,l){var h,x,T,i,Y=t;if(null==l)l=I([],{});else if(!l.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(h=l.$$smap.rtt)&&(h=t),null==(x=l.$$smap.rct)&&(x=t),null==(T=l.$$smap.rttn)&&(T=t),i=(Y=d("I18n").$t("RTT",I(["locale","raise","default"],{locale:$,raise:!1,default:I([],{})})).$merge(d("I18n").$t(s,I(["locale","raise"],{locale:$,raise:!0}))))["$[]"]("items"),Y=_(Y,"select",[],function(a,N){return null==a&&(a=t),null==N&&(N=t),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](a)},2),this.$new(i,r.to_hash(Y).$merge(I(["rtt","rct","rttn"],{rtt:h,rct:x,rttn:T})))},-3),m(v[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),m(v[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),m(v[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),m(v[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),G(q,"$initialize",function(s,$){var l,h,x,T,g,M,Y,i=this;if(null==$)$=I([],{});else if(!$.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(l=$.$$smap.rtt)&&(l=t),null==(h=$.$$smap.rct)&&(h=t),null==(x=$.$$smap.rttn)&&(x=t),null==(T=$.$$smap.rtt_format)&&(T=d("DEFAULT_RTT")),null==(g=$.$$smap.rct_format)&&(g=d("DEFAULT_RCT")),null==(M=$.$$smap.rttn_format)&&(M=d("DEFAULT_RTTN")),null==(Y=$.$$smap.s_format)&&(Y=d("DEFAULT_S")),i.categories=_(s.$map(),"with_index",[1],function(a,N){var F,re,X;return null==a&&(a=t),null==N&&(N=t),re=null==(F=E(a))[0]?t:F[0],X=null==F[1]?t:F[1],e(d("SaiFicSkillTable"),"Category").$new(re,X,N,Y)},{$$arity:2,$$has_top_level_mlhs_arg:!0}),i.rtt=l,i.rct=h,i.rttn=x.$to_a(),i.rtt_format=T,i.rct_format=g,i.rttn_format=M},-2),m(v[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),q.$attr_reader("categories"),G(q,"$roll_command",function(s,$){var h,l=this,x=t,T=t;return Z(["RTT",l.rtt]["$include?"](h=$))?l.$format_skill(l.rtt_format,l.$roll_skill(s)):Z(["RCT",l.rct]["$include?"](h))?(x=l.$roll_category(s),l.$format(l.rct_format,I(["category_dice","category_name"],{category_dice:x.$dice(),category_name:x.$name()}))):Z(T=d("RTTN").$index(h))||Z(T=l.rttn.$index(h))?l.$format_skill(l.rttn_format,l.categories["$[]"](T).$roll(s)):t},2),G(q,"$roll_category",function(s){return this.categories["$[]"](j(s.$roll_once(6),1))},1),G(q,"$roll_skill",function(s){return this.$roll_category(s).$roll(s)},1),G(q,"$prefixes",function(){var s=this;return U(["RTT[1-6]?","RCT",s.rtt,s.rct],s.rttn).$compact()},0),q.$private(),G(q,"$format_skill",function(s,$){return this.$format(s,I(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:$.$category_dice(),row_dice:$.$row_dice(),category_name:$.$category_name(),skill_name:$.$name(),text:$.$to_s()}))},2)},Opal.modules["bcdice/dice_table/table"]=function(r){var m,j,f,c,w,A,P,ee,G,K=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,C=r.defs,I=r.truthy,_=r.def,B=r.rb_minus;return m=K,j=G=[t(K[0],"BCDice")].concat(m),f=ee=[t(G[0],"DiceTable")].concat(j),w=[c=e(ee[0],null,"Table")].concat(f),A=r.$r(w),(P=c.$$prototype).times=P.sides=P.name=P.items=n,C(c,"$from_i18n",function(b,z){var v=n;return v=A("I18n").$t(b,k(["locale"],{locale:z})),this.$new(v["$[]"]("name"),v["$[]"]("type"),v["$[]"]("items"))},2),_(c,"$initialize",function(b,z,q){var v=this,d=n;return v.name=b,v.items=q.$freeze(),d=/(\d+)D(\d+)/i.$match(z),I(d)||v.$raise(A("ArgumentError"),"Unexpected table type: "+z),v.times=d["$[]"](1).$to_i(),v.sides=d["$[]"](2).$to_i()},3),_(c,"$roll",function(b){var q,z=this;return q=b.$roll_sum(z.times,z.sides),z.$choice(q)},1),_(c,"$choice",function(b){var q,z=this;return q=B(b,z.times),A("RollResult").$new(z.name,b,z.items["$[]"](q))},1)},Opal.modules["bcdice/dice_table"]=function(r){var K=r.top;return K.$require("bcdice/dice_table/roll_result"),K.$require("bcdice/dice_table/chain_table"),K.$require("bcdice/dice_table/d66_grid_table"),K.$require("bcdice/dice_table/d66_half_grid_table"),K.$require("bcdice/dice_table/d66_one_third_table"),K.$require("bcdice/dice_table/d66_left_range_table"),K.$require("bcdice/dice_table/d66_parity_table"),K.$require("bcdice/dice_table/d66_range_table"),K.$require("bcdice/dice_table/d66_table"),K.$require("bcdice/dice_table/range_table"),K.$require("bcdice/dice_table/sai_fic_skill_table"),K.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(r){var C,V,E,_,K=[],t=r.module,e=r.const_set;return C=K,V=_=[t(K[0],"BCDice")].concat(C),E=[t(_[0],"D66SortType")].concat(V),e(E[0],"NO_SORT","no_sort"),e(E[0],"ASC","asc"),e(E[0],"DESC","desc"),function(B,V){var E=[t(B,"RoundType")].concat(V);return e(E[0],"CEIL","ceil"),e(E[0],"FLOOR","floor"),e(E[0],"ROUND","round")}(_[0],_)},Opal.modules["bcdice/translate"]=function(r){var _,E,G,Z,j,V,K=[],n=r.nil,t=r.module,e=r.hash2,C=r.def;return _=K,E=V=[t(K[0],"BCDice")].concat(_),Z=[G=t(V[0],"Translate")].concat(E),j=r.$r(Z),C(G,"$translate",function(ee,H){var L,f=this;if(null==f.locale&&(f.locale=n),null==H)H=e([],{});else if(!H.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return L=r.kwrestargs(H,{}),j("I18n").$translate(ee,e(["locale","raise"],{locale:f.locale,raise:!0}).$merge(r.to_hash(L)))},-2)},Opal.modules["bcdice/result"]=function(r){var V,j,L,U,H,E,K=[],n=r.nil,e=r.klass,k=r.send,C=r.to_a,I=r.rb_minus,_=r.def;return V=K,j=E=[(0,r.module)(K[0],"BCDice")].concat(V),[U=e(E[0],null,"Result")].concat(j),(H=U.$$prototype).secret=H.success=H.failure=H.critical=H.fumble=n,_(L=r.get_singleton_class(U),"$success",function(w){return k(this.$new(),"tap",[],function(D){var b=n;return null==D&&(D=n),k(D,"text=",C(b=[w])),I(b.length,1),k(D,"success=",C(b=[!0])),b[I(b.length,1)]},1)},1),_(L,"$failure",function(w){return k(this.$new(),"tap",[],function(D){var b=n;return null==D&&(D=n),k(D,"text=",C(b=[w])),I(b.length,1),k(D,"failure=",C(b=[!0])),b[I(b.length,1)]},1)},1),_(L,"$critical",function(w){return k(this.$new(),"tap",[],function(D){var b=n;return null==D&&(D=n),k(D,"text=",C(b=[w])),I(b.length,1),k(D,"critical=",C(b=[!0])),I(b.length,1),k(D,"success=",C(b=[!0])),b[I(b.length,1)]},1)},1),_(L,"$fumble",function(w){return k(this.$new(),"tap",[],function(D){var b=n;return null==D&&(D=n),k(D,"text=",C(b=[w])),I(b.length,1),k(D,"fumble=",C(b=[!0])),I(b.length,1),k(D,"failure=",C(b=[!0])),b[I(b.length,1)]},1)},1),_(L,"$nothing",function(){return"nothing"},0),_(U,"$initialize",function(f){var c=this;return null==f&&(f=n),c.text=f,c.rands=n,c.detailed_rands=n,c.secret=!1,c.success=!1,c.failure=!1,c.critical=!1,c.fumble=!1},-1),U.$attr_accessor("text","rands","detailed_rands"),U.$attr_writer("secret","success","failure","critical","fumble"),_(U,"$secret?",function(){return this.secret},0),_(U,"$success?",function(){return this.success},0),_(U,"$failure?",function(){return this.failure},0),_(U,"$critical?",function(){return this.critical},0),_(U,"$fumble?",function(){return this.fumble},0),_(U,"$condition=",function(f){return this.success=f,this.failure=f["$!"]()},1)},Opal.modules["racc/parser"]=function(r){var z,v,d,n=[],t=r.$r(n),e=r.nil,k=r.$$$,C=r.module,I=r.klass,_=r.truthy,B=r.const_set,V=r.defs,m=r.gvars,E=r.rb_lt,G=r.send,Z=r.to_a,j=r.rb_minus,U=r.def,ee=r.to_ary,H=r.neqeq,L=r.rb_plus,f=r.eqeq,c=r.rb_ge,w=r.rb_gt,A=r.eqeqeq,P=r.rb_le,D=r.rb_times;return z=n,v=[C(n[0],"Racc")].concat(z),d=r.$r(v),I(v[0],d("StandardError"),"ParseError"),_(k("::","ParseError","skip_raise")?"constant":e)||B(n[0],"ParseError",k(t("Racc"),"ParseError")),function(b,z){var $,l,h,x,T,d=[C(b,"Racc")].concat(z),u=r.$r(d);return _(u("Racc_No_Extensions","skip_raise")?"constant":e)||B(d[0],"Racc_No_Extensions",!1),$=d,h=[l=I(d[0],null,"Parser")].concat($),x=r.$r(h),(T=l.$$prototype).yydebug=T.racc_debug_out=T.racc_error_status=T.racc_t=T.racc_vstack=T.racc_val=T.racc_state=T.racc_tstack=e,B(h[0],"Racc_Runtime_Version","1.4.6"),B(h[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),B(h[0],"Racc_Runtime_Core_Version_R","1.4.6"),B(h[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),B(h[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),B(h[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),B(h[0],"Racc_Runtime_Core_Version",x("Racc_Runtime_Core_Version_R")),B(h[0],"Racc_Runtime_Core_Revision",x("Racc_Runtime_Core_Revision_R")),B(h[0],"Racc_Runtime_Type","ruby"),V(x("Parser"),"$racc_runtime_type",function(){return x("Racc_Runtime_Type")},0),U(l,"$_racc_setup",function(){var M,Y,i=this,S=e,a=e,N=e;return null==m.stderr&&(m.stderr=e),_(k(i.$class(),"Racc_debug_parser"))||(i.yydebug=!1),_(null!=(M=i.yydebug)&&M!==e?"instance-variable":e)||(i.yydebug=!1),_(i.yydebug)&&(_(null!=(Y=i.racc_debug_out)&&Y!==e?"instance-variable":e)||(i.racc_debug_out=m.stderr),i.racc_debug_out=_(S=i.racc_debug_out)?S:m.stderr),a=k(i.$class(),"Racc_arg"),_(E(a.$size(),14))&&(G(a,"[]=",Z(N=[13,!0])),j(N.length,1)),a},0),U(l,"$_racc_init_sysvars",function(){var M=this;return M.racc_state=[0],M.racc_tstack=[],M.racc_vstack=[],M.racc_t=e,M.racc_val=e,M.racc_read_next=!0,M.racc_user_yyerror=!1,M.racc_error_status=0},0),U(l,"$do_parse",function(){return this.$__send__(x("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},0),U(l,"$next_token",function(){return this.$raise(x("NotImplementedError"),this.$class()+"#next_token is not defined")},0),U(l,"$_racc_do_parse_rb",function(M,Y){var i,a=this,N=e,F=e,Q=e,re=e,W=e,y=e,J=e,p=e;return i=ee(M),N=null==i[0]?e:i[0],F=null==i[1]?e:i[1],Q=null==i[2]?e:i[2],re=null==i[3]?e:i[3],W=null==i[10]?e:i[10],a.$_racc_init_sysvars(),y=J=p=e,G(a,"catch",["racc_end_parse"],function R(){var $e,te,O=null==R.$$s?this:R.$$s,ue=e;for(null==O.racc_state&&(O.racc_state=e),null==O.racc_read_next&&(O.racc_read_next=e),null==O.racc_t&&(O.racc_t=e),null==O.yydebug&&(O.yydebug=e),null==O.racc_val&&(O.racc_val=e);_(!0);)for(_(p=re["$[]"](O.racc_state["$[]"](-1)))?(_(O.racc_read_next)&&H(O.racc_t,0)&&(te=O.$next_token(),$e=ee(te),y=null==$e[0]?e:$e[0],O.racc_val=null==$e[1]?e:$e[1],O.racc_t=_(y)?_(ue=W["$[]"](y))?ue:1:0,_(O.yydebug)&&O.$racc_read_token(O.racc_t,y,O.racc_val),O.racc_read_next=!1),p=L(p,O.racc_t),_(c(p,0))&&_(J=N["$[]"](p))&&f(F["$[]"](p),O.racc_state["$[]"](-1))||(J=Q["$[]"](O.racc_state["$[]"](-1)))):J=Q["$[]"](O.racc_state["$[]"](-1));_(J=O.$_racc_evalact(J,M)););},{$$arity:0,$$s:a})},2),U(l,"$yyparse",function(M,Y){return this.$__send__(x("Racc_YY_Parse_Method"),M,Y,this.$_racc_setup(),!0)},2),U(l,"$_racc_yyparse_rb",function(M,Y,i,S){var a,F=this,Q=e,re=e,X=e,W=e,J=e,p=e,R=e;return a=ee(i),Q=null==a[0]?e:a[0],re=null==a[1]?e:a[1],X=null==a[2]?e:a[2],W=null==a[3]?e:a[3],J=null==a[10]?e:a[10],F.$_racc_init_sysvars(),p=e,R=e,G(F,"catch",["racc_end_parse"],function ne(){var O=null==ne.$$s?this:ne.$$s;for(null==O.racc_state&&(O.racc_state=e);!_(R=W["$[]"](O.racc_state["$[]"](-1)));)for(;_(p=O.$_racc_evalact(X["$[]"](O.racc_state["$[]"](-1)),i)););return G(M,"__send__",[Y],function ue(se,le){var ae=null==ue.$$s?this:ue.$$s,ie=e,_e=e;for(null==ae.racc_t&&(ae.racc_t=e),null==ae.racc_state&&(ae.racc_state=e),null==ae.racc_read_next&&(ae.racc_read_next=e),null==se&&(se=e),null==le&&(le=e),ae.racc_t=_(se)?_(ie=J["$[]"](se))?ie:1:0,ae.racc_val=le,ae.racc_read_next=!1,R=L(R,ae.racc_t),_(c(R,0))&&_(p=Q["$[]"](R))&&f(re["$[]"](R),ae.racc_state["$[]"](-1))||(p=X["$[]"](ae.racc_state["$[]"](-1)));_(p=ae.$_racc_evalact(p,i)););for(;_(_(ie=_(_e=(R=W["$[]"](ae.racc_state["$[]"](-1)))["$!"]())?_e:ae.racc_read_next["$!"]())?ie:ae.racc_t["$=="](0));)for(_(R)&&_(R=L(R,ae.racc_t))&&_(c(R,0))&&_(p=Q["$[]"](R))&&f(re["$[]"](R),ae.racc_state["$[]"](-1))||(p=X["$[]"](ae.racc_state["$[]"](-1)));_(p=ae.$_racc_evalact(p,i)););},{$$arity:2,$$s:O})},{$$arity:0,$$s:F})},4),U(l,"$_racc_evalact",function(M,Y){var i,X,a=this,N=e,F=e,re=e,W=e,y=e,J=e,p=e;if(N=null==(i=ee(Y))[0]?e:i[0],F=null==i[1]?e:i[1],re=null==i[3]?e:i[3],X=null==i[11]?e:i[11],W=null==i[12]?e:i[12],_(w(M,0))&&_(E(M,X)))_(w(a.racc_error_status,0))&&(f(a.racc_t,1)||(a.racc_error_status=j(a.racc_error_status,1))),a.racc_vstack.$push(a.racc_val),a.racc_state.$push(M),a.racc_read_next=!0,_(a.yydebug)&&(a.racc_tstack.$push(a.racc_t),a.$racc_shift(a.racc_t,a.racc_tstack,a.racc_vstack));else if(_(E(M,0))&&_(w(M,W["$-@"]()))){if(y=G(a,"catch",["racc_jump"],function R(){var ne=null==R.$$s?this:R.$$s;return null==ne.racc_state&&(ne.racc_state=e),ne.racc_state.$push(ne.$_racc_do_reduce(Y,M)),!1},{$$arity:0,$$s:a}),_(y)){if(A(1,J=y))return a.racc_user_yyerror=!0,W["$-@"]();if(A(2,J))return X;a.$raise("[Racc Bug] unknown jump code")}}else if(f(M,X))_(a.yydebug)&&a.$racc_accept(),a.$throw("racc_end_parse",a.racc_vstack["$[]"](0));else{if(f(M,W["$-@"]())){for(A(0,J=a.racc_error_status)?_(Y["$[]"](21))||a.$on_error(a.racc_t,a.racc_val,a.racc_vstack):A(3,J)&&(f(a.racc_t,0)&&a.$throw("racc_end_parse",e),a.racc_read_next=!0),a.racc_user_yyerror=!1,a.racc_error_status=3;_(!0)&&!(_(p=re["$[]"](a.racc_state["$[]"](-1)))&&(p=L(p,1),_(c(p,0))&&_(M=N["$[]"](p))&&f(F["$[]"](p),a.racc_state["$[]"](-1))));)_(P(a.racc_state.$size(),1))&&a.$throw("racc_end_parse",e),a.racc_state.$pop(),a.racc_vstack.$pop(),_(a.yydebug)&&(a.racc_tstack.$pop(),a.$racc_e_pop(a.racc_state,a.racc_tstack,a.racc_vstack));return M}a.$raise("[Racc Bug] unknown action "+M.$inspect())}return _(a.yydebug)&&a.$racc_next_state(a.racc_state["$[]"](-1),a.racc_state),e},2),U(l,"$_racc_do_reduce",function(M,Y){var i,W,J,O,ue,se,ae,a=this,F=e,Q=e,re=e,X=e,y=e,p=e,R=e,ne=e,$e=e,te=e,le=e,oe=e,ce=e,ie=e;return F=null==(i=ee(M))[4]?e:i[4],Q=null==i[5]?e:i[5],re=null==i[6]?e:i[6],X=null==i[7]?e:i[7],W=null==i[8]?e:i[8],y=null==i[9]?e:i[9],J=null==i[13]?e:i[13],p=a.racc_state,R=a.racc_vstack,ne=a.racc_tstack,$e=D(Y,-3),te=y["$[]"]($e),O=y["$[]"](L($e,1)),ue=y["$[]"](L($e,2)),se=[],_(a.yydebug)&&(le=ne["$[]"](te["$-@"](),te)),oe=R["$[]"](te["$-@"](),te),_(a.yydebug)&&(ce=[te["$-@"](),te,se],G(ne,"[]=",Z(ce)),j(ce.length,1)),ce=[te["$-@"](),te,se],G(R,"[]=",Z(ce)),j(ce.length,1),ce=[te["$-@"](),te,se],G(p,"[]=",Z(ce)),j(ce.length,1),_(J)?R.$push(a.$__send__(ue,oe,R,oe["$[]"](0))):R.$push(a.$__send__(ue,oe,R)),ne.$push(O),_(a.yydebug)&&a.$racc_reduce(le,O,ne,R),ae=j(O,W),_($e=X["$[]"](ae))&&($e=L($e,p["$[]"](-1)),_(c($e,0))&&_(ie=F["$[]"]($e))&&f(Q["$[]"]($e),ae))?ie:re["$[]"](ae)},2),U(l,"$on_error",function(M,Y,i){var a,S=this;return S.$raise(x("ParseError"),S.$sprintf("\nparse error on value %s (%s)",Y.$inspect(),_(a=S.$token_to_str(M))?a:"?"))},3),U(l,"$yyerror",function(){return this.$throw("racc_jump",1)},0),U(l,"$yyaccept",function(){return this.$throw("racc_jump",2)},0),U(l,"$yyerrok",function(){return this.racc_error_status=0},0),U(l,"$racc_read_token",function(M,Y,i){var S=this;return S.racc_debug_out.$print("read    "),S.racc_debug_out.$print(Y.$inspect(),"(",S.$racc_token2str(M),") "),S.racc_debug_out.$puts(i.$inspect()),S.racc_debug_out.$puts()},3),U(l,"$racc_shift",function(M,Y,i){var S=this;return S.racc_debug_out.$puts("shift   "+S.$racc_token2str(M)),S.$racc_print_stacks(Y,i),S.racc_debug_out.$puts()},3),U(l,"$racc_reduce",function(M,Y,i,S){var a=this,N=e;return(N=a.racc_debug_out).$print("reduce "),_(M["$empty?"]())?N.$print(" <none>"):G(M,"each",[],function F(Q){return null==Q&&(Q=e),N.$print(" ",(null==F.$$s?this:F.$$s).$racc_token2str(Q))},{$$arity:1,$$s:a}),N.$puts(" --\x3e "+a.$racc_token2str(Y)),a.$racc_print_stacks(i,S),a.racc_debug_out.$puts()},4),U(l,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},0),U(l,"$racc_e_pop",function(M,Y,i){var S=this;return S.racc_debug_out.$puts("error recovering mode: pop token"),S.$racc_print_states(M),S.$racc_print_stacks(Y,i),S.racc_debug_out.$puts()},3),U(l,"$racc_next_state",function(M,Y){var i=this;return i.racc_debug_out.$puts("goto    "+M),i.$racc_print_states(Y),i.racc_debug_out.$puts()},2),U(l,"$racc_print_stacks",function(M,Y){var S=e;return(S=this.racc_debug_out).$print("        ["),G(M,"each_index",[],function a(N){return null==N&&(N=e),S.$print(" (",(null==a.$$s?this:a.$$s).$racc_token2str(M["$[]"](N))," ",Y["$[]"](N).$inspect(),")")},{$$arity:1,$$s:this}),S.$puts(" ]")},2),U(l,"$racc_print_states",function(M){var i=e;return(i=this.racc_debug_out).$print("        ["),G(M,"each",[],function(a){return null==a&&(a=e),i.$print(" ",a)},1),i.$puts(" ]")},1),U(l,"$racc_token2str",function(M){var i;return _(i=k(this.$class(),"Racc_token_to_s_table")["$[]"](M))?i:this.$raise("[Racc Bug] can't convert token "+M+" to string")},1),U(l,"$token_to_str",function(M){return k(this.$class(),"Racc_token_to_s_table")["$[]"](M)},1)}(n[0],n)},Opal.modules["bcdice/arithmetic/node"]=function(r){var U,f,P,d,u,b,z,w,H,K=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,C=r.def,I=r.send2,_=r.find_super,B=r.eqeq,V=r.const_set,m=r.eqeqeq,E=r.rb_divide,G=r.truthy,Z=r.alias;return U=K,f=H=[e(K[0],"BCDice")].concat(U),P=w=[e(H[0],"Arithmetic")].concat(f),b=[e(w[0],"Node")].concat(P),z=r.$r(b),(u=(d=k(b[0],null,"BinaryOp")).$$prototype).lhs=u.rhs=u.op=n,C(d,"$initialize",function(s,$,l){var h=this;return h.lhs=s,h.op=$,h.rhs=l},3),C(d,"$eval",function(s){var h,$=this,l=n;return l=$.lhs.$eval(s),h=$.rhs.$eval(s),l.$send($.op,h)},1),C(d,"$output",function(){var s=this;return""+s.lhs.$output()+s.op+s.rhs.$output()},0),C(d,"$s_exp",function(){var s=this;return"("+s.$op_for_s_exp()+" "+s.lhs.$s_exp()+" "+s.rhs.$s_exp()+")"},0),C(d,"$op_for_s_exp",function(){return this.op},0),function(q,v,d){var u=k(q,v,"DivideBase"),o=[u].concat(d),s=r.$r(o),$=u.$$prototype;$.lhs=$.rhs=$.op=n,C(u,"$initialize",function l(h,x){return delete l.$$p,I(this,_(this,"initialize",l,!1,!0),"initialize",[h,"/",x],null)},2),C(u,"$eval",function(h){var T,g,x=this;return T=x.lhs.$eval(h),g=x.rhs.$eval(h),B(g,0)&&x.$raise(s("ZeroDivisionError")),x.$divide_and_round(T,g,h)},1),C(u,"$output",function l(){var h=l.$$p||n,x=this;return delete l.$$p,""+I(x,_(x,"output",l,!1,!0),"output",[],h)+x.$rounding_method()},0),u.$private(),C(u,"$rounding_method",function(){return t(this.$class(),"ROUNDING_METHOD")},0),C(u,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()},0),C(u,"$divide_and_round",function(h,x,T){return this.$raise(s("NotImplementedError"))},3)}(b[0],z("BinaryOp"),b),function(q,v,d){var u=k(q,v,"DivideWithGameSystemDefault"),o=[u].concat(d),s=r.$r(o);V(o[0],"ROUNDING_METHOD",""),u.$private(),C(u,"$divide_and_round",function(l,h,x){var T,g=n;return m(t(s("RoundType"),"CEIL"),T=x)?E(l.$to_f(),h).$ceil():m(t(s("RoundType"),"ROUND"),T)?(g=E(l.$to_f(),h),G(g["$negative?"]())?g.$abs().$round()["$-@"]():g.$round()):E(l,h).$floor()},3)}(b[0],z("DivideBase"),b),function(q,v,d){var u=k(q,v,"DivideWithCeil"),o=[u].concat(d);V(o[0],"ROUNDING_METHOD","C"),u.$private(),C(u,"$divide_and_round",function($,l,h){return E($.$to_f(),l).$ceil()},3)}(b[0],z("DivideBase"),b),function(q,v,d){var u=k(q,v,"DivideWithRound"),o=[u].concat(d);V(o[0],"ROUNDING_METHOD","R"),u.$private(),C(u,"$divide_and_round",function($,l,h){var x=n;return x=E($.$to_f(),l),G(x["$negative?"]())?x.$abs().$round()["$-@"]():x.$round()},3)}(b[0],z("DivideBase"),b),function(q,v,d){var u=k(q,v,"DivideWithFloor"),o=[u].concat(d);V(o[0],"ROUNDING_METHOD","F"),u.$private(),C(u,"$divide_and_round",function($,l,h){return E($,l).$floor()},3)}(b[0],z("DivideBase"),b),function(q,v){var d=k(q,null,"Negative");d.$$prototype.body=n,C(d,"$initialize",function(s){return this.body=s},1),C(d,"$eval",function(s){return this.body.$eval(s)["$-@"]()},1),C(d,"$output",function(){return"-"+this.body.$output()},0),C(d,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"},0)}(b[0]),function(q,v){var d=k(q,null,"Parenthesis");d.$$prototype.expr=n,C(d,"$initialize",function(s){return this.expr=s},1),C(d,"$eval",function(s){return this.expr.$eval(s)},1),C(d,"$output",function(){return"("+this.expr.$output()+")"},0),C(d,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"},0)}(b[0]),function(q,v){var d=k(q,null,"Number");return d.$$prototype.value=n,C(d,"$initialize",function(s){return this.value=s},1),C(d,"$eval",function(s){return this.value},1),C(d,"$output",function(){return this.value.$to_s()},0),Z(d,"s_exp","output")}(b[0])},Opal.modules.strscan=function(r){var Z,j,U,ee,H,K=[],n=r.nil,e=r.def,k=r.truthy,C=r.eqeqeq,I=r.Opal,_=r.send,B=r.to_a,V=r.rb_minus,m=r.alias;return Z=K,U=[j=(0,r.klass)(K[0],null,"StringScanner")].concat(Z),ee=r.$r(U),(H=j.$$prototype).pos=H.string=H.working=H.matched=H.prev_pos=H.match=n,j.$attr_reader("pos","matched"),e(j,"$initialize",function(f){var c=this;return c.string=f,c.pos=0,c.matched=n,c.working=f,c.match=[]},1),j.$attr_reader("string"),e(j,"$beginning_of_line?",function(){var f=this;return 0===f.pos||"\n"===f.string.charAt(f.pos-1)},0),e(j,"$scan",function(f){var c=this,w=(f=c.$anchor(f)).exec(c.working);return null==w?c.matched=n:"object"==typeof w?(c.prev_pos=c.pos,c.pos+=w[0].length,c.working=c.working.substring(w[0].length),c.matched=w[0],c.match=w,w[0]):"string"==typeof w?(c.pos+=w.length,c.working=c.working.substring(w.length),w):n},1),e(j,"$scan_until",function(f){var c=this;f=c.$anchor(f);for(var P,w=c.pos,A=c.working;;){if(P=f.exec(A),w+=1,A=A.substr(1),null!=P)return c.matched=c.string.substr(c.pos,w-c.pos-1+P[0].length),c.match=P,c.prev_pos=w-1,c.pos=w,c.working=A.substr(P[0].length),c.matched;if(0===A.length)return c.match=[],c.matched=n}},1),e(j,"$[]",function(f){var w;if(k(this.match["$empty?"]()))return n;C(ee("Symbol"),w=f)?f=f.$to_s():C(ee("String"),w)||(f=I["$coerce_to!"](f,ee("Integer"),"to_int"));var A=this.match;return f<0&&(f+=A.length),f<0||f>=A.length||null==A[f]?n:A[f]},1),e(j,"$check",function(f){var c=this,w=(f=c.$anchor(f)).exec(c.working);return c.matched=null==w?n:w[0]},1),e(j,"$check_until",function(f){var c=this,w=c.prev_pos,A=c.pos,P=c.$scan_until(f);return P!==n&&(c.matched=P.substr(-1),c.working=c.string.substr(A)),c.prev_pos=w,c.pos=A,P},1),e(j,"$peek",function(f){return this.working.substring(0,f)},1),e(j,"$eos?",function(){return 0===this.working.length},0),e(j,"$exist?",function(f){var w=f.exec(this.working);return null==w?n:0==w.index?0:w.index+1},1),e(j,"$skip",function(f){var c=this,w=(f=c.$anchor(f)).exec(c.working);if(null==w)return c.match=[],c.matched=n;var A=w[0],P=A.length;return c.matched=A,c.match=w,c.prev_pos=c.pos,c.pos+=P,c.working=c.working.substring(P),P},1),e(j,"$skip_until",function(f){var w=this.$scan_until(f);return w===n?n:(this.matched=w.substr(-1),w.length)},1),e(j,"$get_byte",function(){var f=this,c=n;return f.pos<f.string.length?(f.prev_pos=f.pos,f.pos+=1,c=f.matched=f.working.substring(0,1),f.working=f.working.substring(1)):f.matched=n,c},0),e(j,"$match?",function(f){var c=this,w=(f=c.$anchor(f)).exec(c.working);return null==w?n:(c.prev_pos=c.pos,w[0].length)},1),e(j,"$pos=",function(f){var c=this;return f<0&&(f+=c.string.$length()),c.pos=f,c.working=c.string.slice(f)},1),e(j,"$matched_size",function(){return this.matched===n?n:this.matched.length},0),e(j,"$post_match",function(){var f=this;return f.matched===n?n:f.string.substr(f.pos)},0),e(j,"$pre_match",function(){var f=this;return f.matched===n?n:f.string.substr(0,f.prev_pos)},0),e(j,"$reset",function(){var f=this;return f.working=f.string,f.matched=n,f.pos=0},0),e(j,"$rest",function(){return this.working},0),e(j,"$rest?",function(){return 0!==this.working.length},0),e(j,"$rest_size",function(){return this.$rest().$size()},0),e(j,"$terminate",function(){var c,f=this;return f.match=n,c=[f.string.$length()],_(f,"pos=",B(c)),c[V(c.length,1)]},0),e(j,"$unscan",function(){var f=this;return f.pos=f.prev_pos,f.prev_pos=n,f.match=n,f},0),m(j,"bol?","beginning_of_line?"),m(j,"getch","get_byte"),j.$private(),e(j,"$anchor",function(f){var c=f.toString().match(/\/([^\/]+)$/);return c=c?c[1]:void 0,new RegExp("^(?:"+f.source+")",c)},1)},Opal.modules["bcdice/normalize"]=function(r){var _,E,V,K=[],n=r.nil,t=r.module,e=r.eqeqeq,k=r.def,C=r.eqeq;return _=K,V=[t(K[0],"BCDice")].concat(_),(E=t(V[0],"Normalize")).$module_function(),k(E,"$comparison_operator",function(Z){var j;return e(/<=|=</,j=Z)?"<=":e(/>=|=>/,j)?">=":e(/<>|!=|=!/,j)?"!=":e(/</,j)?"<":e(/>/,j)?">":e(/=/,j)?"==":n},1),k(E,"$target_number",function(Z){return C(Z,"?")?Z:Z.$to_i()},1)},Opal.modules["bcdice/command/lexer"]=function(r){var E,U,c,w,A,P,D,H,Z,K=r.top,n=[],t=r.nil,e=r.module,k=r.klass,C=r.const_set,I=r.hash2,_=r.truthy,B=r.send,V=r.def;return K.$require("strscan"),K.$require("bcdice/normalize"),E=n,U=Z=[e(n[0],"BCDice")].concat(E),c=H=[e(Z[0],"Command")].concat(U),A=[w=k(H[0],null,"Lexer")].concat(c),P=r.$r(A),(D=w.$$prototype).scanner=D.notations=t,C(A[0],"SYMBOLS",I(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),V(w,"$initialize",function(z,q){var v,d,o;return z=_(o=(d=(v=z)===t||null==v?t:B(v,"split",[" ",2]))===t||null==d?t:B(d,"first",[]))?o:"",this.scanner=P("StringScanner").$new(z),this.notations=B(q,"map",[],function($){return null==$&&($=t),_($["$is_a?"](P("String")))?P("Regexp").$new($):$},1)},2),V(w,"$next_token",function(){try{var z=this,q=t,v=t,u=t,o=t;return _(z.scanner["$eos?"]())?[!1,"$"]:(B(z.notations,"each",[],function s($){var h,l=null==s.$$s?this:s.$$s;if(null==l.scanner&&(l.scanner=t),null==$&&($=t),h=l.scanner.$scan($),!_(h))return t;r.ret(["NOTATION",h])},{$$arity:1,$$s:z}),_(q=z.scanner.$scan(/\d+/))?["NUMBER",q.$to_i()]:_(v=z.scanner.$scan(/[<>!=]+/))?(v=P("Normalize").$comparison_operator(v),[_(v)?"CMP_OP":"ILLEGAL",v]):(u=z.scanner.$getch().$upcase(),[_(o=P("SYMBOLS")["$[]"](u))?o:u.$to_sym(),u]))}catch(s){if(s===r.returner)return s.$v;throw s}},0),V(w,"$source",function(){return this.scanner.$string()},0)},Opal.modules["bcdice/command/parsed"]=function(r){var B,G,H,L,f,c,w,j,m,K=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.truthy,I=r.eqeqeq;return B=K,G=m=[t(K[0],"BCDice")].concat(B),H=j=[t(m[0],"Command")].concat(G),f=[L=e(j[0],null,"Parsed")].concat(H),c=r.$r(f),(w=L.$$prototype).question_target=w.critical=w.fumble=w.dollar=w.modify_number=w.target_number=w.prefix_number=w.command=w.suffix_number=w.cmp_op=n,L.$attr_accessor("command"),L.$attr_accessor("prefix_number"),L.$attr_accessor("suffix_number"),L.$attr_accessor("critical"),L.$attr_accessor("fumble"),L.$attr_accessor("dollar"),L.$attr_accessor("modify_number"),L.$attr_accessor("cmp_op"),L.$attr_accessor("target_number"),L.$attr_writer("question_target"),k(L,"$initialize",function(){var P=this;return P.prefix_number=n,P.suffix_number=n,P.critical=n,P.fumble=n,P.dollar=n,P.cmp_op=n,P.target_number=n,P.question_target=!1},0),k(L,"$question_target?",function(){return this.question_target},0),k(L,"$to_s",function(P){var u,D=this,b=n,z=n,q=n,v=n,d=n;return null==P&&(P="after_command"),b=C(D.critical)?"@"+D.critical:n,z=C(D.fumble)?"#"+D.fumble:n,q=C(D.dollar)?"$"+D.dollar:n,v=c("Format").$modifier(D.modify_number),d=C(D.question_target)?"?":D.target_number,I("after_command",u=P)?[D.prefix_number,D.command,D.suffix_number,b,z,q,v,D.cmp_op,d].$join():I("after_modify_number",u)?[D.prefix_number,D.command,D.suffix_number,v,b,z,q,D.cmp_op,d].$join():I("after_target_number",u)?[D.prefix_number,D.command,D.suffix_number,v,D.cmp_op,d,b,z,q].$join():n},-1)},Opal.modules["bcdice/command/parser"]=function(r){var c,D,u,l,h,x,T,g,M,Y,i,S,F,o,s,$,X,z,q,A,K=r.top,n=[],t=r.$r(n),e=r.nil,k=r.$$$,C=r.klass,I=r.module,_=r.hash2,B=r.send2,V=r.find_super,m=r.def,E=r.send,G=r.to_a,Z=r.rb_minus,j=r.eqeq,U=r.hash,ee=r.const_set,H=r.truthy,L=r.to_ary;return K.$require("racc/parser.rb"),K.$require("bcdice/arithmetic/node"),K.$require("bcdice/command/lexer"),K.$require("bcdice/command/parsed"),C(k(t("BCDice"),"Command"),k(t("Racc"),"Parser"),"Parser"),c=n,D=A=[I(n[0],"BCDice")].concat(c),z=[I(A[0],"Command")].concat(D),q=r.$r(z),u=z,s=[o=C(z[0],k(q("Racc"),"Parser"),"Parser")].concat(u),$=r.$r(s),(X=o.$$prototype).notations=X.lexer=X.modifier=X.suffix_number=X.prefix_number=X.need_suffix_number=X.need_prefix_number=X.critical=X.fumble=X.dollar=X.allowed_cmp_op=X.question_target=e,m(o,"$initialize",function W(y,J){var p,R,ne,$e,O=this;if(delete W.$$p,p=r.slice.call(arguments),null==(R=r.extract_kwargs(p)))R=_([],{});else if(!R.$$is_hash)throw r.ArgumentError.$new("expected kwargs");if(ne=p,!r.hasOwnProperty.call(R.$$smap,"round_type"))throw r.ArgumentError.$new("missing keyword: round_type");return $e=R.$$smap.round_type,B(O,V(O,"initialize",W,!1,!0),"initialize",[],null),O.notations=ne,O.round_type=$e,O.prefix_number=!1,O.suffix_number=!1,O.need_prefix_number=!1,O.need_suffix_number=!1,O.modifier=!0,O.critical=!1,O.fumble=!1,O.dollar=!1,O.allowed_cmp_op=[e,">=",">","<=","<","==","!="],O.question_target=!1},-2),m(o,"$disable_modifier",function(){return this.modifier=!1,this},0),m(o,"$enable_prefix_number",function(){return this.prefix_number=!0,this},0),m(o,"$enable_suffix_number",function(){return this.suffix_number=!0,this},0),m(o,"$has_prefix_number",function(){var y=this;return y.prefix_number=!0,y.need_prefix_number=!0,y},0),m(o,"$has_suffix_number",function(){var y=this;return y.suffix_number=!0,y.need_suffix_number=!0,y},0),m(o,"$enable_critical",function(){return this.critical=!0,this},0),m(o,"$enable_fumble",function(){return this.fumble=!0,this},0),m(o,"$enable_dollar",function(){return this.dollar=!0,this},0),m(o,"$restrict_cmp_op_to",function(y){var J,R=this;return J=r.slice.call(arguments),R.allowed_cmp_op=J,R},-1),m(o,"$enable_question_target",function(){return this.question_target=!0,this},0),m(o,"$parse",function(y){var J=this;try{return J.lexer=$("Lexer").$new(y,J.notations),J.$do_parse()}catch(p){if(!r.rescue(p,[$("ParseError"),$("ZeroDivisionError")]))throw p;try{return e}finally{r.pop_exception()}}},1),o.$private(),m(o,"$parsed",function(y,J,p,R){return E($("Parsed").$new(),"tap",[],function $e(te){var O,ue,se,le,oe,ce,ae=null==$e.$$s?this:$e.$$s,ie=e;return null==ae.round_type&&(ae.round_type=e),null==te&&(te=e),ie=[y["$[]"]("command")],E(te,"command=",G(ie)),Z(ie.length,1),ie=[(O=y["$[]"]("prefix"),O===e||null==O?e:E(O,"eval",[ae.round_type]))],E(te,"prefix_number=",G(ie)),Z(ie.length,1),ie=[(ue=y["$[]"]("suffix"),ue===e||null==ue?e:E(ue,"eval",[ae.round_type]))],E(te,"suffix_number=",G(ie)),Z(ie.length,1),ie=[(se=J["$[]"]("critical"),se===e||null==se?e:E(se,"eval",[ae.round_type]))],E(te,"critical=",G(ie)),Z(ie.length,1),ie=[(le=J["$[]"]("fumble"),le===e||null==le?e:E(le,"eval",[ae.round_type]))],E(te,"fumble=",G(ie)),Z(ie.length,1),ie=[(oe=J["$[]"]("dollar"),oe===e||null==oe?e:E(oe,"eval",[ae.round_type]))],E(te,"dollar=",G(ie)),Z(ie.length,1),ie=[p.$eval(ae.round_type)],E(te,"modify_number=",G(ie)),Z(ie.length,1),ie=[R["$[]"]("cmp_op")],E(te,"cmp_op=",G(ie)),Z(ie.length,1),j(R["$[]"]("target"),"?")?(E(te,"question_target=",G(ie=[!0])),Z(ie.length,1),E(te,"target_number=",G(ie=[0])),ie[Z(ie.length,1)]):(E(te,"question_target=",G(ie=[!1])),Z(ie.length,1),ie=[(ce=R["$[]"]("target"),ce===e||null==ce?e:E(ce,"eval",[ae.round_type]))],E(te,"target_number=",G(ie)),ie[Z(ie.length,1)])},{$$arity:1,$$s:this})},4),m(o,"$next_token",function(){return this.lexer.$next_token()},0),l=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,33,34,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,e,e,17,18,6,e,5,e,e,17,18,e,e,5,23,24,25,26,56,54,55,57],h=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,e,17,15,15,18,18,23,e,18,30,30,23,23,24,e,23,31,31,24,24,25,e,24,44,44,25,25,28,e,25,47,47,28,28,29,e,28,48,48,29,29,33,e,29,49,49,33,33,34,e,33,50,50,34,34,36,e,34,e,e,36,36,37,e,36,e,e,37,37,e,e,37,27,27,27,27,52,52,52,52],x=[-2,4,16,-3,-1,11,e,33,13,35,23,30,1,e,28,40,e,37,44,e,e,-2,e,51,58,65,0,106,72,79,47,54,e,86,93,e,100,107,e,e,e,e,e,e,63,e,e,68,75,82,89,e,120,e,e,e,e,e],T=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],g=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,e,e,21,47,48,40,51,52,49,50,44,46,3,e,e,e,13,e,e,e,e,e,e,e,32],M=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,e,e,4,8,8,5,7,7,8,8,9,5,6,e,e,e,6,e,e,e,e,e,e,e,6],Y=[e,6,13,3,9,-1,27,-15,-10,-1,-38],i=[e,e,e,e,e,e,19,16,15,e,e],S=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],F=U(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),ee(s[0],"Racc_arg",[l,h,T,x,g,M,i,Y,19,S,F,58,35,!0]),ee(s[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),ee(s[0],"Racc_debug_parser",!1),m(o,"$_reduce_1",function(y,J,p){var R;return H(this.modifier)||this.$raise($("ParseError")),R=L(y),this.$parsed(null==R[0]?e:R[0],null==R[1]?e:R[1],null==R[2]?e:R[2],null==R[3]?e:R[3])},3),m(o,"$_reduce_2",function(y,J,p){var R;return H(this.modifier)||this.$raise($("ParseError")),R=L(y),this.$parsed(null==R[0]?e:R[0],null==R[2]?e:R[2],null==R[1]?e:R[1],null==R[3]?e:R[3])},3),m(o,"$_reduce_3",function(y,J,p){var R,ue;return ue=null==(R=L(y))[2]?e:R[2],this.$parsed(null==R[0]?e:R[0],null==R[1]?e:R[1],k(k($("Arithmetic"),"Node"),"Number").$new(0),ue)},3),m(o,"$_reduce_4",function(y,J,p){var R=this;return H(R.prefix_number)&&H(R.suffix_number)||R.$raise($("ParseError")),_(["command","prefix","suffix"],{command:y["$[]"](1),prefix:y["$[]"](0),suffix:y["$[]"](2)})},3),m(o,"$_reduce_5",function(y,J,p){var R=this;return H(R.prefix_number)||R.$raise($("ParseError")),H(R.need_suffix_number)&&R.$raise($("ParseError")),_(["command","prefix"],{command:y["$[]"](1),prefix:y["$[]"](0)})},3),m(o,"$_reduce_6",function(y,J,p){var R=this;return H(R.suffix_number)||R.$raise($("ParseError")),H(R.need_prefix_number)&&R.$raise($("ParseError")),_(["command","suffix"],{command:y["$[]"](0),suffix:y["$[]"](1)})},3),m(o,"$_reduce_7",function(y,J,p){var R=this;return(H(R.need_prefix_number)||H(R.need_suffix_number))&&R.$raise($("ParseError")),_(["command"],{command:y["$[]"](0)})},3),m(o,"$_reduce_8",function(y,J,p){return _([],{})},3),m(o,"$_reduce_9",function(y,J,p){var R,ue,se,te=e;return te=null==(R=L(y))[0]?e:R[0],ue=null==R[2]?e:R[2],H(this.critical)&&H(te["$[]"]("critical")["$nil?"]())||this.$raise($("ParseError")),E(te,"[]=",G(se=["critical",ue])),Z(se.length,1),te},3),m(o,"$_reduce_10",function(y,J,p){var R,ue,se,te=e;return te=null==(R=L(y))[0]?e:R[0],ue=null==R[2]?e:R[2],H(this.fumble)&&H(te["$[]"]("fumble")["$nil?"]())||this.$raise($("ParseError")),E(te,"[]=",G(se=["fumble",ue])),Z(se.length,1),te},3),m(o,"$_reduce_11",function(y,J,p){var R,ue,se,te=e;return te=null==(R=L(y))[0]?e:R[0],ue=null==R[2]?e:R[2],H(this.dollar)&&H(te["$[]"]("dollar")["$nil?"]())||this.$raise($("ParseError")),E(te,"[]=",G(se=["dollar",ue])),Z(se.length,1),te},3),m(o,"$_reduce_12",function(y,J,p){return y["$[]"](1)},3),m(o,"$_reduce_13",function(y,J,p){return k(k($("Arithmetic"),"Node"),"Negative").$new(y["$[]"](1))},3),m(o,"$_reduce_14",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"+",y["$[]"](2))},3),m(o,"$_reduce_15",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"-",y["$[]"](2))},3),m(o,"$_reduce_16",function(y,J,p){return H(this.allowed_cmp_op["$include?"](e))||this.$raise($("ParseError")),_([],{})},3),m(o,"$_reduce_17",function(y,J,p){var R,te,O;return O=null==(R=L(y))[1]?e:R[1],H(this.allowed_cmp_op["$include?"](te=null==R[0]?e:R[0]))||this.$raise($("ParseError")),_(["cmp_op","target"],{cmp_op:te,target:O})},3),m(o,"$_reduce_18",function(y,J,p){var ne,R=this;return ne=y["$[]"](0),H(R.question_target)||R.$raise($("ParseError")),H(R.allowed_cmp_op["$include?"](ne))||R.$raise($("ParseError")),_(["cmp_op","target"],{cmp_op:ne,target:"?"})},3),m(o,"$_reduce_19",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"+",y["$[]"](2))},3),m(o,"$_reduce_20",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"-",y["$[]"](2))},3),m(o,"$_reduce_22",function(y,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"*",y["$[]"](2))},3),m(o,"$_reduce_23",function(y,J,p){return y["$[]"](3).$new(y["$[]"](0),y["$[]"](2))},3),m(o,"$_reduce_25",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")},3),m(o,"$_reduce_26",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithCeil")},3),m(o,"$_reduce_27",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithCeil")},3),m(o,"$_reduce_28",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithRound")},3),m(o,"$_reduce_29",function(y,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithFloor")},3),m(o,"$_reduce_30",function(y,J,p){return y["$[]"](1)},3),m(o,"$_reduce_31",function(y,J,p){return k(k($("Arithmetic"),"Node"),"Negative").$new(y["$[]"](1))},3),m(o,"$_reduce_33",function(y,J,p){return y["$[]"](1)},3),m(o,"$_reduce_34",function(y,J,p){return k(k($("Arithmetic"),"Node"),"Number").$new(y["$[]"](0))},3),m(o,"$_reduce_none",function(y,J,p){return y["$[]"](0)},3)},Opal.modules["bcdice/deprecated/checker"]=function(r){var B,G,ee,H,L,f,j,m,K=[],n=r.nil,t=r.module,e=r.send,k=r.eqeqeq,C=r.truthy,I=r.def;return B=K,G=m=[t(K[0],"BCDice")].concat(B),ee=j=[t(m[0],"Deprecated")].concat(G),L=[H=t(j[0],"Checker")].concat(ee),f=r.$r(L),H.$private(),I(H,"$check_result_legacy",function(w,A,P,D){var v,b=this,z=n,q=n,d=n,u=n;return z=e(A,"map",[],"sides".$to_proc()),v=(q=e(A,"map",[],"value".$to_proc())).$sum(),d=k([100],u=z)?b.$check_1D100(w,v,P,D):k([20],u)?b.$check_1D20(w,v,P,D):k([6,6],u)?b.$check_2D6(w,v,q,P,D):n,(C(d["$nil?"]())||C(d["$empty?"]()))&&(d=k([10],u=z.$uniq())?b.$check_nD10(w,v,q,P,D):k([6],u)?b.$check_nD6(w,v,q,P,D):n,C(d["$nil?"]())||C(d["$empty?"]()))?n:f("Result").$new(d.$delete_prefix(" \uff1e "))},4),I(H,"$check_1D100",function(w,A,P,D){return n},4),I(H,"$check_1D20",function(w,A,P,D){return n},4),I(H,"$check_nD10",function(w,A,P,D,b){return n},5),I(H,"$check_2D6",function(w,A,P,D,b){return n},5),I(H,"$check_nD6",function(w,A,P,D,b){return n},5)},Opal.modules["bcdice/base"]=function(r){var A,q,s,l,h,v,d,u,o,D,K=r.top,n=[],t=r.$r(n),e=r.nil,k=r.$$$,C=r.module,I=r.klass,_=r.truthy,B=r.def,V=r.regexp,m=r.rb_plus,E=r.send,G=r.to_a,Z=r.rb_minus,j=r.eqeqeq,U=r.eqeq,ee=r.range,H=r.rb_divide,L=r.rb_times,f=r.rb_ge,c=e;return K.$require("i18n"),K.$require("i18n/backend/fallbacks"),K.$require("bcdice/randomizer"),K.$require("bcdice/dice_table"),K.$require("bcdice/enum"),K.$require("bcdice/translate"),K.$require("bcdice/result"),K.$require("bcdice/command/parser"),K.$require("bcdice/deprecated/checker"),A=n,q=D=[C(n[0],"BCDice")].concat(A),d=[v=I(D[0],null,"Base")].concat(q),u=r.$r(d),(o=v.$$prototype).sort_add_dice=o.sort_barabara_dice=o.enabled_d9=o.raw_input=o.randomizer=o.enabled_upcase_input=o.debug=e,l=[s=r.get_singleton_class(v)].concat(d),h=r.$r(l),s.$attr_reader("prefixes"),B(s,"$register_prefix",function(T){var M,Y=this,i=e;return null==Y.prefixes&&(Y.prefixes=e),M=r.slice.call(arguments),Y.prefixes=_(i=Y.prefixes)?i:[],Y.prefixes.$concat(M.$flatten())},-1),B(s,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())},0),B(s,"$prefixes_pattern",function(){var T=this,g=e;return null==T.prefixes_pattern&&(T.prefixes_pattern=e),null==T.prefixes&&(T.prefixes=e),T.prefixes_pattern=_(g=T.prefixes_pattern)?g:e,_(T.prefixes_pattern)?T.prefixes_pattern:(T.prefixes=_(g=T.prefixes)?g:[],T.prefixes.$freeze(),T.prefixes_pattern=(_(T.prefixes["$empty?"]())?/(?!)/:V(["^(S)?(",T.prefixes.$join("|"),")"],"i")).$freeze())},0),B(s,"$command_pattern",function(){var T=this,g=e,M=e;return null==T.command_pattern&&(T.command_pattern=e),null==T.prefixes&&(T.prefixes=e),T.command_pattern=_(g=T.command_pattern)?g:e,_(T.command_pattern)?T.command_pattern:(T.prefixes=_(g=T.prefixes)?g:[],T.prefixes.$freeze(),M=m(E(k(h("CommonCommand"),"COMMANDS"),"map",[],function(i){return null==i&&(i=e),k(i,"PREFIX_PATTERN").$source()},1),T.prefixes),T.command_pattern=V(["^S?(",M.$join("|"),")"],"i").$freeze())},0),B(s,"$eval",function(T){return this.$new(T).$eval()},1),v.$include(u("Translate")),v.$include(k(u("Deprecated"),"Checker")),B(v,"$initialize",function($){var l=this;return l.raw_input=$,l.sort_add_dice=!1,l.sort_barabara_dice=!1,l.d66_sort_type=k(u("D66SortType"),"NO_SORT"),l.enabled_d9=!1,l.round_type=k(u("RoundType"),"FLOOR"),l.sides_implicit_d=6,l.upper_dice_reroll_threshold=e,l.reroll_dice_reroll_threshold=e,l.default_cmp_op=e,l.default_target_number=e,l.enabled_upcase_input=!0,l.locale="ja_jp",l.randomizer=k(u("BCDice"),"Randomizer").$new(),l.debug=!1},1),v.$attr_accessor("randomizer"),v.$attr_reader("d66_sort_type"),v.$attr_reader("round_type"),v.$attr_reader("sides_implicit_d"),v.$attr_reader("upper_dice_reroll_threshold"),v.$attr_reader("reroll_dice_reroll_threshold"),v.$attr_reader("default_cmp_op"),v.$attr_reader("default_target_number"),B(v,"$sort_add_dice?",function(){return this.sort_add_dice},0),B(v,"$sort_barabara_dice?",function(){return this.sort_barabara_dice},0),B(v,"$enabled_d9?",function(){return this.enabled_d9},0),B(v,"$enable_debug",function(){return this.debug=!0},0),B(v,"$eval",function(){var l,h,x,$=this,T=e;return l=k(u("BCDice"),"Preprocessor").$process($.raw_input,$),h=_(x=$.$dice_command(l))?x:$.$eval_common_command($.raw_input),_(h)?(T=[$.randomizer.$rand_results()],E(h,"rands=",G(T)),Z(T.length,1),T=[$.randomizer.$detailed_rand_results()],E(h,"detailed_rands=",G(T)),Z(T.length,1),h):e},0),B(v,"$change_text",function($){return $},1),B(v,"$check_result",function($,l,h,x){var T=this,g=e,M=e,Y=e,i=e,S=e;return g=T.$check_result_legacy($,l,h,x),_(g)?g:(M=E(l,"map",[],"sides".$to_proc()),i=(Y=E(l,"map",[],"value".$to_proc())).$sum(),g=j([100],S=M)?T.$result_1d100($,i,h,x):j([20],S)?T.$result_1d20($,i,h,x):j([6,6],S)?T.$result_2d6($,i,Y,h,x):e,U(g,u("Result").$nothing())?e:_(g)?g:(g=j([10],S=M.$uniq())?T.$result_nd10($,i,Y,h,x):j([6],S)?T.$result_nd6($,i,Y,h,x):e,U(g,u("Result").$nothing())?e:_(g)?g:T.$result_ndx($,h,x)))},4),B(v,"$grich_text",function($,l,h){return e},3),v.$private(),B(v,"$eval_common_command",function($){try{return $=this.$change_text($),E(k(u("CommonCommand"),"COMMANDS"),"each",[],function h(x){var g,T=null==h.$$s?this:h.$$s;if(null==T.randomizer&&(T.randomizer=e),null==x&&(x=e),g=x.$eval($,T,T.randomizer),!_(g))return e;r.ret(g)},{$$arity:1,$$s:this}),e}catch(h){if(h===r.returner)return h.$v;throw h}},1),B(v,"$dice_command",function($){var l=this,h=e,x=e,T=e,g=e,M=e;return _(l.enabled_upcase_input)&&($=$.$upcase()),h=l.$class().$prefixes_pattern().$match($),_(h)?(x=h["$[]"](1)["$nil?"]()["$!"](),_(x)&&($=$["$[]"](ee(1,-1,!1))),T=l.$eval_game_system_specific_command($),_(T["$is_a?"](u("Result")))?(g=[_(M=T["$secret?"]())?M:x],E(T,"secret=",G(g)),Z(g.length,1),T):_(T["$nil?"]())||_(T["$empty?"]())||U(T,"1")?e:E(u("Result").$new(),"tap",[],function(i){return null==i&&(i=e),g=[T.$to_s()],E(i,"text=",G(g)),Z(g.length,1),E(i,"secret=",G(g=[x])),g[Z(g.length,1)]},1)):e},1),B(v,"$eval_game_system_specific_command",function($){return e},1),B(v,"$result_ndx",function($,l,h){return _(h["$is_a?"](u("String")))?e:_($.$send(l,h))?u("Result").$success(this.$translate("success")):u("Result").$failure(this.$translate("failure"))},3),B(v,"$result_1d100",function($,l,h,x){return e},4),B(v,"$result_1d20",function($,l,h,x){return e},4),B(v,"$result_nd10",function($,l,h,x,T){return e},5),B(v,"$result_2d6",function($,l,h,x,T){return e},5),B(v,"$result_nd6",function($,l,h,x,T){return e},5),B(v,"$get_table_by_2d6",function($){return this.$get_table_by_nD6($,2)},1),B(v,"$get_table_by_1d6",function($){return this.$get_table_by_nD6($,1)},1),B(v,"$get_table_by_nD6",function($,l){return this.$get_table_by_nDx($,l,6)},2),B(v,"$get_table_by_nDx",function($,l,h){var T,g=e;return T=this.randomizer.$roll_sum(l,h),g=this.$get_table_value($["$[]"](Z(T,l))),_(g["$nil?"]())?["1",0]:[g,T]},3),B(v,"$get_table_by_1d3",function($){var x,T,l=this,g=e;return l.$debug("get_table_by_1d3"),x=l.randomizer.$roll_sum(1,6),l.$debug("num",x),T=H(Z(x,1),2).$to_i(),l.$debug("index",T),g=$["$[]"](T),_(g["$nil?"]())?["1",0]:[g,x]},1),B(v,"$get_table_by_d66_swap",function($){var h;return h=this.randomizer.$roll_d66(k(u("D66SortType"),"ASC")),[this.$get_table_by_number(h,$),h]},1),B(v,"$get_table_by_d66",function($){var h,x,T,M,g=e;return h=this.randomizer.$roll_once(6),x=this.randomizer.$roll_once(6),T=m(L(Z(h,1),6),Z(x,1)),g=$["$[]"](T),M=""+h+x,_(g["$nil?"]())?["1",M]:[g,M]},1),B(v,"$get_table_by_number",function($,l,h){try{return null==h&&(h="1"),E(l,"each",[],function T(g){var Y,M=null==T.$$s?this:T.$$s;if(null==g&&(g=e),Y=g["$[]"](0),!_(f(Y,$)))return e;r.ret(M.$get_table_value(g["$[]"](1)))},{$$arity:1,$$s:this}),this.$get_table_value(h)}catch(T){if(T===r.returner)return T.$v;throw T}},-3),B(v,"$get_table_value",function($){return _($["$is_a?"](u("Proc")))?$.$call():$},1),B(v,"$roll_tables",function($,l){var x=e;return x=l["$[]"]($),_(x)?x.$roll(this.randomizer).$to_s():e},2),B(v,"$debug",function($,l){var x,T=this,g=e,M=e;return x=r.slice.call(arguments,1),_(T.debug)?(g=_($["$is_a?"](u("String")))?$:$.$inspect(),_(x["$empty?"]())?T.$warn(g):(M=E(x,"map",[],function(i){return null==i&&(i=e),_(i["$is_a?"](u("String")))?'"'+i+'"':i.$inspect()},1),T.$warn(g+": "+M.$join(", ")))):e},-2),k(k(t("I18n"),"Backend"),"Simple").$include(k(k(t("I18n"),"Backend"),"Fallbacks")),t("I18n").$load_path()["$<<"](t("Dir")["$[]"](t("File").$join("bcdice","../../i18n/**/*.yml"))),c=["ja_jp"],E(t("I18n"),"default_locale=",G(c)),Z(c.length,1),c=[["ja_jp"]],E(t("I18n").$fallbacks(),"defaults=",G(c)),c[Z(c.length,1)]},Opal.modules["bcdice/arithmetic_evaluator"]=function(r){var B,G,U,H,L,Z,j,m,K=[],n=r.nil,t=r.$$$,e=r.module,k=r.hash2,C=r.truthy,I=r.def;return B=K,G=m=[e(K[0],"BCDice")].concat(B),j=[Z=e(m[0],"ArithmeticEvaluator")].concat(G),H=[U=r.get_singleton_class(Z)].concat(j),L=r.$r(H),I(U,"$eval",function(c,w){var A,P=n;if(null==w)w=k([],{});else if(!w.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(A=w.$$smap.round_type)&&(A=t(L("RoundType"),"FLOOR")),C(c)&&C(P=L("Arithmetic").$eval(c,A))?P:0},-2)},Opal.queue(function(r){var b,d,$,l,h,S,a,x,T,g,M,o,s,q,K=r.top,n=[],t=r.nil,e=r.$$$,k=r.module,C=r.klass,I=r.const_set,_=r.send2,B=r.find_super,V=r.def,m=r.truthy,E=r.hash2,G=r.rb_plus,Z=r.send,j=r.to_a,U=r.rb_minus,ee=r.rb_ge,H=r.eqeqeq,L=r.rb_divide,f=r.rb_times,c=r.eqeq,w=r.neqeq,A=r.rb_le,P=r.rb_lt;return K.$require("bcdice/base"),K.$require("bcdice/arithmetic_evaluator"),b=n,d=q=[k(n[0],"BCDice")].concat(b),o=[k(q[0],"GameSystem")].concat(d),s=r.$r(o),$=o[0],l=s("Base"),h=o,T=[x=C($,l,"LogHorizon")].concat(h),g=r.$r(T),(M=x.$$prototype).randomizer=M.locale=t,I(T[0],"ID","LogHorizon"),I(T[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),I(T[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),I(T[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),x.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),V(x,"$initialize",function Y(i){var a=this;return delete Y.$$p,_(a,B(a,"initialize",Y,!1,!0),"initialize",[i],null),a.d66_sort_type=e(g("D66SortType"),"NO_SORT")},1),V(x,"$eval_game_system_specific_command",function(i){var a,N,F,Q,re,X,W,y,J,p,R,S=this;return m(a=m(N=m(F=m(Q=m(re=m(X=m(W=m(y=m(J=m(p=m(R=S.$getCheckRollDiceCommandResult(i))?R:S.$roll_consumption(i))?p:S.$roll_consumption_table(i))?J:S.$roll_treasure(i))?y:S.$roll_treasure_table(i))?W:S.$roll_treasure_table_b2(i))?X:S.$getInventionAttributeTextDiceCommandResult(i))?re:S.$getTroubleInAkibaStreetDiceCommandResult(i))?Q:S.$getAbandonedChildDiceCommandResult(i))?F:S.$getMusicalInstrumentTypeDiceCommandResult(i))?N:S.$roll_eastal_exploration_table(i))?a:S.$roll_tables(i,e(S.$class(),"TABLES"))},1),x.$private(),V(x,"$getCheckRollDiceCommandResult",function(i){var S=this,N=t,F=t,Q=t,re=t,X=t,W=t,J=t;return N=e(g("Command"),"Parser").$new(/\d+LH/,E(["round_type"],{round_type:S.$round_type()})).$restrict_cmp_op_to(t,">=").$parse(i),m(N)?(F=N.$command().$to_i(),re=(Q=S.randomizer.$roll_barabara(F,6)).$sum(),X=G(re,N.$modify_number()),W=S.$result_text(F,Q,X,N),J=[["("+N+")",re+"["+Q.$join(",")+"]"+g("Format").$modifier(N.$modify_number()),X,W.$text()].$compact().$join(" \uff1e ")],Z(W,"text=",j(J)),U(J.length,1),W):t},1),V(x,"$result_text",function(i,S,a,N){var F=this;return m(ee(S.$count(6),2))?g("Result").$critical(F.$translate("LogHorizon.LH.critical")):m(ee(S.$count(1),i))?g("Result").$fumble(F.$translate("LogHorizon.LH.fumble")):m(N.$cmp_op()["$nil?"]())?g("Result").$new():m(ee(a,N.$target_number()))?g("Result").$success(F.$translate("success")):g("Result").$failure(F.$translate("failure"))},4),V(x,"$getValue",function(i,S){return m(i["$nil?"]())||m(i["$empty?"]())?S:g("ArithmeticEvaluator").$eval(i)},2),V(x,"$roll_consumption",function(i){var a=t,N=t,F=t,Q=t,re=t;return a=/^CT\d*([+\-\d]+)?$/.$match(i),m(a)?(N=g("ArithmeticEvaluator").$eval(a["$[]"](1)),F=g("Format").$modifier(N),Q=this.randomizer.$roll_once(6),m(F["$empty?"]())||(re=G(Q.$to_s(),F)),["(1D6"+F+")",re,G(Q,N)].$compact().$join(" \uff1e ")):t},1),V(x,"$roll_consumption_table",function(i){var a=t,N=t,F=t,Q=t;return a=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(i),m(a)?(N=this.$construct_consumption_table(a["$[]"](1)),F=a["$[]"](2).$to_i(),Q=g("ArithmeticEvaluator").$eval(a["$[]"](3)),m(a["$[]"](4))&&N.$fix_dice_value(a["$[]"](4).$to_i()),N.$roll(F,Q,this.randomizer)):t},1),V(x,"$construct_consumption_table",function(i){var N,S=this,a=t;return a=H("P",N=i)?S.$translate("LogHorizon.CT.PCT"):H("E",N)?S.$translate("LogHorizon.CT.ECT"):H("G",N)?S.$translate("LogHorizon.CT.GCT"):H("C",N)?S.$translate("LogHorizon.CT.CCT"):H("ES",N)?S.$translate("LogHorizon.CT.ESCT"):H("CS",N)?S.$translate("LogHorizon.CT.CSCT"):t,g("ConsumptionTable").$new(a["$[]"]("name"),a["$[]"]("items"))},1),(a=(S=C(T[0],null,"ConsumptionTable")).$$prototype).tables=a.dice_value=a.name=t,V(S,"$initialize",function(F,Q){return this.name=F,this.tables=Q,this.dice_value=t},2),V(S,"$fix_dice_value",function(F){return this.dice_value=F},1),V(S,"$roll",function(F,Q,re){var W,J,R,X=this,y=t,p=t;return W=L(U(F,1),5).$clamp(0,U(X.tables.$size(),1)),y=X.tables["$[]"](W),X.dice_value=m(J=X.dice_value)?J:re.$roll_once(6),p=G(X.dice_value,Q),R=y["$[]"](p.$clamp(0,7)),X.name+"("+p+"["+X.dice_value+"]) \uff1e "+R},3),V(x,"$roll_treasure",function(i){var a=t,N=t,F=t,Q=t,re=t,X=t;return a=/^TRS(\d+)?([+\-\d]+)?$/.$match(i),m(a)?(N=a["$[]"](1).$to_i(),F=g("ArithmeticEvaluator").$eval(a["$[]"](2)),re=(Q=this.randomizer.$roll_barabara(2,6)).$sum(),X=G(G(re,f(N,5)),F),"(2D6+"+N+"*5"+g("Format").$modifier(F)+") \uff1e "+re+"["+Q.$join(",")+"]"+g("Format").$modifier(G(f(N,5),F))+" \uff1e "+X):t},1),V(x,"$roll_treasure_table",function(i){var S=this,a=t,N=t,F=t,Q=t,re=t;return a=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(i),m(a)?(N=a["$[]"](1),F=S.$construct_treasure_table(N),Q=a["$[]"](2).$to_i(),re=g("ArithmeticEvaluator").$eval(a["$[]"](3)),c(Q,0)&&c(re,0)?S.$translate("LogHorizon.TRS.need_cr",E(["command"],{command:i})):(m(a["$[]"](4))&&F.$fix_dice_value(7),F.$roll(Q,re,S.randomizer))):t},1),V(x,"$construct_treasure_table",function(i){return c(i,"HTRS")?g("HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):g("TreasureTable").$from_i18n("LogHorizon.TRS."+i,this.locale)},1),V(x,"$roll_treasure_table_b2",function(i){var S=this,a=t,N=t,F=t,Q=t,re=t;return a=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(i),m(a)?(N=a["$[]"](1),F=g("ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+N,S.locale),Q=a["$[]"](2).$to_i(),re=g("ArithmeticEvaluator").$eval(a["$[]"](3)),c(Q,0)&&c(re,0)?S.$translate("LogHorizon.TRS.need_cr",E(["command"],{command:i})):(m(a["$[]"](4))&&F.$fix_dice_value(7),F.$roll(Q,re,S.randomizer))):t},1),function(Y,i,S){var re,W,y,a=C(Y,null,"TreasureTable"),N=[a].concat(S),F=r.$r(N),Q=a.$$prototype;Q.dice_list=Q.name=Q.items=t,a.$include(F("Translate")),W=[re=r.get_singleton_class(a)].concat(N),y=r.$r(W),V(re,"$from_i18n",function(p,R){var $e=t;return $e=y("I18n").$translate(p,E(["raise","locale"],{raise:!0,locale:R})),this.$new($e["$[]"]("name"),$e["$[]"]("items"),R)},2),V(a,"$initialize",function(X,W,y){var J=this;return J.name=X,J.items=W,J.locale=y,J.dice_list=t},3),V(a,"$fix_dice_value",function(X){return this.dice_list=[X]},1),V(a,"$roll",function(X,W,y){var J,p=this,R=t,ne=t,$e=t,te=t;return c(X,0)&&c(W,0)?t:(R=c(X,0)&&w(W,0)?W:(p.dice_list=m(ne=p.dice_list)?ne:y.$roll_barabara(2,6),G(G(p.dice_list.$sum(),f(5,X)),W)),$e=p.$pick_item(R),m(p.dice_list)&&(te="["+((J=p.dice_list)===t||null==J?t:Z(J,"join",[","]))+"]"),p.name+"("+R+te+") \uff1e "+$e)},3),a.$private(),V(a,"$pick_item",function(X){var W=this;return m(A(X,6))?W.$translate("LogHorizon.TRS.below_lower_limit",E(["value"],{value:6})):m(A(X,62))?W.items["$[]"](X.$to_s()):m(A(X,72))?W.items["$[]"](U(X,10).$to_s())+"&80G":m(A(X,82))?W.items["$[]"](U(X,20).$to_s())+"&160G":m(A(X,87))?W.items["$[]"](U(X,30).$to_s())+"&260G":W.$translate("LogHorizon.TRS.exceed_upper_limit",E(["value"],{value:88}))},1)}(T[0],0,T),function(Y,i){var S=C(Y,i,"HeroineTreasureTable");S.$$prototype.items=t,V(S,"$pick_item",function(F){var Q=this;return m(A(F,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",E(["value"],{value:6})):m(A(F,53))?Q.items["$[]"](F.$to_s()):Q.$translate("LogHorizon.TRS.exceed_upper_limit",E(["value"],{value:54}))},1)}(T[0],g("TreasureTable")),function(Y,i){var S=C(Y,i,"ExpansionTreasureTable");S.$$prototype.items=t,V(S,"$pick_item",function(F){var Q=this;return m(A(F,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",E(["value"],{value:6})):m(A(F,162))?Q.items["$[]"](F.$to_s()):m(A(F,172))?Q.items["$[]"](U(F,10).$to_s())+"&200G":m(A(F,182))?Q.items["$[]"](U(F,20).$to_s())+"&400G":m(A(F,187))?Q.items["$[]"](U(F,30).$to_s())+"&600G":Q.$translate("LogHorizon.TRS.exceed_upper_limit",E(["value"],{value:188}))},1)}(T[0],g("TreasureTable")),V(x,"$getInventionAttributeTextDiceCommandResult",function(i){var a=t,N=t,F=t,Q=t,re=t;return m(i["$=~"](/IAT([ABMDLT]*)/))?(a=this.$translate("LogHorizon.IAT.name"),N=m(g("Regexp").$last_match(1))&&w(g("Regexp").$last_match(1),"")?g("Regexp").$last_match(1):"MDLT",F=N.$length()["$=="](1),Q=[],re=[],Z(N.$split(/(?:)/),"each",[],function X(W){var R,y=null==X.$$s?this:X.$$s,J=t,p=t,ne=t;return null==y.randomizer&&(y.randomizer=t),null==W&&(W=t),J=y.randomizer.$roll_once(6),re["$<<"](J.$to_s()),ne=(p=H("A",R=W)||H("M",R)?y.$translate("LogHorizon.IAT.A"):H("B",R)||H("D",R)?y.$translate("LogHorizon.IAT.B"):H("L",R)?y.$translate("LogHorizon.IAT.L"):H("T",R)?y.$translate("LogHorizon.IAT.T"):t)["$[]"]("items")["$[]"](U(J,1)),m(F)&&(ne=p["$[]"]("name")+"\uff1a"+ne),Q.$push(ne)},{$$arity:1,$$s:this}),a+"(["+re.$join(",")+"]) \uff1e "+Q.$join(" ")):t},1),V(x,"$getTroubleInAkibaStreetDiceCommandResult",function(i){return c(i,"TIAS")?this.$roll_random_table("LogHorizon.TIAS"):t},1),V(x,"$getAbandonedChildDiceCommandResult",function(i){return c(i,"ABDC")?this.$roll_random_table("LogHorizon.ABDC"):t},1),V(x,"$roll_random_table",function(i){var a=t,N=t,F=t,Q=t;return a=this.$translate(i),N=a["$[]"]("tables"),F=this.randomizer.$roll_barabara(N.$size(),6),Q=Z(F.$map(),"with_index",[],function(X,W){return null==X&&(X=t),null==W&&(W=t),N["$[]"](W)["$[]"](U(X,1))},2),a["$[]"]("name")+"(["+F.$join(",")+"]) \uff1e "+Q.$join(" ")},1),V(x,"$getMusicalInstrumentTypeDiceCommandResult",function(i){var S=this,a=t,N=t,F=t,Q=t,re=t,X=t,W=t;return!m(i["$=~"](/MII(\d?)/))||(a=(m(N=g("Regexp").$last_match(1))?g("Regexp").$last_match(1)["$!="](""):N)["$!"](),F=m(a)?S.randomizer.$roll_once(6):g("Regexp").$last_match(1).$to_i(),m(P(F,1))||P(6,F))?t:(Q=S.$translate("LogHorizon.MII.name"),re=S.$translate("LogHorizon.MII.type_list")["$[]"](U(F,1)),X=S.randomizer.$roll_once(6),W=S.$translate("LogHorizon.MII.items")["$[]"](U(F,1))["$[]"](U(X,1)),G(G(Q.$to_s(),m(a)?"("+F+")":"")," \uff1e "+re+"("+X+") \uff1e "+W))},1),V(x,"$roll_eastal_exploration_table",function(i){var S,a=this,N=t,F=t,Q=t,re=t,X=t,W=t,y=t,J=t,R=t;return N=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(i),!m(N)||m(N["$[]"](1)["$nil?"]())&&m(N["$[]"](2)["$nil?"]())&&m(N["$[]"](3)["$nil?"]())?t:(F=N["$[]"](1).$to_i(),Q=g("ArithmeticEvaluator").$eval(N["$[]"](2)),re=(S=N["$[]"](3))===t||null==S?t:Z(S,"to_i",[]),X=m(re)?[re]:c(F,0)?[]:a.randomizer.$roll_barabara(2,6),m(X["$empty?"]())||(W="["+X.$join(",")+"]"),y=G(G(X.$sum(),f(F,5)),Q).$clamp(7,162),J=a.$translate("LogHorizon.ESTL.name"),R=a.$translate("LogHorizon.ESTL.items")["$[]"](y.$to_s()).$chomp(),J+"("+y+W+")\n"+R)},1),function(Y,i){var S=[Y].concat(i),a=r.$r(S);Y.$private(),V(Y,"$translate_tables",function(F){return E(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",F),KOYU:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",F),MGR1:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",F),MGR2:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",F),MGR3:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",F),HLOC:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",F),PCNM:e(a("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",F)})},1)}(r.get_singleton_class(x),T),I(T[0],"TABLES",x.$translate_tables("ja_jp")),x.$register_prefix(g("TABLES").$keys())})}}]);