(self.webpackChunkudonarium_lily=self.webpackChunkudonarium_lily||[]).push([[7102],{7102:function(ee,te,O){O(4656),Opal.modules["bcdice/dice_table/table"]=function(e){var $,s,C,w,B,q,A,m,S,u,G,h=[],z=e.nil,v=e.$$,t=e.module,T=e.klass,n=e.hash2,R=e.truthy;return $=h,s=G=[t(h[0],"BCDice")].concat($),C=u=[t(G[0],"DiceTable")].concat(s),m=T(u[0],null,"Table"),S=[m].concat(C),m.$$prototype.times=m.$$prototype.sides=m.$$prototype.name=m.$$prototype.items=z,e.defs(m,"$from_i18n",w=function(i,a){var c=z;return c=v(S,"I18n").$t(i,n(["locale"],{locale:a})),this.$new(c["$[]"]("name"),c["$[]"]("type"),c["$[]"]("items"))},w.$$arity=2),e.def(m,"$initialize",B=function(i,a,b){var c=this,y=z;return c.name=i,c.items=b.$freeze(),y=/(\d+)D(\d+)/i.$match(a),R(y)||c.$raise(v(S,"ArgumentError"),"Unexpected table type: "+a),c.times=y["$[]"](1).$to_i(),c.sides=y["$[]"](2).$to_i()},B.$$arity=3),e.def(m,"$roll",q=function(i){var b,a=this;return b=i.$roll_sum(a.times,a.sides),a.$choice(b)},q.$$arity=1),void e.def(m,"$choice",A=function(i){var b,a=this;return b=function(d,$){return"number"==typeof d&&"number"==typeof $?d-$:d["$-"]($)}(i,a.times),v(S,"RollResult").$new(a.name,i,a.items["$[]"](b))},A.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var $,s,C,w,B,m,S,u,G,z=[],D=e.nil,t=e.$$,T=e.module,n=e.klass,R=e.send;return $=z,s=G=[T(z[0],"BCDice")].concat($),C=u=[T(G[0],"DiceTable")].concat(s),m=n(u[0],null,"D66RangeTable"),S=[m].concat(C),m.$$prototype.items=m.$$prototype.name=D,e.def(m,"$initialize",w=function(A,f){return this.name=A,this.items=f.$freeze()},w.$$arity=2),void e.def(m,"$roll",B=function(A){var f,a,b,c,d,i=this,y=D;return a=A.$roll_once(6),b=A.$roll_once(6),c=function(d,$){return"number"==typeof d&&"number"==typeof $?d+$:d["$+"]($)}("number"==typeof(d=a)?10*d:d["$*"](10),b),y=R(i.items,"find",[],((f=function(r){return null==r&&(r=D),r["$[]"](0)["$include?"](c)}).$$s=i,f.$$arity=1,f)),t(S,"RollResult").$new(i.name,c,y["$[]"](1))},B.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function h($,o){return"number"==typeof $&&"number"==typeof o?$-o:$["$-"](o)}var o,l,m,B,q,A,S,w,x,k,D=[],v=e.nil,T=e.$$,n=e.module,R=e.klass,d=e.hash2;return o=D,l=k=[n(D[0],"BCDice")].concat(o),m=x=[n(k[0],"DiceTable")].concat(l),S=R(x[0],null,"D66GridTable"),w=[S].concat(m),S.$$prototype.name=S.$$prototype.items=v,e.defs(S,"$from_i18n",B=function(i,a){var c=v;return c=T(w,"I18n").$t(i,d(["locale","raise"],{locale:a,raise:!0})),this.$new(c["$[]"]("name"),c["$[]"]("items"))},B.$$arity=2),e.def(S,"$initialize",q=function(i,a){return this.name=i,this.items=a.$freeze()},q.$$arity=2),void e.def(S,"$roll",A=function(i){var b,c,y,p,r,$;return b=i.$roll_once(6),c=i.$roll_once(6),y=function($,o){return"number"==typeof $&&"number"==typeof o?$+o:$["$+"](o)}("number"==typeof($=b)?10*$:$["$*"](10),c),p=h(b,1),r=h(c,1),T(w,"RollResult").$new(this.name,y,this.items["$[]"](p)["$[]"](r))},A.$$arity=1)},Opal.modules["bcdice/format"]=function(e){var R,G,l,u,k,s,$,h=[],z=e.nil,v=e.$$,t=e.module,T=e.truthy;return R=h,G=$=[t(h[0],"BCDice")].concat(R),k=t($[0],"Format"),s=[k].concat(G),k.$module_function(),e.def(k,"$comparison_operator",l=function(M){var m;return"=="["$==="](m=M)?"=":"!="["$==="](m)?"<>":v(s,"Symbol")["$==="](m)?M.$to_s():z},l.$$arity=1),void e.def(k,"$modifier",u=function(M){return T(M["$nil?"]())?z:M["$=="](0)?"":T("number"==typeof(n=M)?n>0:n["$>"](0))?"+"+M:M.$to_s();var n},u.$$arity=1)},function(e){function h(l,u){return"number"==typeof l&&"number"==typeof u?l>=u:l["$>="](u)}var u,m,A,a,b,c,y,p,r,_,N,E,g,f,i,w,M,D=e.top,v=[],t=e.nil,T=e.$$$,n=e.$$,R=e.module,d=e.klass,$=e.send2,o=e.truthy,G=e.send,k=e.hash2,s=e.range;D.$require("bcdice/dice_table/table"),D.$require("bcdice/dice_table/d66_range_table"),D.$require("bcdice/dice_table/d66_grid_table"),D.$require("bcdice/format"),u=v,m=M=[R(v[0],"BCDice")].concat(u),A=w=[R(M[0],"GameSystem")].concat(m),f=d(w[0],n(w,"Base"),"MonotoneMuseum"),i=[f].concat(A),f.$$prototype.randomizer=t,e.const_set(i[0],"ID","MonotoneMuseum"),e.const_set(i[0],"NAME","\u30e2\u30ce\u30c8\u30fc\u30f3\u30df\u30e5\u30fc\u30b8\u30a2\u30e0RPG"),e.const_set(i[0],"SORT_KEY","\u3082\u306e\u3068\u304a\u3093\u307f\u3086\u3046\u3057\u3042\u3080RPG"),e.const_set(i[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u3000\u30fb\u901a\u5e38\u5224\u5b9a\u3000\u3000\u3000\u3000\u3000\u30002D6+m>=t[c,f]\n\u3000\u3000\u4fee\u6b63\u5024m,\u76ee\u6a19\u5024t,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024c,\u30d5\u30a1\u30f3\u30d6\u30eb\u5024f\u3067\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f\u7701\u7565\u53ef\u80fd\u3067\u3059\u3002([]\u3054\u3068\u7701\u7565\u3067\u304d\u307e\u3059)\n\u3000\u3000\u81ea\u52d5\u6210\u529f\u3001\u81ea\u52d5\u5931\u6557\u3001\u6210\u529f\u3001\u5931\u6557\u3092\u81ea\u52d5\u8868\u793a\u3057\u307e\u3059\u3002\n\u30fb\u5404\u7a2e\u8868\n\u3000\u30fb\u611f\u60c5\u8868\u3000ET\uff0f\u611f\u60c5\u8868 2.0\u3000ET2\n\u3000\u30fb\u5146\u5019\u8868\u3000OT\uff0f\u5146\u5019\u8868ver2.0\u3000OT2\uff0f\u5146\u5019\u8868ver3.0\u3000OT3\n\u3000\u30fb\u6b6a\u307f\u8868\u3000DT\uff0f\u6b6a\u307f\u8868ver2.0\u3000DT2\uff0f\u6b6a\u307f\u8868(\u91ce\u5916)\u3000DTO\uff0f\u6b6a\u307f\u8868(\u6d77)\u3000DTS\uff0f\u6b6a\u307f\u8868(\u9928\u30fb\u57ce)\u3000DTM\n\u3000\u30fb\u4e16\u754c\u6b6a\u66f2\u8868\u3000WDT\uff0f\u4e16\u754c\u6b6a\u66f2\u88682.0\u3000WDT2\n\u3000\u30fb\u6c38\u52ab\u6d88\u5931\u8868\u3000EDT\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),e.def(f,"$initialize",a=function(p){var g=this;return a.$$p&&(a.$$p=null),$(g,e.find_super_dispatcher(g,"initialize",a,!1,!0),"initialize",[p],null),g.d66_sort_type=T(n(i,"D66SortType"),"NO_SORT"),g.sort_add_dice=!0},a.$$arity=1),e.def(f,"$eval_game_system_specific_command",b=function(p){var E,r=this;return o(E=r.$check_roll(p))?E:r.$roll_tables(p,T(r.$class(),"TABLES"))},b.$$arity=1),f.$private(),e.def(f,"$check_roll",c=function(p){var r,E,l,g=this,_=t,N=t,K=t,I=t,j=t,L=t,P=t,U=t,H=t,Y=t,X=t,V=t,J=t,Q=t;return _=/^(\d+)D6([+\-\d]*)>=(\d+)(\[(\d+)?(,(\d+))?\])?$/i.$match(p),o(_)?(N=_["$[]"](1).$to_i(),K=o(_["$[]"](2))?n(i,"ArithmeticEvaluator").$eval(_["$[]"](2)):0,I=_["$[]"](3).$to_i(),j=o(L=(r=_["$[]"](5))===t||null==r?t:G(r,"to_i",[]))?L:12,P=o(U=(E=_["$[]"](7))===t||null==E?t:G(E,"to_i",[]))?U:2,Y=(H=g.randomizer.$roll_barabara(N,6).$sort()).$sum(),X=H.$join(","),V=function(l,u){return"number"==typeof l&&"number"==typeof u?l+u:l["$+"](u)}(Y,K),J=o(function(l,u){return"number"==typeof l&&"number"==typeof u?l<=u:l["$<="](u)}(Y,P))?n(i,"Result").$fumble(g.$translate("MonotoneMuseum.automatic_failure")):o(h(Y,j))?n(i,"Result").$critical(g.$translate("MonotoneMuseum.automatic_success")):o(h(V,I))?n(i,"Result").$success(g.$translate("success")):n(i,"Result").$failure(g.$translate("failure")),Q=[["("+p+")",Y+"["+X+"]"+n(i,"Format").$modifier(K),V.$to_s(),J.$text()].$join(" \uff1e ")],G(J,"text=",e.to_a(Q)),"number"==typeof(l=Q.length)||l["$-"](1),J):t},c.$$arity=1),y=i[0],p=T(n(i,"DiceTable"),"D66RangeTable"),r=i,E=d(y,p,"MMTable"),g=[E].concat(r),e.defs(E,"$from_i18n",_=function(I,j){var P=t;return P=n(g,"I18n").$translate(I,k(["locale","raise"],{locale:j,raise:!0})),this.$new(P["$[]"]("name"),P["$[]"]("items"))},_.$$arity=2),e.def(E,"$initialize",N=function(I,j){var H,U=this;return N.$$p&&(N.$$p=null),o(j.$size()["$!="](n(g,"RANGE").$size()))&&U.$raise(n(g,"UnexpectedTableSize").$new(I,j.$size())),H=n(g,"RANGE").$zip(j),$(U,e.find_super_dispatcher(U,"initialize",N,!1,!0),"initialize",[I,H],null)},N.$$arity=2),e.const_set(g[0],"RANGE",[s(11,12,!1),s(13,14,!1),s(15,16,!1),s(21,22,!1),s(23,24,!1),s(25,26,!1),s(31,32,!1),s(33,34,!1),s(35,36,!1),s(41,42,!1),s(43,44,!1),s(45,46,!1),s(51,52,!1),s(53,54,!1),s(55,56,!1),s(61,62,!1),s(63,64,!1),s(65,66,!1)].$freeze()),function(y,p){var E,r=[y].concat(p);y.$private(),e.def(y,"$translate_tables",E=function(_){return k(["ET","ET2","OT","DT","DT2","WDT","WDT2","OT2","DTO","DTS","EDT","DTM","OT3"],{ET:T(n(r,"DiceTable"),"D66GridTable").$from_i18n("MonotoneMuseum.table.ET",_),ET2:T(n(r,"DiceTable"),"D66GridTable").$from_i18n("MonotoneMuseum.table.ET2",_),OT:T(n(r,"DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.OT",_),DT:T(n(r,"DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.DT",_),DT2:n(r,"MMTable").$from_i18n("MonotoneMuseum.table.DT2",_),WDT:T(n(r,"DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.WDT",_),WDT2:n(r,"MMTable").$from_i18n("MonotoneMuseum.table.WDT2",_),OT2:n(r,"MMTable").$from_i18n("MonotoneMuseum.table.OT2",_),DTO:n(r,"MMTable").$from_i18n("MonotoneMuseum.table.DTO",_),DTS:n(r,"MMTable").$from_i18n("MonotoneMuseum.table.DTS",_),EDT:T(n(r,"DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.EDT",_),DTM:n(r,"MMTable").$from_i18n("MonotoneMuseum.table.DTM",_),OT3:T(n(r,"DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.OT3",_)})},E.$$arity=1)}(e.get_singleton_class(f),i),e.const_set(i[0],"TABLES",f.$translate_tables("ja_jp").$freeze()),f.$register_prefix("\\d+D6",n(i,"TABLES").$keys())}(Opal)}}]);