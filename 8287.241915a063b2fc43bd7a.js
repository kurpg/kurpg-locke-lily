(self.webpackChunkudonarium_lily=self.webpackChunkudonarium_lily||[]).push([[8287],{8287:function(ie,ue,te){var e,H,N,c,p,u,K,G,I,k,L,z,q,A;te(4656),Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var H,N,s,u,c,D,G,I,k=[],E=e.nil,o=e.$$$,L=e.$$,z=e.module,q=e.hash2,A=e.truthy;return H=k,N=I=[z(k[0],"BCDice")].concat(H),G=[D=z(I[0],"ArithmeticEvaluator")].concat(N),s=e.get_singleton_class(D),c=[s].concat(G),void e.def(s,"$eval",u=function(p,T){var S,M=E;if(null==T)T=q([],{});else if(!T.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(S=T.$$smap.round_type)&&(S=o(L(c,"RoundType"),"FLOOR")),A(p)&&A(M=L(c,"Arithmetic").$eval(p,S))?M:0},u.$$arity=-2)},Opal.modules["bcdice/game_system/Cthulhu"]=function(e){function w(c,u){return"number"==typeof c&&"number"==typeof u?c<=u:c["$<="](u)}function k(c,u){return"number"==typeof c&&"number"==typeof u?c>u:c["$>"](u)}function E(c,u){return"number"==typeof c&&"number"==typeof u?c+u:c["$+"](u)}function o(c,u){return"number"==typeof c&&"number"==typeof u?c-u:c["$-"](u)}function z(c,u){return"number"==typeof c&&"number"==typeof u?c*u:c["$*"](u)}function q(c,u){return"number"==typeof c&&"number"==typeof u?c<u:c["$<"](u)}function A(c,u){return"number"==typeof c&&"number"==typeof u?c>=u:c["$>="](u)}var u,S,re,J,Q,U,V,W,X,r,f,g,C,$,a,y,R,M,p,H=[],t=e.nil,v=e.$$,N=e.module,D=e.klass,G=e.send2,s=e.truthy,l=e.send;return e.top.$require("bcdice/arithmetic_evaluator"),u=H,S=p=[N(H[0],"BCDice")].concat(u),re=M=[N(p[0],"GameSystem")].concat(S),y=D(M[0],v(M,"Base"),"Cthulhu"),R=[y].concat(re),y.$$prototype.randomizer=y.$$prototype.locale=y.$$prototype.special_percentage=y.$$prototype.critical_percentage=y.$$prototype.fumble_percentage=t,e.const_set(R[0],"ID","Cthulhu"),e.const_set(R[0],"NAME","\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u8a71TRPG"),e.const_set(R[0],"SORT_KEY","\u304f\u3068\u3046\u308b\u3075\u3057\u3093\u308fTRPG"),e.const_set(R[0],"HELP_MESSAGE","c=\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024 \uff0f f=\u30d5\u30a1\u30f3\u30d6\u30eb\u5024 \uff0f s=\u30b9\u30da\u30b7\u30e3\u30eb\n\n1d100<=n    c\u30fbf\u30fbs\u3059\u3079\u3066\u30aa\u30d5\uff08\u5358\u7d14\u306a\u6570\u5024\u6bd4\u8f03\u5224\u5b9a\u306e\u307f\u884c\u3044\u307e\u3059\uff09\n\n\u30fbcfs\u5224\u5b9a\u4ed8\u304d\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\n\nCC\t 1d100\u30ed\u30fc\u30eb\u3092\u884c\u3046 c=1\u3001f=100\nCCB  \u540c\u4e0a\u3001c=5\u3001f=96\n\n\u4f8b\uff1aCC<=80  \uff08\u6280\u80fd\u502480\u3067\u884c\u70ba\u5224\u5b9a\u30021%\u30eb\u30fc\u30eb\u3067cf\u9069\u7528\uff09\n\u4f8b\uff1aCCB<=55 \uff08\u6280\u80fd\u502455\u3067\u884c\u70ba\u5224\u5b9a\u30025%\u30eb\u30fc\u30eb\u3067cf\u9069\u7528\uff09\n\n\u30fb\u7d44\u307f\u5408\u308f\u305b\u30ed\u30fc\u30eb\u306b\u3064\u3044\u3066\n\nCBR(x,y)\tc=1\u3001f=100\nCBRB(x,y)\tc=5\u3001f=96\n\n\u30fb\u62b5\u6297\u8868\u30ed\u30fc\u30eb\u306b\u3064\u3044\u3066\nRES(x-y)\tc=1\u3001f=100\nRESB(x-y)\tc=5\u3001f=96\n\n\u203b\u6545\u969c\u30ca\u30f3\u30d0\u30fc\u5224\u5b9a\n\n\u30fbCC(x) c=1\u3001f=100\nx=\u6545\u969c\u30ca\u30f3\u30d0\u30fc\u3002\u51fa\u76eex\u4ee5\u4e0a\u304c\u51fa\u305f\u4e0a\u3067\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u304c\u540c\u6642\u306b\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u5171\u306b\u51fa\u529b\u3059\u308b\uff08\u30c6\u30ad\u30b9\u30c8\u300c\u30d5\u30a1\u30f3\u30d6\u30eb\uff06\u6545\u969c\u300d\uff09\n\u30d5\u30a1\u30f3\u30d6\u30eb\u3067\u306a\u3044\u5834\u5408\u3001\u6210\u529f\u30fb\u5931\u6557\u306b\u95a2\u308f\u3089\u305a\u30c6\u30ad\u30b9\u30c8\u300c\u6545\u969c\u300d\u306e\u307f\u3092\u51fa\u529b\u3059\u308b\uff08\u6210\u529f\u30fb\u5931\u6557\u3092\u51fa\u529b\u305b\u305a\u3001\u4e0a\u66f8\u304d\u3057\u305f\u3082\u306e\u3092\u51fa\u529b\u3059\u308b\u5f62\uff09\n\n\u30fbCCB(x) c=5\u3001f=96\n\u540c\u4e0a\n\n"),y.$register_prefix("CCB?","RESB?","CBRB?"),e.def(y,"$initialize",J=function(_){var a=this;return J.$$p&&(J.$$p=null),G(a,e.find_super_dispatcher(a,"initialize",J,!1,!0),"initialize",[_],null),a.special_percentage=20,a.critical_percentage=1,a.fumble_percentage=1},J.$$arity=1),e.def(y,"$eval_game_system_specific_command",Q=function(_){var $,r=this;return/CCB/i["$==="]($=_)?(r.critical_percentage=5,r.fumble_percentage=5,r.$getCheckResult(_)):/CC/i["$==="]($)?(r.critical_percentage=1,r.fumble_percentage=1,r.$getCheckResult(_)):/RESB/i["$==="]($)?(r.critical_percentage=5,r.fumble_percentage=5,r.$getRegistResult(_)):/CBRB/i["$==="]($)?(r.critical_percentage=5,r.fumble_percentage=5,r.$getCombineRoll(_)):/RES/i["$==="]($)?(r.critical_percentage=1,r.fumble_percentage=1,r.$getRegistResult(_)):/CBR/i["$==="]($)?(r.critical_percentage=1,r.fumble_percentage=1,r.$getCombineRoll(_)):t},Q.$$arity=1),y.$private(),e.def(y,"$getCheckResult",U=function(_){var r,$=this,a=t,f=t,g=t,C=t,n=t,i=t;return a=/^CCB?(\d+)?(?:<=([+-\/*\d]+))?$/i.$match(_),s(a)?(f=a["$[]"](1).$to_i(),g=v(R,"ArithmeticEvaluator").$eval(a["$[]"](2)),s(w(g,0))?(C=$.randomizer.$roll_once(100),v(R,"Result").$new("(1D100) \uff1e "+C)):(n="(1D100<="+g+")",s(k(f,0))&&(n=E(n," "+$.$translate("Cthulhu.broken_number")+"["+f+"]")),C=$.randomizer.$roll_once(100),i=$.$compare(C,g,f),l(i.$to_result(),"tap",[],((r=function(B){var x;return null==B&&(B=t),x=[n+" \uff1e "+C+" \uff1e "+i.$text()],l(B,"text=",e.to_a(x)),x[o(x.length,1)]}).$$s=$,r.$$arity=1,r)))):t},U.$$arity=1),r=R,$=D(R[0],null,"CompareResult"),a=[$].concat(r),$.$include(v(a,"Translate")),$.$attr_accessor("success","failure","critical","fumble","special","broken"),e.def($,"$initialize",f=function(i){var h=this;return h.locale=i,h.success=!1,h.failure=!1,h.critical=!1,h.fumble=!1,h.special=!1,h.broke=!1},f.$$arity=1),e.def($,"$text",g=function(){var h,i=this,B=t;return s(s(h=i.$critical())?i.$special():h)?i.$translate("Cthulhu.critical_special"):s(i.$critical())?i.$translate("Cthulhu.critical"):s(i.$special())?i.$translate("Cthulhu.special"):s(i.$success())?i.$translate("success"):s(s(B=i.$broken())?i.$fumble():B)?i.$translate("Cthulhu.fumble")+"/"+i.$translate("Cthulhu.broken"):s(i.$broken())?i.$translate("Cthulhu.broken"):s(i.$fumble())?i.$translate("Cthulhu.fumble"):s(i.$failure())?i.$translate("failure"):t},g.$$arity=0),e.def($,"$to_result",C=function(){var i;return l(v(a,"Result").$new(),"tap",[],((i=function(b){var x=null==i.$$s?this:i.$$s,m=t;return null==b&&(b=t),m=[x.$success()],l(b,"success=",e.to_a(m)),o(m.length,1),m=[x.$failure()],l(b,"failure=",e.to_a(m)),o(m.length,1),m=[x.$critical()],l(b,"critical=",e.to_a(m)),o(m.length,1),m=[x.$fumble()],l(b,"fumble=",e.to_a(m)),m[o(m.length,1)]}).$$s=this,i.$$arity=1,i))},C.$$arity=0),e.def(y,"$compare",V=function(_,r,$){var f,g,C,i,a=this,n=t;return null==$&&($=0),f=v(R,"CompareResult").$new(a.locale),g=function(c,u){return"number"==typeof c?c/100:c["$/"](100)}(z(r,a.special_percentage)).$to_i().$clamp(1,100),s(s(C=w(_,r))?q(_,100):C)?(l(f,"success=",e.to_a(n=[!0])),o(n.length,1),n=[w(_,g)],l(f,"special=",e.to_a(n)),o(n.length,1),n=[w(_,a.critical_percentage)],l(f,"critical=",e.to_a(n)),o(n.length,1)):(l(f,"failure=",e.to_a(n=[!0])),o(n.length,1),n=[A(_,o(101,a.fumble_percentage))],l(f,"fumble=",e.to_a(n)),o(n.length,1)),s(s(i=k($,0))?A(_,$):i)&&(l(f,"broken=",e.to_a(n=[!0])),o(n.length,1),l(f,"failure=",e.to_a(n=[!0])),o(n.length,1),l(f,"success=",e.to_a(n=[!1])),o(n.length,1),l(f,"special=",e.to_a(n=[!1])),o(n.length,1),l(f,"critical=",e.to_a(n=[!1])),o(n.length,1)),f},V.$$arity=-3),e.def(y,"$getRegistResult",W=function(_){var r,$=this,a=t,f=t,g=t,C=t,n=t;return a=/^RESB?(-?\d+)$/i.$match(_),s(a)?(f=a["$[]"](1).$to_i(),g=E(z(f,5),50),s(q(g,5))?v(R,"Result").$failure("(1d100<="+g+") \uff1e "+$.$translate("Cthulhu.automatic_failure")):s(k(g,95))?v(R,"Result").$success("(1d100<="+g+") \uff1e "+$.$translate("Cthulhu.automatic_success")):(C=$.randomizer.$roll_once(100),n=$.$compare(C,g),l(n.$to_result(),"tap",[],((r=function(h){var b;return null==h&&(h=t),b=["(1d100<="+g+") \uff1e "+C+" \uff1e "+n.$text()],l(h,"text=",e.to_a(b)),b[o(b.length,1)]}).$$s=$,r.$$arity=1,r)))):t},W.$$arity=1),void e.def(y,"$getCombineRoll",X=function(_){var r,$=this,a=t,f=t,g=t,C=t,n=t,i=t,h=t,B=t,b=t;return a=/^CBR(B)?\((\d+),(\d+)\)$/i.$match(_),s(a)?(f=a["$[]"](2).$to_i(),g=a["$[]"](3).$to_i(),C=$.randomizer.$roll_once(100),n=$.$compare(C,f),i=$.$compare(C,g),h=s(s(B=n.$success())?i.$success():B)?$.$translate("success"):s(s(b=n.$success())?b:i.$success())?$.$translate("Cthulhu.partial_success"):$.$translate("failure"),l(v(R,"Result").$new(),"tap",[],((r=function(m){var Z,O,ee,d=t;return null==m&&(m=t),d=["(1d100<="+f+","+g+") \uff1e "+C+"["+n.$text()+","+i.$text()+"] \uff1e "+h],l(m,"text=",e.to_a(d)),o(d.length,1),d=[s(Z=n.$critical())?Z:i.$critical()],l(m,"critical=",e.to_a(d)),o(d.length,1),d=[s(O=n.$fumble())?O:i.$fumble()],l(m,"fumble=",e.to_a(d)),o(d.length,1),d=[s(ee=n.$success())?ee:i.$success()],l(m,"condition=",e.to_a(d)),d[o(d.length,1)]}).$$s=$,r.$$arity=1,r))):t},X.$$arity=1)},k=[],L=(e=Opal).$$,z=e.module,q=e.klass,A=e.send2,e.top.$require("bcdice/game_system/Cthulhu"),H=k,N=I=[z(k[0],"BCDice")].concat(H),c=G=[z(I[0],"GameSystem")].concat(N),K=[u=q(G[0],L(G,"Cthulhu"),"Cthulhu_Korean")].concat(c),e.const_set(K[0],"ID","Cthulhu:Korean"),e.const_set(K[0],"NAME","\ud06c\ud234\ub8e8"),e.const_set(K[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ud06c\ud234\ub8e8"),e.const_set(K[0],"HELP_MESSAGE","c=\ud06c\ub9ac\ud2f0\uceec\uce58 \uff0f f=\ud38c\ube14\uce58 \uff0f s=\uc2a4\ud398\uc15c\n\n1d100<=n    c\u30fbf\u30fbs \ubaa8\ub450 \uc624\ud504\uff08\ub2e8\uc21c\ud558\uac8c \uc218\uce58\ub9cc\uc744 \ubf51\uc544\ub0bc \ub54c \uc0ac\uc6a9\uff09\n\n\u30fbcfs\uc774 \ubd99\ub294 \ud310\uc815\uc758 \ucee4\ub9e8\ub4dc\n\nCC\t 1d100 \ud310\uc815\uc744 \ud589\ud568 c=1\u3001f=100\nCCB  \uc704\uc640 \ub3d9\uc77c\u3001c=5\u3001f=96\n\n\uc608\uff1aCC<=80  \uff08\uae30\ub2a5\uce58 80\ub85c \ud589\ud718\ud310\uc815. 1%\ub8f0\uc73c\ub85c cf\uc801\uc6a9\uff09\n\uc608\uff1aCCB<=55 \uff08\uae30\ub2a5\uce58 55\ub85c \ud589\ud718\ud310\uc815. 5%\ub8f0\uc73c\ub85c cf\uc801\uc6a9\uff09\n\n\u30fb\uacbd\uc6b0\uc758 \uc218 \ud310\uc815\uc5d0 \ub300\ud574\uc11c\n\nCBR(x,y)\tc=1\u3001f=100\nCBRB(x,y)\tc=5\u3001f=96\n\n\u30fb\uc800\ud56d \ud310\uc815\uc5d0 \ub300\ud574\uc11c\nRES(x-y)\tc=1\u3001f=100\nRESB(x-y)\tc=5\u3001f=96\n\n\u203b\uace0\uc7a5 \ub118\ubc84 \ud310\uc815\n\n\u30fbCC(x) c=1\u3001f=100\nx=\uace0\uc7a5 \ub118\ubc84. \uc8fc\uc0ac\uc704 \ub208x\uc774\uc0c1\uc774 \ub098\uc628 \ud6c4\uc5d0, \ud38c\ube14\uc774 \ub3d9\uc2dc\uc5d0 \ubc1c\uc0dd\ud588\uc744 \uacbd\uc6b0. \ubaa8\ub450 \ucd9c\ub825\ud55c\ub2e4. \uff08\ud14d\uc2a4\ud2b8 \u300c\ud38c\ube14\uff06\uace0\uc7a5\u300d\uff09\n\ud38c\ube14\uc774 \uc544\ub2cc \uacbd\uc6b0, \uc131\uacf5\u30fb\uc2e4\ud328\uc5d0 \uad00\ub828\ub418\uc9c0 \uc54a\uace0 \u300c\uace0\uc7a5\u300d\ub9cc\uc744 \ucd9c\ub825\ud55c\ub2e4. \uff08\uc131\uacf5\u30fb\uc2e4\ud328\ub97c \ucd9c\ub825\ud558\uc9c0 \uc54a\uace0 \ub367\uc4f0\uae30\ud55c \uac83\uc744 \ucd9c\ub825\ud558\ub294 \ud615\ud0dc\uff09\n\n\u30fbCCB(x) c=5\u3001f=96\n\uc704\uc640 \ub3d9\uc77c\n"),u.$register_prefix_from_super_class(),e.def(u,"$initialize",p=function(S){var j=this;return p.$$p&&(p.$$p=null),A(j,e.find_super_dispatcher(j,"initialize",p,!1,!0),"initialize",[S],null),j.locale="ko_kr"},p.$$arity=1)}}]);